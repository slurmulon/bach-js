var _indexOfInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/index-of");var _sliceInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/slice");var _filterInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/filter");var _mapInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/map");var _bindInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/bind");var _reduceInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/reduce");var _forEachInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/for-each");var _concatInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/concat");var _trimInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/trim");var _keysInstanceProperty=require("@babel/runtime-corejs3/core-js-stable/instance/keys");var _spliceInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/splice");var _sortInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/sort");var _parseFloat3=require("@babel/runtime-corejs3/core-js-stable/parse-float");var _parseInt3=require("@babel/runtime-corejs3/core-js-stable/parse-int");var _flatInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/flat");var _lastIndexOfInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/last-index-of");var _someInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/some");var _includesInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/includes");var _everyInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/every");var _flagsInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/flags");var _reverseInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/reverse");var _findIndexInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/find-index");var _startsWithInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/starts-with");var _findInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/find");var _flatMapInstanceProperty2=require("@babel/runtime-corejs3/core-js-stable/instance/flat-map");var _valuesInstanceProperty=require("@babel/runtime-corejs3/core-js-stable/instance/values");var _entriesInstanceProperty=require("@babel/runtime-corejs3/core-js-stable/instance/entries");var _Object$defineProperty2=require("@babel/runtime-corejs3/core-js-stable/object/define-property");var _Symbol2=require("@babel/runtime-corejs3/core-js-stable/symbol");var _getIteratorMethod=require("@babel/runtime-corejs3/core-js/get-iterator-method");var _Array$isArray2=require("@babel/runtime-corejs3/core-js-stable/array/is-array");var _Array$from2=require("@babel/runtime-corejs3/core-js-stable/array/from");var _Object$keys2=require("@babel/runtime-corejs3/core-js-stable/object/keys");var _Object$getOwnPropertySymbols=require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols");var _Object$getOwnPropertyDescriptor=require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor");var _Object$getOwnPropertyDescriptors=require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors");var _Object$defineProperties=require("@babel/runtime-corejs3/core-js-stable/object/define-properties");var _Reflect$construct=require("@babel/runtime-corejs3/core-js-stable/reflect/construct");(function(global,factory){if(typeof define==="function"&&define.amd){define(["exports","@babel/runtime-corejs3/regenerator","@babel/runtime-corejs3/helpers/asyncToGenerator","@babel/runtime-corejs3/helpers/slicedToArray","@babel/runtime-corejs3/helpers/get","@babel/runtime-corejs3/helpers/wrapNativeSuper","@babel/runtime-corejs3/helpers/taggedTemplateLiteral","@babel/runtime-corejs3/helpers/toConsumableArray","@babel/runtime-corejs3/helpers/defineProperty","@babel/runtime-corejs3/helpers/createClass","@babel/runtime-corejs3/helpers/inherits","@babel/runtime-corejs3/helpers/possibleConstructorReturn","@babel/runtime-corejs3/helpers/getPrototypeOf","@babel/runtime-corejs3/helpers/classCallCheck","@babel/runtime-corejs3/helpers/typeof","@babel/runtime-corejs3/core-js-stable/instance/index-of","@babel/runtime-corejs3/core-js-stable/instance/slice","@babel/runtime-corejs3/core-js-stable/instance/filter","@babel/runtime-corejs3/core-js-stable/instance/map","@babel/runtime-corejs3/core-js-stable/instance/bind","@babel/runtime-corejs3/core-js-stable/instance/reduce","@babel/runtime-corejs3/core-js-stable/instance/for-each","@babel/runtime-corejs3/core-js-stable/instance/concat","@babel/runtime-corejs3/core-js-stable/instance/trim","@babel/runtime-corejs3/core-js-stable/object/keys","@babel/runtime-corejs3/core-js-stable/array/is-array","@babel/runtime-corejs3/core-js-stable/instance/splice","@babel/runtime-corejs3/core-js-stable/instance/sort","@babel/runtime-corejs3/core-js-stable/symbol","@babel/runtime-corejs3/core-js-stable/symbol/iterator","@babel/runtime-corejs3/core-js-stable/math/imul","@babel/runtime-corejs3/core-js-stable/parse-float","@babel/runtime-corejs3/core-js-stable/parse-int","@babel/runtime-corejs3/core-js-stable/instance/flat","@babel/runtime-corejs3/core-js-stable/instance/last-index-of","@babel/runtime-corejs3/core-js-stable/object/define-property","@babel/runtime-corejs3/core-js-stable/json/stringify","@babel/runtime-corejs3/core-js-stable/map","@babel/runtime-corejs3/core-js-stable/set","@babel/runtime-corejs3/core-js-stable/instance/some","@babel/runtime-corejs3/core-js-stable/instance/includes","@babel/runtime-corejs3/core-js-stable/instance/every","@babel/runtime-corejs3/core-js-stable/instance/flags","@babel/runtime-corejs3/core-js/get-iterator","@babel/runtime-corejs3/core-js/is-iterable","@babel/runtime-corejs3/core-js-stable/array/from","@babel/runtime-corejs3/core-js-stable/string/from-code-point","@babel/runtime-corejs3/core-js-stable/instance/reverse","@babel/runtime-corejs3/core-js-stable/object/assign","@babel/runtime-corejs3/core-js-stable/instance/find-index","@babel/runtime-corejs3/core-js-stable/instance/starts-with","@babel/runtime-corejs3/core-js-stable/instance/find","@babel/runtime-corejs3/core-js-stable/instance/flat-map","@babel/runtime-corejs3/core-js-stable/object/values","@babel/runtime-corejs3/core-js-stable/object/entries"],factory);}else if(typeof exports!=="undefined"){factory(exports,require("@babel/runtime-corejs3/regenerator"),require("@babel/runtime-corejs3/helpers/asyncToGenerator"),require("@babel/runtime-corejs3/helpers/slicedToArray"),require("@babel/runtime-corejs3/helpers/get"),require("@babel/runtime-corejs3/helpers/wrapNativeSuper"),require("@babel/runtime-corejs3/helpers/taggedTemplateLiteral"),require("@babel/runtime-corejs3/helpers/toConsumableArray"),require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/createClass"),require("@babel/runtime-corejs3/helpers/inherits"),require("@babel/runtime-corejs3/helpers/possibleConstructorReturn"),require("@babel/runtime-corejs3/helpers/getPrototypeOf"),require("@babel/runtime-corejs3/helpers/classCallCheck"),require("@babel/runtime-corejs3/helpers/typeof"),require("@babel/runtime-corejs3/core-js-stable/instance/index-of"),require("@babel/runtime-corejs3/core-js-stable/instance/slice"),require("@babel/runtime-corejs3/core-js-stable/instance/filter"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/instance/bind"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/instance/trim"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/instance/splice"),require("@babel/runtime-corejs3/core-js-stable/instance/sort"),require("@babel/runtime-corejs3/core-js-stable/symbol"),require("@babel/runtime-corejs3/core-js-stable/symbol/iterator"),require("@babel/runtime-corejs3/core-js-stable/math/imul"),require("@babel/runtime-corejs3/core-js-stable/parse-float"),require("@babel/runtime-corejs3/core-js-stable/parse-int"),require("@babel/runtime-corejs3/core-js-stable/instance/flat"),require("@babel/runtime-corejs3/core-js-stable/instance/last-index-of"),require("@babel/runtime-corejs3/core-js-stable/object/define-property"),require("@babel/runtime-corejs3/core-js-stable/json/stringify"),require("@babel/runtime-corejs3/core-js-stable/map"),require("@babel/runtime-corejs3/core-js-stable/set"),require("@babel/runtime-corejs3/core-js-stable/instance/some"),require("@babel/runtime-corejs3/core-js-stable/instance/includes"),require("@babel/runtime-corejs3/core-js-stable/instance/every"),require("@babel/runtime-corejs3/core-js-stable/instance/flags"),require("@babel/runtime-corejs3/core-js/get-iterator"),require("@babel/runtime-corejs3/core-js/is-iterable"),require("@babel/runtime-corejs3/core-js-stable/array/from"),require("@babel/runtime-corejs3/core-js-stable/string/from-code-point"),require("@babel/runtime-corejs3/core-js-stable/instance/reverse"),require("@babel/runtime-corejs3/core-js-stable/object/assign"),require("@babel/runtime-corejs3/core-js-stable/instance/find-index"),require("@babel/runtime-corejs3/core-js-stable/instance/starts-with"),require("@babel/runtime-corejs3/core-js-stable/instance/find"),require("@babel/runtime-corejs3/core-js-stable/instance/flat-map"),require("@babel/runtime-corejs3/core-js-stable/object/values"),require("@babel/runtime-corejs3/core-js-stable/object/entries"));}else{var mod={exports:{}};factory(mod.exports,global.regenerator,global.asyncToGenerator,global.slicedToArray,global.get,global.wrapNativeSuper,global.taggedTemplateLiteral,global.toConsumableArray,global.defineProperty,global.createClass,global.inherits,global.possibleConstructorReturn,global.getPrototypeOf,global.classCallCheck,global._typeof,_indexOfInstanceProperty2(global),_sliceInstanceProperty2(global),_filterInstanceProperty2(global),_mapInstanceProperty2(global),_bindInstanceProperty2(global),_reduceInstanceProperty2(global),_forEachInstanceProperty2(global),_concatInstanceProperty2(global),_trimInstanceProperty2(global),_keysInstanceProperty(global),global.isArray,_spliceInstanceProperty2(global),_sortInstanceProperty2(global),global.symbol,global.iterator,global.imul,_parseFloat3,_parseInt3,_flatInstanceProperty2(global),_lastIndexOfInstanceProperty2(global),global.defineProperty,global.stringify,_mapInstanceProperty2(global),global.set,_someInstanceProperty2(global),_includesInstanceProperty2(global),_everyInstanceProperty2(global),_flagsInstanceProperty2(global),global.getIterator,global.isIterable,global.from,global.fromCodePoint,_reverseInstanceProperty2(global),global.assign,_findIndexInstanceProperty2(global),_startsWithInstanceProperty2(global),_findInstanceProperty2(global),_flatMapInstanceProperty2(global),_valuesInstanceProperty(global),_entriesInstanceProperty(global));global.unknown=mod.exports;}})(typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:this,function(_exports,_regenerator,_asyncToGenerator2,_slicedToArray2,_get2,_wrapNativeSuper2,_taggedTemplateLiteral2,_toConsumableArray2,_defineProperty2,_createClass2,_inherits2,_possibleConstructorReturn2,_getPrototypeOf2,_classCallCheck2,_typeof2,_indexOf,_slice,_filter,_map,_bind,_reduce,_forEach,_concat,_trim,_keys,_isArray,_splice,_sort,_symbol,_iterator25,_imul,_parseFloat2,_parseInt2,_flat,_lastIndexOf,_defineProperty3,_stringify,_map2,_set,_some,_includes,_every,_flags,_getIterator2,_isIterable2,_from,_fromCodePoint,_reverse,_assign,_findIndex,_startsWith,_find,_flatMap,_values,_entries){"use strict";var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault");_Object$defineProperty2(_exports,"__esModule",{value:true});_exports.chordify=chordify;_exports.clamp=_clamp;_exports.gcd=gcd;_exports.invlerp=invlerp;_exports.lerp=lerp;_exports.notesIn=notesIn;_exports.notesInChord=notesInChord;_exports.notesInScale=notesInScale;_exports.notesIntersect=notesIntersect;_exports.scaleToString=scaleToString;_exports.scaleify=scaleify;_exports.steps=steps;_exports.validate=_exports.valid=_exports.unitsOf=_exports.timesOf=_exports.notesOf=_exports.compose=_exports.Note=_exports.Music=_exports.MUSICAL_ELEMENTS=_exports.Elements=_exports.Element=_exports.Durations=void 0;_regenerator=_interopRequireDefault(_regenerator);_asyncToGenerator2=_interopRequireDefault(_asyncToGenerator2);_slicedToArray2=_interopRequireDefault(_slicedToArray2);_get2=_interopRequireDefault(_get2);_wrapNativeSuper2=_interopRequireDefault(_wrapNativeSuper2);_taggedTemplateLiteral2=_interopRequireDefault(_taggedTemplateLiteral2);_toConsumableArray2=_interopRequireDefault(_toConsumableArray2);_defineProperty2=_interopRequireDefault(_defineProperty2);_createClass2=_interopRequireDefault(_createClass2);_inherits2=_interopRequireDefault(_inherits2);_possibleConstructorReturn2=_interopRequireDefault(_possibleConstructorReturn2);_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf2);_classCallCheck2=_interopRequireDefault(_classCallCheck2);_typeof2=_interopRequireDefault(_typeof2);_indexOf=_interopRequireDefault(_indexOf);_slice=_interopRequireDefault(_slice);_filter=_interopRequireDefault(_filter);_map=_interopRequireDefault(_map);_bind=_interopRequireDefault(_bind);_reduce=_interopRequireDefault(_reduce);_forEach=_interopRequireDefault(_forEach);_concat=_interopRequireDefault(_concat);_trim=_interopRequireDefault(_trim);_keys=_interopRequireDefault(_keys);_isArray=_interopRequireDefault(_isArray);_splice=_interopRequireDefault(_splice);_sort=_interopRequireDefault(_sort);_symbol=_interopRequireDefault(_symbol);_iterator25=_interopRequireDefault(_iterator25);_imul=_interopRequireDefault(_imul);_parseFloat2=_interopRequireDefault(_parseFloat2);_parseInt2=_interopRequireDefault(_parseInt2);_flat=_interopRequireDefault(_flat);_lastIndexOf=_interopRequireDefault(_lastIndexOf);_defineProperty3=_interopRequireDefault(_defineProperty3);_stringify=_interopRequireDefault(_stringify);_map2=_interopRequireDefault(_map2);_set=_interopRequireDefault(_set);_some=_interopRequireDefault(_some);_includes=_interopRequireDefault(_includes);_every=_interopRequireDefault(_every);_flags=_interopRequireDefault(_flags);_getIterator2=_interopRequireDefault(_getIterator2);_isIterable2=_interopRequireDefault(_isIterable2);_from=_interopRequireDefault(_from);_fromCodePoint=_interopRequireDefault(_fromCodePoint);_reverse=_interopRequireDefault(_reverse);_assign=_interopRequireDefault(_assign);_findIndex=_interopRequireDefault(_findIndex);_startsWith=_interopRequireDefault(_startsWith);_find=_interopRequireDefault(_find);_flatMap=_interopRequireDefault(_flatMap);_values=_interopRequireDefault(_values);_entries=_interopRequireDefault(_entries);var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27,_templateObject28,_templateObject29,_templateObject30,_templateObject31,_templateObject32,_templateObject33,_templateObject34,_templateObject35,_templateObject36,_templateObject37,_templateObject38,_templateObject39,_templateObject40,_templateObject41,_templateObject42,_templateObject43,_templateObject44,_templateObject45,_templateObject46,_templateObject47,_templateObject48,_templateObject49,_templateObject50,_templateObject51,_templateObject52,_templateObject53,_templateObject54,_templateObject55,_templateObject56,_templateObject57,_templateObject58,_templateObject59,_templateObject60,_templateObject61,_templateObject62,_templateObject63,_templateObject64,_templateObject65,_templateObject66,_templateObject67,_templateObject68,_templateObject69,_templateObject70,_templateObject71,_templateObject72,_templateObject73,_templateObject74,_templateObject75,_templateObject76,_templateObject77,_templateObject78,_templateObject79,_templateObject80,_templateObject81,_templateObject82,_templateObject83,_templateObject84,_templateObject85,_templateObject86,_templateObject87,_templateObject88,_templateObject89,_templateObject90,_templateObject91,_templateObject92,_templateObject93,_templateObject94,_templateObject95,_templateObject96,_templateObject97,_templateObject98,_templateObject99,_templateObject100,_templateObject101,_templateObject102,_templateObject103,_templateObject104,_templateObject105,_templateObject106,_templateObject107,_templateObject108,_templateObject109,_templateObject110,_templateObject111,_templateObject112,_templateObject113,_templateObject114,_templateObject115,_templateObject116,_templateObject117,_templateObject118,_templateObject119,_templateObject120,_templateObject121,_templateObject122,_templateObject123,_templateObject124,_templateObject125,_templateObject126,_templateObject127,_templateObject128,_templateObject129,_templateObject130,_templateObject131,_templateObject132,_templateObject133,_templateObject134,_templateObject135,_templateObject136,_templateObject137,_templateObject138,_templateObject139,_templateObject140,_templateObject141,_templateObject142,_templateObject143,_templateObject144,_templateObject145,_templateObject146,_templateObject147,_templateObject148,_templateObject149,_templateObject150,_templateObject151,_templateObject152,_templateObject153,_templateObject154,_templateObject155,_templateObject156,_templateObject157,_templateObject158,_templateObject159,_templateObject160,_templateObject161,_templateObject162,_templateObject163,_templateObject164,_templateObject165,_templateObject166,_templateObject167,_templateObject168,_templateObject169,_templateObject170,_templateObject171,_templateObject172,_templateObject173,_templateObject174,_templateObject175,_templateObject176,_templateObject177,_templateObject178,_templateObject179,_templateObject180,_templateObject181,_templateObject182,_templateObject183,_templateObject184,_templateObject185,_templateObject186,_templateObject187,_templateObject188,_templateObject189,_templateObject190,_templateObject191,_templateObject192,_templateObject193,_templateObject194,_templateObject195,_templateObject196,_templateObject197,_templateObject198,_templateObject199,_templateObject200,_templateObject201,_templateObject202,_templateObject203,_templateObject204,_templateObject205,_templateObject206,_templateObject207,_templateObject208,_templateObject209,_templateObject210,_templateObject211,_templateObject212,_templateObject213,_templateObject214,_templateObject215,_templateObject216,_templateObject217,_templateObject218,_templateObject219,_templateObject220,_templateObject221,_templateObject222,_templateObject223,_templateObject224,_templateObject225,_templateObject226,_templateObject227,_templateObject228,_templateObject229,_templateObject230,_templateObject231,_templateObject232,_templateObject233,_templateObject234,_templateObject235,_templateObject236,_templateObject237,_templateObject238,_templateObject239,_templateObject240,_templateObject241,_templateObject242,_templateObject243,_templateObject244,_templateObject245,_templateObject246,_templateObject247,_templateObject248,_templateObject249,_templateObject250,_templateObject251,_templateObject252,_templateObject253,_templateObject254,_templateObject255,_templateObject256,_templateObject257,_templateObject258,_templateObject259,_templateObject260,_templateObject261,_templateObject262,_templateObject263,_templateObject264,_templateObject265,_templateObject266,_templateObject267,_templateObject268,_templateObject269,_templateObject270,_templateObject271,_templateObject272,_templateObject273,_templateObject274,_templateObject275,_templateObject276,_templateObject277,_templateObject278,_templateObject279,_templateObject280;function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof _Symbol2!=="undefined"&&_getIteratorMethod(o)||o["@@iterator"];if(!it){if(_Array$isArray2(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){var _context149;if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=_sliceInstanceProperty2(_context149=Object.prototype.toString.call(o)).call(_context149,8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return _Array$from2(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function ownKeys(object,enumerableOnly){var keys=_Object$keys2(object);if(_Object$getOwnPropertySymbols){var symbols=_Object$getOwnPropertySymbols(object);if(enumerableOnly){symbols=_filterInstanceProperty2(symbols).call(symbols,function(sym){return _Object$getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){var _context150;_forEachInstanceProperty2(_context150=ownKeys(Object(source),true)).call(_context150,function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(_Object$getOwnPropertyDescriptors){_Object$defineProperties(target,_Object$getOwnPropertyDescriptors(source));}else{var _context151;_forEachInstanceProperty2(_context151=ownKeys(Object(source))).call(_context151,function(key){_Object$defineProperty2(target,key,_Object$getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=_Reflect$construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2["default"])(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!_Reflect$construct)return false;if(_Reflect$construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(_Reflect$construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,'default')?x['default']:x;}function createCommonjsModule(fn){var module={exports:{}};return fn(module,module.exports),module.exports;}// First coord is octaves, second is fifths. Distances are relative to c
var notes={c:[0,0],d:[-1,2],e:[-2,4],f:[1,-1],g:[0,1],a:[-1,3],b:[-2,5],h:[-2,5]};var notecoord=function notecoord(name){return name in notes?[notes[name][0],notes[name][1]]:null;};var notes_1=notes;var A4=[3,3];// Relative to C0 (scientic notation, ~16.35Hz)
var sharp$1=[-4,7];notecoord.notes=notes_1;notecoord.A4=A4;notecoord.sharp=sharp$1;var accidentalValues={'bb':-2,'b':-1,'':0,'#':1,'x':2};var accidentalValue=function accidentalNumber(acc){return accidentalValues[acc];};var interval$1=function accidentalInterval(acc){var val=accidentalValues[acc];return[-4*val,7*val];};accidentalValue.interval=interval$1;var scientificNotation=function scientific(name){var format=/^([a-h])(x|#|bb|b?)(-?\d*)/i;var parser=name.match(format);if(!(parser&&name===parser[0]&&parser[3].length))return;var noteName=parser[1];var octave=+parser[3];var accidental=parser[2].length?parser[2].toLowerCase():'';var accidentalValue$1=accidentalValue.interval(accidental);var coord=notecoord(noteName.toLowerCase());coord[0]+=octave;coord[0]+=accidentalValue$1[0]-notecoord.A4[0];coord[1]+=accidentalValue$1[1]-notecoord.A4[1];return coord;};var helmholtz=function helmholtz(name){var name=name.replace(/\u2032/g,"'").replace(/\u0375/g,',');var parts=name.match(/^(,*)([a-h])(x|#|bb|b?)([,\']*)$/i);if(!parts||name!==parts[0])throw new Error('Invalid formatting');var note=parts[2];var octaveFirst=parts[1];var octaveLast=parts[4];var lower=note===note.toLowerCase();var octave;if(octaveFirst){if(lower)throw new Error('Invalid formatting - found commas before lowercase note');octave=2-octaveFirst.length;}else if(octaveLast){if(octaveLast.match(/^'+$/)&&lower)octave=3+octaveLast.length;else if(octaveLast.match(/^,+$/)&&!lower)octave=2-octaveLast.length;else throw new Error('Invalid formatting - mismatch between octave '+'indicator and letter case');}else octave=lower?3:2;var accidentalValue$1=accidentalValue.interval(parts[3].toLowerCase());var coord=notecoord(note.toLowerCase());coord[0]+=octave;coord[0]+=accidentalValue$1[0]-notecoord.A4[0];coord[1]+=accidentalValue$1[1]-notecoord.A4[1];return coord;};var pitchFq=function pitchFq(coord,stdPitch){if(typeof coord==='number'){stdPitch=coord;return function(coord){return stdPitch*Math.pow(2,(coord[0]*12+coord[1]*7)/12);};}stdPitch=stdPitch||440;return stdPitch*Math.pow(2,(coord[0]*12+coord[1]*7)/12);};// Note coordinates [octave, fifth] relative to C
var knowledge={notes:{c:[0,0],d:[-1,2],e:[-2,4],f:[1,-1],g:[0,1],a:[-1,3],b:[-2,5],h:[-2,5]},intervals:{unison:[0,0],second:[3,-5],third:[2,-3],fourth:[1,-1],fifth:[0,1],sixth:[3,-4],seventh:[2,-2],octave:[1,0]},intervalFromFifth:['second','sixth','third','seventh','fourth','unison','fifth'],intervalsIndex:['unison','second','third','fourth','fifth','sixth','seventh','octave','ninth','tenth','eleventh','twelfth','thirteenth','fourteenth','fifteenth'],// linear index to fifth = (2 * index + 1) % 7
fifths:['f','c','g','d','a','e','b'],accidentals:['bb','b','','#','x'],sharp:[-4,7],A4:[3,3],durations:{'0.25':'longa','0.5':'breve','1':'whole','2':'half','4':'quarter','8':'eighth','16':'sixteenth','32':'thirty-second','64':'sixty-fourth','128':'hundred-twenty-eighth'},qualityLong:{P:'perfect',M:'major',m:'minor',A:'augmented',AA:'doubly augmented',d:'diminished',dd:'doubly diminished'},alterations:{perfect:['dd','d','P','A','AA'],minor:['dd','d','m','M','A','AA']},symbols:{'min':['m3','P5'],'m':['m3','P5'],'-':['m3','P5'],'M':['M3','P5'],'':['M3','P5'],'+':['M3','A5'],'aug':['M3','A5'],'dim':['m3','d5'],'o':['m3','d5'],'maj':['M3','P5','M7'],'dom':['M3','P5','m7'],'ø':['m3','d5','m7'],'5':['P5']},chordShort:{'major':'M','minor':'m','augmented':'aug','diminished':'dim','half-diminished':'7b5','power':'5','dominant':'7'},stepNumber:{'unison':1,'first':1,'second':2,'third':3,'fourth':4,'fifth':5,'sixth':6,'seventh':7,'octave':8,'ninth':9,'eleventh':11,'thirteenth':13},// Adjusted Shearer syllables - Chromatic solfege system
// Some intervals are not provided for. These include:
// dd2 - Doubly diminished second
// dd3 - Doubly diminished third
// AA3 - Doubly augmented third
// dd6 - Doubly diminished sixth
// dd7 - Doubly diminished seventh
// AA7 - Doubly augmented seventh
intervalSolfege:{'dd1':'daw','d1':'de','P1':'do','A1':'di','AA1':'dai','d2':'raw','m2':'ra','M2':'re','A2':'ri','AA2':'rai','d3':'maw','m3':'me','M3':'mi','A3':'mai','dd4':'faw','d4':'fe','P4':'fa','A4':'fi','AA4':'fai','dd5':'saw','d5':'se','P5':'so','A5':'si','AA5':'sai','d6':'law','m6':'le','M6':'la','A6':'li','AA6':'lai','d7':'taw','m7':'te','M7':'ti','A7':'tai','dd8':'daw','d8':'de','P8':'do','A8':'di','AA8':'dai'}};var vector={add:function add(note,interval){return[note[0]+interval[0],note[1]+interval[1]];},sub:function sub(note,interval){return[note[0]-interval[0],note[1]-interval[1]];},mul:function mul(note,interval){if(typeof interval==='number')return[note[0]*interval,note[1]*interval];else return[note[0]*interval[0],note[1]*interval[1]];},sum:function sum(coord){return coord[0]+coord[1];}};var pattern$1=/^(AA|A|P|M|m|d|dd)(-?\d+)$/;// The interval it takes to raise a note a semitone
var sharp=[-4,7];var pAlts=['dd','d','P','A','AA'];var mAlts=['dd','d','m','M','A','AA'];var baseIntervals=[[0,0],[3,-5],[2,-3],[1,-1],[0,1],[3,-4],[2,-2],[1,0]];var intervalCoords=function intervalCoords(simple){var parser=simple.match(pattern$1);if(!parser)return null;var quality=parser[1];var number=+parser[2];var sign=number<0?-1:1;number=sign<0?-number:number;var lower=number>8?number%7||7:number;var octaves=(number-lower)/7;var base=baseIntervals[lower-1];var alts=base[0]<=1?pAlts:mAlts;var alt=(0,_indexOf["default"])(alts).call(alts,quality)-2;// this happens, if the alteration wasn't suitable for this type
// of interval, such as P2 or M5 (no "perfect second" or "major fifth")
if(alt===-3)return null;return[sign*(base[0]+octaves+sharp[0]*alt),sign*(base[1]+sharp[1]*alt)];};// Copy to avoid overwriting internal base intervals
var coords=(0,_slice["default"])(baseIntervals).call(baseIntervals,0);intervalCoords.coords=coords;function Interval(coord){if(!(this instanceof Interval))return new Interval(coord);this.coord=coord;}Interval.prototype={name:function name(){return knowledge.intervalsIndex[this.number()-1];},semitones:function semitones(){return vector.sum(vector.mul(this.coord,[12,7]));},number:function number(){return Math.abs(this.value());},value:function value(){var toMultiply=Math.floor((this.coord[1]-2)/7)+1;var product=vector.mul(knowledge.sharp,toMultiply);var without=vector.sub(this.coord,product);var i=knowledge.intervalFromFifth[without[1]+5];var diff=without[0]-knowledge.intervals[i][0];var val=knowledge.stepNumber[i]+diff*7;return val>0?val:val-2;},type:function type(){return knowledge.intervals[this.base()][0]<=1?'perfect':'minor';},base:function base(){var product=vector.mul(knowledge.sharp,this.qualityValue());var fifth=vector.sub(this.coord,product)[1];fifth=this.value()>0?fifth+5:-(fifth-5)%7;fifth=fifth<0?knowledge.intervalFromFifth.length+fifth:fifth;var name=knowledge.intervalFromFifth[fifth];if(name==='unison'&&this.number()>=8)name='octave';return name;},direction:function direction(dir){if(dir){var is=this.value()>=1?'up':'down';if(is!==dir)this.coord=vector.mul(this.coord,-1);return this;}else return this.value()>=1?'up':'down';},simple:function simple(ignore){// Get the (upwards) base interval (with quality)
var simple=knowledge.intervals[this.base()];var toAdd=vector.mul(knowledge.sharp,this.qualityValue());simple=vector.add(simple,toAdd);// Turn it around if necessary
if(!ignore)simple=this.direction()==='down'?vector.mul(simple,-1):simple;return new Interval(simple);},isCompound:function isCompound(){return this.number()>8;},octaves:function octaves(){var toSubtract,without,octaves;if(this.direction()==='up'){toSubtract=vector.mul(knowledge.sharp,this.qualityValue());without=vector.sub(this.coord,toSubtract);octaves=without[0]-knowledge.intervals[this.base()][0];}else{toSubtract=vector.mul(knowledge.sharp,-this.qualityValue());without=vector.sub(this.coord,toSubtract);octaves=-(without[0]+knowledge.intervals[this.base()][0]);}return octaves;},invert:function invert(){var i=this.base();var qual=this.qualityValue();var acc=this.type()==='minor'?-(qual-1):-qual;var idx=9-knowledge.stepNumber[i]-1;var coord=knowledge.intervals[knowledge.intervalsIndex[idx]];coord=vector.add(coord,vector.mul(knowledge.sharp,acc));return new Interval(coord);},quality:function quality(lng){var quality=knowledge.alterations[this.type()][this.qualityValue()+2];return lng?knowledge.qualityLong[quality]:quality;},qualityValue:function qualityValue(){if(this.direction()==='down')return Math.floor((-this.coord[1]-2)/7)+1;else return Math.floor((this.coord[1]-2)/7)+1;},equal:function equal(interval){return this.coord[0]===interval.coord[0]&&this.coord[1]===interval.coord[1];},greater:function greater(interval){var semi=this.semitones();var isemi=interval.semitones();// If equal in absolute size, measure which interval is bigger
// For example P4 is bigger than A3
return semi===isemi?this.number()>interval.number():semi>isemi;},smaller:function smaller(interval){return!this.equal(interval)&&!this.greater(interval);},add:function add(interval){return new Interval(vector.add(this.coord,interval.coord));},toString:function toString(ignore){// If given true, return the positive value
var number=ignore?this.number():this.value();return this.quality()+number;}};Interval.toCoord=function(simple){var coord=intervalCoords(simple);if(!coord)throw new Error('Invalid simple format interval');return new Interval(coord);};Interval.from=function(from,to){return from.interval(to);};Interval.between=function(from,to){return new Interval(vector.sub(to.coord,from.coord));};Interval.invert=function(sInterval){return Interval.toCoord(sInterval).invert().toString();};var _interval=Interval;function pad(str,ch,len){for(;len>0;len--){str+=ch;}return str;}function Note$1(coord,duration){if(!(this instanceof Note$1))return new Note$1(coord,duration);duration=duration||{};this.duration={value:duration.value||4,dots:duration.dots||0};this.coord=coord;}Note$1.prototype={octave:function octave(){return this.coord[0]+knowledge.A4[0]-knowledge.notes[this.name()][0]+this.accidentalValue()*4;},name:function name(){var value=this.accidentalValue();var idx=this.coord[1]+knowledge.A4[1]-value*7+1;return knowledge.fifths[idx];},accidentalValue:function accidentalValue(){return Math.round((this.coord[1]+knowledge.A4[1]-2)/7);},accidental:function accidental(){return knowledge.accidentals[this.accidentalValue()+2];},/**
   * Returns the key number of the note
   */key:function key(white){if(white)return this.coord[0]*7+this.coord[1]*4+29;else return this.coord[0]*12+this.coord[1]*7+49;},/**
  * Returns a number ranging from 0-127 representing a MIDI note value
  */midi:function midi(){return this.key()+20;},/**
   * Calculates and returns the frequency of the note.
   * Optional concert pitch (def. 440)
   */fq:function fq(concertPitch){return pitchFq(this.coord,concertPitch);},/**
   * Returns the pitch class index (chroma) of the note
   */chroma:function chroma(){var value=(vector.sum(vector.mul(this.coord,[12,7]))-3)%12;return value<0?value+12:value;},interval:function interval(interval$1){if(typeof interval$1==='string')interval$1=_interval.toCoord(interval$1);if(interval$1 instanceof _interval)return new Note$1(vector.add(this.coord,interval$1.coord),this.duration);else if(interval$1 instanceof Note$1)return new _interval(vector.sub(interval$1.coord,this.coord));},transpose:function transpose(interval){this.coord=vector.add(this.coord,interval.coord);return this;},/**
   * Returns the Helmholtz notation form of the note (fx C,, d' F# g#'')
   */helmholtz:function helmholtz(){var octave=this.octave();var name=this.name();name=octave<3?name.toUpperCase():name.toLowerCase();var padchar=octave<3?',':'\'';var padcount=octave<2?2-octave:octave-3;return pad(name+this.accidental(),padchar,padcount);},/**
   * Returns the scientific notation form of the note (fx E4, Bb3, C#7 etc.)
   */scientific:function scientific(){return this.name().toUpperCase()+this.accidental()+this.octave();},/**
   * Returns notes that are enharmonic with this note.
   */enharmonics:function enharmonics(oneaccidental){var _context,_context2,_context3;var key=this.key(),limit=oneaccidental?2:3;return(0,_filter["default"])(_context=(0,_map["default"])(_context2=['m3','m2','m-2','m-3']).call(_context2,(0,_bind["default"])(_context3=this.interval).call(_context3,this))).call(_context,function(note){var acc=note.accidentalValue();var diff=key-(note.key()-acc);if(diff<limit&&diff>-limit){var product=vector.mul(knowledge.sharp,diff-acc);note.coord=vector.add(note.coord,product);return true;}});},solfege:function solfege(scale,showOctaves){var interval=scale.tonic.interval(this),solfege,stroke,count;if(interval.direction()==='down')interval=interval.invert();if(showOctaves){count=(this.key(true)-scale.tonic.key(true))/7;count=count>=0?Math.floor(count):-Math.ceil(-count);stroke=count>=0?'\'':',';}solfege=knowledge.intervalSolfege[interval.simple(true).toString()];return showOctaves?pad(solfege,stroke,Math.abs(count)):solfege;},scaleDegree:function scaleDegree(scale){var _context4;var inter=scale.tonic.interval(this);// If the direction is down, or we're dealing with an octave - invert it
if(inter.direction()==='down'||inter.coord[1]===0&&inter.coord[0]!==0){inter=inter.invert();}inter=inter.simple(true).coord;return(0,_reduce["default"])(_context4=scale.scale).call(_context4,function(index,current,i){var coord=_interval.toCoord(current).coord;return coord[0]===inter[0]&&coord[1]===inter[1]?i+1:index;},0);},/**
   * Returns the name of the duration value,
   * such as 'whole', 'quarter', 'sixteenth' etc.
   */durationName:function durationName(){return knowledge.durations[this.duration.value];},/**
   * Returns the duration of the note (including dots)
   * in seconds. The first argument is the tempo in beats
   * per minute, the second is the beat unit (i.e. the
   * lower numeral in a time signature).
   */durationInSeconds:function durationInSeconds(bpm,beatUnit){var secs=60/bpm/(this.duration.value/4)/(beatUnit/4);return secs*2-secs/Math.pow(2,this.duration.dots);},/**
   * Returns the name of the note, with an optional display of octave number
   */toString:function toString(dont){return this.name()+this.accidental()+(dont?'':this.octave());}};Note$1.fromString=function(name,dur){var coord=scientificNotation(name);if(!coord)coord=helmholtz(name);return new Note$1(coord,dur);};Note$1.fromKey=function(key){var octave=Math.floor((key-4)/12);var distance=key-octave*12-4;var name=knowledge.fifths[(2*Math.round(distance/2)+1)%7];var subDiff=vector.sub(knowledge.notes[name],knowledge.A4);var note=vector.add(subDiff,[octave+1,0]);var diff=key-49-vector.sum(vector.mul(note,[12,7]));var arg=diff?vector.add(note,vector.mul(knowledge.sharp,diff)):note;return new Note$1(arg);};Note$1.fromFrequency=function(fq,concertPitch){var key,cents,originalFq;concertPitch=concertPitch||440;key=49+12*((Math.log(fq)-Math.log(concertPitch))/Math.log(2));key=Math.round(key);originalFq=concertPitch*Math.pow(2,(key-49)/12);cents=1200*(Math.log(fq/originalFq)/Math.log(2));return{note:Note$1.fromKey(key),cents:cents};};Note$1.fromMIDI=function(note){return Note$1.fromKey(note-20);};var note=Note$1;var SYMBOLS={'m':['m3','P5'],'mi':['m3','P5'],'min':['m3','P5'],'-':['m3','P5'],'M':['M3','P5'],'ma':['M3','P5'],'':['M3','P5'],'+':['M3','A5'],'aug':['M3','A5'],'dim':['m3','d5'],'o':['m3','d5'],'maj':['M3','P5','M7'],'dom':['M3','P5','m7'],'ø':['m3','d5','m7'],'5':['P5'],'6/9':['M3','P5','M6','M9']};var daccord=function daccord(symbol){var _context5;var c,parsing='quality',additionals=[],name,chordLength=2;var notes=['P1','M3','P5','m7','M9','P11','M13'];var explicitMajor=false;function setChord(name){var intervals=SYMBOLS[name];for(var i=0,len=intervals.length;i<len;i++){notes[i+1]=intervals[i];}chordLength=intervals.length;}// Remove whitespace, commas and parentheses
symbol=symbol.replace(/[,\s\(\)]/g,'');for(var i=0,len=symbol.length;i<len;i++){if(!(c=symbol[i]))return;if(parsing==='quality'){var sub3=i+2<len?symbol.substr(i,3).toLowerCase():null;var sub2=i+1<len?symbol.substr(i,2).toLowerCase():null;if(sub3 in SYMBOLS)name=sub3;else if(sub2 in SYMBOLS)name=sub2;else if(c in SYMBOLS)name=c;else name='';if(name)setChord(name);if(name==='M'||name==='ma'||name==='maj')explicitMajor=true;i+=name.length-1;parsing='extension';}else if(parsing==='extension'){c=c==='1'&&symbol[i+1]?+symbol.substr(i,2):+c;if(!isNaN(c)&&c!==6){chordLength=(c-1)/2;if(chordLength!==Math.round(chordLength))return new Error('Invalid interval extension: '+c.toString(10));if(name==='o'||name==='dim')notes[3]='d7';else if(explicitMajor)notes[3]='M7';i+=c>=10?1:0;}else if(c===6){notes[3]='M6';chordLength=Math.max(3,chordLength);}else i-=1;parsing='alterations';}else if(parsing==='alterations'){var alterations=symbol.substr(i).split(/(#|b|add|maj|sus|M)/i),flat=false,sharp=false;if(alterations.length===1)return new Error('Invalid alteration');else if(alterations[0].length!==0)return new Error('Invalid token: \''+alterations[0]+'\'');var ignore=false;(0,_forEach["default"])(alterations).call(alterations,function(alt,i,arr){if(ignore||!alt.length)return ignore=false;var next=arr[i+1],lower=alt.toLowerCase();if(alt==='M'||lower==='maj'){if(next==='7')ignore=true;chordLength=Math.max(3,chordLength);notes[3]='M7';}else if(lower==='sus'){var type='P4';if(next==='2'||next==='4'){ignore=true;if(next==='2')type='M2';}notes[1]=type;// Replace third with M2 or P4
}else if(lower==='add'){if(next==='9')additionals.push('M9');else if(next==='11')additionals.push('P11');else if(next==='13')additionals.push('M13');ignore=true;}else if(lower==='b'){flat=true;}else if(lower==='#'){sharp=true;}else{var token=+alt,quality,intPos;if(isNaN(token)||String(token).length!==alt.length)return new Error('Invalid token: \''+alt+'\'');if(token===6){if(sharp)notes[3]='A6';else if(flat)notes[3]='m6';else notes[3]='M6';chordLength=Math.max(3,chordLength);return;}// Calculate the position in the 'note' array
intPos=(token-1)/2;if(chordLength<intPos)chordLength=intPos;if(token<5||token===7||intPos!==Math.round(intPos))return new Error('Invalid interval alteration: '+token);quality=notes[intPos][0];// Alterate the quality of the interval according the accidentals
if(sharp){if(quality==='d')quality='m';else if(quality==='m')quality='M';else if(quality==='M'||quality==='P')quality='A';}else if(flat){if(quality==='A')quality='M';else if(quality==='M')quality='m';else if(quality==='m'||quality==='P')quality='d';}sharp=flat=false;notes[intPos]=quality+token;}});parsing='ended';}else if(parsing==='ended'){break;}}return(0,_concat["default"])(_context5=(0,_slice["default"])(notes).call(notes,0,chordLength+1)).call(_context5,additionals);};function Chord(root,name){var _context6,_context8,_context9;if(!(this instanceof Chord))return new Chord(root,name);name=name||'';this.name=root.name().toUpperCase()+root.accidental()+name;this.symbol=name;this.root=root;this.intervals=[];this._voicing=[];var bass=name.split('/');if(bass.length===2&&(0,_trim["default"])(_context6=bass[1]).call(_context6)!=='9'){var _context7;name=bass[0];bass=(0,_trim["default"])(_context7=bass[1]).call(_context7);}else{bass=null;}this.intervals=(0,_map["default"])(_context8=daccord(name)).call(_context8,_interval.toCoord);this._voicing=(0,_slice["default"])(_context9=this.intervals).call(_context9);if(bass){var intervals=this.intervals,bassInterval,note$1;// Make sure the bass is atop of the root note
note$1=note.fromString(bass+(root.octave()+1));// crude
bassInterval=_interval.between(root,note$1);bass=bassInterval.simple();bassInterval=bassInterval.invert().direction('down');this._voicing=[bassInterval];for(var i=0,length=intervals.length;i<length;i++){if(!intervals[i].simple().equal(bass))this._voicing.push(intervals[i]);}}}Chord.prototype={notes:function notes(){var _context10;var root=this.root;return(0,_map["default"])(_context10=this.voicing()).call(_context10,function(interval){return root.interval(interval);});},simple:function simple(){var _context11;return(0,_map["default"])(_context11=this.notes()).call(_context11,function(n){return n.toString(true);});},bass:function bass(){return this.root.interval(this._voicing[0]);},voicing:function voicing(_voicing){// Get the voicing
if(!_voicing){return this._voicing;}// Set the voicing
this._voicing=[];for(var i=0,length=_voicing.length;i<length;i++){this._voicing[i]=_interval.toCoord(_voicing[i]);}return this;},resetVoicing:function resetVoicing(){this._voicing=this.intervals;},dominant:function dominant(additional){additional=additional||'';return new Chord(this.root.interval('P5'),additional);},subdominant:function subdominant(additional){additional=additional||'';return new Chord(this.root.interval('P4'),additional);},parallel:function parallel(additional){var quality=this.quality();if(this.chordType()!=='triad'||quality==='diminished'||quality==='augmented'){throw new Error('Only major/minor triads have parallel chords');}if(quality==='major'){return new Chord(this.root.interval('m3','down'),'m');}else{return new Chord(this.root.interval('m3','up'));}},quality:function quality(){var third,fifth,seventh,intervals=this.intervals;for(var i=0,length=intervals.length;i<length;i++){if(intervals[i].number()===3){third=intervals[i];}else if(intervals[i].number()===5){fifth=intervals[i];}else if(intervals[i].number()===7){seventh=intervals[i];}}if(!third){return;}third=third.direction()==='down'?third.invert():third;third=third.simple().toString();if(fifth){fifth=fifth.direction==='down'?fifth.invert():fifth;fifth=fifth.simple().toString();}if(seventh){seventh=seventh.direction==='down'?seventh.invert():seventh;seventh=seventh.simple().toString();}if(third==='M3'){if(fifth==='A5'){return'augmented';}else if(fifth==='P5'){return seventh==='m7'?'dominant':'major';}return'major';}else if(third==='m3'){if(fifth==='P5'){return'minor';}else if(fifth==='d5'){return seventh==='m7'?'half-diminished':'diminished';}return'minor';}},chordType:function chordType(){// In need of better name
var length=this.intervals.length,interval,has,invert,i,name;if(length===2){return'dyad';}else if(length===3){has={unison:false,third:false,fifth:false};for(i=0;i<length;i++){interval=this.intervals[i];invert=interval.invert();if(interval.base()in has){has[interval.base()]=true;}else if(invert.base()in has){has[invert.base()]=true;}}name=has.unison&&has.third&&has.fifth?'triad':'trichord';}else if(length===4){has={unison:false,third:false,fifth:false,seventh:false};for(i=0;i<length;i++){interval=this.intervals[i];invert=interval.invert();if(interval.base()in has){has[interval.base()]=true;}else if(invert.base()in has){has[invert.base()]=true;}}if(has.unison&&has.third&&has.fifth&&has.seventh){name='tetrad';}}return name||'unknown';},get:function get(interval){if(typeof interval==='string'&&interval in knowledge.stepNumber){var intervals=this.intervals,i,length;interval=knowledge.stepNumber[interval];for(i=0,length=intervals.length;i<length;i++){if(intervals[i].number()===interval){return this.root.interval(intervals[i]);}}return null;}else{throw new Error('Invalid interval name');}},interval:function interval(_interval2){return new Chord(this.root.interval(_interval2),this.symbol);},transpose:function transpose(interval){this.root.transpose(interval);this.name=this.root.name().toUpperCase()+this.root.accidental()+this.symbol;return this;},toString:function toString(){return this.name;}};var chord=Chord;var scales={aeolian:['P1','M2','m3','P4','P5','m6','m7'],blues:['P1','m3','P4','d5','P5','m7'],chromatic:['P1','m2','M2','m3','M3','P4','A4','P5','m6','M6','m7','M7'],dorian:['P1','M2','m3','P4','P5','M6','m7'],doubleharmonic:['P1','m2','M3','P4','P5','m6','M7'],harmonicminor:['P1','M2','m3','P4','P5','m6','M7'],ionian:['P1','M2','M3','P4','P5','M6','M7'],locrian:['P1','m2','m3','P4','d5','m6','m7'],lydian:['P1','M2','M3','A4','P5','M6','M7'],majorpentatonic:['P1','M2','M3','P5','M6'],melodicminor:['P1','M2','m3','P4','P5','M6','M7'],minorpentatonic:['P1','m3','P4','P5','m7'],mixolydian:['P1','M2','M3','P4','P5','M6','m7'],phrygian:['P1','m2','m3','P4','P5','m6','m7'],wholetone:['P1','M2','M3','A4','A5','A6']};// synonyms
scales.harmonicchromatic=scales.chromatic;scales.minor=scales.aeolian;scales.major=scales.ionian;scales.flamenco=scales.doubleharmonic;function Scale(tonic,scale){if(!(this instanceof Scale))return new Scale(tonic,scale);var scaleName,i;if(!('coord'in tonic)){throw new Error('Invalid Tonic');}if(typeof scale==='string'){scaleName=scale;scale=scales[scale];if(!scale)throw new Error('Invalid Scale');}else{for(i in scales){if(scales.hasOwnProperty(i)){if(scales[i].toString()===scale.toString()){scaleName=i;break;}}}}this.name=scaleName;this.tonic=tonic;this.scale=scale;}Scale.prototype={notes:function notes(){var notes=[];for(var i=0,length=this.scale.length;i<length;i++){notes.push(this.tonic.interval(this.scale[i]));}return notes;},simple:function simple(){var _context12;return(0,_map["default"])(_context12=this.notes()).call(_context12,function(n){return n.toString(true);});},type:function type(){var length=this.scale.length-2;if(length<8){return['di','tri','tetra','penta','hexa','hepta','octa'][length]+'tonic';}},get:function get(i){var isStepStr=typeof i==='string'&&i in knowledge.stepNumber;i=isStepStr?knowledge.stepNumber[i]:i;var len=this.scale.length;var interval$1,octaves;if(i<0){interval$1=this.scale[i%len+len-1];octaves=Math.floor((i-1)/len);}else if(i%len===0){interval$1=this.scale[len-1];octaves=i/len-1;}else{interval$1=this.scale[i%len-1];octaves=Math.floor(i/len);}return this.tonic.interval(interval$1).interval(new _interval([octaves,0]));},solfege:function solfege(index,showOctaves){var _context13;if(index)return this.get(index).solfege(this,showOctaves);return(0,_map["default"])(_context13=this.notes()).call(_context13,function(n){return n.solfege(this,showOctaves);});},interval:function interval(interval$1){interval$1=typeof interval$1==='string'?_interval.toCoord(interval$1):interval$1;return new Scale(this.tonic.interval(interval$1),this.scale);},transpose:function transpose(interval){var scale=this.interval(interval);this.scale=scale.scale;this.tonic=scale.tonic;return this;}};Scale.KNOWN_SCALES=(0,_keys["default"])(scales);var scale=Scale;var sugar=function sugar(teoria){var Note=teoria.Note;var Chord=teoria.Chord;var Scale=teoria.Scale;Note.prototype.chord=function(chord){var isShortChord=(chord in knowledge.chordShort);chord=isShortChord?knowledge.chordShort[chord]:chord;return new Chord(this,chord);};Note.prototype.scale=function(scale){return new Scale(this,scale);};};var teoria_1=createCommonjsModule(function(module,exports){var teoria;// never thought I would write this, but: Legacy support
function intervalConstructor(from,to){// Construct a Interval object from string representation
if(typeof from==='string')return _interval.toCoord(from);if(typeof to==='string'&&from instanceof note)return _interval.from(from,_interval.toCoord(to));if(to instanceof _interval&&from instanceof note)return _interval.from(from,to);if(to instanceof note&&from instanceof note)return _interval.between(from,to);throw new Error('Invalid parameters');}intervalConstructor.toCoord=_interval.toCoord;intervalConstructor.from=_interval.from;intervalConstructor.between=_interval.between;intervalConstructor.invert=_interval.invert;function noteConstructor(name,duration){if(typeof name==='string')return note.fromString(name,duration);else return new note(name,duration);}noteConstructor.fromString=note.fromString;noteConstructor.fromKey=note.fromKey;noteConstructor.fromFrequency=note.fromFrequency;noteConstructor.fromMIDI=note.fromMIDI;function chordConstructor(name,symbol){if(typeof name==='string'){var root,octave;root=name.match(/^([a-h])(x|#|bb|b?)/i);if(root&&root[0]){octave=typeof symbol==='number'?symbol.toString(10):'4';return new chord(note.fromString(root[0].toLowerCase()+octave),name.substr(root[0].length));}}else if(name instanceof note)return new chord(name,symbol);throw new Error('Invalid Chord. Couldn\'t find note name');}function scaleConstructor(tonic,scale$1){tonic=tonic instanceof note?tonic:teoria.note(tonic);return new scale(tonic,scale$1);}teoria={note:noteConstructor,chord:chordConstructor,interval:intervalConstructor,scale:scaleConstructor,Note:note,Chord:chord,Scale:scale,Interval:_interval};sugar(teoria);module.exports=teoria;});var bach_cjs=createCommonjsModule(function(module){(function(root,factory){if(module.exports){module.exports=factory();}else{root.returnExports=factory();}})(commonjsGlobal,function(){var shadow$umd$export=null;var h,ya=commonjsGlobal;function C(a,b){a=a.split(".");var c=ya;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());){a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b;}}function ia(a){var b=(0,_typeof2["default"])(a);return"object"!=b?b:a?(0,_isArray["default"])(a)?"array":b:"null";}function w(a){return Object.prototype.hasOwnProperty.call(a,la)&&a[la]||(a[la]=++na);}var la="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b){var c=(0,_slice["default"])(Array.prototype).call(arguments,1);return function(){var d=(0,_slice["default"])(c).call(c);d.push.apply(d,arguments);return a.apply(this,d);};}function aa(a,b,c,d){return(0,_splice["default"])(Array.prototype).apply(a,ca(arguments,1));}function ca(a,b,c){return 2>=arguments.length?(0,_slice["default"])(Array.prototype).call(a,b):(0,_slice["default"])(Array.prototype).call(a,b,c);}function fa(a,b){(0,_sort["default"])(a).call(a,b||y);}function ma(a,b){for(var c=Array(a.length),d=0;d<a.length;d++){c[d]={index:d,value:a[d]};}var e=b||y;fa(c,function(f,g){return e(f.value,g.value)||f.index-g.index;});for(d=0;d<a.length;d++){a[d]=c[d].value;}}function y(a,b){return a>b?1:a<b?-1:0;}function ua(a){var b=[];var c=0;for(var d in a){b[c++]=d;}return b;}function va(a,b){return null!==a&&b in a?a[b]:void 0;}function wa(a,b){var c=a.length-b.length;return 0<=c&&(0,_indexOf["default"])(a).call(a,b,c)==c;}function za(a,b){null!=a&&this.append.apply(this,arguments);}h=za.prototype;h.zb="";h.set=function(a){this.zb=""+a;};h.append=function(a,b,c){this.zb+=String(a);if(null!=b)for(var d=1;d<arguments.length;d++){this.zb+=arguments[d];}return this;};h.clear=function(){this.zb="";};h.getLength=function(){return this.zb.length;};h.toString=function(){return this.zb;};var Aa={},Ba={},B,Fa={},Ga=null,Ha=!0,Ia=null;function Ja(){return new m(null,5,[Ka,!0,La,!0,Ma,!1,Na,!1,Oa,null],null);}function Pa(){Ha=!1;Ga=function Ga(){var a=console.log,b=a.apply,c=console;var d=arguments;var e=d.length;if(0<e){for(var f=Array(e),g=0;g<e;g++){f[g]=d[g];}d=f;}else d=[];return b.call(a,c,d);};}function r(a){return null!=a&&!1!==a;}function be(a){return null==a;}function Qa(a){return null==a?!0:!1===a?!0:!1;}function Ra(a,b){return a[ia(null==b?null:b)]?!0:a._?!0:!1;}function Sa(a){return null==a?null:a.constructor;}function Ta(a,b){var c=Sa(b);return Error(["No protocol method ",a," defined for type ",r(r(c)?c.Sc:c)?c.qc:ia(b),": ",b].join(""));}function Ua(a){var b=a.qc;return r(b)?b:v.Ca(a);}var Wa="undefined"!==typeof _symbol["default"]&&"function"===ia(_symbol["default"])?_iterator25["default"]:"@@iterator",Xa={"]":"_RBRACK_","'":"_SINGLEQUOTE_","\x3d":"_EQ_",'"':"_DOUBLEQUOTE_","!":"_BANG_","*":"_STAR_","%":"_PERCENT_","|":"_BAR_","~":"_TILDE_","/":"_SLASH_","\\":"_BSLASH_","-":"_","?":"_QMARK_","\x26":"_AMPERSAND_",":":"_COLON_","\x3c":"_LT_","{":"_LBRACE_","}":"_RBRACE_","[":"_LBRACK_","#":"_SHARP_","^":"_CARET_","+":"_PLUS_","@":"_CIRCA_","\x3e":"_GT_"};function bb(a){for(var b=a.length,c=Array(b),d=0;;){if(d<b)c[d]=a[d],d+=1;else break;}return c;}function db(){}function eb(a){if(null!=a&&null!=a.X)a=a.X(a);else{var b=eb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=eb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("ICounted.-count",a);}return a;}function fb(){}function gb(a){if(null!=a&&null!=a.$)a=a.$(a);else{var b=gb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=gb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IEmptyableCollection.-empty",a);}return a;}function hb(){}function ib(a,b){if(null!=a&&null!=a.V)a=a.V(a,b);else{var c=ib[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=ib._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("ICollection.-conj",a);}return a;}function jb(){}var ba=function(){function a(d,e,f){var g=kb[ia(null==d?null:d)];if(null!=g)return g.Md?g.Md(d,e,f):g.call(null,d,e,f);g=kb._;if(null!=g)return g.Md?g.Md(d,e,f):g.call(null,d,e,f);throw Ta("IIndexed.-nth",d);}function b(d,e){var f=kb[ia(null==d?null:d)];if(null!=f)return f.rd?f.rd(d,e):f.call(null,d,e);f=kb._;if(null!=f)return f.rd?f.rd(d,e):f.call(null,d,e);throw Ta("IIndexed.-nth",d);}var c=null;c=function c(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f);}throw Error("Invalid arity: "+arguments.length);};c.rd=b;c.Md=a;return c;}(),kb=function kb(a){switch(arguments.length){case 2:return kb.rd(arguments[0],arguments[1]);case 3:return kb.Md(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};kb.rd=function(a,b){return null!=a&&null!=a.H?a.H(a,b):ba(a,b);};kb.Md=function(a,b,c){return null!=a&&null!=a.ba?a.ba(a,b,c):ba(a,b,c);};kb.D=3;function mb(){}function nb(a){if(null!=a&&null!=a.ha)a=a.ha(a);else{var b=nb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=nb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("ISeq.-first",a);}return a;}function ob(a){if(null!=a&&null!=a.xa)a=a.xa(a);else{var b=ob[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=ob._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("ISeq.-rest",a);}return a;}function pb(){}function qb(a){if(null!=a&&null!=a.wa)a=a.wa(a);else{var b=qb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=qb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("INext.-next",a);}return a;}function rb(){}var ea=function(){function a(d,e,f){var g=sb[ia(null==d?null:d)];if(null!=g)return g.Md?g.Md(d,e,f):g.call(null,d,e,f);g=sb._;if(null!=g)return g.Md?g.Md(d,e,f):g.call(null,d,e,f);throw Ta("ILookup.-lookup",d);}function b(d,e){var f=sb[ia(null==d?null:d)];if(null!=f)return f.rd?f.rd(d,e):f.call(null,d,e);f=sb._;if(null!=f)return f.rd?f.rd(d,e):f.call(null,d,e);throw Ta("ILookup.-lookup",d);}var c=null;c=function c(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f);}throw Error("Invalid arity: "+arguments.length);};c.rd=b;c.Md=a;return c;}(),sb=function sb(a){switch(arguments.length){case 2:return sb.rd(arguments[0],arguments[1]);case 3:return sb.Md(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};sb.rd=function(a,b){return null!=a&&null!=a.P?a.P(a,b):ea(a,b);};sb.Md=function(a,b,c){return null!=a&&null!=a.F?a.F(a,b,c):ea(a,b,c);};sb.D=3;function ha(){}function pa(a,b){if(null!=a&&null!=a.Qd)a=a.Qd(a,b);else{var c=pa[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=pa._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IAssociative.-contains-key?",a);}return a;}function vb(a,b,c){if(null!=a&&null!=a.ya)a=a.ya(a,b,c);else{var d=vb[ia(null==a?null:a)];if(null!=d)a=d.Md?d.Md(a,b,c):d.call(null,a,b,c);else if(d=vb._,null!=d)a=d.Md?d.Md(a,b,c):d.call(null,a,b,c);else throw Ta("IAssociative.-assoc",a);}return a;}function wb(a,b){if(null!=a&&null!=a.Ab)a=a.Ab(a,b);else{var c=wb[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=wb._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IFind.-find",a);}return a;}function xb(){}function yb(a,b){if(null!=a&&null!=a.rb)a=a.rb(a,b);else{var c=yb[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=yb._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IMap.-dissoc",a);}return a;}function zb(a){if(null!=a&&null!=a.Ac)a=a.key;else{var b=zb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=zb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IMapEntry.-key",a);}return a;}function Ab(a){if(null!=a&&null!=a.Bc)a=a.g;else{var b=Ab[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Ab._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IMapEntry.-val",a);}return a;}function Bb(){}function Cb(a){if(null!=a&&null!=a.lb)a=a.lb(a);else{var b=Cb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Cb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IStack.-peek",a);}return a;}function Db(a){if(null!=a&&null!=a.mb)a=a.mb(a);else{var b=Db[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Db._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IStack.-pop",a);}return a;}function Eb(){}function Fb(a){if(null!=a&&null!=a.Xb)a=a.Xb(a);else{var b=Fb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Fb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IDeref.-deref",a);}return a;}function Gb(){}function Hb(a){if(null!=a&&null!=a.S)a=a.S(a);else{var b=Hb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Hb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IMeta.-meta",a);}return a;}function Ib(){}function Jb(a,b){if(null!=a&&null!=a.T)a=a.T(a,b);else{var c=Jb[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=Jb._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IWithMeta.-with-meta",a);}return a;}function Kb(){}var qa=function(){function a(d,e,f){var g=Lb[ia(null==d?null:d)];if(null!=g)return g.Md?g.Md(d,e,f):g.call(null,d,e,f);g=Lb._;if(null!=g)return g.Md?g.Md(d,e,f):g.call(null,d,e,f);throw Ta("IReduce.-reduce",d);}function b(d,e){var f=Lb[ia(null==d?null:d)];if(null!=f)return f.rd?f.rd(d,e):f.call(null,d,e);f=Lb._;if(null!=f)return f.rd?f.rd(d,e):f.call(null,d,e);throw Ta("IReduce.-reduce",d);}var c=null;c=function c(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f);}throw Error("Invalid arity: "+arguments.length);};c.rd=b;c.Md=a;return c;}(),Lb=function Lb(a){switch(arguments.length){case 2:return Lb.rd(arguments[0],arguments[1]);case 3:return Lb.Md(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};Lb.rd=function(a,b){return null!=a&&null!=a.za?a.za(a,b):qa(a,b);};Lb.Md=function(a,b,c){return null!=a&&null!=a.Aa?a.Aa(a,b,c):qa(a,b,c);};Lb.D=3;function Nb(){}function Ob(a,b){if(null!=a&&null!=a.Za)a=a.Za(a,b,!0);else{var c=Ob[ia(null==a?null:a)];if(null!=c)a=c.Md?c.Md(a,b,!0):c.call(null,a,b,!0);else if(c=Ob._,null!=c)a=c.Md?c.Md(a,b,!0):c.call(null,a,b,!0);else throw Ta("IKVReduce.-kv-reduce",a);}return a;}function Pb(a,b){if(null!=a&&null!=a.N)a=a.N(a,b);else{var c=Pb[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=Pb._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IEquiv.-equiv",a);}return a;}function Qb(a){if(null!=a&&null!=a.O)a=a.O(a);else{var b=Qb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Qb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IHash.-hash",a);}return a;}function Rb(){}function Sb(a){if(null!=a&&null!=a.R)a=a.R(a);else{var b=Sb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Sb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("ISeqable.-seq",a);}return a;}function Tb(){}function Ub(){}function Vb(){}function Wb(){}function Xb(a){if(null!=a&&null!=a.Bb)a=a.Bb(a);else{var b=Xb[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Xb._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IReversible.-rseq",a);}return a;}function Yb(a,b){if(null!=a&&null!=a.Rc)a=a.Rc(a,b);else{var c=Yb[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=Yb._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IWriter.-write",a);}return a;}function Zb(){}function $b(a,b,c){if(null!=a&&null!=a.K)a=a.K(a,b,c);else{var d=$b[ia(null==a?null:a)];if(null!=d)a=d.Md?d.Md(a,b,c):d.call(null,a,b,c);else if(d=$b._,null!=d)a=d.Md?d.Md(a,b,c):d.call(null,a,b,c);else throw Ta("IPrintWithWriter.-pr-writer",a);}return a;}function ac(a){if(null!=a&&null!=a.Pb)a=a.Pb(a);else{var b=ac[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=ac._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IEditableCollection.-as-transient",a);}return a;}function bc(a,b){if(null!=a&&null!=a.Rb)a=a.Rb(a,b);else{var c=bc[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=bc._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("ITransientCollection.-conj!",a);}return a;}function cc(a){if(null!=a&&null!=a.ac)a=a.ac(a);else{var b=cc[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=cc._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("ITransientCollection.-persistent!",a);}return a;}function dc(a,b,c){if(null!=a&&null!=a.Qb)a=a.Qb(a,b,c);else{var d=dc[ia(null==a?null:a)];if(null!=d)a=d.Md?d.Md(a,b,c):d.call(null,a,b,c);else if(d=dc._,null!=d)a=d.Md?d.Md(a,b,c):d.call(null,a,b,c);else throw Ta("ITransientAssociative.-assoc!",a);}return a;}function ec(){}function fc(a,b){if(null!=a&&null!=a.kb)a=a.kb(a,b);else{var c=fc[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=fc._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IComparable.-compare",a);}return a;}function gc(a){if(null!=a&&null!=a.Oc)a=a.Oc(a);else{var b=gc[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=gc._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IChunk.-drop-first",a);}return a;}function hc(a){if(null!=a&&null!=a.zc)a=a.zc(a);else{var b=hc[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=hc._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IChunkedSeq.-chunked-first",a);}return a;}function ic(a){if(null!=a&&null!=a.pc)a=a.pc(a);else{var b=ic[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=ic._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IChunkedSeq.-chunked-rest",a);}return a;}function jc(a){if(null!=a&&null!=a.Yb)a=a.Yb(a);else{var b=jc[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=jc._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("INamed.-name",a);}return a;}function kc(a){if(null!=a&&null!=a.Zb)a=a.Zb(a);else{var b=kc[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=kc._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("INamed.-namespace",a);}return a;}function lc(a,b){if(null!=a&&null!=a.gd)a=a.gd(a,b);else{var c=lc[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=lc._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IReset.-reset!",a);}return a;}var ra=function(){function a(f,g,k,l,n){var q=nc[ia(null==f?null:f)];if(null!=q)return q.I?q.I(f,g,k,l,n):q.call(null,f,g,k,l,n);q=nc._;if(null!=q)return q.I?q.I(f,g,k,l,n):q.call(null,f,g,k,l,n);throw Ta("ISwap.-swap!",f);}function b(f,g,k,l){var n=nc[ia(null==f?null:f)];if(null!=n)return n.v?n.v(f,g,k,l):n.call(null,f,g,k,l);n=nc._;if(null!=n)return n.v?n.v(f,g,k,l):n.call(null,f,g,k,l);throw Ta("ISwap.-swap!",f);}function c(f,g,k){var l=nc[ia(null==f?null:f)];if(null!=l)return l.Md?l.Md(f,g,k):l.call(null,f,g,k);l=nc._;if(null!=l)return l.Md?l.Md(f,g,k):l.call(null,f,g,k);throw Ta("ISwap.-swap!",f);}function d(f,g){var k=nc[ia(null==f?null:f)];if(null!=k)return k.rd?k.rd(f,g):k.call(null,f,g);k=nc._;if(null!=k)return k.rd?k.rd(f,g):k.call(null,f,g);throw Ta("ISwap.-swap!",f);}var e=null;e=function e(f,g,k,l,n){switch(arguments.length){case 2:return d.call(this,f,g);case 3:return c.call(this,f,g,k);case 4:return b.call(this,f,g,k,l);case 5:return a.call(this,f,g,k,l,n);}throw Error("Invalid arity: "+arguments.length);};e.rd=d;e.Md=c;e.v=b;e.I=a;return e;}(),nc=function nc(a){switch(arguments.length){case 2:return nc.rd(arguments[0],arguments[1]);case 3:return nc.Md(arguments[0],arguments[1],arguments[2]);case 4:return nc.v(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return nc.I(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};nc.rd=function(a,b){return null!=a&&null!=a.jd?a.jd(a,b):ra(a,b);};nc.Md=function(a,b,c){return null!=a&&null!=a.kd?a.kd(a,b,c):ra(a,b,c);};nc.v=function(a,b,c,d){return null!=a&&null!=a.ld?a.ld(a,b,c,d):ra(a,b,c,d);};nc.I=function(a,b,c,d,e){return null!=a&&null!=a.md?a.md(a,b,c,d,e):ra(a,b,c,d,e);};nc.D=5;function pc(){}function qc(a){if(null!=a&&null!=a.Ta)a=a.Ta(a);else{var b=qc[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=qc._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IIterable.-iterator",a);}return a;}function rc(a){this.ud=a;this.j=1073741824;this.G=0;}rc.prototype.Rc=function(a,b){return this.ud.append(b);};function sc(a){var b=new za();a.K(null,new rc(b),Ja());return v.Ca(b);}var tc="undefined"!==typeof Math&&"undefined"!==typeof _imul["default"]&&0!==(0,_imul["default"])(4294967295,5)?function(a,b){return(0,_imul["default"])(a,b);}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0;};function uc(a){a=tc(a|0,-862048943);return tc(a<<15|a>>>-15,461845907);}function vc(a,b){a=(a|0)^(b|0);return tc(a<<13|a>>>-13,5)+-430675100|0;}function wc(a,b){a=(a|0)^b;a=tc(a^a>>>16,-2048144789);a=tc(a^a>>>13,-1028477387);return a^a>>>16;}var xc={},yc=0;function zc(a){255<yc&&(xc={},yc=0);if(null==a)return 0;var b=xc[a];if("number"===typeof b)a=b;else{a:if(null!=a){if(b=a.length,0<b)for(var c=0,d=0;;){if(c<b)d=tc(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a;}}else b=0;}else b=0;xc[a]=b;yc+=1;a=b;}return a;}function Ac(a){if(null!=a&&(a.j&4194304||Fa===a.Ad))return a.O(null)^0;if("number"===typeof a){if(r(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case-Infinity:return-1048576;default:return 2146959360;}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=zc(a),a=0===a?a:wc(vc(0,uc(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:Qb(a)^0,a;}function Bc(a){var b=a.name;a:{var c=1;for(var d=0;;){if(c<b.length)d=vc(d,uc(b.charCodeAt(c-1)|b.charCodeAt(c)<<16)),c+=2;else{c=d;break a;}}}b=wc(1===(b.length&1)?c^uc(b.charCodeAt(b.length-1)):c,tc(2,b.length));a=zc(a.Ua);return b^a+2654435769+(b<<6)+(b>>2);}function Cc(a,b){if(a.pb===b.pb)return 0;var c=Qa(a.Ua);if(r(c?b.Ua:c))return-1;if(r(a.Ua)){if(Qa(b.Ua))return 1;c=y(a.Ua,b.Ua);return 0===c?y(a.name,b.name):c;}return y(a.name,b.name);}function Dc(a,b,c,d,e){this.Ua=a;this.name=b;this.pb=c;this.Ob=d;this.Ya=e;this.j=2154168321;this.G=4096;}h=Dc.prototype;h.toString=function(){return this.pb;};h.N=function(a,b){return b instanceof Dc?this.pb===b.pb:!1;};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context14;return this.call.apply(this,(0,_concat["default"])(_context14=[this]).call(_context14,bb(b)));};h.Ca=function(a){return Ec.rd?Ec.rd(a,this):Ec.call(null,a,this);};h.rd=function(a,b){return Ec.Md?Ec.Md(a,this,b):Ec.call(null,a,this,b);};h.S=function(){return this.Ya;};h.T=function(a,b){return new Dc(this.Ua,this.name,this.pb,this.Ob,b);};h.O=function(){var a=this.Ob;return null!=a?a:this.Ob=a=Bc(this);};h.Yb=function(){return this.name;};h.Zb=function(){return this.Ua;};h.K=function(a,b){return Yb(b,this.pb);};var Fc=function Fc(a){switch(arguments.length){case 1:return Fc.Ca(arguments[0]);case 2:return Fc.rd(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};Fc.Ca=function(a){for(;;){if(a instanceof Dc)return a;if("string"===typeof a){var b=(0,_indexOf["default"])(a).call(a,"/");return 1>b?Fc.rd(null,a):Fc.rd(a.substring(0,b),a.substring(b+1,a.length));}if(a instanceof Gc)return a.Mb;if(a instanceof E)a=a.ca;else throw Error("no conversion to symbol");}};Fc.rd=function(a,b){var c=null!=a?[v.Ca(a),"/",v.Ca(b)].join(""):b;return new Dc(a,b,c,null,null);};Fc.D=2;function Gc(a,b,c){this.g=a;this.Mb=b;this.Ya=c;this.j=6717441;this.G=0;}h=Gc.prototype;h.toString=function(){return["#'",v.Ca(this.Mb)].join("");};h.Xb=function(){return this.g.i?this.g.i():this.g.call(null);};h.S=function(){return this.Ya;};h.T=function(a,b){return new Gc(this.g,this.Mb,b);};h.N=function(a,b){return b instanceof Gc?(a=this.Mb,b=b.Mb,G.rd?G.rd(a,b):G.call(null,a,b)):!1;};h.O=function(){return Bc(this.Mb);};h.call=function(a){switch(arguments.length-1){case 0:return this.i();case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);case 3:return this.Md(arguments[1],arguments[2],arguments[3]);case 4:return this.v(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.I(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.ua(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);case 11:return this.ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.la(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13]);case 14:return this.na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.oa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.ta(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.Od(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context15;return this.call.apply(this,(0,_concat["default"])(_context15=[this]).call(_context15,bb(b)));};h.i=function(){var a=this.g.i?this.g.i():this.g.call(null);return a.i?a.i():a.call(null);};h.Ca=function(a){var b=this.g.i?this.g.i():this.g.call(null);return b.Ca?b.Ca(a):b.call(null,a);};h.rd=function(a,b){var c=this.g.i?this.g.i():this.g.call(null);return c.rd?c.rd(a,b):c.call(null,a,b);};h.Md=function(a,b,c){var d=this.g.i?this.g.i():this.g.call(null);return d.Md?d.Md(a,b,c):d.call(null,a,b,c);};h.v=function(a,b,c,d){var e=this.g.i?this.g.i():this.g.call(null);return e.v?e.v(a,b,c,d):e.call(null,a,b,c,d);};h.I=function(a,b,c,d,e){var f=this.g.i?this.g.i():this.g.call(null);return f.I?f.I(a,b,c,d,e):f.call(null,a,b,c,d,e);};h.fa=function(a,b,c,d,e,f){var g=this.g.i?this.g.i():this.g.call(null);return g.fa?g.fa(a,b,c,d,e,f):g.call(null,a,b,c,d,e,f);};h.ua=function(a,b,c,d,e,f,g){var k=this.g.i?this.g.i():this.g.call(null);return k.ua?k.ua(a,b,c,d,e,f,g):k.call(null,a,b,c,d,e,f,g);};h.aa=function(a,b,c,d,e,f,g,k){var l=this.g.i?this.g.i():this.g.call(null);return l.aa?l.aa(a,b,c,d,e,f,g,k):l.call(null,a,b,c,d,e,f,g,k);};h.va=function(a,b,c,d,e,f,g,k,l){var n=this.g.i?this.g.i():this.g.call(null);return n.va?n.va(a,b,c,d,e,f,g,k,l):n.call(null,a,b,c,d,e,f,g,k,l);};h.ja=function(a,b,c,d,e,f,g,k,l,n){var q=this.g.i?this.g.i():this.g.call(null);return q.ja?q.ja(a,b,c,d,e,f,g,k,l,n):q.call(null,a,b,c,d,e,f,g,k,l,n);};h.ka=function(a,b,c,d,e,f,g,k,l,n,q){var t=this.g.i?this.g.i():this.g.call(null);return t.ka?t.ka(a,b,c,d,e,f,g,k,l,n,q):t.call(null,a,b,c,d,e,f,g,k,l,n,q);};h.la=function(a,b,c,d,e,f,g,k,l,n,q,t){var u=this.g.i?this.g.i():this.g.call(null);return u.la?u.la(a,b,c,d,e,f,g,k,l,n,q,t):u.call(null,a,b,c,d,e,f,g,k,l,n,q,t);};h.ma=function(a,b,c,d,e,f,g,k,l,n,q,t,u){var A=this.g.i?this.g.i():this.g.call(null);return A.ma?A.ma(a,b,c,d,e,f,g,k,l,n,q,t,u):A.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u);};h.na=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A){var K=this.g.i?this.g.i():this.g.call(null);return K.na?K.na(a,b,c,d,e,f,g,k,l,n,q,t,u,A):K.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A);};h.oa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K){var U=this.g.i?this.g.i():this.g.call(null);return U.oa?U.oa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K):U.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K);};h.pa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U){var Z=this.g.i?this.g.i():this.g.call(null);return Z.pa?Z.pa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U):Z.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U);};h.qa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z){var ja=this.g.i?this.g.i():this.g.call(null);return ja.qa?ja.qa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z):ja.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z);};h.ra=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja){var da=this.g.i?this.g.i():this.g.call(null);return da.ra?da.ra(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja):da.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja);};h.sa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da){var xa=this.g.i?this.g.i():this.g.call(null);return xa.sa?xa.sa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da):xa.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da);};h.ta=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa){var Ea=this.g.i?this.g.i():this.g.call(null);return Ea.ta?Ea.ta(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa):Ea.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa);};h.Od=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea){var ka=this.g.i?this.g.i():this.g.call(null);return ab.Hb?ab.Hb(ka,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea):ab.call(null,ka,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea);};function Hc(a){return null!=a?a.G&131072||Fa===a.Bd?!0:a.G?!1:Ra(pc,a):Ra(pc,a);}function H(a){if(null==a)return null;if(null!=a&&(a.j&8388608||Fa===a.hd))return a.R(null);if((0,_isArray["default"])(a)||"string"===typeof a)return 0===a.length?null:new Za(a,0,null);if(null!=a&&null!=a[Wa])return a=va(a,Wa).call(a),Ic.Ca?Ic.Ca(a):Ic.call(null,a);if(Ra(Rb,a))return Sb(a);throw Error([v.Ca(a)," is not ISeqable"].join(""));}function x(a){if(null==a)return null;if(null!=a&&(a.j&64||Fa===a.Oa))return a.ha(null);a=H(a);return null==a?null:nb(a);}function Jc(a){return null!=a?null!=a&&(a.j&64||Fa===a.Oa)?a.xa(null):(a=H(a))?a.xa(null):Kc:Kc;}function z(a){return null==a?null:null!=a&&(a.j&128||Fa===a.$b)?a.wa(null):H(Jc(a));}var G=function G(a){switch(arguments.length){case 1:return G.Ca(arguments[0]);case 2:return G.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return G.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};G.Ca=function(){return!0;};G.rd=function(a,b){return null==a?null==b:a===b||Pb(a,b);};G.Nd=function(a,b,c){for(;;){if(G.rd(a,b)){if(z(c))a=b,b=x(c),c=z(c);else return G.rd(b,x(c));}else return!1;}};G.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};G.D=2;function Lc(a){this.M=a;}Lc.prototype.next=function(){if(null!=this.M){var a=x(this.M);this.M=z(this.M);return{value:a,done:!1};}return{value:null,done:!0};};function Mc(a){return new Lc(H(a));}function Nc(a,b){this.value=a;this.Vb=b;this.wc=null;this.j=8388672;this.G=0;}Nc.prototype.R=function(){return this;};Nc.prototype.ha=function(){return this.value;};Nc.prototype.xa=function(){null==this.wc&&(this.wc=Ic.Ca?Ic.Ca(this.Vb):Ic.call(null,this.Vb));return this.wc;};function Ic(a){var b=a.next();return r(b.done)?null:new Nc(b.value,a);}function Oc(a,b){return wc(vc(0,uc(a)),b);}function Pc(a){var b=0,c=1;for(a=H(a);;){if(null!=a)b+=1,c=tc(31,c)+Ac(x(a))|0,a=z(a);else return Oc(c,b);}}var Qc=Oc(1,0);function Rc(a){var b=0,c=0;for(a=H(a);;){if(null!=a)b+=1,c=c+Ac(x(a))|0,a=z(a);else return Oc(c,b);}}var Sc=Oc(0,0);db["null"]=!0;eb["null"]=function(){return 0;};Date.prototype.N=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf();};Date.prototype.Gb=Fa;Date.prototype.kb=function(a,b){if(b instanceof Date)return y(this.valueOf(),b.valueOf());throw Error(["Cannot compare ",v.Ca(this)," to ",v.Ca(b)].join(""));};Pb.number=function(a,b){return a===b;};Gb["function"]=!0;Hb["function"]=function(){return null;};Qb._=function(a){return w(a);};function Tc(a){return a+1;}function Uc(){this.g=!1;this.j=32768;this.G=0;}Uc.prototype.Xb=function(){return this.g;};function Vc(a){return a instanceof Uc;}function Wc(a){return Vc(a)?Xc.Ca?Xc.Ca(a):Xc.call(null,a):a;}function Xc(a){return Fb(a);}function Yc(a,b){var c=a.X(null);if(0===c)return b.i?b.i():b.call(null);for(var d=a.H(null,0),e=1;;){if(e<c){var f=a.H(null,e);d=b.rd?b.rd(d,f):b.call(null,d,f);if(Vc(d))return Fb(d);e+=1;}else return d;}}function Zc(a,b,c){var d=a.X(null),e=c;for(c=0;;){if(c<d){var f=a.H(null,c);e=b.rd?b.rd(e,f):b.call(null,e,f);if(Vc(e))return Fb(e);c+=1;}else return e;}}function $c(a,b){var c=a.length;if(0===a.length)return b.i?b.i():b.call(null);for(var d=a[0],e=1;;){if(e<c){var f=a[e];d=b.rd?b.rd(d,f):b.call(null,d,f);if(Vc(d))return Fb(d);e+=1;}else return d;}}function ad(a,b,c){var d=a.length,e=c;for(c=0;;){if(c<d){var f=a[c];e=b.rd?b.rd(e,f):b.call(null,e,f);if(Vc(e))return Fb(e);c+=1;}else return e;}}function bd(a,b,c,d){for(var e=a.length;;){if(d<e){var f=a[d];c=b.rd?b.rd(c,f):b.call(null,c,f);if(Vc(c))return Fb(c);d+=1;}else return c;}}function cd(a){return null!=a?a.j&2||Fa===a.Yc?!0:a.j?!1:Ra(db,a):Ra(db,a);}function dd(a){return null!=a?a.j&16||Fa===a.Qc?!0:a.j?!1:Ra(jb,a):Ra(jb,a);}function ed(a,b,c){var d=J.Ca?J.Ca(a):J.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;){if(c<d){if(G.rd(fd?fd(a,c):gd.call(null,a,c),b))return c;c+=1;}else return-1;}}function hd(a,b,c){var d=J.Ca?J.Ca(a):J.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;){if(0<=c){if(G.rd(fd?fd(a,c):gd.call(null,a,c),b))return c;--c;}else return-1;}}function id(a,b){this.h=a;this.A=b;}id.prototype.Ba=function(){return this.A<this.h.length;};id.prototype.next=function(){var a=this.h[this.A];this.A+=1;return a;};function Za(a,b,c){this.h=a;this.A=b;this.s=c;this.j=166592766;this.G=139264;}h=Za.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J.Ca?J.Ca(this):J.call(null,this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.H=function(a,b){a=b+this.A;if(0<=a&&a<this.h.length)return this.h[a];throw Error("Index out of bounds");};h.ba=function(a,b,c){a=b+this.A;return 0<=a&&a<this.h.length?this.h[a]:c;};h.Ta=function(){return new id(this.h,this.A);};h.S=function(){return this.s;};h.wa=function(){return this.A+1<this.h.length?new Za(this.h,this.A+1,null):null;};h.X=function(){var a=this.h.length-this.A;return 0>a?0:a;};h.Bb=function(){var a=this.X(null);return 0<a?new jd(this,a-1,null):null;};h.O=function(){return Pc(this);};h.N=function(a,b){return kd.rd?kd.rd(this,b):kd.call(null,this,b);};h.$=function(){return Kc;};h.za=function(a,b){return bd(this.h,b,this.h[this.A],this.A+1);};h.Aa=function(a,b,c){return bd(this.h,b,c,this.A);};h.ha=function(){return this.h[this.A];};h.xa=function(){return this.A+1<this.h.length?new Za(this.h,this.A+1,null):Kc;};h.R=function(){return this.A<this.h.length?this:null;};h.T=function(a,b){return b===this.s?this:new Za(this.h,this.A,b);};h.V=function(a,b){return ld.rd?ld.rd(b,this):ld.call(null,b,this);};Za.prototype[Wa]=function(){return Mc(this);};function M(a){return 0<a.length?new Za(a,0,null):null;}function jd(a,b,c){this.oc=a;this.A=b;this.s=c;this.j=32374990;this.G=8192;}h=jd.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J.Ca?J.Ca(this):J.call(null,this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){return 0<this.A?new jd(this.oc,this.A-1,null):null;};h.X=function(){return this.A+1;};h.O=function(){return Pc(this);};h.N=function(a,b){return kd.rd?kd.rd(this,b):kd.call(null,this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md?md(b,this):nd.call(null,b,this);};h.Aa=function(a,b,c){return od?od(b,c,this):nd.call(null,b,c,this);};h.ha=function(){return kb(this.oc,this.A);};h.xa=function(){return 0<this.A?new jd(this.oc,this.A-1,null):Kc;};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new jd(this.oc,this.A,b);};h.V=function(a,b){return ld.rd?ld.rd(b,this):ld.call(null,b,this);};jd.prototype[Wa]=function(){return Mc(this);};function pd(a){return x(z(a));}function qd(a){return x(z(a));}function ce(a){for(;;){var b=z(a);if(null!=b)a=b;else return x(a);}}Pb._=function(a,b){return a===b;};var sd=function sd(a){switch(arguments.length){case 0:return sd.i();case 1:return sd.Ca(arguments[0]);case 2:return sd.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return sd.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};sd.i=function(){return td;};sd.Ca=function(a){return a;};sd.rd=function(a,b){return null!=a?ib(a,b):new N(null,b,null,1,null);};sd.Nd=function(a,b,c){for(;;){if(r(c))a=sd.rd(a,b),b=x(c),c=z(c);else return sd.rd(a,b);}};sd.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};sd.D=2;function de(a){return null==a?null:null!=a&&(a.j&4||Fa===a.$c)?a.$(null):(null!=a?a.j&4||Fa===a.$c||(a.j?0:Ra(fb,a)):Ra(fb,a))?gb(a):null;}function J(a){if(null!=a){if(null!=a&&(a.j&2||Fa===a.Yc))a=a.X(null);else if((0,_isArray["default"])(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.j&8388608||Fa===a.hd))a:{a=H(a);for(var b=0;;){if(cd(a)){a=b+eb(a);break a;}a=z(a);b+=1;}}else a=eb(a);}else a=0;return a;}function ud(a,b,c){for(;;){if(null==a)return c;if(0===b)return H(a)?x(a):c;if(dd(a))return kb(a,b,c);if(H(a))a=z(a),--b;else return c;}}function gd(a){switch(arguments.length){case 2:return fd(arguments[0],arguments[1]);case 3:return O(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function fd(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.j&16||Fa===a.Qc))return a.H(null,b);if((0,_isArray["default"])(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.j&64||Fa===a.Oa)||null!=a&&(a.j&16777216||Fa===a.Dc)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");if(0===b){if(H(a)){a=x(a);break a;}throw Error("Index out of bounds");}if(dd(a)){a=kb(a,b);break a;}if(H(a))a=z(a),--b;else throw Error("Index out of bounds");}return a;}if(Ra(jb,a))return kb(a,b);throw Error(["nth not supported on this type ",v.Ca(Ua(Sa(a)))].join(""));}function O(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.j&16||Fa===a.Qc))return a.ba(null,b,c);if((0,_isArray["default"])(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.j&64||Fa===a.Oa)||null!=a&&(a.j&16777216||Fa===a.Dc))return 0>b?c:ud(a,b,c);if(Ra(jb,a))return kb(a,b,c);throw Error(["nth not supported on this type ",v.Ca(Ua(Sa(a)))].join(""));}var Ec=function Ec(a){switch(arguments.length){case 2:return Ec.rd(arguments[0],arguments[1]);case 3:return Ec.Md(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};Ec.rd=function(a,b){return null==a?null:null!=a&&(a.j&256||Fa===a.cd)?a.P(null,b):(0,_isArray["default"])(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:Ra(rb,a)?sb(a,b):null;};Ec.Md=function(a,b,c){return null!=a?null!=a&&(a.j&256||Fa===a.cd)?a.F(null,b,c):(0,_isArray["default"])(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:Ra(rb,a)?sb(a,b,c):c:c;};Ec.D=3;var vd=function vd(a){switch(arguments.length){case 3:return vd.Md(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return vd.Nd(arguments[0],arguments[1],arguments[2],new Za((0,_slice["default"])(c).call(c,3),0,null));}};vd.Md=function(a,b,c){return null!=a&&(a.j&512||Fa===a.xd)?a.ya(null,b,c):null!=a?vb(a,b,c):wd([b,c]);};vd.Nd=function(a,b,c,d){for(;;){if(a=vd.Md(a,b,c),r(d))b=x(d),c=pd(d),d=z(z(d));else return a;}};vd.C=function(a){var b=x(a),c=z(a);a=x(c);var d=z(c);c=x(d);d=z(d);return this.Nd(b,a,c,d);};vd.D=3;var xd=function xd(a){switch(arguments.length){case 1:return xd.Ca(arguments[0]);case 2:return xd.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return xd.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};xd.Ca=function(a){return a;};xd.rd=function(a,b){return null==a?null:yb(a,b);};xd.Nd=function(a,b,c){for(;;){if(null==a)return null;a=xd.rd(a,b);if(r(c))b=x(c),c=z(c);else return a;}};xd.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};xd.D=2;function yd(a,b){this.m=a;this.s=b;this.j=393217;this.G=0;}h=yd.prototype;h.S=function(){return this.s;};h.T=function(a,b){return new yd(this.m,b);};h.call=function(a){switch(arguments.length-1){case 0:return this.i();case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);case 3:return this.Md(arguments[1],arguments[2],arguments[3]);case 4:return this.v(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.I(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.ua(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);case 11:return this.ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.la(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13]);case 14:return this.na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.oa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.ta(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.Od(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context16;return this.call.apply(this,(0,_concat["default"])(_context16=[this]).call(_context16,bb(b)));};h.i=function(){return this.m.i?this.m.i():this.m.call(null);};h.Ca=function(a){return this.m.Ca?this.m.Ca(a):this.m.call(null,a);};h.rd=function(a,b){return this.m.rd?this.m.rd(a,b):this.m.call(null,a,b);};h.Md=function(a,b,c){return this.m.Md?this.m.Md(a,b,c):this.m.call(null,a,b,c);};h.v=function(a,b,c,d){return this.m.v?this.m.v(a,b,c,d):this.m.call(null,a,b,c,d);};h.I=function(a,b,c,d,e){return this.m.I?this.m.I(a,b,c,d,e):this.m.call(null,a,b,c,d,e);};h.fa=function(a,b,c,d,e,f){return this.m.fa?this.m.fa(a,b,c,d,e,f):this.m.call(null,a,b,c,d,e,f);};h.ua=function(a,b,c,d,e,f,g){return this.m.ua?this.m.ua(a,b,c,d,e,f,g):this.m.call(null,a,b,c,d,e,f,g);};h.aa=function(a,b,c,d,e,f,g,k){return this.m.aa?this.m.aa(a,b,c,d,e,f,g,k):this.m.call(null,a,b,c,d,e,f,g,k);};h.va=function(a,b,c,d,e,f,g,k,l){return this.m.va?this.m.va(a,b,c,d,e,f,g,k,l):this.m.call(null,a,b,c,d,e,f,g,k,l);};h.ja=function(a,b,c,d,e,f,g,k,l,n){return this.m.ja?this.m.ja(a,b,c,d,e,f,g,k,l,n):this.m.call(null,a,b,c,d,e,f,g,k,l,n);};h.ka=function(a,b,c,d,e,f,g,k,l,n,q){return this.m.ka?this.m.ka(a,b,c,d,e,f,g,k,l,n,q):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q);};h.la=function(a,b,c,d,e,f,g,k,l,n,q,t){return this.m.la?this.m.la(a,b,c,d,e,f,g,k,l,n,q,t):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t);};h.ma=function(a,b,c,d,e,f,g,k,l,n,q,t,u){return this.m.ma?this.m.ma(a,b,c,d,e,f,g,k,l,n,q,t,u):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u);};h.na=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A){return this.m.na?this.m.na(a,b,c,d,e,f,g,k,l,n,q,t,u,A):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A);};h.oa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K){return this.m.oa?this.m.oa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K);};h.pa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U){return this.m.pa?this.m.pa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U);};h.qa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z){return this.m.qa?this.m.qa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z);};h.ra=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja){return this.m.ra?this.m.ra(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja);};h.sa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da){return this.m.sa?this.m.sa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da);};h.ta=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa){return this.m.ta?this.m.ta(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa):this.m.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa);};h.Od=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea){return ab.Hb?ab.Hb(this.m,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea):ab.call(null,this.m,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea);};function zd(a,b){return"function"===typeof a?new yd(a,b):null==a?null:Jb(a,b);}function Ad(a){var b=null!=a;return(b?null!=a?a.j&131072||Fa===a.Cc||(a.j?0:Ra(Gb,a)):Ra(Gb,a):b)?Hb(a):null;}function Bd(a){return null==a?null:Cb(a);}function Cd(a){return null==a?null:Db(a);}function Dd(a){return null==a||Qa(H(a));}function Ed(a){return null==a?!1:null!=a?a.j&8||Fa===a.zd?!0:a.j?!1:Ra(hb,a):Ra(hb,a);}function Fd(a){return null==a?!1:null!=a?a.j&4096||Fa===a.Hd?!0:a.j?!1:Ra(Bb,a):Ra(Bb,a);}function Gd(a){return null!=a?a.j&16777216||Fa===a.Dc?!0:a.j?!1:Ra(Tb,a):Ra(Tb,a);}function Hd(a){return null==a?!1:null!=a?a.j&1024||Fa===a.Ed?!0:a.j?!1:Ra(xb,a):Ra(xb,a);}function Id(a){return null!=a?a.j&67108864||Fa===a.ed?!0:a.j?!1:Ra(Vb,a):Ra(Vb,a);}function Jd(a){return null!=a?a.j&16384||Fa===a.Id?!0:a.j?!1:Ra(Eb,a):Ra(Eb,a);}function Kd(a){return null!=a?a.G&512||Fa===a.yd?!0:!1:!1;}function Ld(a,b,c,d,e){for(;0!==e;){c[d]=a[b],d+=1,--e,b+=1;}}var Md={};function ee(a){return!0===a;}function Nd(a){return null==a?!1:null!=a?a.j&64||Fa===a.Oa?!0:a.j?!1:Ra(mb,a):Ra(mb,a);}function Od(a){return null==a?!1:!1===a?!1:!0;}function Pd(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&(0,_parseFloat2["default"])(a)===(0,_parseInt2["default"])(a,10);}function Qd(a,b){return null!=a&&(a.j&512||Fa===a.xd)?a.Qd(null,b):Ra(ha,a)?pa(a,b):Ec.Md(a,b,Md)===Md?!1:!0;}function Rd(a,b){if(a===b)return 0;if(null==a)return-1;if(null==b)return 1;if("number"===typeof a){if("number"===typeof b)return y(a,b);throw Error(["Cannot compare ",v.Ca(a)," to ",v.Ca(b)].join(""));}if(null!=a?a.G&2048||Fa===a.Gb||(a.G?0:Ra(ec,a)):Ra(ec,a))return fc(a,b);if("string"!==typeof a&&!(0,_isArray["default"])(a)&&!0!==a&&!1!==a||Sa(a)!==Sa(b))throw Error(["Cannot compare ",v.Ca(a)," to ",v.Ca(b)].join(""));return y(a,b);}function Sd(a,b){var c=J(a),d=J(b);if(c<d)a=-1;else if(c>d)a=1;else if(0===c)a=0;else a:for(d=0;;){var e=Rd(fd(a,d),fd(b,d));if(0===e&&d+1<c)d+=1;else{a=e;break a;}}return a;}function Td(a){return G.rd(a,Rd)?Rd:function(b,c){var d=a.rd?a.rd(b,c):a.call(null,b,c);return"number"===typeof d?d:r(d)?-1:r(a.rd?a.rd(c,b):a.call(null,c,b))?1:0;};}function je(a,b){if(H(b)){var c=He.Ca?He.Ca(b):He.call(null,b);ma(c,Td(a));return zd(H(c),Ad(b));}return Kc;}function xf(a,b){return yf(a,b);}function yf(a,b){return je(function(c,d){c=a.Ca?a.Ca(c):a.call(null,c);d=a.Ca?a.Ca(d):a.call(null,d);var e=Td(Rd);return e.rd?e.rd(c,d):e.call(null,c,d);},b);}function nd(a){switch(arguments.length){case 2:return md(arguments[0],arguments[1]);case 3:return od(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function md(a,b){var c=H(b);return c?(b=x(c),c=z(c),Ud?Ud(a,b,c):Vd.call(null,a,b,c)):a.i?a.i():a.call(null);}function od(a,b,c){for(c=H(c);;){if(c){var d=x(c);b=a.rd?a.rd(b,d):a.call(null,b,d);if(Vc(b))return Fb(b);c=z(c);}else return b;}}function Wd(a,b){a=qc(a);if(r(a.Ba()))for(var c=a.next();;){if(a.Ba()){var d=a.next();c=b.rd?b.rd(c,d):b.call(null,c,d);if(Vc(c))return Fb(c);}else return c;}else return b.i?b.i():b.call(null);}function Xd(a,b,c){for(a=qc(a);;){if(a.Ba()){var d=a.next();c=b.rd?b.rd(c,d):b.call(null,c,d);if(Vc(c))return Fb(c);}else return c;}}function Vd(a){switch(arguments.length){case 2:return Yd(arguments[0],arguments[1]);case 3:return Ud(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function Yd(a,b){return null!=b&&(b.j&524288||Fa===b.fd)?b.za(null,a):(0,_isArray["default"])(b)?$c(b,a):"string"===typeof b?$c(b,a):Ra(Kb,b)?Lb(b,a):Hc(b)?Wd(b,a):md(a,b);}function Ud(a,b,c){return null!=c&&(c.j&524288||Fa===c.fd)?c.Aa(null,a,b):(0,_isArray["default"])(c)?ad(c,a,b):"string"===typeof c?ad(c,a,b):Ra(Kb,c)?Lb(c,a,b):Hc(c)?Xd(c,a,b):od(a,b,c);}function Zd(a,b){return null!=b?Ob(b,a):!0;}function $d(a){return a;}function ae(a,b,c,d){a=a.Ca?a.Ca(b):a.call(null,b);c=Ud(a,c,d);return a.Ca?a.Ca(c):a.call(null,c);}var Bf=function Bf(a){switch(arguments.length){case 0:return Bf.i();case 1:return Bf.Ca(arguments[0]);case 2:return Bf.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Bf.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};Bf.i=function(){return 0;};Bf.Ca=function(a){return a;};Bf.rd=function(a,b){return a+b;};Bf.Nd=function(a,b,c){return Ud(Bf,a+b,c);};Bf.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};Bf.D=2;var Df=function Df(a){switch(arguments.length){case 1:return Df.Ca(arguments[0]);case 2:return Df.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Df.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};Df.Ca=function(a){return-a;};Df.rd=function(a,b){return a-b;};Df.Nd=function(a,b,c){return Ud(Df,a-b,c);};Df.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};Df.D=2;var yg=function yg(a){switch(arguments.length){case 0:return yg.i();case 1:return yg.Ca(arguments[0]);case 2:return yg.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return yg.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};yg.i=function(){return 1;};yg.Ca=function(a){return a;};yg.rd=function(a,b){return a*b;};yg.Nd=function(a,b,c){return Ud(yg,a*b,c);};yg.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};yg.D=2;var ah=function ah(a){switch(arguments.length){case 1:return ah.Ca(arguments[0]);case 2:return ah.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return ah.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};ah.Ca=function(a){return 1/a;};ah.rd=function(a,b){return a/b;};ah.Nd=function(a,b,c){return Ud(ah,a/b,c);};ah.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};ah.D=2;var ge=function ge(a){switch(arguments.length){case 1:return ge.Ca(arguments[0]);case 2:return ge.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return ge.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};ge.Ca=function(){return!0;};ge.rd=function(a,b){return a>b;};ge.Nd=function(a,b,c){for(;;){if(a>b){if(z(c))a=b,b=x(c),c=z(c);else return b>x(c);}else return!1;}};ge.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};ge.D=2;var zh=function zh(a){switch(arguments.length){case 1:return zh.Ca(arguments[0]);case 2:return zh.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return zh.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};zh.Ca=function(a){return a;};zh.rd=function(a,b){return a>b?a:b;};zh.Nd=function(a,b,c){return Ud(zh,a>b?a:b,c);};zh.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};zh.D=2;var qi=function qi(a){switch(arguments.length){case 1:return qi.Ca(arguments[0]);case 2:return qi.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return qi.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};qi.Ca=function(a){return a;};qi.rd=function(a,b){return a<b?a:b;};qi.Nd=function(a,b,c){return Ud(qi,a<b?a:b,c);};qi.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};qi.D=2;function he(a){if("number"===typeof a)return String.fromCharCode(a);if("string"===typeof a&&1===a.length)return a;throw Error("Argument to char must be a character or number");}function ie(a){return 0<=a?Math.floor(a):Math.ceil(a);}function ke(a){return ie((a-a%2)/2);}function le(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24;}var v=function v(a){switch(arguments.length){case 0:return v.i();case 1:return v.Ca(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return v.Nd(arguments[0],new Za((0,_slice["default"])(c).call(c,1),0,null));}};v.i=function(){return"";};v.Ca=function(a){return null==a?"":[a].join("");};v.Nd=function(a,b){for(a=new za(v.Ca(a));;){if(r(b))a=a.append(v.Ca(x(b))),b=z(b);else return a.toString();}};v.C=function(a){var b=x(a);a=z(a);return this.Nd(b,a);};v.D=1;function me(a){switch(arguments.length){case 2:return arguments[0].substring(arguments[1]);case 3:return arguments[0].substring(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function ne(a,b){return a.substring(b);}function oe(a,b,c){return a.substring(b,c);}function kd(a,b){if(Gd(b)){if(cd(a)&&cd(b)&&J(a)!==J(b))a=!1;else a:for(a=H(a),b=H(b);;){if(null==a){a=null==b;break a;}if(null!=b&&G.rd(x(a),x(b)))a=z(a),b=z(b);else{a=!1;break a;}}}else a=null;return Od(a);}function N(a,b,c,d,e){this.s=a;this.first=b;this.wb=c;this.count=d;this.u=e;this.j=65937646;this.G=8192;}h=N.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,this.count);}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){return 1===this.count?null:this.wb;};h.X=function(){return this.count;};h.lb=function(){return this.first;};h.mb=function(){return this.xa(null);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Jb(Kc,this.s);};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return this.first;};h.xa=function(){return 1===this.count?Kc:this.wb;};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new N(b,this.first,this.wb,this.count,this.u);};h.V=function(a,b){return new N(this.s,b,this,this.count+1,null);};function pe(a){return null!=a?a.j&33554432||Fa===a.Dd?!0:a.j?!1:Ra(Ub,a):Ra(Ub,a);}N.prototype[Wa]=function(){return Mc(this);};function qe(a){this.s=a;this.j=65937614;this.G=8192;}h=qe.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){return null;};h.X=function(){return 0;};h.lb=function(){return null;};h.mb=function(){throw Error("Can't pop empty list");};h.O=function(){return Qc;};h.N=function(a,b){return pe(b)||Gd(b)?null==H(b):!1;};h.$=function(){return this;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return null;};h.xa=function(){return Kc;};h.R=function(){return null;};h.T=function(a,b){return b===this.s?this:new qe(b);};h.V=function(a,b){return new N(this.s,b,null,1,null);};var Kc=new qe(null);qe.prototype[Wa]=function(){return Mc(this);};function re(a){return(null!=a?a.j&134217728||Fa===a.Gd||(a.j?0:Ra(Wb,a)):Ra(Wb,a))?(a=Xb(a))?a:Kc:Ud(sd,Kc,a);}var se=function se(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return se.Nd(0<c.length?new Za((0,_slice["default"])(c).call(c,0),0,null):null);};se.Nd=function(a){if(a instanceof Za&&0===a.A)var b=a.h;else a:for(b=[];;){if(null!=a)b.push(nb(a)),a=qb(a);else break a;}a=b.length;for(var c=Kc;;){if(0<a){var d=a-1;c=ib(c,b[a-1]);a=d;}else return c;}};se.D=0;se.C=function(a){return this.Nd(H(a));};function te(a,b,c,d){this.s=a;this.first=b;this.wb=c;this.u=d;this.j=65929452;this.G=8192;}h=te.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){return null==this.wb?null:H(this.wb);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return this.first;};h.xa=function(){return null==this.wb?Kc:this.wb;};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new te(b,this.first,this.wb,this.u);};h.V=function(a,b){return new te(null,b,this,null);};te.prototype[Wa]=function(){return Mc(this);};function ld(a,b){return null==b?new N(null,a,null,1,null):null!=b&&(b.j&64||Fa===b.Oa)?new te(null,a,b,null):new te(null,a,H(b),null);}function ue(a,b){if(a.ca===b.ca)return 0;var c=Qa(a.Ua);if(r(c?b.Ua:c))return-1;if(r(a.Ua)){if(Qa(b.Ua))return 1;c=y(a.Ua,b.Ua);return 0===c?y(a.name,b.name):c;}return y(a.name,b.name);}function E(a,b,c,d){this.Ua=a;this.name=b;this.ca=c;this.Ob=d;this.j=2153775105;this.G=4096;}h=E.prototype;h.toString=function(){return[":",v.Ca(this.ca)].join("");};h.N=function(a,b){return b instanceof E?this.ca===b.ca:!1;};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context17;return this.call.apply(this,(0,_concat["default"])(_context17=[this]).call(_context17,bb(b)));};h.Ca=function(a){return Ec.rd(a,this);};h.rd=function(a,b){return Ec.Md(a,this,b);};h.O=function(){var a=this.Ob;return null!=a?a:this.Ob=a=Bc(this)+2654435769|0;};h.Yb=function(){return this.name;};h.Zb=function(){return this.Ua;};h.K=function(a,b){return Yb(b,[":",v.Ca(this.ca)].join(""));};function ve(a,b){return a===b?!0:a instanceof E&&b instanceof E?a.ca===b.ca:!1;}function we(a){if(null!=a&&(a.G&4096||Fa===a.dd))return a.Zb(null);throw Error(["Doesn't support namespace: ",v.Ca(a)].join(""));}var xe=function xe(a){switch(arguments.length){case 1:return xe.Ca(arguments[0]);case 2:return xe.rd(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};xe.Ca=function(a){if(a instanceof E)return a;if(a instanceof Dc)return new E(we(a),ye.Ca?ye.Ca(a):ye.call(null,a),a.pb,null);if(G.rd("/",a))return new E(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new E(b[0],b[1],a,null):new E(null,b[0],a,null);}return null;};xe.rd=function(a,b){a=a instanceof E?ye.Ca?ye.Ca(a):ye.call(null,a):a instanceof Dc?ye.Ca?ye.Ca(a):ye.call(null,a):a;b=b instanceof E?ye.Ca?ye.Ca(b):ye.call(null,b):b instanceof Dc?ye.Ca?ye.Ca(b):ye.call(null,b):b;return new E(a,b,[r(a)?[v.Ca(a),"/"].join(""):null,v.Ca(b)].join(""),null);};xe.D=2;function ze(a,b,c,d){this.s=a;this.ec=b;this.M=c;this.u=d;this.j=32374988;this.G=1;}h=ze.prototype;h.toString=function(){return sc(this);};function Ae(a){null!=a.ec&&(a.M=a.ec.i?a.ec.i():a.ec.call(null),a.ec=null);return a.M;}h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){this.R(null);return null==this.M?null:z(this.M);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Jb(Kc,this.s);};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){this.R(null);return null==this.M?null:x(this.M);};h.xa=function(){this.R(null);return null!=this.M?Jc(this.M):Kc;};h.R=function(){Ae(this);if(null==this.M)return null;for(var a=this.M;;){if(a instanceof ze)a=Ae(a);else return this.M=a,H(this.M);}};h.T=function(a,b){var c=this;return b===this.s?c:new ze(b,function(){return c.R(null);},null,this.u);};h.V=function(a,b){return ld(b,this);};ze.prototype[Wa]=function(){return Mc(this);};function Be(a){this.Fb=a;this.end=0;this.j=2;this.G=0;}Be.prototype.add=function(a){this.Fb[this.end]=a;return this.end+=1;};Be.prototype.da=function(){var a=new Ce(this.Fb,0,this.end);this.Fb=null;return a;};Be.prototype.X=function(){return this.end;};function De(a){return new Be(Array(a));}function Ce(a,b,c){this.h=a;this.Pa=b;this.end=c;this.j=524306;this.G=0;}h=Ce.prototype;h.X=function(){return this.end-this.Pa;};h.H=function(a,b){return this.h[this.Pa+b];};h.ba=function(a,b,c){return 0<=b&&b<this.end-this.Pa?this.h[this.Pa+b]:c;};h.Oc=function(){if(this.Pa===this.end)throw Error("-drop-first of empty chunk");return new Ce(this.h,this.Pa+1,this.end);};h.za=function(a,b){return bd(this.h,b,this.h[this.Pa],this.Pa+1);};h.Aa=function(a,b,c){return bd(this.h,b,c,this.Pa);};function Ee(a,b,c,d){this.da=a;this.hb=b;this.s=c;this.u=d;this.j=31850732;this.G=1536;}h=Ee.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){return 1<eb(this.da)?new Ee(gc(this.da),this.hb,null,null):null==this.hb?null:Sb(this.hb);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.ha=function(){return kb(this.da,0);};h.xa=function(){return 1<eb(this.da)?new Ee(gc(this.da),this.hb,null,null):null==this.hb?Kc:this.hb;};h.R=function(){return this;};h.zc=function(){return this.da;};h.pc=function(){return null==this.hb?Kc:this.hb;};h.T=function(a,b){return b===this.s?this:new Ee(this.da,this.hb,b,this.u);};h.V=function(a,b){return ld(b,this);};h.Pc=function(){return null==this.hb?null:this.hb;};Ee.prototype[Wa]=function(){return Mc(this);};function Fe(a,b){return 0===eb(a)?b:new Ee(a,b,null,null);}function Ge(a,b){a.add(b);}function He(a){var b=[];for(a=H(a);;){if(null!=a)b.push(x(a)),a=z(a);else return b;}}function Ie(a,b){if(cd(b))return J(b);var c=0;for(b=H(b);;){if(null!=b&&c<a)c+=1,b=z(b);else return c;}}var Je=function Je(a){if(null==a)return null;var c=z(a);return null==c?H(x(a)):ld(x(a),Je.Ca?Je.Ca(c):Je.call(null,c));},Ke=function Ke(a){switch(arguments.length){case 0:return Ke.i();case 1:return Ke.Ca(arguments[0]);case 2:return Ke.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Ke.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};Ke.i=function(){return new ze(null,function(){return null;},null,null);};Ke.Ca=function(a){return new ze(null,function(){return a;},null,null);};Ke.rd=function(a,b){return new ze(null,function(){var c=H(a);return c?Kd(c)?Fe(hc(c),Ke.rd(ic(c),b)):ld(x(c),Ke.rd(Jc(c),b)):b;},null,null);};Ke.Nd=function(a,b,c){return function g(e,f){return new ze(null,function(){var k=H(e);return k?Kd(k)?Fe(hc(k),g(ic(k),f)):ld(x(k),g(Jc(k),f)):r(f)?g(x(f),z(f)):null;},null,null);}(Ke.rd(a,b),c);};Ke.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};Ke.D=2;var Le=function Le(a){switch(arguments.length){case 0:return Le.i();case 1:return Le.Ca(arguments[0]);case 2:return Le.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Le.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};Le.i=function(){return ac(td);};Le.Ca=function(a){return a;};Le.rd=function(a,b){return bc(a,b);};Le.Nd=function(a,b,c){for(;;){if(a=bc(a,b),r(c))b=x(c),c=z(c);else return a;}};Le.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};Le.D=2;function Me(a,b,c){return dc(a,b,c);}function Ne(a,b,c){var d=H(c);if(0===b)return a.i?a.i():a.call(null);c=nb(d);var e=ob(d);if(1===b)return a.Ca?a.Ca(c):a.call(null,c);d=nb(e);var f=ob(e);if(2===b)return a.rd?a.rd(c,d):a.call(null,c,d);e=nb(f);var g=ob(f);if(3===b)return a.Md?a.Md(c,d,e):a.call(null,c,d,e);f=nb(g);var k=ob(g);if(4===b)return a.v?a.v(c,d,e,f):a.call(null,c,d,e,f);g=nb(k);var l=ob(k);if(5===b)return a.I?a.I(c,d,e,f,g):a.call(null,c,d,e,f,g);k=nb(l);var n=ob(l);if(6===b)return a.fa?a.fa(c,d,e,f,g,k):a.call(null,c,d,e,f,g,k);l=nb(n);var q=ob(n);if(7===b)return a.ua?a.ua(c,d,e,f,g,k,l):a.call(null,c,d,e,f,g,k,l);n=nb(q);var t=ob(q);if(8===b)return a.aa?a.aa(c,d,e,f,g,k,l,n):a.call(null,c,d,e,f,g,k,l,n);q=nb(t);var u=ob(t);if(9===b)return a.va?a.va(c,d,e,f,g,k,l,n,q):a.call(null,c,d,e,f,g,k,l,n,q);t=nb(u);var A=ob(u);if(10===b)return a.ja?a.ja(c,d,e,f,g,k,l,n,q,t):a.call(null,c,d,e,f,g,k,l,n,q,t);u=nb(A);var K=ob(A);if(11===b)return a.ka?a.ka(c,d,e,f,g,k,l,n,q,t,u):a.call(null,c,d,e,f,g,k,l,n,q,t,u);A=nb(K);var U=ob(K);if(12===b)return a.la?a.la(c,d,e,f,g,k,l,n,q,t,u,A):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A);K=nb(U);var Z=ob(U);if(13===b)return a.ma?a.ma(c,d,e,f,g,k,l,n,q,t,u,A,K):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A,K);U=nb(Z);var ja=ob(Z);if(14===b)return a.na?a.na(c,d,e,f,g,k,l,n,q,t,u,A,K,U):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A,K,U);Z=nb(ja);var da=ob(ja);if(15===b)return a.oa?a.oa(c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z);ja=nb(da);var xa=ob(da);if(16===b)return a.pa?a.pa(c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja);da=nb(xa);var Ea=ob(xa);if(17===b)return a.qa?a.qa(c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da);xa=nb(Ea);var ka=ob(Ea);if(18===b)return a.ra?a.ra(c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa);Ea=nb(ka);ka=ob(ka);if(19===b)return a.sa?a.sa(c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea);var p=nb(ka);ob(ka);if(20===b)return a.ta?a.ta(c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea,p):a.call(null,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea,p);throw Error("Only up to 20 arguments supported on functions");}function Oe(a){return null!=a&&(a.j&128||Fa===a.$b)?a.wa(null):H(Jc(a));}function Pe(a,b,c){return null==c?a.Ca?a.Ca(b):a.call(a,b):Qe(a,b,nb(c),Oe(c));}function Qe(a,b,c,d){return null==d?a.rd?a.rd(b,c):a.call(a,b,c):Re(a,b,c,nb(d),Oe(d));}function Re(a,b,c,d,e){return null==e?a.Md?a.Md(b,c,d):a.call(a,b,c,d):Se(a,b,c,d,nb(e),Oe(e));}function Se(a,b,c,d,e,f){if(null==f)return a.v?a.v(b,c,d,e):a.call(a,b,c,d,e);var g=nb(f),k=z(f);if(null==k)return a.I?a.I(b,c,d,e,g):a.call(a,b,c,d,e,g);f=nb(k);var l=z(k);if(null==l)return a.fa?a.fa(b,c,d,e,g,f):a.call(a,b,c,d,e,g,f);k=nb(l);var n=z(l);if(null==n)return a.ua?a.ua(b,c,d,e,g,f,k):a.call(a,b,c,d,e,g,f,k);l=nb(n);var q=z(n);if(null==q)return a.aa?a.aa(b,c,d,e,g,f,k,l):a.call(a,b,c,d,e,g,f,k,l);n=nb(q);var t=z(q);if(null==t)return a.va?a.va(b,c,d,e,g,f,k,l,n):a.call(a,b,c,d,e,g,f,k,l,n);q=nb(t);var u=z(t);if(null==u)return a.ja?a.ja(b,c,d,e,g,f,k,l,n,q):a.call(a,b,c,d,e,g,f,k,l,n,q);t=nb(u);var A=z(u);if(null==A)return a.ka?a.ka(b,c,d,e,g,f,k,l,n,q,t):a.call(a,b,c,d,e,g,f,k,l,n,q,t);u=nb(A);var K=z(A);if(null==K)return a.la?a.la(b,c,d,e,g,f,k,l,n,q,t,u):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u);A=nb(K);var U=z(K);if(null==U)return a.ma?a.ma(b,c,d,e,g,f,k,l,n,q,t,u,A):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u,A);K=nb(U);var Z=z(U);if(null==Z)return a.na?a.na(b,c,d,e,g,f,k,l,n,q,t,u,A,K):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u,A,K);U=nb(Z);var ja=z(Z);if(null==ja)return a.oa?a.oa(b,c,d,e,g,f,k,l,n,q,t,u,A,K,U):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u,A,K,U);Z=nb(ja);var da=z(ja);if(null==da)return a.pa?a.pa(b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z);ja=nb(da);var xa=z(da);if(null==xa)return a.qa?a.qa(b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja);da=nb(xa);var Ea=z(xa);if(null==Ea)return a.ra?a.ra(b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja,da):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja,da);xa=nb(Ea);var ka=z(Ea);if(null==ka)return a.sa?a.sa(b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja,da,xa):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja,da,xa);Ea=nb(ka);ka=z(ka);if(null==ka)return a.ta?a.ta(b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea):a.call(a,b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea);b=[b,c,d,e,g,f,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea];for(c=ka;;){if(c)b.push(nb(c)),c=z(c);else break;}return a.apply(a,b);}function ab(a){switch(arguments.length){case 2:return Te(arguments[0],arguments[1]);case 3:return $a(arguments[0],arguments[1],arguments[2]);case 4:return Ue(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Ve(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:for(var b=[],c=arguments.length,d=0;;){if(d<c)b.push(arguments[d]),d+=1;else break;}return We(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],new Za((0,_slice["default"])(b).call(b,5),0,null));}}function Te(a,b){if(a.C){var c=a.D,d=Ie(c+1,b);return d<=c?Ne(a,d,b):a.C(b);}b=H(b);return null==b?a.i?a.i():a.call(a):Pe(a,nb(b),Oe(b));}function $a(a,b,c){if(a.C){b=ld(b,c);var d=a.D;c=Ie(d,c)+1;return c<=d?Ne(a,c,b):a.C(b);}return Pe(a,b,H(c));}function Ue(a,b,c,d){return a.C?(b=ld(b,ld(c,d)),c=a.D,d=2+Ie(c-1,d),d<=c?Ne(a,d,b):a.C(b)):Qe(a,b,c,H(d));}function Ve(a,b,c,d,e){return a.C?(b=ld(b,ld(c,ld(d,e))),c=a.D,e=3+Ie(c-2,e),e<=c?Ne(a,e,b):a.C(b)):Re(a,b,c,d,H(e));}function We(a,b,c,d,e,f){return a.C?(f=Je(f),b=ld(b,ld(c,ld(d,ld(e,f)))),c=a.D,f=4+Ie(c-3,f),f<=c?Ne(a,f,b):a.C(b)):Se(a,b,c,d,e,Je(f));}function D(a){return null!=a&&(a.j&64||Fa===a.Oa)?Te(uh,a):a;}function Xe(a,b){return!G.rd(a,b);}function Ye(a){return H(a)?a:null;}function Ze(){if("undefined"===typeof Aa||"undefined"===typeof Ba||"undefined"===typeof B)B=function B(a){this.Rd=a;this.j=393216;this.G=0;},B.prototype.T=function(a,b){return new B(b);},B.prototype.S=function(){return this.Rd;},B.prototype.Ba=function(){return!1;},B.prototype.next=function(){return Error("No such element");},B.prototype.remove=function(){return Error("Unsupported operation");},B.Sc=!0,B.qc="cljs.core/t_cljs$core6289",B.nd=function(a){return Yb(a,"cljs.core/t_cljs$core6289");};return new B($e);}function af(a,b){for(;;){if(null==H(b))return!0;var c=x(b);c=a.Ca?a.Ca(c):a.call(null,c);if(r(c))b=z(b);else return!1;}}function ri(a,b){return!af(a,b);}function bf(a,b){for(;;){if(b=H(b)){var c=x(b);c=a.Ca?a.Ca(c):a.call(null,c);if(r(c))return c;b=z(b);}else return null;}}function cf(a){if(Pd(a))return 0===(a&1);throw Error(["Argument must be an integer: ",v.Ca(a)].join(""));}function df(a){return function(){function b(g,k){return Qa(a.rd?a.rd(g,k):a.call(null,g,k));}function c(g){return Qa(a.Ca?a.Ca(g):a.call(null,g));}function d(){return Qa(a.i?a.i():a.call(null));}var e=null,f=function(){function g(l,n,q){var t=null;if(2<arguments.length){t=0;for(var u=Array(arguments.length-2);t<u.length;){u[t]=arguments[t+2],++t;}t=new Za(u,0,null);}return k.call(this,l,n,t);}function k(l,n,q){return Qa(Ue(a,l,n,q));}g.D=2;g.C=function(l){var n=x(l);l=z(l);var q=x(l);l=Jc(l);return k(n,q,l);};g.Nd=k;return g;}();e=function e(g,k,l){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,g);case 2:return b.call(this,g,k);default:var n=null;if(2<arguments.length){n=0;for(var q=Array(arguments.length-2);n<q.length;){q[n]=arguments[n+2],++n;}n=new Za(q,0,null);}return f.Nd(g,k,n);}};e.D=2;e.C=f.C;e.i=d;e.Ca=c;e.rd=b;e.Nd=f.Nd;return e;}();}var ef=function ef(a){switch(arguments.length){case 0:return ef.i();case 1:return ef.Ca(arguments[0]);case 2:return ef.rd(arguments[0],arguments[1]);case 3:return ef.Md(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return ef.Nd(arguments[0],arguments[1],arguments[2],new Za((0,_slice["default"])(c).call(c,3),0,null));}};ef.i=function(){return $d;};ef.Ca=function(a){return a;};ef.rd=function(a,b){return function(){function c(l,n,q){l=b.Md?b.Md(l,n,q):b.call(null,l,n,q);return a.Ca?a.Ca(l):a.call(null,l);}function d(l,n){l=b.rd?b.rd(l,n):b.call(null,l,n);return a.Ca?a.Ca(l):a.call(null,l);}function e(l){l=b.Ca?b.Ca(l):b.call(null,l);return a.Ca?a.Ca(l):a.call(null,l);}function f(){var l=b.i?b.i():b.call(null);return a.Ca?a.Ca(l):a.call(null,l);}var g=null,k=function(){function l(q,t,u,A){var K=null;if(3<arguments.length){K=0;for(var U=Array(arguments.length-3);K<U.length;){U[K]=arguments[K+3],++K;}K=new Za(U,0,null);}return n.call(this,q,t,u,K);}function n(q,t,u,A){q=Ve(b,q,t,u,A);return a.Ca?a.Ca(q):a.call(null,q);}l.D=3;l.C=function(q){var t=x(q);q=z(q);var u=x(q);q=z(q);var A=x(q);q=Jc(q);return n(t,u,A,q);};l.Nd=n;return l;}();g=function g(l,n,q,t){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,n);case 3:return c.call(this,l,n,q);default:var u=null;if(3<arguments.length){u=0;for(var A=Array(arguments.length-3);u<A.length;){A[u]=arguments[u+3],++u;}u=new Za(A,0,null);}return k.Nd(l,n,q,u);}};g.D=3;g.C=k.C;g.i=f;g.Ca=e;g.rd=d;g.Md=c;g.Nd=k.Nd;return g;}();};ef.Md=function(a,b,c){return function(){function d(n,q,t){n=c.Md?c.Md(n,q,t):c.call(null,n,q,t);n=b.Ca?b.Ca(n):b.call(null,n);return a.Ca?a.Ca(n):a.call(null,n);}function e(n,q){n=c.rd?c.rd(n,q):c.call(null,n,q);n=b.Ca?b.Ca(n):b.call(null,n);return a.Ca?a.Ca(n):a.call(null,n);}function f(n){n=c.Ca?c.Ca(n):c.call(null,n);n=b.Ca?b.Ca(n):b.call(null,n);return a.Ca?a.Ca(n):a.call(null,n);}function g(){var n=c.i?c.i():c.call(null);n=b.Ca?b.Ca(n):b.call(null,n);return a.Ca?a.Ca(n):a.call(null,n);}var k=null,l=function(){function n(t,u,A,K){var U=null;if(3<arguments.length){U=0;for(var Z=Array(arguments.length-3);U<Z.length;){Z[U]=arguments[U+3],++U;}U=new Za(Z,0,null);}return q.call(this,t,u,A,U);}function q(t,u,A,K){t=Ve(c,t,u,A,K);t=b.Ca?b.Ca(t):b.call(null,t);return a.Ca?a.Ca(t):a.call(null,t);}n.D=3;n.C=function(t){var u=x(t);t=z(t);var A=x(t);t=z(t);var K=x(t);t=Jc(t);return q(u,A,K,t);};n.Nd=q;return n;}();k=function k(n,q,t,u){switch(arguments.length){case 0:return g.call(this);case 1:return f.call(this,n);case 2:return e.call(this,n,q);case 3:return d.call(this,n,q,t);default:var A=null;if(3<arguments.length){A=0;for(var K=Array(arguments.length-3);A<K.length;){K[A]=arguments[A+3],++A;}A=new Za(K,0,null);}return l.Nd(n,q,t,A);}};k.D=3;k.C=l.C;k.i=g;k.Ca=f;k.rd=e;k.Md=d;k.Nd=l.Nd;return k;}();};ef.Nd=function(a,b,c,d){var e=re(ld(a,ld(b,ld(c,d))));return function(){function f(k){var l=null;if(0<arguments.length){l=0;for(var n=Array(arguments.length-0);l<n.length;){n[l]=arguments[l+0],++l;}l=new Za(n,0,null);}return g.call(this,l);}function g(k){k=Te(x(e),k);for(var l=z(e);;){if(l){var n=x(l);k=n.Ca?n.Ca(k):n.call(null,k);l=z(l);}else return k;}}f.D=0;f.C=function(k){k=H(k);return g(k);};f.Nd=g;return f;}();};ef.C=function(a){var b=x(a),c=z(a);a=x(c);var d=z(c);c=x(d);d=z(d);return this.Nd(b,a,c,d);};ef.D=3;function ff(a,b){return function(){function c(l,n,q){return a.v?a.v(b,l,n,q):a.call(null,b,l,n,q);}function d(l,n){return a.Md?a.Md(b,l,n):a.call(null,b,l,n);}function e(l){return a.rd?a.rd(b,l):a.call(null,b,l);}function f(){return a.Ca?a.Ca(b):a.call(null,b);}var g=null,k=function(){function l(q,t,u,A){var K=null;if(3<arguments.length){K=0;for(var U=Array(arguments.length-3);K<U.length;){U[K]=arguments[K+3],++K;}K=new Za(U,0,null);}return n.call(this,q,t,u,K);}function n(q,t,u,A){return We(a,b,q,t,u,M([A]));}l.D=3;l.C=function(q){var t=x(q);q=z(q);var u=x(q);q=z(q);var A=x(q);q=Jc(q);return n(t,u,A,q);};l.Nd=n;return l;}();g=function g(l,n,q,t){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,n);case 3:return c.call(this,l,n,q);default:var u=null;if(3<arguments.length){u=0;for(var A=Array(arguments.length-3);u<A.length;){A[u]=arguments[u+3],++u;}u=new Za(A,0,null);}return k.Nd(l,n,q,u);}};g.D=3;g.C=k.C;g.i=f;g.Ca=e;g.rd=d;g.Md=c;g.Nd=k.Nd;return g;}();}function gf(a,b){var c=hf;return function(){function d(n,q,t){return c.I?c.I(a,b,n,q,t):c.call(null,a,b,n,q,t);}function e(n,q){return c.v?c.v(a,b,n,q):c.call(null,a,b,n,q);}function f(n){return c.Md?c.Md(a,b,n):c.call(null,a,b,n);}function g(){return c.rd?c.rd(a,b):c.call(null,a,b);}var k=null,l=function(){function n(t,u,A,K){var U=null;if(3<arguments.length){U=0;for(var Z=Array(arguments.length-3);U<Z.length;){Z[U]=arguments[U+3],++U;}U=new Za(Z,0,null);}return q.call(this,t,u,A,U);}function q(t,u,A,K){return We(c,a,b,t,u,M([A,K]));}n.D=3;n.C=function(t){var u=x(t);t=z(t);var A=x(t);t=z(t);var K=x(t);t=Jc(t);return q(u,A,K,t);};n.Nd=q;return n;}();k=function k(n,q,t,u){switch(arguments.length){case 0:return g.call(this);case 1:return f.call(this,n);case 2:return e.call(this,n,q);case 3:return d.call(this,n,q,t);default:var A=null;if(3<arguments.length){A=0;for(var K=Array(arguments.length-3);A<K.length;){K[A]=arguments[A+3],++A;}A=new Za(K,0,null);}return l.Nd(n,q,t,A);}};k.D=3;k.C=l.C;k.i=g;k.Ca=f;k.rd=e;k.Md=d;k.Nd=l.Nd;return k;}();}function si(a,b){return function f(d,e){return new ze(null,function(){var g=H(e);if(g){if(Kd(g)){for(var k=hc(g),l=J(k),n=De(l),q=0;;){if(q<l)Ge(n,function(){var t=d+q,u=kb(k,q);return a.rd?a.rd(t,u):a.call(null,t,u);}()),q+=1;else break;}return Fe(n.da(),f(d+l,ic(g)));}return ld(function(){var t=x(g);return a.rd?a.rd(d,t):a.call(null,d,t);}(),f(d+1,Jc(g)));}return null;},null,null);}(0,b);}function jf(a){this.state=a;this.Xc=this.wd=this.s=null;this.G=16386;this.j=6455296;}jf.prototype.N=function(a,b){return this===b;};jf.prototype.Xb=function(){return this.state;};jf.prototype.S=function(){return this.s;};jf.prototype.O=function(){return w(this);};function kf(a){return new jf(a);}function lf(a,b){if(a instanceof jf){var c=a.wd;if(null!=c&&!r(c.Ca?c.Ca(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;if(null!=a.Xc)a:for(var d=H(a.Xc),e=null,f=0,g=0;;){if(g<f){var k=e.H(null,g),l=O(k,0,null);k=O(k,1,null);k.v?k.v(l,a,c,b):k.call(null,l,a,c,b);g+=1;}else if(d=H(d))Kd(d)?(e=hc(d),d=ic(d),l=e,f=J(e),e=l):(e=x(d),l=O(e,0,null),k=O(e,1,null),k.v?k.v(l,a,c,b):k.call(null,l,a,c,b),d=z(d),e=null,f=0),g=0;else break a;}return b;}return lc(a,b);}var mf=function mf(a){switch(arguments.length){case 2:return mf.rd(arguments[0],arguments[1]);case 3:return mf.Md(arguments[0],arguments[1],arguments[2]);case 4:return mf.v(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return mf.Nd(arguments[0],arguments[1],arguments[2],arguments[3],new Za((0,_slice["default"])(c).call(c,4),0,null));}};mf.rd=function(a,b){if(a instanceof jf){var c=a.state;b=b.Ca?b.Ca(c):b.call(null,c);a=lf(a,b);}else a=nc(a,b);return a;};mf.Md=function(a,b,c){if(a instanceof jf){var d=a.state;b=b.rd?b.rd(d,c):b.call(null,d,c);a=lf(a,b);}else a=nc(a,b,c);return a;};mf.v=function(a,b,c,d){if(a instanceof jf){var e=a.state;b=b.Md?b.Md(e,c,d):b.call(null,e,c,d);a=lf(a,b);}else a=nc(a,b,c,d);return a;};mf.Nd=function(a,b,c,d,e){return a instanceof jf?lf(a,Ve(b,a.state,c,d,e)):nc(a,b,c,d,e);};mf.C=function(a){var b=x(a),c=z(a);a=x(c);var d=z(c);c=x(d);var e=z(d);d=x(e);e=z(e);return this.Nd(b,a,c,d,e);};mf.D=4;var nf=function nf(a){switch(arguments.length){case 1:return nf.Ca(arguments[0]);case 2:return nf.rd(arguments[0],arguments[1]);case 3:return nf.Md(arguments[0],arguments[1],arguments[2]);case 4:return nf.v(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return nf.Nd(arguments[0],arguments[1],arguments[2],arguments[3],new Za((0,_slice["default"])(c).call(c,4),0,null));}};nf.Ca=function(a){return function(b){return function(){function c(k,l){l=a.Ca?a.Ca(l):a.call(null,l);return b.rd?b.rd(k,l):b.call(null,k,l);}function d(k){return b.Ca?b.Ca(k):b.call(null,k);}function e(){return b.i?b.i():b.call(null);}var f=null,g=function(){function k(n,q,t){var u=null;if(2<arguments.length){u=0;for(var A=Array(arguments.length-2);u<A.length;){A[u]=arguments[u+2],++u;}u=new Za(A,0,null);}return l.call(this,n,q,u);}function l(n,q,t){q=$a(a,q,t);return b.rd?b.rd(n,q):b.call(null,n,q);}k.D=2;k.C=function(n){var q=x(n);n=z(n);var t=x(n);n=Jc(n);return l(q,t,n);};k.Nd=l;return k;}();f=function f(k,l,n){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var q=null;if(2<arguments.length){q=0;for(var t=Array(arguments.length-2);q<t.length;){t[q]=arguments[q+2],++q;}q=new Za(t,0,null);}return g.Nd(k,l,q);}};f.D=2;f.C=g.C;f.i=e;f.Ca=d;f.rd=c;f.Nd=g.Nd;return f;}();};};nf.rd=function(a,b){return new ze(null,function(){var c=H(b);if(c){if(Kd(c)){for(var d=hc(c),e=J(d),f=De(e),g=0;;){if(g<e)Ge(f,function(){var k=kb(d,g);return a.Ca?a.Ca(k):a.call(null,k);}()),g+=1;else break;}return Fe(f.da(),nf.rd(a,ic(c)));}return ld(function(){var k=x(c);return a.Ca?a.Ca(k):a.call(null,k);}(),nf.rd(a,Jc(c)));}return null;},null,null);};nf.Md=function(a,b,c){return new ze(null,function(){var d=H(b),e=H(c);if(d&&e){var f=x(d);var g=x(e);f=a.rd?a.rd(f,g):a.call(null,f,g);d=ld(f,nf.Md(a,Jc(d),Jc(e)));}else d=null;return d;},null,null);};nf.v=function(a,b,c,d){return new ze(null,function(){var e=H(b),f=H(c),g=H(d);if(e&&f&&g){var k=x(e);var l=x(f),n=x(g);k=a.Md?a.Md(k,l,n):a.call(null,k,l,n);e=ld(k,nf.v(a,Jc(e),Jc(f),Jc(g)));}else e=null;return e;},null,null);};nf.Nd=function(a,b,c,d,e){return nf.rd(function(f){return Te(a,f);},function k(g){return new ze(null,function(){var l=nf.rd(H,g);return af($d,l)?ld(nf.rd(x,l),k(nf.rd(Jc,l))):null;},null,null);}(sd.Nd(e,d,M([c,b]))));};nf.C=function(a){var b=x(a),c=z(a);a=x(c);var d=z(c);c=x(d);var e=z(d);d=x(e);e=z(e);return this.Nd(b,a,c,d,e);};nf.D=4;function of(a,b){return new ze(null,function(){if(0<a){var c=H(b);return c?ld(x(c),of(a-1,Jc(c))):null;}return null;},null,null);}function pf(a,b){return new ze(null,function(){a:for(var c=a,d=b;;){if(d=H(d),0<c&&d)--c,d=Jc(d);else break a;}return d;},null,null);}function qf(a){return nf.Md(function(b){return b;},a,pf(2,a));}function rf(a,b,c,d){this.s=a;this.count=b;this.g=c;this.next=d;this.u=null;this.j=32374988;this.G=1;}h=rf.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,this.count);}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){return null==this.next?1<this.count?this.next=new rf(null,this.count-1,this.g,null):-1===this.count?this:null:this.next;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){if(-1===this.count)for(var c=b.rd?b.rd(this.g,this.g):b.call(null,this.g,this.g);;){if(Vc(c))return Fb(c);c=b.rd?b.rd(c,this.g):b.call(null,c,this.g);}else for(a=1,c=this.g;;){if(a<this.count){c=b.rd?b.rd(c,this.g):b.call(null,c,this.g);if(Vc(c))return Fb(c);a+=1;}else return c;}};h.Aa=function(a,b,c){if(-1===this.count)for(c=b.rd?b.rd(c,this.g):b.call(null,c,this.g);;){if(Vc(c))return Fb(c);c=b.rd?b.rd(c,this.g):b.call(null,c,this.g);}else for(a=0;;){if(a<this.count){c=b.rd?b.rd(c,this.g):b.call(null,c,this.g);if(Vc(c))return Fb(c);a+=1;}else return c;}};h.ha=function(){return this.g;};h.xa=function(){return null==this.next?1<this.count?this.next=new rf(null,this.count-1,this.g,null):-1===this.count?this:Kc:this.next;};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new rf(b,this.count,this.g,this.next);};h.V=function(a,b){return ld(b,this);};function ti(a){return new rf(null,-1,a,null);}var sf={};function tf(a,b,c,d,e){this.s=a;this.f=b;this.Gc=c;this.vc=d;this.next=e;this.j=26083532;this.G=1;}h=tf.prototype;h.toString=function(){return sc(this);};h.S=function(){return this.s;};h.wa=function(){return this.xa(null);};h.$=function(){return Kc;};h.za=function(a,b){a=this.ha(null);var c=this.f.Ca?this.f.Ca(a):this.f.call(null,a);for(a=b.rd?b.rd(a,c):b.call(null,a,c);;){if(Vc(a))return Fb(a);c=this.f.Ca?this.f.Ca(c):this.f.call(null,c);a=b.rd?b.rd(a,c):b.call(null,a,c);}};h.Aa=function(a,b,c){a=this.ha(null);for(c=b.rd?b.rd(c,a):b.call(null,c,a);;){if(Vc(c))return Fb(c);a=this.f.Ca?this.f.Ca(a):this.f.call(null,a);c=b.rd?b.rd(c,a):b.call(null,c,a);}};h.ha=function(){sf===this.vc&&(this.vc=this.f.Ca?this.f.Ca(this.Gc):this.f.call(null,this.Gc));return this.vc;};h.xa=function(){null==this.next&&(this.next=new tf(null,this.f,this.ha(null),sf,null));return this.next;};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new tf(b,this.f,this.Gc,this.vc,this.next);};h.V=function(a,b){return ld(b,this);};function Ki(a,b){return new tf(null,a,null,b,null);}var uf=function uf(a){switch(arguments.length){case 0:return uf.i();case 1:return uf.Ca(arguments[0]);case 2:return uf.rd(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return uf.Nd(arguments[0],arguments[1],new Za((0,_slice["default"])(c).call(c,2),0,null));}};uf.i=function(){return Kc;};uf.Ca=function(a){return new ze(null,function(){return a;},null,null);};uf.rd=function(a,b){return new ze(null,function(){var c=H(a),d=H(b);return c&&d?ld(x(c),ld(x(d),uf.rd(Jc(c),Jc(d)))):null;},null,null);};uf.Nd=function(a,b,c){return new ze(null,function(){var d=nf.rd(H,sd.Nd(c,b,M([a])));return af($d,d)?Ke.rd(nf.rd(x,d),Te(uf,nf.rd(Jc,d))):null;},null,null);};uf.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};uf.D=2;function vf(a,b){return Te(Ke,$a(nf,a,b));}function wf(a,b){return new ze(null,function(){var c=H(b);if(c){if(Kd(c)){for(var d=hc(c),e=J(d),f=De(e),g=0;;){if(g<e){var k=kb(d,g);k=a.Ca?a.Ca(k):a.call(null,k);r(k)&&(k=kb(d,g),f.add(k));g+=1;}else break;}return Fe(f.da(),wf(a,ic(c)));}d=x(c);c=Jc(c);return r(a.Ca?a.Ca(d):a.call(null,d))?ld(d,wf(a,c)):wf(a,c);}return null;},null,null);}function ui(a,b){return function e(d){return new ze(null,function(){return ld(d,r(a.Ca?a.Ca(d):a.call(null,d))?vf(e,M([H.Ca?H.Ca(d):H.call(null,d)])):null);},null,null);}(b);}function Ii(a){return wf(function(b){return!Gd(b);},Jc(ui(Gd,a)));}var zf=function zf(a){switch(arguments.length){case 0:return zf.i();case 1:return zf.Ca(arguments[0]);case 2:return zf.rd(arguments[0],arguments[1]);case 3:return zf.Md(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};zf.i=function(){return td;};zf.Ca=function(a){return a;};zf.rd=function(a,b){return null!=a?null!=a&&(a.G&4||Fa===a.Zc)?Jb(cc(Ud(bc,ac(a),b)),Ad(a)):Ud(ib,a,b):Ud(sd,a,b);};zf.Md=function(a,b,c){return null!=a&&(a.G&4||Fa===a.Zc)?Jb(cc(ae(b,Le,ac(a),c)),Ad(a)):ae(b,sd,a,c);};zf.D=3;function Af(a,b){return cc(Ud(function(c,d){return Le.rd(c,a.Ca?a.Ca(d):a.call(null,d));},ac(td),b));}var Ji=function Ji(a,b,c){var e=H(b);b=x(e);var f=z(e);if(f){e=vd.Md;var g=Ec.rd(a,b);c=Ji.Md?Ji.Md(g,f,c):Ji.call(null,g,f,c);a=e.call(vd,a,b,c);}else a=vd.Md(a,b,c);return a;},Cf=function Cf(a){switch(arguments.length){case 3:return Cf.Md(arguments[0],arguments[1],arguments[2]);case 4:return Cf.v(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Cf.I(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return Cf.fa(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Cf.Nd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],new Za((0,_slice["default"])(c).call(c,6),0,null));}};Cf.Md=function(a,b,c){var d=H(b);b=x(d);if(d=z(d))a=vd.Md(a,b,Cf.Md(Ec.rd(a,b),d,c));else{d=vd.Md;var e=Ec.rd(a,b);c=c.Ca?c.Ca(e):c.call(null,e);a=d.call(vd,a,b,c);}return a;};Cf.v=function(a,b,c,d){var e=H(b);b=x(e);if(e=z(e))a=vd.Md(a,b,Cf.v(Ec.rd(a,b),e,c,d));else{e=vd.Md;var f=Ec.rd(a,b);c=c.rd?c.rd(f,d):c.call(null,f,d);a=e.call(vd,a,b,c);}return a;};Cf.I=function(a,b,c,d,e){var f=H(b);b=x(f);if(f=z(f))a=vd.Md(a,b,Cf.I(Ec.rd(a,b),f,c,d,e));else{f=vd.Md;var g=Ec.rd(a,b);c=c.Md?c.Md(g,d,e):c.call(null,g,d,e);a=f.call(vd,a,b,c);}return a;};Cf.fa=function(a,b,c,d,e,f){var g=H(b);b=x(g);if(g=z(g))a=vd.Md(a,b,Cf.fa(Ec.rd(a,b),g,c,d,e,f));else{g=vd.Md;var k=Ec.rd(a,b);c=c.v?c.v(k,d,e,f):c.call(null,k,d,e,f);a=g.call(vd,a,b,c);}return a;};Cf.Nd=function(a,b,c,d,e,f,g){var k=H(b);b=x(k);return(k=z(k))?vd.Md(a,b,We(Cf,Ec.rd(a,b),k,c,d,M([e,f,g]))):vd.Md(a,b,We(c,Ec.rd(a,b),d,e,f,M([g])));};Cf.C=function(a){var b=x(a),c=z(a);a=x(c);var d=z(c);c=x(d);var e=z(d);d=x(e);var f=z(e);e=x(f);var g=z(f);f=x(g);g=z(g);return this.Nd(b,a,c,d,e,f,g);};Cf.D=6;function Mi(a,b){var c=Vi,d=vd.Md,e=Ec.rd(a,c);b=b.Ca?b.Ca(e):b.call(null,e);return d.call(vd,a,c,b);}function Ef(a,b){this.ea=a;this.h=b;}function Ff(a){return new Ef(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]);}function Gf(a){return new Ef(a.ea,bb(a.h));}function Hf(a){a=a.l;return 32>a?0:a-1>>>5<<5;}function If(a,b,c){for(;;){if(0===b)return c;var d=Ff(a);d.h[0]=c;c=d;b-=5;}}var Jf=function Jf(a,b,c,d){var f=Gf(c),g=a.l-1>>>b&31;5===b?f.h[g]=d:(c=c.h[g],null!=c?(b-=5,a=Jf.v?Jf.v(a,b,c,d):Jf.call(null,a,b,c,d)):a=If(null,b-5,d),f.h[g]=a);return f;};function Kf(a,b){if(b>=Hf(a))return a.Sa;var c=a.root;for(a=a.shift;;){if(0<a){var d=a-5;c=c.h[b>>>a&31];a=d;}else return c.h;}}function Lf(a,b){if(0<=b&&b<a.l)b=Kf(a,b);else throw a=a.l,Error(["No item ",v.Ca(b)," in vector of length ",v.Ca(a)].join(""));return b;}var Mf=function Mf(a,b,c,d,e){var g=Gf(c);if(0===b)g.h[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.h[k];a=Mf.I?Mf.I(a,b,c,d,e):Mf.call(null,a,b,c,d,e);g.h[k]=a;}return g;},Nf=function Nf(a,b,c){var e=a.l-2>>>b&31;if(5<b){b-=5;var f=c.h[e];a=Nf.Md?Nf.Md(a,b,f):Nf.call(null,a,b,f);if(null==a&&0===e)return null;c=Gf(c);c.h[e]=a;return c;}if(0===e)return null;c=Gf(c);c.h[e]=null;return c;};function Of(a,b,c){this.xc=this.A=0;this.h=a;this.Na=b;this.start=0;this.end=c;}Of.prototype.Ba=function(){return this.A<this.end;};Of.prototype.next=function(){32===this.A-this.xc&&(this.h=Kf(this.Na,this.A),this.xc+=32);var a=this.h[this.A&31];this.A+=1;return a;};function Pf(a,b,c,d){return c<d?Qf(a,b,fd(a,c),c+1,d):b.i?b.i():b.call(null);}function Qf(a,b,c,d,e){var f=c;c=d;for(d=Kf(a,d);;){if(c<e){var g=c&31;d=0===g?Kf(a,c):d;g=d[g];f=b.rd?b.rd(f,g):b.call(null,f,g);if(Vc(f))return Fb(f);c+=1;}else return f;}}function Q(a,b,c,d,e,f){this.s=a;this.l=b;this.shift=c;this.root=d;this.Sa=e;this.u=f;this.j=167666463;this.G=139268;}h=Q.prototype;h.Ab=function(a,b){return 0<=b&&b<this.l?new Sf(b,Kf(this,b)[b&31]):null;};h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){return"number"===typeof b?this.ba(null,b,c):c;};h.Za=function(a,b,c){a=0;for(var d=c;;){if(a<this.l){var e=Kf(this,a);c=e.length;a:for(var f=0;;){if(f<c){var g=f+a,k=e[f];d=b.Md?b.Md(d,g,k):b.call(null,d,g,k);if(Vc(d)){e=d;break a;}f+=1;}else{e=d;break a;}}if(Vc(e))return Fb(e);a+=c;d=e;}else return d;}};h.H=function(a,b){return Lf(this,b)[b&31];};h.ba=function(a,b,c){return 0<=b&&b<this.l?Kf(this,b)[b&31]:c;};h.sb=function(a,b){if(0<=a&&a<this.l){if(Hf(this)<=a){var c=bb(this.Sa);c[a&31]=b;return new Q(this.s,this.l,this.shift,this.root,c,null);}return new Q(this.s,this.l,this.shift,Mf(this,this.shift,this.root,a,b),this.Sa,null);}if(a===this.l)return this.V(null,b);throw Error(["Index ",v.Ca(a)," out of bounds  [0,",v.Ca(this.l),"]"].join(""));};h.Ta=function(){var a=this.l;return new Of(0<J(this)?Kf(this,0):null,this,a);};h.S=function(){return this.s;};h.X=function(){return this.l;};h.lb=function(){return 0<this.l?this.H(null,this.l-1):null;};h.mb=function(){var _context18;if(0===this.l)throw Error("Can't pop empty vector");if(1===this.l)return Jb(td,this.s);if(1<this.l-Hf(this))return new Q(this.s,this.l-1,this.shift,this.root,(0,_slice["default"])(_context18=this.Sa).call(_context18,0,-1),null);var a=Kf(this,this.l-2),b=Nf(this,this.shift,this.root);b=null==b?S:b;var c=this.l-1;return 5<this.shift&&null==b.h[1]?new Q(this.s,c,this.shift-5,b.h[0],a,null):new Q(this.s,c,this.shift,b,a,null);};h.Bb=function(){return 0<this.l?new jd(this,this.l-1,null):null;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){if(b instanceof Q){if(this.l===J(b))for(a=this.Ta(null),b=b.Ta(null);;){if(a.Ba()){var c=a.next(),d=b.next();if(!G.rd(c,d))return!1;}else return!0;}else return!1;}else return kd(this,b);};h.Pb=function(){return new Tf(this.l,this.shift,Uf.Ca?Uf.Ca(this.root):Uf.call(null,this.root),Vf.Ca?Vf.Ca(this.Sa):Vf.call(null,this.Sa));};h.$=function(){return Jb(td,this.s);};h.za=function(a,b){return Pf(this,b,0,this.l);};h.Aa=function(a,b,c){a=0;for(var d=c;;){if(a<this.l){var e=Kf(this,a);c=e.length;a:for(var f=0;;){if(f<c){var g=e[f];d=b.rd?b.rd(d,g):b.call(null,d,g);if(Vc(d)){e=d;break a;}f+=1;}else{e=d;break a;}}if(Vc(e))return Fb(e);a+=c;d=e;}else return d;}};h.ya=function(a,b,c){if("number"===typeof b)return this.sb(b,c);throw Error("Vector's key for assoc must be a number.");};h.Qd=function(a,b){return Pd(b)?0<=b&&b<this.l:!1;};h.R=function(){if(0===this.l)return null;if(32>=this.l)return new Za(this.Sa,0,null);a:{var a=this.root;for(var b=this.shift;;){if(0<b)b-=5,a=a.h[0];else{a=a.h;break a;}}}return Wf?Wf(this,a,0,0):Xf.call(null,this,a,0,0);};h.T=function(a,b){return b===this.s?this:new Q(b,this.l,this.shift,this.root,this.Sa,this.u);};h.V=function(a,b){if(32>this.l-Hf(this)){a=this.Sa.length;for(var c=Array(a+1),d=0;;){if(d<a)c[d]=this.Sa[d],d+=1;else break;}c[a]=b;return new Q(this.s,this.l+1,this.shift,this.root,c,null);}a=(c=this.l>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=Ff(null),c.h[0]=this.root,d=If(null,this.shift,new Ef(null,this.Sa)),c.h[1]=d):c=Jf(this,this.shift,this.root,new Ef(null,this.Sa));return new Q(this.s,this.l+1,a,c,[b],null);};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context19;return this.call.apply(this,(0,_concat["default"])(_context19=[this]).call(_context19,bb(b)));};h.Ca=function(a){return this.H(null,a);};h.rd=function(a,b){return this.ba(null,a,b);};var S=new Ef(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),td=new Q(null,0,5,S,[],Qc);Q.prototype[Wa]=function(){return Mc(this);};function Yf(a){if(r(Zf.Ca?Zf.Ca(a):Zf.call(null,a)))a=new Q(null,2,5,S,[$f.Ca?$f.Ca(a):$f.call(null,a),ag.Ca?ag.Ca(a):ag.call(null,a)],null);else if(Jd(a))a=zd(a,null);else if((0,_isArray["default"])(a))a:{var b=a.length;if(32>b)a=new Q(null,b,5,S,a,null);else for(var c=32,d=new Q(null,32,5,S,(0,_slice["default"])(a).call(a,0,32),null).Pb(null);;){if(c<b){var e=c+1;d=Le.rd(d,a[c]);c=e;}else{a=cc(d);break a;}}}else a=cc(Ud(bc,ac(td),a));return a;}function bg(a,b,c,d,e){this.Xa=a;this.node=b;this.A=c;this.Pa=d;this.s=e;this.u=null;this.j=32375020;this.G=1536;}h=bg.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){if(this.Pa+1<this.node.length){var a=this.Xa;var b=this.node,c=this.A,d=this.Pa+1;a=Wf?Wf(a,b,c,d):Xf.call(null,a,b,c,d);return null==a?null:a;}return this.Pc();};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return Pf(this.Xa,b,this.A+this.Pa,J(this.Xa));};h.Aa=function(a,b,c){return Qf(this.Xa,b,c,this.A+this.Pa,J(this.Xa));};h.ha=function(){return this.node[this.Pa];};h.xa=function(){if(this.Pa+1<this.node.length){var a=this.Xa;var b=this.node,c=this.A,d=this.Pa+1;a=Wf?Wf(a,b,c,d):Xf.call(null,a,b,c,d);return null==a?Kc:a;}return this.pc(null);};h.R=function(){return this;};h.zc=function(){var a=this.node;return new Ce(a,this.Pa,a.length);};h.pc=function(){var a=this.A+this.node.length;if(a<eb(this.Xa)){var b=this.Xa,c=Kf(this.Xa,a);return Wf?Wf(b,c,a,0):Xf.call(null,b,c,a,0);}return Kc;};h.T=function(a,b){return b===this.s?this:cg?cg(this.Xa,this.node,this.A,this.Pa,b):Xf.call(null,this.Xa,this.node,this.A,this.Pa,b);};h.V=function(a,b){return ld(b,this);};h.Pc=function(){var a=this.A+this.node.length;if(a<eb(this.Xa)){var b=this.Xa,c=Kf(this.Xa,a);return Wf?Wf(b,c,a,0):Xf.call(null,b,c,a,0);}return null;};bg.prototype[Wa]=function(){return Mc(this);};function Xf(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new bg(b,Lf(b,c),c,d,null);case 4:return Wf(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return cg(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function Wf(a,b,c,d){return new bg(a,b,c,d,null);}function cg(a,b,c,d,e){return new bg(a,b,c,d,e);}function dg(a,b){return a===b.ea?b:new Ef(a,bb(b.h));}function Uf(a){return new Ef({},bb(a.h));}function Vf(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Ld(a,0,b,0,a.length);return b;}var eg=function eg(a,b,c,d){c=dg(a.root.ea,c);var f=a.l-1>>>b&31;if(5===b)a=d;else{var g=c.h[f];null!=g?(b-=5,a=eg.v?eg.v(a,b,g,d):eg.call(null,a,b,g,d)):a=If(a.root.ea,b-5,d);}c.h[f]=a;return c;};function Tf(a,b,c,d){this.l=a;this.shift=b;this.root=c;this.Sa=d;this.G=88;this.j=275;}h=Tf.prototype;h.Rb=function(a,b){if(this.root.ea){if(32>this.l-Hf(this))this.Sa[this.l&31]=b;else{a=new Ef(this.root.ea,this.Sa);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.Sa=c;this.l>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+5,b[0]=this.root,b[1]=If(this.root.ea,this.shift,a),this.root=new Ef(this.root.ea,b),this.shift=c):this.root=eg(this,this.shift,this.root,a);}this.l+=1;return this;}throw Error("conj! after persistent!");};h.ac=function(){if(this.root.ea){this.root.ea=null;var a=this.l-Hf(this),b=Array(a);Ld(this.Sa,0,b,0,a);return new Q(null,this.l,this.shift,this.root,b,null);}throw Error("persistent! called twice");};h.Qb=function(a,b,c){if("number"===typeof b)return fg(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};function fg(a,b,c){if(a.root.ea){if(0<=b&&b<a.l){if(Hf(a)<=b)a.Sa[b&31]=c;else{var d=function k(f,g){g=dg(a.root.ea,g);if(0===f)g.h[b&31]=c;else{var l=b>>>f&31;f=k(f-5,g.h[l]);g.h[l]=f;}return g;}(a.shift,a.root);a.root=d;}return a;}if(b===a.l)return a.Rb(null,c);throw Error(["Index ",v.Ca(b)," out of bounds for TransientVector of length",v.Ca(a.l)].join(""));}throw Error("assoc! after persistent!");}h.X=function(){if(this.root.ea)return this.l;throw Error("count after persistent!");};h.H=function(a,b){if(this.root.ea)return Lf(this,b)[b&31];throw Error("nth after persistent!");};h.ba=function(a,b,c){return 0<=b&&b<this.l?this.H(null,b):c;};h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){if(this.root.ea)return"number"===typeof b?this.ba(null,b,c):c;throw Error("lookup after persistent!");};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context20;return this.call.apply(this,(0,_concat["default"])(_context20=[this]).call(_context20,bb(b)));};h.Ca=function(a){return this.P(null,a);};h.rd=function(a,b){return this.F(null,a,b);};function gg(a,b){this.Ub=a;this.lc=b;}gg.prototype.Ba=function(){var a=null!=this.Ub&&H(this.Ub);return a?a:(a=null!=this.lc)?this.lc.Ba():a;};gg.prototype.next=function(){if(null!=this.Ub){var a=x(this.Ub);this.Ub=z(this.Ub);return a;}if(null!=this.lc&&this.lc.Ba())return this.lc.next();throw Error("No such element");};gg.prototype.remove=function(){return Error("Unsupported operation");};function hg(a,b,c,d){this.s=a;this.Va=b;this.Wa=c;this.u=d;this.j=31850700;this.G=0;}h=hg.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){var a=z(this.Va);return a?new hg(this.s,a,this.Wa,null):null!=this.Wa?new hg(this.s,this.Wa,null,null):null;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Jb(Kc,this.s);};h.ha=function(){return x(this.Va);};h.xa=function(){var a=z(this.Va);return a?new hg(this.s,a,this.Wa,null):null==this.Wa?this.$(null):new hg(this.s,this.Wa,null,null);};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new hg(b,this.Va,this.Wa,this.u);};h.V=function(a,b){return ld(b,this);};hg.prototype[Wa]=function(){return Mc(this);};function ig(a,b,c,d,e){this.s=a;this.count=b;this.Va=c;this.Wa=d;this.u=e;this.G=139264;this.j=31858766;}h=ig.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,this.count.Ca?this.count.Ca(this):this.count.call(null,this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.Ta=function(){return new gg(this.Va,qc(this.Wa));};h.S=function(){return this.s;};h.X=function(){return this.count;};h.lb=function(){return x(this.Va);};h.mb=function(){if(r(this.Va)){var a=z(this.Va);return a?new ig(this.s,this.count-1,a,this.Wa,null):new ig(this.s,this.count-1,H(this.Wa),td,null);}return this;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Jb(jg,this.s);};h.ha=function(){return x(this.Va);};h.xa=function(){return Jc(H(this));};h.R=function(){var a=H(this.Wa),b=this.Va;return r(r(b)?b:a)?new hg(null,this.Va,H(a),null):null;};h.T=function(a,b){return b===this.s?this:new ig(b,this.count,this.Va,this.Wa,this.u);};h.V=function(a,b){r(this.Va)?(a=this.Wa,b=new ig(this.s,this.count+1,this.Va,sd.rd(r(a)?a:td,b),null)):b=new ig(this.s,this.count+1,sd.rd(this.Va,b),td,null);return b;};var jg=new ig(null,0,null,td,Qc);ig.prototype[Wa]=function(){return Mc(this);};function kg(){this.j=2097152;this.G=0;}kg.prototype.N=function(){return!1;};var lg=new kg();function mg(a,b){return Od(Hd(b)&&!Id(b)?J(a)===J(b)?(null!=a?a.j&1048576||Fa===a.Cd||(a.j?0:Ra(Nb,a)):Ra(Nb,a))?Zd(function(c,d,e){return G.rd(Ec.Md(b,d,lg),e)?!0:new Uc();},a):af(function(c){return G.rd(Ec.Md(b,x(c),lg),pd(c));},a):null:null);}function ng(a,b,c,d){this.A=0;this.td=a;this.Mc=b;this.qd=c;this.Tc=d;}ng.prototype.Ba=function(){var a=this.A<this.Mc;return a?a:this.Tc.Ba();};ng.prototype.next=function(){if(this.A<this.Mc){var a=fd(this.qd,this.A);this.A+=1;return new Sf(a,sb(this.td,a));}return this.Tc.next();};ng.prototype.remove=function(){return Error("Unsupported operation");};function og(a){this.M=a;}og.prototype.next=function(){if(null!=this.M){var a=x(this.M),b=O(a,0,null);a=O(a,1,null);this.M=z(this.M);return{value:[b,a],done:!1};}return{value:null,done:!0};};function pg(a){this.M=a;}pg.prototype.next=function(){if(null!=this.M){var a=x(this.M);this.M=z(this.M);return{value:[a,a],done:!1};}return{value:null,done:!0};};function qg(a,b){if(b instanceof E)a:{var c=a.length;b=b.ca;for(var d=0;;){if(c<=d){a=-1;break a;}if(a[d]instanceof E&&b===a[d].ca){a=d;break a;}d+=2;}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a;}if(b===a[d]){a=d;break a;}d+=2;}else if(b instanceof Dc)a:for(c=a.length,b=b.pb,d=0;;){if(c<=d){a=-1;break a;}if(a[d]instanceof Dc&&b===a[d].pb){a=d;break a;}d+=2;}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a;}if(null==a[c]){a=c;break a;}c+=2;}else a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a;}if(G.rd(b,a[d])){a=d;break a;}d+=2;}return a;}function Sf(a,b){this.key=a;this.g=b;this.u=null;this.j=166619935;this.G=0;}h=Sf.prototype;h.Ab=function(a,b){switch(b){case 0:return new Sf(0,this.key);case 1:return new Sf(1,this.g);default:return null;}};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.P=function(a,b){return this.ba(null,b,null);};h.F=function(a,b,c){return this.ba(null,b,c);};h.H=function(a,b){if(0===b)return this.key;if(1===b)return this.g;throw Error("Index out of bounds");};h.ba=function(a,b,c){return 0===b?this.key:1===b?this.g:c;};h.sb=function(a,b){return new Q(null,2,5,S,[this.key,this.g],null).sb(a,b);};h.S=function(){return null;};h.X=function(){return 2;};h.Ac=function(){return this.key;};h.Bc=function(){return this.g;};h.lb=function(){return this.g;};h.mb=function(){return new Q(null,1,5,S,[this.key],null);};h.Bb=function(){return new Za([this.g,this.key],0,null);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return null;};h.za=function(a,b){return Yc(this,b);};h.Aa=function(a,b,c){return Zc(this,b,c);};h.ya=function(a,b,c){return vd.Md(new Q(null,2,5,S,[this.key,this.g],null),b,c);};h.Qd=function(a,b){return 0===b||1===b;};h.R=function(){return new Za([this.key,this.g],0,null);};h.T=function(a,b){return zd(new Q(null,2,5,S,[this.key,this.g],null),b);};h.V=function(a,b){return new Q(null,3,5,S,[this.key,this.g,b],null);};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context21;return this.call.apply(this,(0,_concat["default"])(_context21=[this]).call(_context21,bb(b)));};h.Ca=function(a){return this.H(null,a);};h.rd=function(a,b){return this.ba(null,a,b);};function Zf(a){return null!=a?a.j&2048||Fa===a.Fd?!0:!1:!1;}function rg(a,b,c){this.h=a;this.A=b;this.Ya=c;this.j=32374990;this.G=0;}h=rg.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.Ya;};h.wa=function(){return this.A<this.h.length-2?new rg(this.h,this.A+2,null):null;};h.X=function(){return(this.h.length-this.A)/2;};h.O=function(){return Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return new Sf(this.h[this.A],this.h[this.A+1]);};h.xa=function(){return this.A<this.h.length-2?new rg(this.h,this.A+2,null):Kc;};h.R=function(){return this;};h.T=function(a,b){return b===this.Ya?this:new rg(this.h,this.A,b);};h.V=function(a,b){return ld(b,this);};rg.prototype[Wa]=function(){return Mc(this);};function sg(a,b){this.h=a;this.A=0;this.l=b;}sg.prototype.Ba=function(){return this.A<this.l;};sg.prototype.next=function(){var a=new Sf(this.h[this.A],this.h[this.A+1]);this.A+=2;return a;};function m(a,b,c,d){this.s=a;this.l=b;this.h=c;this.u=d;this.j=16647951;this.G=139268;}h=m.prototype;h.Ab=function(a,b){a=qg(this.h,b);return-1===a?null:new Sf(this.h[a],this.h[a+1]);};h.toString=function(){return sc(this);};h.keys=function(){return Mc(tg.Ca?tg.Ca(this):tg.call(null,this));};h.entries=function(){return new og(H(H(this)));};h.values=function(){return Mc(ug.Ca?ug.Ca(this):ug.call(null,this));};h.has=function(a){return Qd(this,a);};h.get=function(a,b){return this.F(null,a,b);};h.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;){if(e<d){var f=c.H(null,e),g=O(f,0,null);f=O(f,1,null);a.rd?a.rd(f,g):a.call(null,f,g);e+=1;}else if(b=H(b))Kd(b)?(c=hc(b),b=ic(b),g=c,d=J(c),c=g):(c=x(b),g=O(c,0,null),f=O(c,1,null),a.rd?a.rd(f,g):a.call(null,f,g),b=z(b),c=null,d=0),e=0;else return null;}};h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){a=qg(this.h,b);return-1===a?c:this.h[a+1];};h.Za=function(a,b,c){a=this.h.length;for(var d=0;;){if(d<a){var e=this.h[d],f=this.h[d+1];c=b.Md?b.Md(c,e,f):b.call(null,c,e,f);if(Vc(c))return Fb(c);d+=2;}else return c;}};h.Ta=function(){return new sg(this.h,2*this.l);};h.S=function(){return this.s;};h.X=function(){return this.l;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Rc(this);};h.N=function(a,b){if(Hd(b)&&!Id(b)){if(a=this.h.length,this.l===b.X(null))for(var c=0;;){if(c<a){var d=b.F(null,this.h[c],Md);if(d!==Md){if(G.rd(this.h[c+1],d))c+=2;else return!1;}else return!1;}else return!0;}else return!1;}else return!1;};h.Pb=function(){return new vg(this.h.length,bb(this.h));};h.$=function(){return Jb($e,this.s);};h.za=function(a,b){return Wd(this,b);};h.Aa=function(a,b,c){return Xd(this,b,c);};h.rb=function(a,b){if(0<=qg(this.h,b)){a=this.h.length;var c=a-2;if(0===c)return this.$(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new m(this.s,this.l-1,c,null);G.rd(b,this.h[d])?d+=2:(c[e]=this.h[d],c[e+1]=this.h[d+1],e+=2,d+=2);}}else return this;};h.ya=function(a,b,c){a=qg(this.h,b);if(-1===a){if(this.l<wg){a=this.h;for(var d=a.length,e=Array(d+2),f=0;;){if(f<d)e[f]=a[f],f+=1;else break;}e[d]=b;e[d+1]=c;return new m(this.s,this.l+1,e,null);}return Jb(vb(zf.rd(xg,this),b,c),this.s);}if(c===this.h[a+1])return this;b=bb(this.h);b[a+1]=c;return new m(this.s,this.l,b,null);};h.Qd=function(a,b){return-1!==qg(this.h,b);};h.R=function(){var a=this.h;return 0<=a.length-2?new rg(a,0,null):null;};h.T=function(a,b){return b===this.s?this:new m(b,this.l,this.h,this.u);};h.V=function(a,b){if(Jd(b))return this.ya(null,kb(b,0),kb(b,1));a=this;for(b=H(b);;){if(null==b)return a;var c=x(b);if(Jd(c))a=vb(a,kb(c,0),kb(c,1)),b=z(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context22;return this.call.apply(this,(0,_concat["default"])(_context22=[this]).call(_context22,bb(b)));};h.Ca=function(a){return this.P(null,a);};h.rd=function(a,b){return this.F(null,a,b);};var $e=new m(null,0,[],Sc),wg=8;function fj(a){return new m(null,a.length/2,a,null);}function wd(a){for(var b=[],c=0;;){if(c<a.length){var d=a[c],e=a[c+1],f=qg(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2;}else break;}return new m(null,b.length/2,b,null);}m.prototype[Wa]=function(){return Mc(this);};function vg(a,b){this.Tb={};this.Lb=a;this.h=b;this.j=259;this.G=56;}h=vg.prototype;h.X=function(){if(this.Tb)return ke(this.Lb);throw Error("count after persistent!");};h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){if(this.Tb)return a=qg(this.h,b),-1===a?c:this.h[a+1];throw Error("lookup after persistent!");};h.Rb=function(a,b){if(this.Tb){if(Zf(b))return this.Qb(null,$f.Ca?$f.Ca(b):$f.call(null,b),ag.Ca?ag.Ca(b):ag.call(null,b));if(Jd(b))return this.Qb(null,b.Ca?b.Ca(0):b.call(null,0),b.Ca?b.Ca(1):b.call(null,1));a=H(b);for(b=this;;){var c=x(a);if(r(c))a=z(a),b=dc(b,$f.Ca?$f.Ca(c):$f.call(null,c),ag.Ca?ag.Ca(c):ag.call(null,c));else return b;}}else throw Error("conj! after persistent!");};h.ac=function(){if(this.Tb)return this.Tb=!1,new m(null,ke(this.Lb),this.h,null);throw Error("persistent! called twice");};h.Qb=function(a,b,c){if(this.Tb){a=qg(this.h,b);if(-1===a)return this.Lb+2<=2*wg?(this.Lb+=2,this.h.push(b),this.h.push(c),this):Me(zg.rd?zg.rd(this.Lb,this.h):zg.call(null,this.Lb,this.h),b,c);c!==this.h[a+1]&&(this.h[a+1]=c);return this;}throw Error("assoc! after persistent!");};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context23;return this.call.apply(this,(0,_concat["default"])(_context23=[this]).call(_context23,bb(b)));};h.Ca=function(a){return this.F(null,a,null);};h.rd=function(a,b){return this.F(null,a,b);};function zg(a,b){for(var c=ac(xg),d=0;;){if(d<a)c=dc(c,b[d],b[d+1]),d+=2;else return c;}}function Ag(){this.g=!1;}function Bg(a,b){return a===b?!0:ve(a,b)?!0:G.rd(a,b);}function Cg(a,b,c){a=bb(a);a[b]=c;return a;}function Dg(a,b){var c=Array(a.length-2);Ld(a,0,c,0,2*b);Ld(a,2*(b+1),c,2*b,c.length-2*b);return c;}function Eg(a,b,c,d){a=a.Ib(b);a.h[c]=d;return a;}function Fg(a,b,c){for(var d=a.length,e=0,f=c;;){if(e<d){c=a[e];if(null!=c){var g=a[e+1];c=b.Md?b.Md(f,c,g):b.call(null,f,c,g);}else c=a[e+1],c=null!=c?c.Kb(b,f):f;if(Vc(c))return c;e+=2;f=c;}else return f;}}function Gg(a){this.h=a;this.A=0;this.ib=this.jc=null;}Gg.prototype.advance=function(){for(var a=this.h.length;;){if(this.A<a){var b=this.h[this.A],c=this.h[this.A+1];null!=b?b=this.jc=new Sf(b,c):null!=c?(b=qc(c),b=b.Ba()?this.ib=b:!1):b=!1;this.A+=2;if(b)return!0;}else return!1;}};Gg.prototype.Ba=function(){var a=null!=this.jc;return a?a:(a=null!=this.ib)?a:this.advance();};Gg.prototype.next=function(){if(null!=this.jc){var a=this.jc;this.jc=null;return a;}if(null!=this.ib)return a=this.ib.next(),this.ib.Ba()||(this.ib=null),a;if(this.advance())return this.next();throw Error("No such element");};Gg.prototype.remove=function(){return Error("Unsupported operation");};function Hg(a,b,c){this.ea=a;this.ga=b;this.h=c;this.G=131072;this.j=0;}h=Hg.prototype;h.Ib=function(a){if(a===this.ea)return this;var b=le(this.ga),c=Array(0>b?4:2*(b+1));Ld(this.h,0,c,0,2*b);return new Hg(a,this.ga,c);};h.hc=function(){return Ig?Ig(this.h):Jg.call(null,this.h);};h.Kb=function(a,b){return Fg(this.h,a,b);};h.Jb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.ga&e))return d;var f=le(this.ga&e-1);e=this.h[2*f];f=this.h[2*f+1];return null==e?f.Jb(a+5,b,c,d):Bg(c,e)?f:d;};h.fb=function(a,b,c,d,e,f){var g=1<<(c>>>b&31),k=le(this.ga&g-1);if(0===(this.ga&g)){var l=le(this.ga);if(2*l<this.h.length){a=this.Ib(a);b=a.h;f.g=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;){b[l]=b[f],--l,--c,--f;}b[2*k]=d;b[2*k+1]=e;a.ga|=g;return a;}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Kg.fb(a,b+5,c,d,e,f);for(e=d=0;;){if(32>d)0===(this.ga>>>d&1)?d+=1:(k[d]=null!=this.h[e]?Kg.fb(a,b+5,Ac(this.h[e]),this.h[e],this.h[e+1],f):this.h[e+1],e+=2,d+=1);else break;}return new Lg(a,l+1,k);}b=Array(2*(l+4));Ld(this.h,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Ld(this.h,2*k,b,2*(k+1),2*(l-k));f.g=!0;a=this.Ib(a);a.h=b;a.ga|=g;return a;}l=this.h[2*k];g=this.h[2*k+1];if(null==l)return l=g.fb(a,b+5,c,d,e,f),l===g?this:Eg(this,a,2*k+1,l);if(Bg(d,l))return e===g?this:Eg(this,a,2*k+1,e);f.g=!0;f=b+5;d=Mg?Mg(a,f,l,g,c,d,e):Ng.call(null,a,f,l,g,c,d,e);e=2*k;k=2*k+1;a=this.Ib(a);a.h[e]=null;a.h[k]=d;return a;};h.eb=function(a,b,c,d,e){var f=1<<(b>>>a&31),g=le(this.ga&f-1);if(0===(this.ga&f)){var k=le(this.ga);if(16<=k){g=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];g[b>>>a&31]=Kg.eb(a+5,b,c,d,e);for(d=c=0;;){if(32>c)0===(this.ga>>>c&1)?c+=1:(g[c]=null!=this.h[d]?Kg.eb(a+5,Ac(this.h[d]),this.h[d],this.h[d+1],e):this.h[d+1],d+=2,c+=1);else break;}return new Lg(null,k+1,g);}a=Array(2*(k+1));Ld(this.h,0,a,0,2*g);a[2*g]=c;a[2*g+1]=d;Ld(this.h,2*g,a,2*(g+1),2*(k-g));e.g=!0;return new Hg(null,this.ga|f,a);}var l=this.h[2*g];f=this.h[2*g+1];if(null==l)return k=f.eb(a+5,b,c,d,e),k===f?this:new Hg(null,this.ga,Cg(this.h,2*g+1,k));if(Bg(c,l))return d===f?this:new Hg(null,this.ga,Cg(this.h,2*g+1,d));e.g=!0;e=this.ga;k=this.h;a+=5;a=Og?Og(a,l,f,b,c,d):Ng.call(null,a,l,f,b,c,d);c=2*g;g=2*g+1;d=bb(k);d[c]=null;d[g]=a;return new Hg(null,e,d);};h.fc=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.ga&e))return d;var f=le(this.ga&e-1);e=this.h[2*f];f=this.h[2*f+1];return null==e?f.fc(a+5,b,c,d):Bg(c,e)?new Sf(e,f):d;};h.ic=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.ga&d))return this;var e=le(this.ga&d-1),f=this.h[2*e],g=this.h[2*e+1];return null==f?(a=g.ic(a+5,b,c),a===g?this:null!=a?new Hg(null,this.ga,Cg(this.h,2*e+1,a)):this.ga===d?null:new Hg(null,this.ga^d,Dg(this.h,e))):Bg(c,f)?new Hg(null,this.ga^d,Dg(this.h,e)):this;};h.Ta=function(){return new Gg(this.h);};var Kg=new Hg(null,0,[]);function Pg(a){this.h=a;this.A=0;this.ib=null;}Pg.prototype.Ba=function(){for(var a=this.h.length;;){if(null!=this.ib&&this.ib.Ba())return!0;if(this.A<a){var b=this.h[this.A];this.A+=1;null!=b&&(this.ib=qc(b));}else return!1;}};Pg.prototype.next=function(){if(this.Ba())return this.ib.next();throw Error("No such element");};Pg.prototype.remove=function(){return Error("Unsupported operation");};function Lg(a,b,c){this.ea=a;this.l=b;this.h=c;this.G=131072;this.j=0;}h=Lg.prototype;h.Ib=function(a){return a===this.ea?this:new Lg(a,this.l,bb(this.h));};h.hc=function(){return Qg?Qg(this.h):Rg.call(null,this.h);};h.Kb=function(a,b){for(var c=this.h.length,d=0;;){if(d<c){var e=this.h[d];if(null!=e){b=e.Kb(a,b);if(Vc(b))return b;d+=1;}else d+=1;}else return b;}};h.Jb=function(a,b,c,d){var e=this.h[b>>>a&31];return null!=e?e.Jb(a+5,b,c,d):d;};h.fb=function(a,b,c,d,e,f){var g=c>>>b&31,k=this.h[g];if(null==k)return a=Eg(this,a,g,Kg.fb(a,b+5,c,d,e,f)),a.l+=1,a;b=k.fb(a,b+5,c,d,e,f);return b===k?this:Eg(this,a,g,b);};h.eb=function(a,b,c,d,e){var f=b>>>a&31,g=this.h[f];if(null==g)return new Lg(null,this.l+1,Cg(this.h,f,Kg.eb(a+5,b,c,d,e)));a=g.eb(a+5,b,c,d,e);return a===g?this:new Lg(null,this.l,Cg(this.h,f,a));};h.fc=function(a,b,c,d){var e=this.h[b>>>a&31];return null!=e?e.fc(a+5,b,c,d):d;};h.ic=function(a,b,c){var d=b>>>a&31,e=this.h[d];if(null!=e){a=e.ic(a+5,b,c);if(a===e)d=this;else if(null==a){if(8>=this.l)a:{e=this.h;a=e.length;b=Array(2*(this.l-1));c=0;for(var f=1,g=0;;){if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,g|=1<<c,c+=1):c+=1;else{d=new Hg(null,g,b);break a;}}}else d=new Lg(null,this.l-1,Cg(this.h,d,a));}else d=new Lg(null,this.l,Cg(this.h,d,a));return d;}return this;};h.Ta=function(){return new Pg(this.h);};function Sg(a,b,c){b*=2;for(var d=0;;){if(d<b){if(Bg(c,a[d]))return d;d+=2;}else return-1;}}function Tg(a,b,c,d){this.ea=a;this.ub=b;this.l=c;this.h=d;this.G=131072;this.j=0;}h=Tg.prototype;h.Ib=function(a){if(a===this.ea)return this;var b=Array(2*(this.l+1));Ld(this.h,0,b,0,2*this.l);return new Tg(a,this.ub,this.l,b);};h.hc=function(){return Ig?Ig(this.h):Jg.call(null,this.h);};h.Kb=function(a,b){return Fg(this.h,a,b);};h.Jb=function(a,b,c,d){a=Sg(this.h,this.l,c);return 0>a?d:Bg(c,this.h[a])?this.h[a+1]:d;};h.fb=function(a,b,c,d,e,f){if(c===this.ub){b=Sg(this.h,this.l,d);if(-1===b){if(this.h.length>2*this.l)return b=2*this.l,c=2*this.l+1,a=this.Ib(a),a.h[b]=d,a.h[c]=e,f.g=!0,a.l+=1,a;c=this.h.length;b=Array(c+2);Ld(this.h,0,b,0,c);b[c]=d;b[c+1]=e;f.g=!0;d=this.l+1;a===this.ea?(this.h=b,this.l=d,a=this):a=new Tg(this.ea,this.ub,d,b);return a;}return this.h[b+1]===e?this:Eg(this,a,b+1,e);}return new Hg(a,1<<(this.ub>>>b&31),[null,this,null,null]).fb(a,b,c,d,e,f);};h.eb=function(a,b,c,d,e){return b===this.ub?(a=Sg(this.h,this.l,c),-1===a?(a=2*this.l,b=Array(a+2),Ld(this.h,0,b,0,a),b[a]=c,b[a+1]=d,e.g=!0,new Tg(null,this.ub,this.l+1,b)):G.rd(this.h[a+1],d)?this:new Tg(null,this.ub,this.l,Cg(this.h,a+1,d))):new Hg(null,1<<(this.ub>>>a&31),[null,this]).eb(a,b,c,d,e);};h.fc=function(a,b,c,d){a=Sg(this.h,this.l,c);return 0>a?d:Bg(c,this.h[a])?new Sf(this.h[a],this.h[a+1]):d;};h.ic=function(a,b,c){a=Sg(this.h,this.l,c);return-1===a?this:1===this.l?null:new Tg(null,this.ub,this.l-1,Dg(this.h,ke(a)));};h.Ta=function(){return new Gg(this.h);};function Ng(a){switch(arguments.length){case 6:return Og(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Mg(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function Og(a,b,c,d,e,f){var g=Ac(b);if(g===d)return new Tg(null,g,2,[b,c,e,f]);var k=new Ag();return Kg.eb(a,g,b,c,k).eb(a,d,e,f,k);}function Mg(a,b,c,d,e,f,g){var k=Ac(c);if(k===e)return new Tg(null,k,2,[c,d,f,g]);var l=new Ag();return Kg.fb(a,b,k,c,d,l).fb(a,b,e,f,g,l);}function Ug(a,b,c,d,e){this.s=a;this.Z=b;this.A=c;this.M=d;this.u=e;this.j=32374988;this.G=0;}h=Ug.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){if(null==this.M){var a=this.Z,b=this.A+2;return Vg?Vg(a,b,null):Jg.call(null,a,b,null);}a=this.Z;b=this.A;var c=z(this.M);return Vg?Vg(a,b,c):Jg.call(null,a,b,c);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return null==this.M?new Sf(this.Z[this.A],this.Z[this.A+1]):x(this.M);};h.xa=function(){var a=this,b=null==a.M?function(){var c=a.Z,d=a.A+2;return Vg?Vg(c,d,null):Jg.call(null,c,d,null);}():function(){var c=a.Z,d=a.A,e=z(a.M);return Vg?Vg(c,d,e):Jg.call(null,c,d,e);}();return null!=b?b:Kc;};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new Ug(b,this.Z,this.A,this.M,this.u);};h.V=function(a,b){return ld(b,this);};Ug.prototype[Wa]=function(){return Mc(this);};function Jg(a){switch(arguments.length){case 1:return Ig(arguments[0]);case 3:return Vg(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function Ig(a){return Vg(a,0,null);}function Vg(a,b,c){if(null==c)for(c=a.length;;){if(b<c){if(null!=a[b])return new Ug(null,a,b,null,null);var d=a[b+1];if(r(d)&&(d=d.hc(),r(d)))return new Ug(null,a,b+2,d,null);b+=2;}else return null;}else return new Ug(null,a,b,c,null);}function Wg(a,b,c,d,e){this.s=a;this.Z=b;this.A=c;this.M=d;this.u=e;this.j=32374988;this.G=0;}h=Wg.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){var a=this.Z,b=this.A,c=z(this.M);return Xg?Xg(a,b,c):Rg.call(null,a,b,c);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return x(this.M);};h.xa=function(){var a=this.Z;var b=this.A,c=z(this.M);a=Xg?Xg(a,b,c):Rg.call(null,a,b,c);return null!=a?a:Kc;};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new Wg(b,this.Z,this.A,this.M,this.u);};h.V=function(a,b){return ld(b,this);};Wg.prototype[Wa]=function(){return Mc(this);};function Rg(a){switch(arguments.length){case 1:return Qg(arguments[0]);case 3:return Xg(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function Qg(a){return Xg(a,0,null);}function Xg(a,b,c){if(null==c)for(c=a.length;;){if(b<c){var d=a[b];if(r(d)&&(d=d.hc(),r(d)))return new Wg(null,a,b+1,d,null);b+=1;}else return null;}else return new Wg(null,a,b,c,null);}function Yg(a,b){this.Qa=a;this.Vc=b;this.Hc=!1;}Yg.prototype.Ba=function(){return!this.Hc||this.Vc.Ba();};Yg.prototype.next=function(){if(this.Hc)return this.Vc.next();this.Hc=!0;return new Sf(null,this.Qa);};Yg.prototype.remove=function(){return Error("Unsupported operation");};function Zg(a,b,c,d,e,f){this.s=a;this.l=b;this.root=c;this.Ra=d;this.Qa=e;this.u=f;this.j=16123663;this.G=139268;}h=Zg.prototype;h.Ab=function(a,b){return null==b?this.Ra?new Sf(null,this.Qa):null:null==this.root?null:this.root.fc(0,Ac(b),b,null);};h.toString=function(){return sc(this);};h.keys=function(){return Mc(tg.Ca?tg.Ca(this):tg.call(null,this));};h.entries=function(){return new og(H(H(this)));};h.values=function(){return Mc(ug.Ca?ug.Ca(this):ug.call(null,this));};h.has=function(a){return Qd(this,a);};h.get=function(a,b){return this.F(null,a,b);};h.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;){if(e<d){var f=c.H(null,e),g=O(f,0,null);f=O(f,1,null);a.rd?a.rd(f,g):a.call(null,f,g);e+=1;}else if(b=H(b))Kd(b)?(c=hc(b),b=ic(b),g=c,d=J(c),c=g):(c=x(b),g=O(c,0,null),f=O(c,1,null),a.rd?a.rd(f,g):a.call(null,f,g),b=z(b),c=null,d=0),e=0;else return null;}};h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){return null==b?this.Ra?this.Qa:c:null==this.root?c:this.root.Jb(0,Ac(b),b,c);};h.Za=function(a,b,c){a=this.Ra?b.Md?b.Md(c,null,this.Qa):b.call(null,c,null,this.Qa):c;return Vc(a)?Fb(a):null!=this.root?Wc(this.root.Kb(b,a)):a;};h.Ta=function(){var a=this.root?qc(this.root):Ze();return this.Ra?new Yg(this.Qa,a):a;};h.S=function(){return this.s;};h.X=function(){return this.l;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Rc(this);};h.N=function(a,b){return mg(this,b);};h.Pb=function(){return new $g(this.root,this.l,this.Ra,this.Qa);};h.$=function(){return Jb(xg,this.s);};h.rb=function(a,b){if(null==b)return this.Ra?new Zg(this.s,this.l-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.ic(0,Ac(b),b);return a===this.root?this:new Zg(this.s,this.l-1,a,this.Ra,this.Qa,null);};h.ya=function(a,b,c){if(null==b)return this.Ra&&c===this.Qa?this:new Zg(this.s,this.Ra?this.l:this.l+1,this.root,!0,c,null);a=new Ag();b=(null==this.root?Kg:this.root).eb(0,Ac(b),b,c,a);return b===this.root?this:new Zg(this.s,a.g?this.l+1:this.l,b,this.Ra,this.Qa,null);};h.Qd=function(a,b){return null==b?this.Ra:null==this.root?!1:this.root.Jb(0,Ac(b),b,Md)!==Md;};h.R=function(){if(0<this.l){var a=null!=this.root?this.root.hc():null;return this.Ra?ld(new Sf(null,this.Qa),a):a;}return null;};h.T=function(a,b){return b===this.s?this:new Zg(b,this.l,this.root,this.Ra,this.Qa,this.u);};h.V=function(a,b){if(Jd(b))return this.ya(null,kb(b,0),kb(b,1));a=this;for(b=H(b);;){if(null==b)return a;var c=x(b);if(Jd(c))a=vb(a,kb(c,0),kb(c,1)),b=z(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context24;return this.call.apply(this,(0,_concat["default"])(_context24=[this]).call(_context24,bb(b)));};h.Ca=function(a){return this.P(null,a);};h.rd=function(a,b){return this.F(null,a,b);};var xg=new Zg(null,0,null,!1,null,Sc);function kj(a){for(var b=a.length,c=0,d=ac(xg);;){if(c<b){var e=c+2;d=dc(d,a[c],a[c+1]);c=e;}else return cc(d);}}function bh(a,b){for(var c=a.length,d=0,e=ac(xg);;){if(d<c){var f=d+1;e=dc(e,a[d],b[d]);d=f;}else return cc(e);}}Zg.prototype[Wa]=function(){return Mc(this);};function $g(a,b,c,d){this.ea={};this.root=a;this.count=b;this.Ra=c;this.Qa=d;this.j=259;this.G=56;}function ch(a,b,c){if(a.ea){if(null==b)a.Qa!==c&&(a.Qa=c),a.Ra||(a.count+=1,a.Ra=!0);else{var d=new Ag();b=(null==a.root?Kg:a.root).fb(a.ea,0,Ac(b),b,c,d);b!==a.root&&(a.root=b);d.g&&(a.count+=1);}return a;}throw Error("assoc! after persistent!");}h=$g.prototype;h.X=function(){if(this.ea)return this.count;throw Error("count after persistent!");};h.P=function(a,b){return null==b?this.Ra?this.Qa:null:null==this.root?null:this.root.Jb(0,Ac(b),b);};h.F=function(a,b,c){return null==b?this.Ra?this.Qa:c:null==this.root?c:this.root.Jb(0,Ac(b),b,c);};h.Rb=function(a,b){a:if(this.ea){if(Zf(b))a=ch(this,$f.Ca?$f.Ca(b):$f.call(null,b),ag.Ca?ag.Ca(b):ag.call(null,b));else if(Jd(b))a=ch(this,b.Ca?b.Ca(0):b.call(null,0),b.Ca?b.Ca(1):b.call(null,1));else for(a=H(b),b=this;;){var c=x(a);if(r(c))a=z(a),b=ch(b,$f.Ca?$f.Ca(c):$f.call(null,c),ag.Ca?ag.Ca(c):ag.call(null,c));else{a=b;break a;}}}else throw Error("conj! after persistent");return a;};h.ac=function(){if(this.ea){this.ea=null;var a=new Zg(null,this.count,this.root,this.Ra,this.Qa,null);}else throw Error("persistent! called twice");return a;};h.Qb=function(a,b,c){return ch(this,b,c);};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context25;return this.call.apply(this,(0,_concat["default"])(_context25=[this]).call(_context25,bb(b)));};h.Ca=function(a){return this.P(null,a);};h.rd=function(a,b){return this.F(null,a,b);};function dh(a,b,c){for(var d=b;;){if(null!=a)b=c?a.left:a.right,d=sd.rd(d,a),a=b;else return d;}}function eh(a,b,c,d,e){this.s=a;this.stack=b;this.Eb=c;this.l=d;this.u=e;this.j=32374990;this.G=0;}h=eh.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.s;};h.wa=function(){var a=x(this.stack);a=dh(this.Eb?a.right:a.left,z(this.stack),this.Eb);return null==a?null:new eh(null,a,this.Eb,this.l-1,null);};h.X=function(){return 0>this.l?J(z(this))+1:this.l;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return Bd(this.stack);};h.xa=function(){var a=x(this.stack);a=dh(this.Eb?a.right:a.left,z(this.stack),this.Eb);return null!=a?new eh(null,a,this.Eb,this.l-1,null):Kc;};h.R=function(){return this;};h.T=function(a,b){return b===this.s?this:new eh(b,this.stack,this.Eb,this.l,this.u);};h.V=function(a,b){return ld(b,this);};eh.prototype[Wa]=function(){return Mc(this);};function fh(a,b,c){return new eh(null,dh(a,null,b),b,c,null);}function gh(a,b,c,d){return c instanceof hh?c.left instanceof hh?new hh(c.key,c.g,c.left.qb(),new ih(a,b,c.right,d)):c.right instanceof hh?new hh(c.right.key,c.right.g,new ih(c.key,c.g,c.left,c.right.left),new ih(a,b,c.right.right,d)):new ih(a,b,c,d):new ih(a,b,c,d);}function jh(a,b,c,d){return d instanceof hh?d.right instanceof hh?new hh(d.key,d.g,new ih(a,b,c,d.left),d.right.qb()):d.left instanceof hh?new hh(d.left.key,d.left.g,new ih(a,b,c,d.left.left),new ih(d.key,d.g,d.left.right,d.right)):new ih(a,b,c,d):new ih(a,b,c,d);}function kh(a,b,c,d){if(c instanceof hh)return new hh(a,b,c.qb(),d);if(d instanceof ih)return jh(a,b,c,d.kc());if(d instanceof hh&&d.left instanceof ih)return new hh(d.left.key,d.left.g,new ih(a,b,c,d.left.left),jh(d.key,d.g,d.left.right,d.right.kc()));throw Error("red-black tree invariant violation");}function lh(a,b,c,d){if(d instanceof hh)return new hh(a,b,c,d.qb());if(c instanceof ih)return gh(a,b,c.kc(),d);if(c instanceof hh&&c.right instanceof ih)return new hh(c.right.key,c.right.g,gh(c.key,c.g,c.left.kc(),c.right.left),new ih(a,b,c.right.right,d));throw Error("red-black tree invariant violation");}var mh=function mh(a,b,c){var e=null!=a.left?function(){var k=a.left;return mh.Md?mh.Md(k,b,c):mh.call(null,k,b,c);}():c;if(Vc(e))return e;var f=function(){var k=a.key,l=a.g;return b.Md?b.Md(e,k,l):b.call(null,e,k,l);}();if(Vc(f))return f;if(null!=a.right){var g=a.right;return mh.Md?mh.Md(g,b,f):mh.call(null,g,b,f);}return f;};function ih(a,b,c,d){this.key=a;this.g=b;this.left=c;this.right=d;this.u=null;this.j=166619935;this.G=0;}h=ih.prototype;h.Ab=function(a,b){switch(b){case 0:return new Sf(0,this.key);case 1:return new Sf(1,this.g);default:return null;}};h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.Jc=function(a){return a.Lc(this);};h.kc=function(){return new hh(this.key,this.g,this.left,this.right);};h.qb=function(){return this;};h.Ic=function(a){return a.Kc(this);};h.replace=function(a,b,c,d){return new ih(a,b,c,d);};h.Kc=function(a){return new ih(a.key,a.g,this,a.right);};h.Lc=function(a){return new ih(a.key,a.g,a.left,this);};h.Kb=function(a,b){return mh(this,a,b);};h.P=function(a,b){return this.ba(null,b,null);};h.F=function(a,b,c){return this.ba(null,b,c);};h.H=function(a,b){if(0===b)return this.key;if(1===b)return this.g;throw Error("Index out of bounds");};h.ba=function(a,b,c){return 0===b?this.key:1===b?this.g:c;};h.sb=function(a,b){return new Q(null,2,5,S,[this.key,this.g],null).sb(a,b);};h.S=function(){return null;};h.X=function(){return 2;};h.Ac=function(){return this.key;};h.Bc=function(){return this.g;};h.lb=function(){return this.g;};h.mb=function(){return new Q(null,1,5,S,[this.key],null);};h.Bb=function(){return new Za([this.g,this.key],0,null);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return null;};h.za=function(a,b){return Yc(this,b);};h.Aa=function(a,b,c){return Zc(this,b,c);};h.ya=function(a,b,c){return vd.Md(new Q(null,2,5,S,[this.key,this.g],null),b,c);};h.Qd=function(a,b){return 0===b||1===b;};h.R=function(){return new Za([this.key,this.g],0,null);};h.T=function(a,b){return Jb(new Q(null,2,5,S,[this.key,this.g],null),b);};h.V=function(a,b){return new Q(null,3,5,S,[this.key,this.g,b],null);};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context26;return this.call.apply(this,(0,_concat["default"])(_context26=[this]).call(_context26,bb(b)));};h.Ca=function(a){return this.H(null,a);};h.rd=function(a,b){return this.ba(null,a,b);};ih.prototype[Wa]=function(){return Mc(this);};function hh(a,b,c,d){this.key=a;this.g=b;this.left=c;this.right=d;this.u=null;this.j=166619935;this.G=0;}h=hh.prototype;h.Ab=function(a,b){switch(b){case 0:return new Sf(0,this.key);case 1:return new Sf(1,this.g);default:return null;}};h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.Jc=function(a){return new hh(this.key,this.g,this.left,a);};h.kc=function(){throw Error("red-black tree invariant violation");};h.qb=function(){return new ih(this.key,this.g,this.left,this.right);};h.Ic=function(a){return new hh(this.key,this.g,a,this.right);};h.replace=function(a,b,c,d){return new hh(a,b,c,d);};h.Kc=function(a){return this.left instanceof hh?new hh(this.key,this.g,this.left.qb(),new ih(a.key,a.g,this.right,a.right)):this.right instanceof hh?new hh(this.right.key,this.right.g,new ih(this.key,this.g,this.left,this.right.left),new ih(a.key,a.g,this.right.right,a.right)):new ih(a.key,a.g,this,a.right);};h.Lc=function(a){return this.right instanceof hh?new hh(this.key,this.g,new ih(a.key,a.g,a.left,this.left),this.right.qb()):this.left instanceof hh?new hh(this.left.key,this.left.g,new ih(a.key,a.g,a.left,this.left.left),new ih(this.key,this.g,this.left.right,this.right)):new ih(a.key,a.g,a.left,this);};h.Kb=function(a,b){return mh(this,a,b);};h.P=function(a,b){return this.ba(null,b,null);};h.F=function(a,b,c){return this.ba(null,b,c);};h.H=function(a,b){if(0===b)return this.key;if(1===b)return this.g;throw Error("Index out of bounds");};h.ba=function(a,b,c){return 0===b?this.key:1===b?this.g:c;};h.sb=function(a,b){return new Q(null,2,5,S,[this.key,this.g],null).sb(a,b);};h.S=function(){return null;};h.X=function(){return 2;};h.Ac=function(){return this.key;};h.Bc=function(){return this.g;};h.lb=function(){return this.g;};h.mb=function(){return new Q(null,1,5,S,[this.key],null);};h.Bb=function(){return new Za([this.g,this.key],0,null);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return null;};h.za=function(a,b){return Yc(this,b);};h.Aa=function(a,b,c){return Zc(this,b,c);};h.ya=function(a,b,c){return vd.Md(new Q(null,2,5,S,[this.key,this.g],null),b,c);};h.Qd=function(a,b){return 0===b||1===b;};h.R=function(){return new Za([this.key,this.g],0,null);};h.T=function(a,b){return Jb(new Q(null,2,5,S,[this.key,this.g],null),b);};h.V=function(a,b){return new Q(null,3,5,S,[this.key,this.g,b],null);};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context27;return this.call.apply(this,(0,_concat["default"])(_context27=[this]).call(_context27,bb(b)));};h.Ca=function(a){return this.H(null,a);};h.rd=function(a,b){return this.ba(null,a,b);};hh.prototype[Wa]=function(){return Mc(this);};var nh=function nh(a,b,c,d,e){if(null==b)return new hh(c,d,null,null);var g=function(){var k=b.key;return a.rd?a.rd(c,k):a.call(null,c,k);}();if(0===g)return e[0]=b,null;if(0>g)return g=function(){var k=b.left;return nh.I?nh.I(a,k,c,d,e):nh.call(null,a,k,c,d,e);}(),null!=g?b.Ic(g):null;g=function(){var k=b.right;return nh.I?nh.I(a,k,c,d,e):nh.call(null,a,k,c,d,e);}();return null!=g?b.Jc(g):null;},oh=function oh(a,b){if(null==a)return b;if(null==b)return a;if(a instanceof hh){if(b instanceof hh){var d=function(){var e=a.right,f=b.left;return oh.rd?oh.rd(e,f):oh.call(null,e,f);}();return d instanceof hh?new hh(d.key,d.g,new hh(a.key,a.g,a.left,d.left),new hh(b.key,b.g,d.right,b.right)):new hh(a.key,a.g,a.left,new hh(b.key,b.g,d,b.right));}return new hh(a.key,a.g,a.left,function(){var e=a.right;return oh.rd?oh.rd(e,b):oh.call(null,e,b);}());}if(b instanceof hh)return new hh(b.key,b.g,function(){var e=b.left;return oh.rd?oh.rd(a,e):oh.call(null,a,e);}(),b.right);d=function(){var e=a.right,f=b.left;return oh.rd?oh.rd(e,f):oh.call(null,e,f);}();return d instanceof hh?new hh(d.key,d.g,new ih(a.key,a.g,a.left,d.left),new ih(b.key,b.g,d.right,b.right)):kh(a.key,a.g,a.left,new ih(b.key,b.g,d,b.right));},ph=function ph(a,b,c,d){if(null!=b){var f=function(){var g=b.key;return a.rd?a.rd(c,g):a.call(null,c,g);}();if(0===f)return d[0]=b,oh(b.left,b.right);if(0>f)return f=function(){var g=b.left;return ph.v?ph.v(a,g,c,d):ph.call(null,a,g,c,d);}(),null!=f||null!=d[0]?b.left instanceof ih?kh(b.key,b.g,f,b.right):new hh(b.key,b.g,f,b.right):null;f=function(){var g=b.right;return ph.v?ph.v(a,g,c,d):ph.call(null,a,g,c,d);}();return null!=f||null!=d[0]?b.right instanceof ih?lh(b.key,b.g,b.left,f):new hh(b.key,b.g,b.left,f):null;}return null;},qh=function qh(a,b,c,d){var f=b.key,g=a.rd?a.rd(c,f):a.call(null,c,f);return 0===g?b.replace(f,d,b.left,b.right):0>g?b.replace(f,b.g,function(){var k=b.left;return qh.v?qh.v(a,k,c,d):qh.call(null,a,k,c,d);}(),b.right):b.replace(f,b.g,b.left,function(){var k=b.right;return qh.v?qh.v(a,k,c,d):qh.call(null,a,k,c,d);}());};function rh(a,b,c,d,e){this.$a=a;this.yb=b;this.l=c;this.s=d;this.u=e;this.j=418776847;this.G=8192;}h=rh.prototype;h.Ab=function(a,b){return sh(this,b);};h.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;){if(e<d){var f=c.H(null,e),g=O(f,0,null);f=O(f,1,null);a.rd?a.rd(f,g):a.call(null,f,g);e+=1;}else if(b=H(b))Kd(b)?(c=hc(b),b=ic(b),g=c,d=J(c),c=g):(c=x(b),g=O(c,0,null),f=O(c,1,null),a.rd?a.rd(f,g):a.call(null,f,g),b=z(b),c=null,d=0),e=0;else return null;}};h.get=function(a,b){return this.F(null,a,b);};h.entries=function(){return new og(H(H(this)));};h.toString=function(){return sc(this);};h.keys=function(){return Mc(tg.Ca?tg.Ca(this):tg.call(null,this));};h.values=function(){return Mc(ug.Ca?ug.Ca(this):ug.call(null,this));};function sh(a,b){for(var c=a.yb;;){if(null!=c){var d=c.key;d=a.$a.rd?a.$a.rd(b,d):a.$a.call(null,b,d);if(0===d)return c;c=0>d?c.left:c.right;}else return null;}}h.has=function(a){return Qd(this,a);};h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){a=sh(this,b);return null!=a?a.g:c;};h.Za=function(a,b,c){return null!=this.yb?Wc(mh(this.yb,b,c)):c;};h.S=function(){return this.s;};h.X=function(){return this.l;};h.Bb=function(){return 0<this.l?fh(this.yb,!1,this.l):null;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Rc(this);};h.N=function(a,b){return mg(this,b);};h.$=function(){return new rh(this.$a,null,0,this.s,0);};h.rb=function(a,b){a=[null];b=ph(this.$a,this.yb,b,a);return null==b?null==fd(a,0)?this:new rh(this.$a,null,0,this.s,null):new rh(this.$a,b.qb(),this.l-1,this.s,null);};h.ya=function(a,b,c){a=[null];var d=nh(this.$a,this.yb,b,c,a);return null==d?(a=fd(a,0),G.rd(c,a.g)?this:new rh(this.$a,qh(this.$a,this.yb,b,c),this.l,this.s,null)):new rh(this.$a,d.qb(),this.l+1,this.s,null);};h.Qd=function(a,b){return null!=sh(this,b);};h.R=function(){return 0<this.l?fh(this.yb,!0,this.l):null;};h.T=function(a,b){return b===this.s?this:new rh(this.$a,this.yb,this.l,b,this.u);};h.V=function(a,b){if(Jd(b))return this.ya(null,kb(b,0),kb(b,1));a=this;for(b=H(b);;){if(null==b)return a;var c=x(b);if(Jd(c))a=vb(a,kb(c,0),kb(c,1)),b=z(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context28;return this.call.apply(this,(0,_concat["default"])(_context28=[this]).call(_context28,bb(b)));};h.Ca=function(a){return this.P(null,a);};h.rd=function(a,b){return this.F(null,a,b);};var th=new rh(Rd,null,0,null,Sc);rh.prototype[Wa]=function(){return Mc(this);};var uh=function uh(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return uh.Nd(0<c.length?new Za((0,_slice["default"])(c).call(c,0),0,null):null);};uh.Nd=function(a){a=H(a);for(var b=ac(xg);;){if(a){var c=z(z(a));b=Me(b,x(a),pd(a));a=c;}else return cc(b);}};uh.D=0;uh.C=function(a){return this.Nd(H(a));};function vh(a){for(var b=[],c=arguments.length,d=0;;){if(d<c)b.push(arguments[d]),d+=1;else break;}a:for(b=H(0<b.length?new Za((0,_slice["default"])(b).call(b,0),0,null):null),d=th;;){if(b)c=z(z(b)),d=vd.Md(d,x(b),pd(b)),b=c;else break a;}return d;}function wh(a){for(var b=[],c=arguments.length,d=0;;){if(d<c)b.push(arguments[d]),d+=1;else break;}a:for(c=arguments[0],b=H(1<b.length?new Za((0,_slice["default"])(b).call(b,1),0,null):null),d=new rh(Td(c),null,0,null,0);;){if(b)c=z(z(b)),d=vd.Md(d,x(b),pd(b)),b=c;else break a;}return d;}function xh(a,b){this.U=a;this.Ya=b;this.j=32374988;this.G=0;}h=xh.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.Ya;};h.wa=function(){var a=(null!=this.U?this.U.j&128||Fa===this.U.$b||(this.U.j?0:Ra(pb,this.U)):Ra(pb,this.U))?this.U.wa(null):z(this.U);return null==a?null:new xh(a,null);};h.O=function(){return Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return this.U.ha(null).key;};h.xa=function(){var a=(null!=this.U?this.U.j&128||Fa===this.U.$b||(this.U.j?0:Ra(pb,this.U)):Ra(pb,this.U))?this.U.wa(null):z(this.U);return null!=a?new xh(a,null):Kc;};h.R=function(){return this;};h.T=function(a,b){return b===this.Ya?this:new xh(this.U,b);};h.V=function(a,b){return ld(b,this);};xh.prototype[Wa]=function(){return Mc(this);};function tg(a){return(a=H(a))?new xh(a,null):null;}function $f(a){return zb(a);}function yh(a,b){this.U=a;this.Ya=b;this.j=32374988;this.G=0;}h=yh.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.S=function(){return this.Ya;};h.wa=function(){var a=(null!=this.U?this.U.j&128||Fa===this.U.$b||(this.U.j?0:Ra(pb,this.U)):Ra(pb,this.U))?this.U.wa(null):z(this.U);return null==a?null:new yh(a,null);};h.O=function(){return Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){return od(b,c,this);};h.ha=function(){return this.U.ha(null).g;};h.xa=function(){var a=(null!=this.U?this.U.j&128||Fa===this.U.$b||(this.U.j?0:Ra(pb,this.U)):Ra(pb,this.U))?this.U.wa(null):z(this.U);return null!=a?new yh(a,null):Kc;};h.R=function(){return this;};h.T=function(a,b){return b===this.Ya?this:new yh(this.U,b);};h.V=function(a,b){return ld(b,this);};yh.prototype[Wa]=function(){return Mc(this);};function ug(a){return(a=H(a))?new yh(a,null):null;}function ag(a){return Ab(a);}function Li(a){return r(bf($d,a))?Yd(function(b,c){return sd.rd(r(b)?b:$e,c);},a):null;}var Ah=function Ah(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Ah.Nd(arguments[0],1<c.length?new Za((0,_slice["default"])(c).call(c,1),0,null):null);};Ah.Nd=function(a,b){if(r(bf($d,b))){var c=function c(d,e){var f=zb(e),g=Ab(e);if(Qd(d,f)){e=vd.Md;var k=Ec.rd(d,f);g=a.rd?a.rd(k,g):a.call(null,k,g);d=e.call(vd,d,f,g);}else d=vd.Md(d,f,g);return d;};return Yd(function(d,e){return Ud(c,r(d)?d:$e,H(e));},b);}return null;};Ah.D=1;Ah.C=function(a){var b=x(a);a=z(a);return this.Nd(b,a);};function sa(a,b){var c=$e;for(b=H(b);;){if(b){var d=x(b),e=Ec.Md(a,d,Rm);c=Xe(e,Rm)?vd.Md(c,d,e):c;b=z(b);}else return Jb(c,Ad(a));}}function Bh(a){this.Vb=a;}Bh.prototype.Ba=function(){return this.Vb.Ba();};Bh.prototype.next=function(){if(this.Vb.Ba())return this.Vb.next().key;throw Error("No such element");};Bh.prototype.remove=function(){return Error("Unsupported operation");};function Ch(a,b,c){this.s=a;this.Cb=b;this.u=c;this.j=15077647;this.G=139268;}h=Ch.prototype;h.toString=function(){return sc(this);};h.keys=function(){return Mc(H(this));};h.entries=function(){return new pg(H(H(this)));};h.values=function(){return Mc(H(this));};h.has=function(a){return Qd(this,a);};h.forEach=function(a){for(var b=H(this),c=null,d=0,e=0;;){if(e<d){var f=c.H(null,e),g=O(f,0,null);f=O(f,1,null);a.rd?a.rd(f,g):a.call(null,f,g);e+=1;}else if(b=H(b))Kd(b)?(c=hc(b),b=ic(b),g=c,d=J(c),c=g):(c=x(b),g=O(c,0,null),f=O(c,1,null),a.rd?a.rd(f,g):a.call(null,f,g),b=z(b),c=null,d=0),e=0;else return null;}};h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){a=wb(this.Cb,b);return r(a)?zb(a):c;};h.Ta=function(){return new Bh(qc(this.Cb));};h.S=function(){return this.s;};h.X=function(){return eb(this.Cb);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Rc(this);};h.N=function(a,b){if(a=Fd(b)){if(a=J(this)===J(b))try{return Zd(function(c,d){return(c=Qd(b,d))?c:new Uc();},this.Cb);}catch(c){if(c instanceof Error)return!1;throw c;}else return a;}else return a;};h.Pb=function(){return new Dh(ac(this.Cb));};h.$=function(){return Jb(Eh,this.s);};h.R=function(){return tg(this.Cb);};h.T=function(a,b){return b===this.s?this:new Ch(b,this.Cb,this.u);};h.V=function(a,b){return new Ch(this.s,vd.Md(this.Cb,b,null),null);};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context29;return this.call.apply(this,(0,_concat["default"])(_context29=[this]).call(_context29,bb(b)));};h.Ca=function(a){return this.P(null,a);};h.rd=function(a,b){return this.F(null,a,b);};var Eh=new Ch(null,$e,Sc);function Fh(a){for(var b=a.length,c=ac(Eh),d=0;;){if(d<b)bc(c,a[d]),d+=1;else break;}return cc(c);}Ch.prototype[Wa]=function(){return Mc(this);};function Dh(a){this.xb=a;this.G=136;this.j=259;}h=Dh.prototype;h.Rb=function(a,b){this.xb=dc(this.xb,b,null);return this;};h.ac=function(){return new Ch(null,cc(this.xb),null);};h.X=function(){return J(this.xb);};h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){return sb(this.xb,b,Md)===Md?c:b;};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context30;return this.call.apply(this,(0,_concat["default"])(_context30=[this]).call(_context30,bb(b)));};h.Ca=function(a){return sb(this.xb,a,Md)===Md?null:a;};h.rd=function(a,b){return sb(this.xb,a,Md)===Md?b:a;};function Gh(a){if(Fd(a))return zd(a,null);a=H(a);if(null==a)return Eh;if(a instanceof Za&&0===a.A)return Fh(a.h);for(var b=ac(Eh);;){if(null!=a){var c=z(a);b=bc(b,nb(a));a=c;}else return cc(b);}}function Hh(a){return function e(c,d){return new ze(null,function(){var f;a:{var g=c;for(f=d;;){var k=g;g=O(k,0,null);if(k=H(k)){if(Qd(f,g))g=Jc(k);else{f=ld(g,e(Jc(k),sd.rd(f,g)));break a;}}else{f=null;break a;}}}return f;},null,null);}(a,Eh);}function ye(a){if(null!=a&&(a.G&4096||Fa===a.dd))return a.Yb(null);if("string"===typeof a)return a;throw Error(["Doesn't support name: ",v.Ca(a)].join(""));}function Ih(a,b){var c=ac($e);a=H(a);for(b=H(b);;){if(a&&b)c=Me(c,x(a),x(b)),a=z(a),b=z(b);else return cc(c);}}var Jh=function Jh(a){switch(arguments.length){case 2:return Jh.rd(arguments[0],arguments[1]);case 3:return Jh.Md(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Jh.Nd(arguments[0],arguments[1],arguments[2],new Za((0,_slice["default"])(c).call(c,3),0,null));}};Jh.rd=function(a,b){return b;};Jh.Md=function(a,b,c){return(a.Ca?a.Ca(b):a.call(null,b))>(a.Ca?a.Ca(c):a.call(null,c))?b:c;};Jh.Nd=function(a,b,c,d){return Ud(function(e,f){return Jh.Md(a,e,f);},Jh.Md(a,b,c),d);};Jh.C=function(a){var b=x(a),c=z(a);a=x(c);var d=z(c);c=x(d);d=z(d);return this.Nd(b,a,c,d);};Jh.D=3;function Kh(a,b){return new ze(null,function(){var c=H(b);if(c){var d=x(c);d=a.Ca?a.Ca(d):a.call(null,d);c=r(d)?ld(x(c),Kh(a,Jc(c))):null;}else c=null;return c;},null,null);}function F(a,b,c){this.start=a;this.step=b;this.count=c;this.j=82;this.G=0;}h=F.prototype;h.X=function(){return this.count;};h.ha=function(){return this.start;};h.H=function(a,b){return this.start+b*this.step;};h.ba=function(a,b,c){return 0<=b&&b<this.count?this.start+b*this.step:c;};h.Oc=function(){if(1>=this.count)throw Error("-drop-first of empty chunk");return new F(this.start+this.step,this.step,this.count-1);};function tj(a,b,c){this.A=a;this.end=b;this.step=c;}tj.prototype.Ba=function(){return 0<this.step?this.A<this.end:this.A>this.end;};tj.prototype.next=function(){var a=this.A;this.A+=this.step;return a;};function I(a,b,c,d,e,f,g){this.s=a;this.start=b;this.end=c;this.step=d;this.da=e;this.ad=f;this.u=g;this.j=32375006;this.G=140800;}h=I.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.Pd=function(){if(null==this.da){var a=this.X(null);32<a?(this.ad=new I(null,this.start+32*this.step,this.end,this.step,null,null,null),this.da=new F(this.start,this.step,32)):this.da=new F(this.start,this.step,a);}};h.H=function(a,b){if(0<=b&&b<this.X(null))return this.start+b*this.step;if(0<=b&&this.start>this.end&&0===this.step)return this.start;throw Error("Index out of bounds");};h.ba=function(a,b,c){return 0<=b&&b<this.X(null)?this.start+b*this.step:0<=b&&this.start>this.end&&0===this.step?this.start:c;};h.Ta=function(){return new tj(this.start,this.end,this.step);};h.S=function(){return this.s;};h.wa=function(){return 0<this.step?this.start+this.step<this.end?new I(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new I(null,this.start+this.step,this.end,this.step,null,null,null):null;};h.X=function(){return Math.ceil((this.end-this.start)/this.step);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return Yc(this,b);};h.Aa=function(a,b,c){for(a=this.start;;){if(0<this.step?a<this.end:a>this.end){c=b.rd?b.rd(c,a):b.call(null,c,a);if(Vc(c))return Fb(c);a+=this.step;}else return c;}};h.ha=function(){return this.start;};h.xa=function(){var a=this.wa(null);return null==a?Kc:a;};h.R=function(){return this;};h.zc=function(){this.Pd();return this.da;};h.pc=function(){this.Pd();return null==this.ad?Kc:this.ad;};h.T=function(a,b){return b===this.s?this:new I(b,this.start,this.end,this.step,this.da,this.ad,this.u);};h.V=function(a,b){return ld(b,this);};h.Pc=function(){return H(this.pc(null));};I.prototype[Wa]=function(){return Mc(this);};function Aj(a,b,c,d,e,f,g){this.s=a;this.start=b;this.end=c;this.step=d;this.da=e;this.ad=f;this.u=g;this.G=140800;this.j=32374988;}h=Aj.prototype;h.toString=function(){return sc(this);};h.indexOf=function(){var a=null;a=function a(b,c){switch(arguments.length){case 1:return ed(this,b,0);case 2:return ed(this,b,c);}throw Error("Invalid arity: "+arguments.length);};a.Ca=function(b){return ed(this,b,0);};a.rd=function(b,c){return ed(this,b,c);};return a;}();h.lastIndexOf=function(){function a(c){return hd(this,c,J(this));}var b=null;b=function b(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return hd(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=a;b.rd=function(c,d){return hd(this,c,d);};return b;}();h.Pd=function(){if(null==this.da){var a=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];a:{var b=0;for(var c=this.start;;){if(32>b){if(a[b]=c,b+=1,c+=this.step,!(0<this.step?c<this.end:c>this.end)){b=this.da=new Ce(a,0,b);break a;}}else{b=c;break a;}}}null==this.da&&(this.da=new Ce(a,0,32),(0<this.step?b<this.end:b>this.end)&&(this.ad=new Aj(null,b,this.end,this.step,null,null,null)));}};h.Ta=function(){return new tj(this.start,this.end,this.step);};h.S=function(){return this.s;};h.wa=function(){return 0<this.step?this.start+this.step<this.end?new Aj(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new Aj(null,this.start+this.step,this.end,this.step,null,null,null):null;};h.O=function(){var a=this.u;return null!=a?a:this.u=a=Pc(this);};h.N=function(a,b){return kd(this,b);};h.$=function(){return Kc;};h.za=function(a,b){return md(b,this);};h.Aa=function(a,b,c){for(a=this.start;;){if(0<this.step?a<this.end:a>this.end){c=b.rd?b.rd(c,a):b.call(null,c,a);if(Vc(c))return Fb(c);a+=this.step;}else return c;}};h.ha=function(){return this.start;};h.xa=function(){var a=this.wa(null);return null==a?Kc:a;};h.R=function(){return this;};h.zc=function(){this.Pd();return this.da;};h.pc=function(){this.Pd();return null==this.ad?Kc:this.ad;};h.T=function(a,b){return b===this.s?this:new Aj(b,this.start,this.end,this.step,this.da,this.ad,this.u);};h.V=function(a,b){return ld(b,this);};h.Pc=function(){return H(this.pc(null));};Aj.prototype[Wa]=function(){return Mc(this);};function ta(a,b){return Hj(a,b);}function Hj(a,b){return b<=a?Kc:Pd(a)&&Pd(b)&&Pd(1)?new I(null,a,b,1,null,null,null):new Aj(null,a,b,1,null,null,null);}function Lh(a,b){return new ze(null,function(){var c=H(b);return c?ld(x(c),Lh(a,pf(a,c))):null;},null,null);}function Mh(a){return cc(Ud(function(b,c){return Me(b,c,Ec.Md(b,c,0)+1);},ac($e),a));}function Nh(){var a=ye;return function(){function b(k,l,n){return new Q(null,2,5,S,[we.Md?we.Md(k,l,n):we.call(null,k,l,n),a.Md?a.Md(k,l,n):a.call(null,k,l,n)],null);}function c(k,l){return new Q(null,2,5,S,[we.rd?we.rd(k,l):we.call(null,k,l),a.rd?a.rd(k,l):a.call(null,k,l)],null);}function d(k){return new Q(null,2,5,S,[we.Ca?we.Ca(k):we.call(null,k),a.Ca?a.Ca(k):a.call(null,k)],null);}function e(){return new Q(null,2,5,S,[we.i?we.i():we.call(null),a.i?a.i():a.call(null)],null);}var f=null,g=function(){function k(n,q,t,u){var A=null;if(3<arguments.length){A=0;for(var K=Array(arguments.length-3);A<K.length;){K[A]=arguments[A+3],++A;}A=new Za(K,0,null);}return l.call(this,n,q,t,A);}function l(n,q,t,u){return new Q(null,2,5,S,[Ve(we,n,q,t,u),Ve(a,n,q,t,u)],null);}k.D=3;k.C=function(n){var q=x(n);n=z(n);var t=x(n);n=z(n);var u=x(n);n=Jc(n);return l(q,t,u,n);};k.Nd=l;return k;}();f=function f(k,l,n,q){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);case 3:return b.call(this,k,l,n);default:var t=null;if(3<arguments.length){t=0;for(var u=Array(arguments.length-3);t<u.length;){u[t]=arguments[t+3],++t;}t=new Za(u,0,null);}return g.Nd(k,l,n,t);}};f.D=3;f.C=g.C;f.i=e;f.Ca=d;f.rd=c;f.Md=b;f.Nd=g.Nd;return f;}();}function Qj(a){a:for(var b=a;;){if(b=H(b))b=z(b);else break a;}return a;}function Oh(a,b){if("string"===typeof b)return a=a.exec(b),null!=a&&G.rd(a[0],b)?1===a.length?a[0]:Yf(a):null;throw new TypeError("re-matches must match against a string.");}function Ph(a,b){if("string"===typeof b)return a=a.exec(b),null==a?null:1===a.length?a[0]:Yf(a);throw new TypeError("re-find must match against a string.");}var Yj=function Yj(a,b){var d=a.exec(b);if(null==d)return null;var e=d[0],f=1===d.length?e:Yf(d);return ld(f,new ze(null,function(){var g=e.length;g=d.index+(1>g?1:g);return g<=b.length?(g=b.substring(g),Yj.rd?Yj.rd(a,g):Yj.call(null,a,g)):null;},null,null));};function ck(a){var b=/[:.#][^:.#]+/;if("string"===typeof a)return Yj(b,a);throw new TypeError("re-seq must match against a string.");}function Qh(a){if(a instanceof RegExp)return a;var b=Ph(/^\(\?([idmsux]*)\)/,a),c=O(b,0,null);b=O(b,1,null);return new RegExp(a.substring(null==c?0:c.length),r(b)?b:"");}function Rh(a,b,c,d,e,f,g){var k=Ia;Ia=null==Ia?null:Ia-1;try{if(null!=Ia&&0>Ia)return Yb(a,"#");Yb(a,c);if(0===Oa.Ca(f))H(g)&&Yb(a,function(){var A=Sh.Ca(f);return r(A)?A:"...";}());else{if(H(g)){var l=x(g);b.Md?b.Md(l,a,f):b.call(null,l,a,f);}for(var n=z(g),q=Oa.Ca(f)-1;;){if(!n||null!=q&&0===q){H(n)&&0===q&&(Yb(a,d),Yb(a,function(){var A=Sh.Ca(f);return r(A)?A:"...";}()));break;}else{Yb(a,d);var t=x(n);c=a;g=f;b.Md?b.Md(t,c,g):b.call(null,t,c,g);var u=z(n);c=q-1;n=u;q=c;}}}return Yb(a,e);}finally{Ia=k;}}function Th(a,b){b=H(b);for(var c=null,d=0,e=0;;){if(e<d){var f=c.H(null,e);Yb(a,f);e+=1;}else if(b=H(b))c=b,Kd(c)?(b=hc(c),d=ic(c),c=b,f=J(b),b=d,d=f):(f=x(c),Yb(a,f),b=z(c),c=null,d=0),e=0;else return null;}}function Uh(a){if(null==Ga)throw Error("No *print-fn* fn set for evaluation environment");Ga.call(null,a);return null;}var Vh={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function Wh(a){return['"',v.Ca(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return Vh[b];})),'"'].join("");}function Xh(a,b){return(a=Od(Ec.rd(a,Ma)))?(a=null!=b?b.j&131072||Fa===b.Cc?!0:!1:!1)?null!=Ad(b):a:a;}function Yh(a,b,c){if(null==a)return Yb(b,"nil");if(Xh(c,a)){Yb(b,"^");var d=Ad(a);Zh.Md?Zh.Md(d,b,c):Zh.call(null,d,b,c);Yb(b," ");}if(a.Sc)return a.nd(b);if(null!=a?a.j&2147483648||Fa===a.W||(a.j?0:Ra(Zb,a)):Ra(Zb,a))return $b(a,b,c);if(!0===a||!1===a)return Yb(b,v.Ca(a));if("number"===typeof a)return Yb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":v.Ca(a));if(null!=a&&a.constructor===Object)return Yb(b,"#js "),d=nf.rd(function(f){return new Sf(null!=Oh(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,f)?xe.Ca(f):f,a[f]);},ua(a)),$h.v?$h.v(d,Zh,b,c):$h.call(null,d,Zh,b,c);if((0,_isArray["default"])(a))return Rh(b,Zh,"#js ["," ","]",c,a);if("string"===typeof a)return r(La.Ca(c))?Yb(b,Wh(a)):Yb(b,a);if("function"===typeof a){var e=a.name;c=r(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e);}())?"Function":e;return Th(b,M(["#object[",c,r(!1)?[' "',v.Ca(a),'"'].join(""):"","]"]));}if(a instanceof Date)return c=function c(f,g){for(f=v.Ca(f);;){if(f.length<g)f=["0",f].join("");else return f;}},Th(b,M(['#inst "',c(a.getUTCFullYear(),4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return Th(b,M(['#"',a.source,'"']));if("symbol"===ia(a)||"undefined"!==typeof _symbol["default"]&&a instanceof _symbol["default"])return Th(b,M(["#object[",a.toString(),"]"]));if(r(function(){var f=null==a?null:a.constructor;return null==f?null:f.qc;}()))return Th(b,M(["#object[",a.constructor.qc.replace(/\//g,"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==f?null:f.name;}();c=r(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e);}())?"Object":e;return null==a.constructor?Th(b,M(["#object[",c,"]"])):Th(b,M(["#object[",c," ",v.Ca(a),"]"]));}function Zh(a,b,c){var d=ai.Ca(c);return r(d)?(c=vd.Md(c,bi,Yh),d.Md?d.Md(a,b,c):d.call(null,a,b,c)):Yh(a,b,c);}function di(a,b){if(Dd(a))b="";else{var c=v,d=c.Ca,e=new za(),f=new rc(e);Zh(x(a),f,b);a=H(z(a));for(var g=null,k=0,l=0;;){if(l<k){var n=g.H(null,l);Yb(f," ");Zh(n,f,b);l+=1;}else if(a=H(a))g=a,Kd(g)?(a=hc(g),k=ic(g),g=a,n=J(a),a=k,k=n):(n=x(g),Yb(f," "),Zh(n,f,b),a=z(g),g=null,k=0),l=0;else break;}b=d.call(c,e);}return b;}function ei(a,b){return Uh(di(a,b));}var fi=function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){return ei(c,vd.Md(Ja(),La,!1));}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}();function gi(a){for(var b=[],c=arguments.length,d=0;;){if(d<c)b.push(arguments[d]),d+=1;else break;}hi(0<b.length?new Za((0,_slice["default"])(b).call(b,0),0,null):null);}function hi(a){ei(a,vd.Md(Ja(),La,!1));r(Ha)&&(a=Ja(),Uh("\n"),Ec.rd(a,Ka));}function ii(a){return a instanceof Dc?Fc.rd(null,ye(a)):xe.rd(null,ye(a));}function ji(a){if(r(!1)){var b=H(a),c=H(b),d=x(c);z(c);O(d,0,null);O(d,1,null);c=de(a);for(a=null;;){d=a;b=H(b);a=x(b);var e=z(b),f=a;a=O(f,0,null);b=O(f,1,null);if(r(f)){if(a instanceof E||a instanceof Dc){if(r(d)){if(G.rd(d,we(a)))c=vd.Md(c,ii(a),b),a=d,b=e;else return null;}else if(d=we(a),r(d))c=vd.Md(c,ii(a),b),a=d,b=e;else return null;}else return null;}else return new Q(null,2,5,S,[d,c],null);}}else return null;}function ki(a,b,c,d,e){return Rh(d,function(f,g,k){var l=zb(f);c.Md?c.Md(l,g,k):c.call(null,l,g,k);Yb(g," ");f=Ab(f);return c.Md?c.Md(f,g,k):c.call(null,f,g,k);},[v.Ca(a),"{"].join(""),", ","}",e,H(b));}function $h(a,b,c,d){var e=Hd(a)?ji(a):null,f=O(e,0,null);e=O(e,1,null);return r(f)?ki(["#:",v.Ca(f)].join(""),e,b,c,d):ki(null,a,b,c,d);}Gc.prototype.W=Fa;Gc.prototype.K=function(a,b,c){Yb(b,"#'");return Zh(this.Mb,b,c);};Za.prototype.W=Fa;Za.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};ze.prototype.W=Fa;ze.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};Sf.prototype.W=Fa;Sf.prototype.K=function(a,b,c){return Rh(b,Zh,"["," ","]",c,this);};eh.prototype.W=Fa;eh.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};Ug.prototype.W=Fa;Ug.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};ih.prototype.W=Fa;ih.prototype.K=function(a,b,c){return Rh(b,Zh,"["," ","]",c,this);};rg.prototype.W=Fa;rg.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};Nc.prototype.W=Fa;Nc.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};bg.prototype.W=Fa;bg.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};te.prototype.W=Fa;te.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};tf.prototype.W=Fa;tf.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};jd.prototype.W=Fa;jd.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};I.prototype.W=Fa;I.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};Zg.prototype.W=Fa;Zg.prototype.K=function(a,b,c){return $h(this,Zh,b,c);};Wg.prototype.W=Fa;Wg.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};rh.prototype.W=Fa;rh.prototype.K=function(a,b,c){return $h(this,Zh,b,c);};Ch.prototype.W=Fa;Ch.prototype.K=function(a,b,c){return Rh(b,Zh,"#{"," ","}",c,this);};Ee.prototype.W=Fa;Ee.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};jf.prototype.W=Fa;jf.prototype.K=function(a,b,c){Yb(b,"#object[cljs.core.Atom ");Zh(new m(null,1,[li,this.state],null),b,c);return Yb(b,"]");};yh.prototype.W=Fa;yh.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};hh.prototype.W=Fa;hh.prototype.K=function(a,b,c){return Rh(b,Zh,"["," ","]",c,this);};rf.prototype.W=Fa;rf.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};Q.prototype.W=Fa;Q.prototype.K=function(a,b,c){return Rh(b,Zh,"["," ","]",c,this);};hg.prototype.W=Fa;hg.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};qe.prototype.W=Fa;qe.prototype.K=function(a,b){return Yb(b,"()");};ig.prototype.W=Fa;ig.prototype.K=function(a,b,c){return Rh(b,Zh,"#queue ["," ","]",c,H(this));};m.prototype.W=Fa;m.prototype.K=function(a,b,c){return $h(this,Zh,b,c);};Aj.prototype.W=Fa;Aj.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};xh.prototype.W=Fa;xh.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};N.prototype.W=Fa;N.prototype.K=function(a,b,c){return Rh(b,Zh,"("," ",")",c,this);};Dc.prototype.Gb=Fa;Dc.prototype.kb=function(a,b){if(b instanceof Dc)return Cc(this,b);throw Error(["Cannot compare ",v.Ca(this)," to ",v.Ca(b)].join(""));};E.prototype.Gb=Fa;E.prototype.kb=function(a,b){if(b instanceof E)return ue(this,b);throw Error(["Cannot compare ",v.Ca(this)," to ",v.Ca(b)].join(""));};Q.prototype.Gb=Fa;Q.prototype.kb=function(a,b){if(Jd(b))return Sd(this,b);throw Error(["Cannot compare ",v.Ca(this)," to ",v.Ca(b)].join(""));};Sf.prototype.Gb=Fa;Sf.prototype.kb=function(a,b){if(Jd(b))return Sd(this,b);throw Error(["Cannot compare ",v.Ca(this)," to ",v.Ca(b)].join(""));};ih.prototype.Gb=Fa;ih.prototype.kb=function(a,b){if(Jd(b))return Sd(this,b);throw Error(["Cannot compare ",v.Ca(this)," to ",v.Ca(b)].join(""));};hh.prototype.Gb=Fa;hh.prototype.kb=function(a,b){if(Jd(b))return Sd(this,b);throw Error(["Cannot compare ",v.Ca(this)," to ",v.Ca(b)].join(""));};function mi(a){this.f=a;this.value=null;this.j=2147516416;this.G=1;}mi.prototype.Xb=function(){r(this.f)&&(this.value=this.f.i?this.f.i():this.f.call(null),this.f=null);return this.value;};mi.prototype.K=function(a,b,c){Yb(b,"#object[cljs.core.Delay ");Zh(new m(null,2,[ni,null==this.f?oi:pi,li,this.value],null),b,c);return Yb(b,"]");};function fk(){}function hk(a){if(null!=a&&null!=a.od)a=a.od(a);else{var b=hk[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=hk._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IEncodeJS.-clj-\x3ejs",a);}return a;}function kk(a,b){return(null!=a?Fa===a.bd||(a.Ld?0:Ra(fk,a)):Ra(fk,a))?hk(a):"string"===typeof a||"number"===typeof a||a instanceof E||a instanceof Dc?b.Ca?b.Ca(a):b.call(null,a):di(M([a]),Ja());}var lk=function lk(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return lk.Nd(arguments[0],1<c.length?new Za((0,_slice["default"])(c).call(c,1),0,null):null);};lk.Nd=function(a,b){b=D(b);var c=Ec.Md(b,tk,ye),d=function g(f){if(null==f)return null;if(null!=f?Fa===f.bd||(f.Ld?0:Ra(fk,f)):Ra(fk,f))return hk(f);if(f instanceof E)return c.Ca?c.Ca(f):c.call(null,f);if(f instanceof Dc)return v.Ca(f);if(Hd(f)){var k={};f=H(f);for(var l=null,n=0,q=0;;){if(q<n){var t=l.H(null,q),u=O(t,0,null);t=O(t,1,null);u=kk(u,d);t=g(t);k[u]=t;q+=1;}else if(f=H(f))Kd(f)?(n=hc(f),f=ic(f),l=n,n=J(n)):(n=x(f),l=O(n,0,null),n=O(n,1,null),l=kk(l,d),n=g(n),k[l]=n,f=z(f),l=null,n=0),q=0;else break;}return k;}if(Ed(f)){k=[];f=H(nf.rd(g,f));l=null;for(q=n=0;;){if(q<n)u=l.H(null,q),k.push(u),q+=1;else if(f=H(f))l=f,Kd(l)?(f=hc(l),q=ic(l),l=f,n=J(f),f=q):(f=x(l),k.push(f),f=z(l),l=null,n=0),q=0;else break;}return k;}return f;};return d(a);};lk.D=1;lk.C=function(a){var b=x(a);a=z(a);return this.Nd(b,a);};var vi=null;function wi(){null==vi&&(vi=kf(new m(null,3,[xi,$e,yi,$e,zi,$e],null)));return vi;}function Ai(a,b,c){var d=G.rd(b,c);if(d)return d;d=zi.Ca(a);d=d.Ca?d.Ca(b):d.call(null,b);if(!(d=Qd(d,c))&&(d=Jd(c))){if(d=Jd(b)){if(d=J(c)===J(b)){d=!0;for(var e=0;;){if(d&&e!==J(c))d=Ai(a,b.Ca?b.Ca(e):b.call(null,e),c.Ca?c.Ca(e):c.call(null,e)),e+=1;else return d;}}else return d;}else return d;}else return d;}function Bi(a){var b=Fb(wi());return Ye(Ec.rd(xi.Ca(b),a));}function Ci(a,b,c,d){mf.rd(a,function(){return Fb(b);});mf.rd(c,function(){return Fb(d);});}var Di=function Di(a,b,c){var e=function(){var f=Fb(c);return f.Ca?f.Ca(a):f.call(null,a);}();e=r(r(e)?e.Ca?e.Ca(b):e.call(null,b):e)?!0:null;if(r(e))return e;e=function(){for(var f=Bi(b);;){if(0<J(f)){var g=x(f);Di.Md?Di.Md(a,g,c):Di.call(null,a,g,c);f=Jc(f);}else return null;}}();if(r(e))return e;e=function(){for(var f=Bi(a);;){if(0<J(f)){var g=x(f);Di.Md?Di.Md(g,b,c):Di.call(null,g,b,c);f=Jc(f);}else return null;}}();return r(e)?e:!1;};function Ei(a,b,c,d){c=Di(a,b,c);return r(c)?c:Ai(d,a,b);}var Fi=function Fi(a,b,c,d,e,f,g,k){var n=Ud(function(t,u){var A=O(u,0,null);O(u,1,null);if(Ai(Fb(c),b,A)){t=null==t||Ei(A,x(t),e,Fb(c))?u:t;if(!Ei(x(t),A,e,Fb(c)))throw Error(["Multiple methods in multimethod '",v.Ca(a),"' match dispatch value: ",v.Ca(b)," -\x3e ",v.Ca(A)," and ",v.Ca(x(t)),", and neither is preferred"].join(""));return t;}return t;},null,Fb(d)),q=function(){var t;if(t=null==n)t=Fb(d),t=t.Ca?t.Ca(k):t.call(null,k);return r(t)?new Q(null,2,5,S,[k,t],null):n;}();if(r(q)){if(G.rd(Fb(g),Fb(c)))return mf.v(f,vd,b,pd(q)),pd(q);Ci(f,d,g,c);return Fi.aa?Fi.aa(a,b,c,d,e,f,g,k):Fi.call(null,a,b,c,d,e,f,g,k);}return null;};function Gi(a,b){throw Error(["No method in multimethod '",v.Ca(a),"' for dispatch value: ",v.Ca(b)].join(""));}function Hi(){var a=Fc.rd("cljs.tools.reader.impl.inspect","inspect*"),b=P,c=Ca,d=Da,e=cb,f=lb,g=Ni,k=Oi;this.name=a;this.o=g;this.pd=k;this.rc=b;this.tc=c;this.sd=d;this.sc=e;this.mc=f;this.j=4194305;this.G=4352;}h=Hi.prototype;h.call=function(a){switch(arguments.length-1){case 0:return this.i();case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);case 3:return this.Md(arguments[1],arguments[2],arguments[3]);case 4:return this.v(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.I(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.ua(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);case 11:return this.ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.la(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13]);case 14:return this.na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.oa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.ta(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.Od(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context31;return this.call.apply(this,(0,_concat["default"])(_context31=[this]).call(_context31,bb(b)));};h.i=function(){var a=this.o.i?this.o.i():this.o.call(null),b=Pi(this,a);r(b)||Gi(this.name,a);return b.i?b.i():b.call(null);};h.Ca=function(a){var b=this.o.Ca?this.o.Ca(a):this.o.call(null,a),c=Pi(this,b);r(c)||Gi(this.name,b);return c.Ca?c.Ca(a):c.call(null,a);};h.rd=function(a,b){var c=this.o.rd?this.o.rd(a,b):this.o.call(null,a,b),d=Pi(this,c);r(d)||Gi(this.name,c);return d.rd?d.rd(a,b):d.call(null,a,b);};h.Md=function(a,b,c){var d=this.o.Md?this.o.Md(a,b,c):this.o.call(null,a,b,c),e=Pi(this,d);r(e)||Gi(this.name,d);return e.Md?e.Md(a,b,c):e.call(null,a,b,c);};h.v=function(a,b,c,d){var e=this.o.v?this.o.v(a,b,c,d):this.o.call(null,a,b,c,d),f=Pi(this,e);r(f)||Gi(this.name,e);return f.v?f.v(a,b,c,d):f.call(null,a,b,c,d);};h.I=function(a,b,c,d,e){var f=this.o.I?this.o.I(a,b,c,d,e):this.o.call(null,a,b,c,d,e),g=Pi(this,f);r(g)||Gi(this.name,f);return g.I?g.I(a,b,c,d,e):g.call(null,a,b,c,d,e);};h.fa=function(a,b,c,d,e,f){var g=this.o.fa?this.o.fa(a,b,c,d,e,f):this.o.call(null,a,b,c,d,e,f),k=Pi(this,g);r(k)||Gi(this.name,g);return k.fa?k.fa(a,b,c,d,e,f):k.call(null,a,b,c,d,e,f);};h.ua=function(a,b,c,d,e,f,g){var k=this.o.ua?this.o.ua(a,b,c,d,e,f,g):this.o.call(null,a,b,c,d,e,f,g),l=Pi(this,k);r(l)||Gi(this.name,k);return l.ua?l.ua(a,b,c,d,e,f,g):l.call(null,a,b,c,d,e,f,g);};h.aa=function(a,b,c,d,e,f,g,k){var l=this.o.aa?this.o.aa(a,b,c,d,e,f,g,k):this.o.call(null,a,b,c,d,e,f,g,k),n=Pi(this,l);r(n)||Gi(this.name,l);return n.aa?n.aa(a,b,c,d,e,f,g,k):n.call(null,a,b,c,d,e,f,g,k);};h.va=function(a,b,c,d,e,f,g,k,l){var n=this.o.va?this.o.va(a,b,c,d,e,f,g,k,l):this.o.call(null,a,b,c,d,e,f,g,k,l),q=Pi(this,n);r(q)||Gi(this.name,n);return q.va?q.va(a,b,c,d,e,f,g,k,l):q.call(null,a,b,c,d,e,f,g,k,l);};h.ja=function(a,b,c,d,e,f,g,k,l,n){var q=this.o.ja?this.o.ja(a,b,c,d,e,f,g,k,l,n):this.o.call(null,a,b,c,d,e,f,g,k,l,n),t=Pi(this,q);r(t)||Gi(this.name,q);return t.ja?t.ja(a,b,c,d,e,f,g,k,l,n):t.call(null,a,b,c,d,e,f,g,k,l,n);};h.ka=function(a,b,c,d,e,f,g,k,l,n,q){var t=this.o.ka?this.o.ka(a,b,c,d,e,f,g,k,l,n,q):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q),u=Pi(this,t);r(u)||Gi(this.name,t);return u.ka?u.ka(a,b,c,d,e,f,g,k,l,n,q):u.call(null,a,b,c,d,e,f,g,k,l,n,q);};h.la=function(a,b,c,d,e,f,g,k,l,n,q,t){var u=this.o.la?this.o.la(a,b,c,d,e,f,g,k,l,n,q,t):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t),A=Pi(this,u);r(A)||Gi(this.name,u);return A.la?A.la(a,b,c,d,e,f,g,k,l,n,q,t):A.call(null,a,b,c,d,e,f,g,k,l,n,q,t);};h.ma=function(a,b,c,d,e,f,g,k,l,n,q,t,u){var A=this.o.ma?this.o.ma(a,b,c,d,e,f,g,k,l,n,q,t,u):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u),K=Pi(this,A);r(K)||Gi(this.name,A);return K.ma?K.ma(a,b,c,d,e,f,g,k,l,n,q,t,u):K.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u);};h.na=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A){var K=this.o.na?this.o.na(a,b,c,d,e,f,g,k,l,n,q,t,u,A):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A),U=Pi(this,K);r(U)||Gi(this.name,K);return U.na?U.na(a,b,c,d,e,f,g,k,l,n,q,t,u,A):U.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A);};h.oa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K){var U=this.o.oa?this.o.oa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K),Z=Pi(this,U);r(Z)||Gi(this.name,U);return Z.oa?Z.oa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K):Z.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K);};h.pa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U){var Z=this.o.pa?this.o.pa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U),ja=Pi(this,Z);r(ja)||Gi(this.name,Z);return ja.pa?ja.pa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U):ja.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U);};h.qa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z){var ja=this.o.qa?this.o.qa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z),da=Pi(this,ja);r(da)||Gi(this.name,ja);return da.qa?da.qa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z):da.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z);};h.ra=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja){var da=this.o.ra?this.o.ra(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja),xa=Pi(this,da);r(xa)||Gi(this.name,da);return xa.ra?xa.ra(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja):xa.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja);};h.sa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da){var xa=this.o.sa?this.o.sa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da),Ea=Pi(this,xa);r(Ea)||Gi(this.name,xa);return Ea.sa?Ea.sa(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da):Ea.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da);};h.ta=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa){var Ea=this.o.ta?this.o.ta(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa):this.o.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa),ka=Pi(this,Ea);r(ka)||Gi(this.name,Ea);return ka.ta?ka.ta(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa):ka.call(null,a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa);};h.Od=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea){var ka=We(this.o,a,b,c,d,M([e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea])),p=Pi(this,ka);r(p)||Gi(this.name,ka);return We(p,a,b,c,d,M([e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea]));};function Qi(a,b){var c=Ri;mf.v(c.tc,vd,a,b);Ci(c.sc,c.tc,c.mc,c.rc);}function Pi(a,b){G.rd(Fb(a.mc),Fb(a.rc))||Ci(a.sc,a.tc,a.mc,a.rc);var c=Fb(a.sc);c=c.Ca?c.Ca(b):c.call(null,b);return r(c)?c:Fi(a.name,b,a.rc,a.tc,a.sd,a.sc,a.mc,a.pd);}h.Yb=function(){return jc(this.name);};h.Zb=function(){return kc(this.name);};h.O=function(){return w(this);};function Si(a){this.Nb=a;this.u=null;this.j=2153775104;this.G=2048;}h=Si.prototype;h.toString=function(){return this.Nb;};h.N=function(a,b){return b instanceof Si&&this.Nb===b.Nb;};h.K=function(a,b){return Yb(b,['#uuid "',v.Ca(this.Nb),'"'].join(""));};h.O=function(){null==this.u&&(this.u=Ac(this.Nb));return this.u;};h.kb=function(a,b){if(b instanceof Si)return y(this.Nb,b.Nb);throw Error(["Cannot compare ",v.Ca(this)," to ",v.Ca(b)].join(""));};function Ti(a,b,c){var d=Error(a);this.message=a;this.data=b;this.Nc=c;this.name=d.name;this.description=d.description;this.number=d.number;this.fileName=d.fileName;this.lineNumber=d.lineNumber;this.columnNumber=d.columnNumber;this.stack=d.stack;return this;}Ti.prototype.__proto__=Error.prototype;Ti.prototype.W=Fa;Ti.prototype.K=function(a,b,c){Yb(b,"#error {:message ");Zh(this.message,b,c);r(this.data)&&(Yb(b,", :data "),Zh(this.data,b,c));r(this.Nc)&&(Yb(b,", :cause "),Zh(this.Nc,b,c));return Yb(b,"}");};Ti.prototype.toString=function(){return sc(this);};function Ui(a,b){return Wk(a,b,null);}function Wk(a,b,c){return new Ti(a,b,c);}function Wi(a,b){this.tag=a;this.form=b;this.j=2153775360;this.G=0;}h=Wi.prototype;h.toString=function(){return sc(this);};h.N=function(a,b){return b instanceof Wi&&G.rd(this.tag,b.tag)&&G.rd(this.form,b.form);};h.O=function(){return 31*Ac(this.tag)+Ac(this.form);};h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){switch(b instanceof E?b.ca:null){case"tag":return this.tag;case"form":return this.form;default:return c;}};h.K=function(a,b,c){Yb(b,["#",v.Ca(this.tag)," "].join(""));return Zh(this.form,b,c);};var Xi="arguments abstract await boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield methods null constructor".split(" "),Yi=null;function Zi(a){null==Yi&&(Yi=Ud(function(b,c){b[c]=!0;return b;},{},Xi));return Yi.hasOwnProperty(a);}function $i(a){var b=v.Ca(a);for(var c=new za(),d=0;;){if(d<b.length){var e=b.charAt(d),f=va(Xa,e);null!=f?c.append(f):c.append(e);d+=1;}else break;}b=c.toString();b=".."===b?"_DOT__DOT_":r(Zi(b))?[b,"$"].join(""):b;return a instanceof Dc?Fc.Ca(b):b;}function aj(a){this.name=a;this.j=6291456;this.G=0;}aj.prototype.toString=function(){return v.Ca(this.name);};aj.prototype.N=function(a,b){return b instanceof aj?G.rd(this.name,b.name):!1;};aj.prototype.O=function(){return Ac(this.name);};var bj=null;function cj(a,b){for(;;){if(null==a)return null;if(null==b)return a;a=va(a,x(b));b=z(b);}}function dj(a){var b=$i(v.Ca(a)).split(".");return cj(function(){try{var c=eval(x(b));return r(r(c)?null!=c?c.constructor===Object:!1:c)?c:null;}catch(d){if(d instanceof ReferenceError)return null;throw d;}}(),z(b));}"undefined"!==typeof console&&Pa();ya=commonjsGlobal;Pa();var T=new E(null,"nt","nt",-835425781),ej=new E(null,"ns","ns",441598760),Xk=new E(null,"meter","meter",-187641611),ws=new E(null,"rest","rest",-1241696419),fl=new E(null,"metrics","metrics",394093469),gj=new Dc(null,"not-native","not-native",-236392494,null),hj=new E(null,"content","content",15833224),ij=new E(null,"msg-cache","msg-cache",-733775070),jj=new Dc(null,"defrecord*","defrecord*",-1936366207,null),li=new E(null,"val","val",128701612),Vi=new E(null,"readers","readers",-2118263030),hl=new E(null,"entity","entity",-450970276),lj=new E(null,"line","line",212345235),ql=new E(null,"pulse","pulse",-244494476),nj=new E(null,"arglists","arglists",1661989754),oj=new E(null,"DIGIT","DIGIT",341251338),pj=new E(null,"repeat","repeat",832692087),qj=new Dc(null,"js*","js*",-1134233646,null),rj=new E(null,"ALPHA","ALPHA",-1463859144),sj=new Dc(null,"ns*","ns*",1840949383,null),uj=new E(null,"defined-as","defined-as",-474679152),vj=new E(null,"comma","comma",1699024745),wj=new Dc(null,"catch","catch",-1616370245,null),xj=new E(null,"lo","lo",-931799889),ul=new E(null,"kind","kind",-717265803),yj=new E(null,"Epsilon","Epsilon",133418452),zj=new E(null,"low","low",-1601362409),Cl=new E(null,"headers","headers",-835030129),Bj=new E(null,"string","string",-1989541586),Cj=new E(null,"NUM","NUM",-218662260),Dj=new E(null,"LF","LF",1177033158),Fj=new E(null,"factor","factor",-2103172748),Gj=new E(null,"parsers","parsers",-804353827),Jl=new E(null,"beat","beat",-817854366),Ij=new E(null,"end-line","end-line",1837326455),Jj=new Dc(null,"fn*","fn*",-752876845,null),Kj=new E(null,"start-production","start-production",687546537),Lj=new E(null,"namespaced-map","namespaced-map",1235665380),Mj=new E(null,"allow","allow",-1857325745),Nj=new E(null,"rulename-right","rulename-right",1125609193),Oj=new E(null,"source","source",-433931539),Pj=new E(null,"private","private",-558947994),Tl=new E(null,"items","items",1031954938),Rj=new E(null,"memory","memory",-1449401430),ni=new E(null,"status","status",-1997798413),Sj=new E(null,"trace?","trace?",1730690679),Tj=new E(null,"success","success",1890645906),yi=new E(null,"descendants","descendants",1824886031),Uj=new E(null,"start","start",-355208981),W=new E(null,"tag","tag",-1290361223),Vj=new Dc("cljs.core","vec","cljs.core/vec",307622519,null),Wj=new Dc(null,"new","new",-444906321,null),Xj=new Dc("cljs.core","concat","cljs.core/concat",-1133584918,null),$l=new E(null,"term","term",-1817390416),Zj=new E(null,"num-val","num-val",1497434478),ak=new E(null,"parser2","parser2",1013754688),bk=new E(null,"features","features",-1146962336),dm=new E(null,"number","number",1570378438),dk=new E(null,"parser1","parser1",-439601422),ek=new Dc(null,"do","do",1686842252,null),nm=new E(null,"identifier","identifier",-805503498),gk=new E(null,"alternation","alternation",-1162147630),qm=new E(null,"beats","beats",-1172188163),ik=new E(null,"test","test",577538877),jk=new E(null,"end-column","end-column",1425389514),Dm=new E(null,"assign","assign",-1590426222),Qm=new E(null,"mul","mul",-354626062),mk=new E(null,"cat","cat",-1457810207),ai=new E(null,"alt-impl","alt-impl",670969595),nk=new Dc(null,"pending-forms","pending-forms",-1225172071,null),ok=new E(null,"end-of-string","end-of-string",1567354241),pk=new E(null,"tags","tags",1771418977),qk=new E(null,"hide-nt","hide-nt",-228813845),Rm=new E("cljs.core","not-found","cljs.core/not-found",-1572889185),rk=new E(null,"rulename","rulename",948914160),sk=new E(null,"regexp","regexp",-541372782),Tm=new E(null,"int","int",-1741416922),uk=new E(null,"grammar","grammar",1881328267),vk=new E(null,"unhide","unhide",-413983695),wk=new Dc(null,"try","try",-1273693247,null),xk=new Dc("cljs.tools.reader","read-string*","cljs.tools.reader/read-string*",1492661621,null),yk=new Dc(null,"finally","finally",-1065347064,null),zk=new Dc(null,"throw","throw",595905694,null),Ak=new Dc(null,"/","/",-1371932971,null),cn=new E(null,"bar","bar",-1386246584),Ck=new E(null,"auto-whitespace","auto-whitespace",741152317),Dk=new E(null,"raw","raw",1604651272),hn=new E(null,"bool","bool",1444635321),Ka=new E(null,"flush-on-newline","flush-on-newline",-151457939),Ek=new E(null,"illegal-argument","illegal-argument",-1845493170),jn=new E(null,"coll","coll",1647737163),Fk=new E(null,"rule","rule",729973257),Gk=new E(null,"rules","rules",1198912366),Ik=new E(null,"nodes","nodes",-2099585805),Jk=new Dc(null,"if","if",1181717262,null),Kk=new E(null,"concatenation","concatenation",-951369614),Lk=new E(null,"character","character",380652989),rn=new E(null,"word","word",-420123725),Nk=new Dc(null,"loop*","loop*",615029416,null),sn=new E(null,"attribute","attribute",-2074029119),Pk=new Dc(null,"quote","quote",1377916282,null),Qk=new E(null,"look","look",-539441433),Rk=new E(null,"opt-whitespace","opt-whitespace",1115207927),Sk=new E(null,"negative-lookahead","negative-lookahead",874382387),Tk=new E(null,"hierarchy","hierarchy",-1053470341),xn=new E(null,"loop","loop",-395552849),Uk=new E(null,"trace","trace",-1082747415),Bn=new E(null,"seq","seq",-1817803783),Rn=new E(null,"prim","prim",205619358),oo=new E(null,"track","track",195787487),Yk=new E(null,"set","set",304602554),Zk=new E(null,"epsilon","epsilon",-730158570),$k=new E(null,"strable","strable",1877668047),al=new E(null,"expecting","expecting",-57706705),qo=new E(null,"time","time",1385887882),bl=new E(null,"rule-separator","rule-separator",1539322213),Ro=new E(null,"duration-dynamic","duration-dynamic",-1414028239),cl=new E(null,"enlive","enlive",1679023921),Oq=new E(null,"step","step",1288888124),dl=new E(null,"symbol","symbol",-1038572696),el=new E(null,"char-range","char-range",1443391389),gl=new E(null,"SP","SP",124290284),il=new E(null,"char","char",-641587586),jl=new E(null,"optimize","optimize",-1912349448),kl=new E(null,"red","red",-969428204),$q=new E(null,"div","div",1057191632),ml=new Dc(null,"letfn*","letfn*",-110097810,null),hr=new E(null,"when-comp","when-comp",-664437126),nr=new E(null,"value","value",305978217),bi=new E(null,"fallback-impl","fallback-impl",-1501286995),nl=new E(null,"rep","rep",-1226820564),ol=new E("instaparse.gll","end-index","instaparse.gll/end-index",-1851404441),pl=new Dc(null,"ns","ns",2082130287,null),pr=new E(null,"when-cond","when-cond",1350266625),qr=new E(null,"add","add",235287739),tk=new E(null,"keyword-fn","keyword-fn",-64566675),rl=new E(null,"result","result",1415092211),sl=new Dc("cljs.core","apply","cljs.core/apply",1757277831,null),tl=new Dc(null,"let*","let*",1920721458,null),sr=new E(null,"elem","elem",618631056),vl=new E(null,"vector","vector",1902966158),wl=new E(null,"bin-char","bin-char",-1662780697),xl=new E(null,"option","option",65132272),yl=new E(null,"ebnf","ebnf",31967825),tr=new E(null,"item","item",249373802),av=new E(null,"fail","fail",1706214930),zl=new Dc("clojure.core","unquote","clojure.core/unquote",843087510,null),Al=new E(null,"preserve","preserve",1276846509),Bl=new E(null,"alt-or-ord","alt-or-ord",310249425),ur=new E(null,"float","float",-1732389368),Dl=new Dc("clojure.core","list","clojure.core/list",-1119203325,null),El=new E(null,"group","group",582596132),Fl=new Dc(null,"recur","recur",1202958259,null),Gl=new E(null,"negative-listeners","negative-listeners",55241092),Hl=new E(null,"eof","eof",-489063237),wr=new E(null,"iterations","iterations",-1402710890),Il=new Dc(null,"js","js",-886355190,null),yr=new E(null,"play","play",-580418022),Kl=new E(null,"BIT","BIT",-1854474115),zr=new E(null,"when","when",-576417306),Ll=new E(null,"type","type",1174270348),Ml=new E(null,"none","none",1333468478),Nl=new E(null,"WSP","WSP",-1046948716),Ol=new Dc(null,"_","_",-1201019570,null),Pl=new E(null,"illegal-state","illegal-state",-1519851182),Ql=new E(null,"reader-error","reader-error",1610253121),Rl=new E(null,"CHAR","CHAR",-1280338086),Sh=new E(null,"more-marker","more-marker",-14717935),Sl=new E(null,"optional","optional",2053951509),Ul=new E(null,"parser","parser",-1543495310),Vl=new E(null,"rulelist","rulelist",-1871218473),Wl=new Dc(null,"var","var",870848730,null),Xl=new E(null,"hex-val","hex-val",1267737401),Yl=new E(null,"char-val","char-val",1408617933),Zl=new E(null,"doc","doc",1913296891),Ar=new E(null,"expr","expr",745722291),oi=new E(null,"ready","ready",1086465795),am=new Dc(null,"cljs.tools.reader","cljs.tools.reader",-831293977,null),bm=new E(null,"fail-index","fail-index",248726923),cm=new E(null,"lookahead","lookahead",-400102393),Dr=new E(null,"token","token",-1211463215),Ma=new E(null,"meta","meta",1499536964),em=new E(null,"comment","comment",532206069),fm=new E(null,"segment","segment",-964921196),gm=new E("instaparse","failure","instaparse/failure",1422918607),hm=new E(null,"map","map",1371690461),im=new E(null,"rulename-left","rulename-left",-1824251564),jm=new E(null,"element","element",1974019749),km=new E(null,"high","high",2027297808),Er=new E(null,"props","props",453281727),lm=new E(null,"plus","plus",211540661),mm=new E("instaparse.gll","start-index","instaparse.gll/start-index",404653620),Fr=new E(null,"arguments","arguments",-1182834456),om=new E(null,"max","max",61366548),pm=new Dc("cljs.core","list","cljs.core/list",-1331406371,null),Gr=new E(null,"header","header",119441134),rm=new E(null,"node-builder","node-builder",-1956562605),sm=new E(null,"repetition","repetition",1938392115),tm=new E(null,"col","col",-1959363084),um=new E(null,"hide-tag-rule","hide-tag-rule",150267589),vm=new E(null,"index","index",-1531685915),wm=new E(null,"failure","failure",720415879),Hr=new E(null,"class","class",-2030961996),xm=new E(null,"neg","neg",1800032960),Ir=new E(null,"range","range",1639692286),ym=new Dc(null,".",".",1975675962,null),zm=new Dc(null,"set!","set!",250714521,null),Am=new E(null,"next-stack","next-stack",-481930728),Bm=new E(null,"alt","alt",-3214426),Cm=new Dc(null,"inst","inst",-2008473268,null),Em=new E(null,"all","all",892129742),Fm=new E(null,"string-ci","string-ci",374631805),Gm=new E(null,"CRLF","CRLF",11418756),Hm=new Dc(null,"\x26","\x26",-2144855648,null),Jr=new E(null,"when-not","when-not",1431299429),Im=new E(null,"stack","stack",-793405930),Jm=new E(null,"HTAB","HTAB",11392612),Km=new E(null,"hiccup","hiccup",1218876238),Lm=new E(null,"ex-kind","ex-kind",1581199296),Mm=new E(null,"name","name",1843675177),Nm=new E(null,"full","full",436801220),Om=new E(null,"VCHAR","VCHAR",1962437706),Pm=new E(null,"output-format","output-format",-1826382676),Kr=new E(null,"duration","duration",1444101068),au=new E(null,"empty","empty",767870958),bu=new E(null,"when-do","when-do",-35634558),Sm=new Dc(null,"-Inf","-Inf",-2123243689,null),cu=new E(null,"vars","vars",-2046957217),Um=new E(null,"paren","paren",-294107600),Vm=new E(null,"hide-tag","hide-tag",1347642501),Oi=new E(null,"default","default",-1987822328),Wm=new Dc("clojure.core","deref","clojure.core/deref",188719157,null),Xm=new E(null,"CTL","CTL",-9995632),Ym=new E(null,"standard","standard",-1769206695),Zm=new Dc(null,"Inf","Inf",647172781,null),$m=new E(null,"star","star",279424429),Na=new E(null,"dup","dup",556298533),an=new E(null,"DQUOTE","DQUOTE",-571169808),bn=new Dc("cljs.core","hash-set","cljs.core/hash-set",1130426749,null),dn=new E(null,"partial","partial",241141745),Oa=new E(null,"print-length","print-length",1931866356),en=new E(null,"nil","nil",99600501),Va=new E(null,"bach","bach",1035493916),fn=new E(null,"reader-exception","reader-exception",-1938323098),du=new E(null,"when-match","when-match",-909874911),gn=new Dc(null,"reader","reader",1810192380,null),eu=new E(null,"sub","sub",-2093760025),fu=new E(null,"init","init",-1875481434),kn=new Dc(null,"def","def",597100991,null),ln=new E(null,"bin-val","bin-val",1705209105),mn=new E(null,"rules-or-parser","rules-or-parser",-314380386),nn=new Dc(null,"opts","opts",1795607228,null),Uq=new E(null,"steps","steps",-128433302),gu=new E(null,"duration-static","duration-static",422384511),on=new E(null,"list","list",765357683),pn=new E(null,"min","min",444991522),qn=new Dc("cljs.core","sequence","cljs.core/sequence",1908459032,null),hu=new E(null,"tempo","tempo",-1555208453),tn=new E(null,"column","column",2078222095),un=new E(null,"key","key",-1516042587),vn=new E(null,"generation","generation",-2132542044),wn=new Dc("cljs.core","with-meta","cljs.core/with-meta",749126446,null),iu=new E(null,"elements","elements",657646735),ju=new Dc("js","Infinity","js/Infinity",2039810812,null),ku=new E(null,"when-expr","when-expr",-695119296),yn=new E(null,"total","total",1916810418),zn=new E(null,"CR","CR",-1654295403),An=new E(null,"form","form",-1624062471),lu=new E(null,"statement","statement",-32780863),Cn=new E(null,"splicing?","splicing?",-428596366),xi=new E(null,"parents","parents",-2027538891),Dn=new E(null,"regex","regex",939488856),En=new E(null,"read-cond","read-cond",1056899244),mu=new E(null,"units","units",-533089095),Fn=new E(null,"dec-char","dec-char",-646625154),nu=new E(null,"when-all","when-all",-315252574),pi=new E(null,"pending","pending",-220036727),La=new E(null,"readably","readably",1129599760),Gn=new E(null,"hex-char","hex-char",764443568),Hn=new E(null,"NOT","NOT",-1689245341),In=new E(null,"opt","opt",-794706369),Jn=new E(null,"reason","reason",-2070751759),Kn=new E(null,"file","file",-1269645878),Ln=new E(null,"LWSP","LWSP",782998598),Mn=new E(null,"sym","sym",-1444860305),Nn=new E(null,"inside-comment","inside-comment",1258069708),On=new E(null,"dec-val","dec-val",-1263870894),Pn=new Dc("clojure.core","unquote-splicing","clojure.core/unquote-splicing",-552003150,null),Qn=new E(null,"runtime-exception","runtime-exception",-1495664514),ou=new E(null,"id","id",-1388402092),Sn=new E(null,"results","results",-1134170113),Tn=new E(null,"whitespace","whitespace",-1340035483),Un=new Dc(null,"read-string*","read-string*",1046768315,null),Vn=new Dc(null,"deftype*","deftype*",962659890,null),pu=new E(null,"when-any","when-any",108322980),Wn=new E(null,"text","text",-1790561697),Xn=new E(null,"input-format","input-format",-422703481),Yn=new Dc(null,"uuid","uuid",-504564192,null),Zn=new E(null,"full-results","full-results",-1500225407),$n=new Dc(null,"NaN","NaN",666918153,null),ao=new E(null,"unsupported-operation","unsupported-operation",1890540953),bo=new E(null,"hi","hi",-1821422114),co=new E(null,"HEXDIG","HEXDIG",-200221072),eo=new E(null,"ord","ord",1142548323),fo=new Dc(null,"queue","queue",-1198599890,null),go=new E(null,"reduction-type","reduction-type",-488293450),ho=new E(null,"else","else",-1508377146),io=new E(null,"OCTET","OCTET",-743420682),jo=new Dc(null,"case*","case*",-1938255072,null),ko=new E(null,"hide","hide",-596913169),X=new E(null,"keyword","keyword",811389747),zi=new E(null,"ancestors","ancestors",-776045424),lo=new E(null,"listeners","listeners",394544445),mo=new Dc("cljs.core","hash-map","cljs.core/hash-map",303385767,null),no=new E(null,"full-listeners","full-listeners",50621827),qu=new E(null,"atom","atom",-397043653),po=new Dc("cljs.core","array-map","cljs.core/array-map",-1519210683,null);function ru(a,b,c){if(pe(c)){var d=Te(se,nf.rd(a,c));return b.Ca?b.Ca(d):b.call(null,d);}return Zf(c)?(d=new Sf(function(){var e=zb(c);return a.Ca?a.Ca(e):a.call(null,e);}(),function(){var e=Ab(c);return a.Ca?a.Ca(e):a.call(null,e);}()),b.Ca?b.Ca(d):b.call(null,d)):Nd(c)?(d=Qj(nf.rd(a,c)),b.Ca?b.Ca(d):b.call(null,d)):Id(c)?(d=Ud(function(e,f){return sd.rd(e,a.Ca?a.Ca(f):a.call(null,f));},c,c),b.Ca?b.Ca(d):b.call(null,d)):Ed(c)?(d=zf.rd(de(c),nf.rd(a,c)),b.Ca?b.Ca(d):b.call(null,d)):b.Ca?b.Ca(c):b.call(null,c);}var su=function su(a,b){return ru(ff(su,a),a,b);},tu=function tu(a,b){return ru(ff(tu,a),$d,a.Ca?a.Ca(b):a.call(null,b));};function ro(a,b){if(null!=a&&null!=a.Db)a=a.Db(a,b);else{var c=ro[ia(null==a?null:a)];if(null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else if(c=ro._,null!=c)a=c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("ConjFlat.conj-flat",a);}return a;}function so(a,b){for(a=Ud(Ec,a,b);;){if(r(to.Ca?to.Ca(a):to.call(null,a)))a=Ec.rd(a,0),b=sd.rd(b,0);else return b;}}function uo(a,b){return new ze(null,function(){var c=Ud(Ec,a,b);a:{var d=a;for(var e=b;;){if(G.rd(J(e),1)){d=Bd(e)<(vo.Ca?vo.Ca(d):vo.call(null,d))-1?so(d,new Q(null,1,5,S,[Bd(e)+1],null)):null;break a;}var f=Bd(e);var g=Cd(e);g=Ud(Ec,d,g);g=vo.Ca?vo.Ca(g):vo.call(null,g);if(f<g-1){d=so(d,sd.rd(Cd(e),Bd(e)+1));break a;}e=Cd(e);}}return ld(c,r(d)?uo(a,d):null);},null,null);}function wo(a,b,c,d,e){this.Na=a;this.uc=b;this.vb=c;this.l=d;this.Sb=e;this.nc=null;this.j=31850958;this.G=0;}h=wo.prototype;h.toString=function(){return sc(H(this));};h.P=function(a,b){return this.Na.P(null,b);};h.F=function(a,b,c){return this.Na.F(null,b,c);};h.S=function(){return Ad(this.Na);};h.wa=function(){return z(H(this));};h.X=function(){return this.l;};h.O=function(){return this.vb;};h.N=function(a,b){return G.rd(this.vb,Ac(b))&&G.rd(this.l,J(b))&&(G.rd(this.l,0)||G.rd(H(this),b));};h.$=function(){return zd(xo,Ad(this));};h.ha=function(){return x(H(this));};h.xa=function(){return Jc(H(this));};h.R=function(){if(!r(this.nc)){if(this.Sb){var a=this.Na;a=0<J(a)?uo(a,so(a,new Q(null,1,5,S,[0],null))):null;}else a=H(this.Na);this.nc=a;}return this.nc;};h.T=function(a,b){return new wo(zd(this.Na,b),this.uc,this.vb,this.l,this.Sb);};h.V=function(a,b){return ld(b,this);};h.Db=function(a,b){if(null==b)return this;if(r(to.Ca?to.Ca(b):to.call(null,b))){if(0===this.l)return b;if(32>=J(b)){a=yo.rd?yo.rd(this,b):yo.call(null,this,b);var c=this.l+J(b),d=zf.rd(this.Na,b),e=this.Sb;return new wo(d,a,Oc(a,c),c,e?e:b.Sb);}a=yo.rd?yo.rd(this,b):yo.call(null,this,b);c=this.l+J(b);return new wo(sd.rd(this.Na,b),a,Oc(a,c),c,!0);}a=tc(31,this.uc)+Ac(b);c=this.l+1;return new wo(sd.rd(this.Na,b),a,Oc(a,c),c,this.Sb);};function yo(a,b){var c=J(b);a:if(0===c)c=1;else{c|=0;for(var d=1,e=31;;){var f=cf(c);c=ke(c);if(f)e=tc(e,e);else{if(0===c){c=tc(e,d);break a;}d=tc(e,d);e=tc(e,e);}}}c|=0;return tc(c,a.uc)+(b.uc-c);}h.W=Fa;h.K=function(a,b,c){return $b(H(this),b,c);};function zo(a){a=Yf(a);a:for(var b=1,c=H(a);;){if(null!=c)b=tc(31,b)+Ac(x(c))|0,c=z(c);else break a;}return new wo(a,b,Ac(a),J(a),!1);}var xo=zo(td);function to(a){return a instanceof wo;}function vo(a){return to(a)?J(a.Na):J(a);}var Ao=function Ao(a,b){for(;;){if(H(b)){var d=x(b);to(d)?(a=Ao.rd?Ao.rd(a,d):Ao.call(null,a,d),b=z(b)):(a=Le.rd(a,d),b=z(b));}else return a;}};function Bo(a,b,c,d){this.Na=a;this.vb=b;this.l=c;this.flat=d;this.j=167142175;this.G=2048;}h=Bo.prototype;h.toString=function(){return sc(Co(this));};h.P=function(a,b){return Co(this).P(null,b);};h.F=function(a,b,c){return Co(this).F(null,b,c);};function Co(a){Qa(Fb((0,_flat["default"])(a)))&&(mf.rd((0,_flat["default"])(a),function(){var b=Fb(a.Na);b=cc(Ao(ac(td),b));return zd(b,Ad(Fb(a.Na)));}),mf.rd(a.Na,function(){return null;}));return Fb((0,_flat["default"])(a));}h.Za=function(a,b,c){return Co(this).Za(null,b,c);};h.H=function(a,b){return Co(this).H(null,b);};h.ba=function(a,b,c){return Co(this).ba(null,b,c);};h.sb=function(a,b){return Co(this).sb(a,b);};h.S=function(){return r(Fb((0,_flat["default"])(this)))?Ad(Fb((0,_flat["default"])(this))):Ad(Fb(this.Na));};h.X=function(){return this.l;};h.lb=function(){return Co(this).lb(null);};h.mb=function(){return Co(this).mb(null);};h.Bb=function(){return 0<this.l?Xb(Co(this)):null;};h.O=function(){return this.vb;};h.N=function(a,b){return G.rd(this.vb,Ac(b))&&G.rd(this.l,J(b))&&G.rd(Co(this),b);};h.$=function(){return zd(td,Ad(this));};h.ya=function(a,b,c){return vd.Md(Co(this),b,c);};h.Qd=function(a,b){return Co(this).Qd(null,b);};h.R=function(){return H(Co(this));};h.T=function(a,b){return r(Fb((0,_flat["default"])(this)))?new Bo(kf(Fb(this.Na)),this.vb,this.l,kf(zd(Fb((0,_flat["default"])(this)),b))):new Bo(kf(zd(Fb(this.Na),b)),this.vb,this.l,kf(Fb((0,_flat["default"])(this))));};h.V=function(a,b){return sd.rd(Co(this),b);};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 2:return this.rd(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context32;return this.call.apply(this,(0,_concat["default"])(_context32=[this]).call(_context32,bb(b)));};h.Ca=function(a){return Co(this).rd(null,a);};h.rd=function(a,b){return Co(this).Md(null,a,b);};h.kb=function(a,b){return fc(Co(this),b);};h.W=Fa;h.K=function(a,b,c){return $b(Co(this),b,c);};function Do(a){return r(a.Sb)?r(a.nc)?Yf(H(a)):new Bo(kf(a.Na),a.vb,a.l,kf(null)):a.Na;}function Eo(a,b,c){var d=r(b.ignoreCase)?"gi":"g";d=r(b.multiline)?[d,"m"].join(""):d;return a.replace(new RegExp(b.source,r(b.vd)?[d,"u"].join(""):d),c);}function Fo(a){return function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;){f[e]=arguments[e+0],++e;}e=new Za(f,0,null);}return c.call(this,e);}function c(d){d=qf(d);if(G.rd(J(d),1))return d=x(d),a.Ca?a.Ca(d):a.call(null,d);d=Yf(d);return a.Ca?a.Ca(d):a.call(null,d);}b.D=0;b.C=function(d){d=H(d);return c(d);};b.Nd=c;return b;}();}function Go(a,b,c){if("string"===typeof b)return a.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c);if(b instanceof RegExp)return"string"===typeof c?Eo(a,b,c):Eo(a,b,Fo(c));throw["Invalid match arg: ",v.Ca(b)].join("");}function Ho(a,b){var c=new za();for(b=H(b);;){if(null!=b)c.append(v.Ca(x(b))),b=z(b),null!=b&&c.append(a);else return c.toString();}}function uu(a,b){a="/(?:)/"===v.Ca(b)?sd.rd(Yf(ld("",nf.rd(v,H(a)))),""):Yf(v.Ca(a).split(b));if(1<J(a))a:for(;;){if(""===Bd(a))a=Cd(a);else break a;}return a;}function hf(a,b,c){(b=Qa(b))?(b=c.Ca?c.Ca(W):c.call(null,W),a=a.Ca?a.Ca(b):a.call(null,b)):a=b;return r(a)?["(",v.Ca(Io?Io(c,!1):Jo.call(null,c,!1)),")"].join(""):Io?Io(c,!1):Jo.call(null,c,!1);}var Ko=ff(hf,new Ch(null,new m(null,3,[mk,null,eo,null,Bm,null],null),null));function Lo(a){switch(a){case"\n":return"\\n";case"\b":return"\\b";case"\f":return"\\f";case"\r":return"\\r";case"\t":return"\\t";default:return a;}}function Mo(a){return Go(['#"',a.source.substring(1),'"'].join(""),/[\s]/,Lo);}function No(a){return 4095>=a?["0000",v.Ca(a.toString(16))].join("").substr(-4):a.toString(16);}function Oo(a){var b=D(a);a=Ec.rd(b,xj);b=Ec.rd(b,bo);return G.rd(a,b)?["%x",v.Ca(No(a))].join(""):["%x",v.Ca(No(a)),"-",v.Ca(No(b))].join("");}function Jo(a){switch(arguments.length){case 1:return Io(arguments[0],!1);case 2:return Io(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function Io(a,b){var c=D(a);a=Ec.rd(c,Ul);var d=Ec.rd(c,dk),e=Ec.rd(c,ak),f=Ec.rd(c,Gj),g=Ec.rd(c,W);if(r(function(){var l=Qa(b);return l?ko.Ca(c):l;}()))return["\x3c",v.Ca(Io(c,!0)),"\x3e"].join("");g=g instanceof E?g.ca:null;switch(g){case"epsilon":return"ε";case"opt":return[v.Ca(Ko(b,a)),"?"].join("");case"plus":return[v.Ca(Ko(b,a)),"+"].join("");case"star":return[v.Ca(Ko(b,a)),"*"].join("");case"rep":return Xe(pn.Ca(c),om.Ca(c))?[v.Ca(Ko(b,a)),"{",v.Ca(pn.Ca(c)),",",v.Ca(om.Ca(c)),"}"].join(""):[v.Ca(Ko(b,a)),"{",v.Ca(pn.Ca(c)),"}"].join("");case"alt":return Ho(" | ",nf.rd(gf(new Ch(null,new m(null,1,[eo,null],null),null),b),f));case"ord":return[v.Ca(hf(new Ch(null,new m(null,1,[Bm,null],null),null),b,d))," / ",v.Ca(hf(new Ch(null,new m(null,1,[Bm,null],null),null),b,e))].join("");case"cat":return Ho(" ",nf.rd(gf(new Ch(null,new m(null,2,[eo,null,Bm,null],null),null),b),f));case"string":var k=new za();a=Ha;d=Ga;Ha=!0;Ga=function Ga(l){return k.append(l);};try{ei(M([Bj.Ca(c)]),Ja());}finally{Ga=d,Ha=a;}return v.Ca(k);case"string-ci":k=new za();a=Ha;d=Ga;Ha=!0;Ga=function Ga(l){return k.append(l);};try{ei(M([Bj.Ca(c)]),Ja());}finally{Ga=d,Ha=a;}return v.Ca(k);case"char":return Oo(c);case"regexp":return Mo(sk.Ca(c));case"nt":return ne(v.Ca(X.Ca(c)),1);case"look":return["\x26",v.Ca(Ko(b,a))].join("");case"neg":return["!",v.Ca(Ko(b,a))].join("");default:throw Error(["No matching clause: ",v.Ca(g)].join(""));}}function Po(a,b){return G.rd(go.Ca(kl.Ca(b)),Dk)?["\x3c",ye(a),"\x3e \x3d ",v.Ca(Io(b,!1))].join(""):[ye(a)," \x3d ",v.Ca(Io(b,!1))].join("");}function Qo(a){a=D(a);var b=Ec.rd(a,uk),c=Ec.rd(a,Kj);return Ho("\n",ld(Po(c,b.Ca?b.Ca(c):b.call(null,c)),function(){return function f(e){return new ze(null,function(){for(var g=e;;){if(g=H(g)){if(Kd(g)){var k=hc(g),l=J(k),n=De(l);a:for(var q=0;;){if(q<l){var t=kb(k,q),u=O(t,0,null);t=O(t,1,null);Xe(u,c)&&(u=Po(u,t),n.add(u));q+=1;}else{k=!0;break a;}}return k?Fe(n.da(),f(ic(g))):Fe(n.da(),null);}k=x(g);n=O(k,0,null);k=O(k,1,null);if(Xe(n,c))return ld(Po(n,k),f(Jc(g)));g=Jc(g);}else return null;}},null,null);}(b);}()));}function So(a){r(Hn.Ca(a))?(fi.Nd(M(["NOT "])),fi.Nd(M([Hn.Ca(a)]))):r(el.Ca(a))?fi.Nd(M([Oo(a)])):a instanceof RegExp?fi.Nd(M([Mo(a)])):ei(M([a]),Ja());}function To(a){a=D(a);var b=Ec.rd(a,lj),c=Ec.rd(a,tn),d=Ec.rd(a,Wn);a=Ec.rd(a,Jn);hi(M([["Parse error at line ",v.Ca(b),", column ",v.Ca(c),":"].join("")]));hi(M([d]));Pd(c)?1>=c?b="^":(b=c-1,b=Te(v,Ke.rd(0<b?new rf(null,b," ",null):Kc,new Q(null,1,5,S,["^"],null)))):b=null;hi(M([b]));b=Hh(nf.rd(al,wf(Nm,a)));a=Hh(nf.rd(al,wf(df(Nm),a)));c=J(b)+J(a);0!==c&&(G.rd(1,c)?hi(M(["Expected:"])):hi(M(["Expected one of:"])));b=H(b);c=null;for(var e=d=0;;){if(e<d){var f=c.H(null,e);So(f);hi(M([" (followed by end-of-string)"]));e+=1;}else if(b=H(b))c=b,Kd(c)?(b=hc(c),e=ic(c),c=b,d=J(b),b=e):(b=x(c),So(b),hi(M([" (followed by end-of-string)"])),b=z(c),c=null,d=0),e=0;else break;}a=H(a);b=null;for(e=d=0;;){if(e<d)c=b.H(null,e),So(c),gi(),e+=1;else if(a=H(a))b=a,Kd(b)?(a=hc(b),d=ic(b),b=a,c=J(a),a=d,d=c):(c=x(b),So(c),gi(),a=z(b),b=null,d=0),e=0;else break;}}function Uo(a){throw Te(v,a);}function Vo(a){throw Te(v,a);}function Wo(a){var b=r(a.ignoreCase)?"i":"";b=r(a.multiline)?[b,"m"].join(""):b;return r(a.vd)?[b,"u"].join(""):b;}function Xo(a){return H(a)&&Qa(z(a));}function Yo(a){return vd.Md(a,kl,Zo);}var Zo=new m(null,1,[go,Dk],null),$o=new m(null,2,[Km,function(a){return new m(null,2,[go,Km,un,a],null);},cl,function(a){return new m(null,2,[go,cl,un,a],null);}],null),ap=new m(null,2,[cl,function(a,b){return new m(null,2,[W,a,hj,new N(null,b,null,1,null)],null);},Km,function(a,b){return new Q(null,2,5,S,[a,b],null);}],null);function bp(a,b){var c=go.Ca(a);switch(c instanceof E?c.ca:null){case"raw":return xo.Db(null,b);case"hiccup":return Do(zo(new Q(null,1,5,S,[un.Ca(a)],null)).Db(null,b));case"enlive":return b=xo.Db(null,b),new m(null,2,[W,un.Ca(a),hj,0===J(b)?null:b],null);default:return a.Ca?a.Ca(b):a.call(null,b);}}function cp(a,b){var c=$o.Ca?$o.Ca(a):$o.call(null,a);return r(c)?zf.rd($e,function(){return function f(e){return new ze(null,function(){for(;;){var g=H(e);if(g){if(Kd(g)){var k=hc(g),l=J(k),n=De(l);a:for(var q=0;;){if(q<l){var t=kb(k,q),u=O(t,0,null);t=O(t,1,null);u=r(kl.Ca(t))?new Q(null,2,5,S,[u,t],null):new Q(null,2,5,S,[u,vd.Md(t,kl,c.Ca?c.Ca(u):c.call(null,u))],null);n.add(u);q+=1;}else{k=!0;break a;}}return k?Fe(n.da(),f(ic(g))):Fe(n.da(),null);}k=x(g);n=O(k,0,null);k=O(k,1,null);return ld(r(kl.Ca(k))?new Q(null,2,5,S,[n,k],null):new Q(null,2,5,S,[n,vd.Md(k,kl,c.Ca?c.Ca(n):c.call(null,n))],null),f(Jc(g)));}return null;}},null,null);}(b);}()):Vo(M(["Invalid output format ",a,". Use :enlive or :hiccup."]));}var dp=new m(null,1,[W,Zk],null);function ep(a){return G.rd(a,dp)?dp:new m(null,2,[W,In,Ul,a],null);}function fp(a){return G.rd(a,dp)?dp:new m(null,2,[W,lm,Ul,a],null);}function gp(a){return G.rd(a,dp)?dp:new m(null,2,[W,$m,Ul,a],null);}function hp(a,b,c){return G.rd(c,dp)?dp:new m(null,4,[W,nl,Ul,c,pn,a,om,b],null);}var ip=function ip(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return ip.Nd(0<c.length?new Za((0,_slice["default"])(c).call(c,0),0,null):null);};ip.Nd=function(a){return af(ff(G,dp),a)?dp:Xo(a)?x(a):new m(null,2,[W,Bm,Gj,a],null);};ip.D=0;ip.C=function(a){return this.Nd(H(a));};var jp=function jp(a){switch(arguments.length){case 0:return jp.i();default:for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return jp.Nd(arguments[0],new Za((0,_slice["default"])(c).call(c,1),0,null));}};jp.i=function(){return dp;};jp.Nd=function(a,b){if(G.rd(a,dp)){var c=Fh([dp]);b=wf(df(c),b);}H(b)&&(b=Te(jp,b),a=new m(null,3,[W,eo,dk,a,ak,b],null));return a;};jp.C=function(a){var b=x(a);a=z(a);return this.Nd(b,a);};jp.D=1;var kp=function kp(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return kp.Nd(0<c.length?new Za((0,_slice["default"])(c).call(c,0),0,null):null);};kp.Nd=function(a){if(af(ff(G,dp),a))return dp;var b=Fh([dp]);a=wf(df(b),a);return Xo(a)?x(a):new m(null,2,[W,mk,Gj,a],null);};kp.D=0;kp.C=function(a){return this.Nd(H(a));};function lp(a){return G.rd(a,"")?dp:new m(null,2,[W,Bj,Bj,a],null);}function mp(a){return G.rd(a,"")?dp:new m(null,2,[W,Fm,Bj,a],null);}function np(a,b){return new m(null,3,[W,il,xj,a,bo,b],null);}function op(a){G.rd(a,"")?a=dp:(a=Qh(a),a=a instanceof RegExp?new RegExp(["^",v.Ca(a.source)].join(""),Wo(a)):a,a=new m(null,2,[W,sk,sk,a],null));return a;}function pp(a){return new m(null,2,[W,T,X,a],null);}function qp(a){return new m(null,2,[W,Qk,Ul,a],null);}function rp(a){return new m(null,2,[W,xm,Ul,a],null);}function sp(a){return vd.Md(a,ko,!0);}var tp=function tp(a){var c=r(ko.Ca(a))?xd.rd(a,ko):a;return r(Ul.Ca(c))?vd.Md(c,Ul,function(){var d=Ul.Ca(c);return tp.Ca?tp.Ca(d):tp.call(null,d);}()):r(Gj.Ca(c))?vd.Md(c,Gj,nf.rd(tp,Gj.Ca(c))):G.rd(W.Ca(c),eo)?vd.Nd(c,dk,function(){var d=dk.Ca(c);return tp.Ca?tp.Ca(d):tp.call(null,d);}(),M([ak,function(){var d=ak.Ca(c);return tp.Ca?tp.Ca(d):tp.call(null,d);}()])):c;};function up(a){return zf.rd($e,function(){return function d(c){return new ze(null,function(){for(;;){var e=H(c);if(e){if(Kd(e)){var f=hc(e),g=J(f),k=De(g);a:for(var l=0;;){if(l<g){var n=kb(f,l),q=O(n,0,null);n=O(n,1,null);q=new Q(null,2,5,S,[q,tp(n)],null);k.add(q);l+=1;}else{f=!0;break a;}}return f?Fe(k.da(),d(ic(e))):Fe(k.da(),null);}f=x(e);k=O(f,0,null);f=O(f,1,null);return ld(new Q(null,2,5,S,[k,tp(f)],null),d(Jc(e)));}return null;}},null,null);}(a);}());}function vp(a,b){var c=$o.Ca?$o.Ca(a):$o.call(null,a);return r(c)?zf.rd($e,function(){return function f(e){return new ze(null,function(){for(;;){var g=H(e);if(g){if(Kd(g)){var k=hc(g),l=J(k),n=De(l);a:for(var q=0;;){if(q<l){var t=kb(k,q),u=O(t,0,null);t=O(t,1,null);u=new Q(null,2,5,S,[u,vd.Md(t,kl,c.Ca?c.Ca(u):c.call(null,u))],null);n.add(u);q+=1;}else{k=!0;break a;}}return k?Fe(n.da(),f(ic(g))):Fe(n.da(),null);}k=x(g);n=O(k,0,null);k=O(k,1,null);return ld(new Q(null,2,5,S,[n,vd.Md(k,kl,c.Ca?c.Ca(n):c.call(null,n))],null),f(Jc(g)));}return null;}},null,null);}(b);}()):Vo(M(["Invalid output format ",a,". Use :enlive or :hiccup."]));}function wp(a,b){var c=$o.Ca?$o.Ca(a):$o.call(null,a);return r(c)?zf.rd($e,function(){return function f(e){return new ze(null,function(){for(;;){var g=H(e);if(g){if(Kd(g)){var k=hc(g),l=J(k),n=De(l);a:for(var q=0;;){if(q<l){var t=kb(k,q),u=O(t,0,null);t=O(t,1,null);u=new Q(null,2,5,S,[u,vd.Md(tp(t),kl,c.Ca?c.Ca(u):c.call(null,u))],null);n.add(u);q+=1;}else{k=!0;break a;}}return k?Fe(n.da(),f(ic(g))):Fe(n.da(),null);}k=x(g);n=O(k,0,null);k=O(k,1,null);return ld(new Q(null,2,5,S,[n,vd.Md(tp(k),kl,c.Ca?c.Ca(n):c.call(null,n))],null),f(Jc(g)));}return null;}},null,null);}(b);}()):Vo(M(["Invalid output format ",a,". Use :enlive or :hiccup."]));}var xp=function xp(a,b){var d=W.Ca(a);d=d instanceof E?d.ca:null;switch(d){case"nt":case"epsilon":return a;case"opt":case"plus":case"star":case"rep":case"look":case"neg":return Cf.v(a,new Q(null,1,5,S,[Ul],null),xp,b);case"alt":case"cat":return vd.Md(a,Gj,nf.rd(function(e){return xp.rd?xp.rd(e,b):xp.call(null,e,b);},Gj.Ca(a)));case"ord":return vd.Nd(a,dk,function(){var e=dk.Ca(a);return xp.rd?xp.rd(e,b):xp.call(null,e,b);}(),M([ak,function(){var e=ak.Ca(a);return xp.rd?xp.rd(e,b):xp.call(null,e,b);}()]));case"string":case"string-ci":case"regexp":return r(kl.Ca(a))?vd.Md(kp.Nd(M([b,xd.rd(a,kl)])),kl,kl.Ca(a)):kp.Nd(M([b,a]));default:throw Error(["No matching clause: ",v.Ca(d)].join(""));}};function yp(a,b,c,d){var e=sp(ep(pp(d)));c=vd.Md(c,d,Yo(c.Ca?c.Ca(d):c.call(null,d)));d=zf.rd($e,function(){return function k(g){return new ze(null,function(){for(;;){var l=H(g);if(l){if(Kd(l)){var n=hc(l),q=J(n),t=De(q);a:for(var u=0;;){if(u<q){var A=kb(n,u),K=O(A,0,null);A=O(A,1,null);K=new Q(null,2,5,S,[K,xp(A,e)],null);t.add(K);u+=1;}else{n=!0;break a;}}return n?Fe(t.da(),k(ic(l))):Fe(t.da(),null);}n=x(l);t=O(n,0,null);n=O(n,1,null);return ld(new Q(null,2,5,S,[t,xp(n,e)],null),k(Jc(l)));}return null;}},null,null);}(a);}());b=vd.Md(d,b,vd.Md(kp.Nd(M([xd.rd(d.Ca?d.Ca(b):d.call(null,b),kl),e])),kl,kl.Ca(d.Ca?d.Ca(b):d.call(null,b))));return Li(M([b,c]));}function zp(a){if(null==a||!(0<=a&&1114111>=a))return null;if(65536<=a&&1114111>=a){var b=(a&1023)+56320;return String.fromCharCode((a>>10)+55232)+String.fromCharCode(b);}return String.fromCharCode(a);}function Ap(a,b){var c=a.charCodeAt(b);if(55296<=c&&56319>=c&&b+1<a.length){if(a=a.charCodeAt(b+1),56320<=a&&57343>=a)return 55296<=c&&56319>=c&&56320<=a&&57343>=a?(c<<10)-56623104+(a-56320+65536):null;}else if(56320<=c&&57343>=c&&0<b&&(a=a.charCodeAt(b-1),55296<=a&&56319>=a))return-(55296<=a&&56319>=a&&56320<=c&&57343>=c?(a<<10)-56623104+(c-56320+65536):0);return c;}function Bp(a,b,c){var d=W.Ca(a);d=d instanceof E?d.ca:null;switch(d){case"nt":return Cp.Md?Cp.Md(a,b,c):Cp.call(null,a,b,c);case"alt":return Dp.Md?Dp.Md(a,b,c):Dp.call(null,a,b,c);case"cat":return Ep.Md?Ep.Md(a,b,c):Ep.call(null,a,b,c);case"string":return Fp.Md?Fp.Md(a,b,c):Fp.call(null,a,b,c);case"string-ci":return Gp.Md?Gp.Md(a,b,c):Gp.call(null,a,b,c);case"char":return Hp.Md?Hp.Md(a,b,c):Hp.call(null,a,b,c);case"epsilon":return Ip.Md?Ip.Md(a,b,c):Ip.call(null,a,b,c);case"opt":return Jp.Md?Jp.Md(a,b,c):Jp.call(null,a,b,c);case"plus":return Kp.Md?Kp.Md(a,b,c):Kp.call(null,a,b,c);case"rep":return Lp.Md?Lp.Md(a,b,c):Lp.call(null,a,b,c);case"star":return Mp.Md?Mp.Md(a,b,c):Mp.call(null,a,b,c);case"regexp":return Np.Md?Np.Md(a,b,c):Np.call(null,a,b,c);case"look":return Op.Md?Op.Md(a,b,c):Op.call(null,a,b,c);case"neg":return Pp.Md?Pp.Md(a,b,c):Pp.call(null,a,b,c);case"ord":return Qp.Md?Qp.Md(a,b,c):Qp.call(null,a,b,c);default:throw Error(["No matching clause: ",v.Ca(d)].join(""));}}function Rp(a,b,c){var d=W.Ca(a);d=d instanceof E?d.ca:null;switch(d){case"nt":return Sp.Md?Sp.Md(a,b,c):Sp.call(null,a,b,c);case"alt":return Tp.Md?Tp.Md(a,b,c):Tp.call(null,a,b,c);case"cat":return Up.Md?Up.Md(a,b,c):Up.call(null,a,b,c);case"string":return Vp.Md?Vp.Md(a,b,c):Vp.call(null,a,b,c);case"string-ci":return Wp.Md?Wp.Md(a,b,c):Wp.call(null,a,b,c);case"char":return Xp.Md?Xp.Md(a,b,c):Xp.call(null,a,b,c);case"epsilon":return Yp.Md?Yp.Md(a,b,c):Yp.call(null,a,b,c);case"opt":return Zp.Md?Zp.Md(a,b,c):Zp.call(null,a,b,c);case"plus":return $p.Md?$p.Md(a,b,c):$p.call(null,a,b,c);case"rep":return aq.Md?aq.Md(a,b,c):aq.call(null,a,b,c);case"star":return bq.Md?bq.Md(a,b,c):bq.call(null,a,b,c);case"regexp":return cq.Md?cq.Md(a,b,c):cq.call(null,a,b,c);case"look":return dq.Md?dq.Md(a,b,c):dq.call(null,a,b,c);case"neg":return Pp.Md?Pp.Md(a,b,c):Pp.call(null,a,b,c);case"ord":return eq.Md?eq.Md(a,b,c):eq.call(null,a,b,c);default:throw Error(["No matching clause: ",v.Ca(d)].join(""));}}function fq(a,b,c,d,e){this.index=a;this.reason=b;this.J=c;this.B=d;this.u=e;this.j=2230716170;this.G=139264;}h=fq.prototype;h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){switch(b instanceof E?b.ca:null){case"index":return this.index;case"reason":return this.reason;default:return Ec.Md(this.B,b,c);}};h.Za=function(a,b,c){return Ud(function(d,e){var f=O(e,0,null);e=O(e,1,null);return b.Md?b.Md(d,f,e):b.call(null,d,f,e);},c,this);};h.K=function(a,b,c){return Rh(b,function(d){return Rh(b,Zh,""," ","",c,d);},"#instaparse.gll.Failure{",", ","}",c,Ke.rd(new Q(null,2,5,S,[new Q(null,2,5,S,[vm,this.index],null),new Q(null,2,5,S,[Jn,this.reason],null)],null),this.B));};h.Ta=function(){return new ng(this,2,new Q(null,2,5,S,[vm,Jn],null),r(this.B)?qc(this.B):Ze());};h.S=function(){return this.J;};h.X=function(){return 2+J(this.B);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=-1140991288^Rc(this);};h.N=function(a,b){return null!=b&&this.constructor===b.constructor&&G.rd(this.index,b.index)&&G.rd(this.reason,b.reason)&&G.rd(this.B,b.B);};h.rb=function(a,b){return Qd(new Ch(null,new m(null,2,[vm,null,Jn,null],null),null),b)?xd.rd(Jb(zf.rd($e,this),this.J),b):new fq(this.index,this.reason,this.J,Ye(xd.rd(this.B,b)),null);};h.Qd=function(a,b){switch(b instanceof E?b.ca:null){case"index":case"reason":return!0;default:return Qd(this.B,b);}};h.ya=function(a,b,c){return r(ve.rd?ve.rd(vm,b):ve.call(null,vm,b))?new fq(c,this.reason,this.J,this.B,null):r(ve.rd?ve.rd(Jn,b):ve.call(null,Jn,b))?new fq(this.index,c,this.J,this.B,null):new fq(this.index,this.reason,this.J,vd.Md(this.B,b,c),null);};h.R=function(){return H(Ke.rd(new Q(null,2,5,S,[new Sf(vm,this.index),new Sf(Jn,this.reason)],null),this.B));};h.T=function(a,b){return new fq(this.index,this.reason,b,this.B,this.u);};h.V=function(a,b){return Jd(b)?this.ya(null,kb(b,0),kb(b,1)):Ud(ib,this,b);};h.W=Fa;h.K=function(a,b){var c=this;return Yb(b,function(){var d=new za(),e=Ha,f=Ga;Ha=!0;Ga=function Ga(g){return d.append(g);};try{To(c);}finally{Ga=f,Ha=e;}return v.Ca(d);}());};var gq=Sa(new fq(null,null,null,null,null));function hq(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z){this.Y=a;this.text=b;this.Ka=c;this.Da=d;this.Ja=e;this.stack=f;this.Ia=g;this.Fa=k;this.Ha=l;this.Ga=n;this.Z=q;this.La=t;this.Ea=u;this.Ma=A;this.J=K;this.B=U;this.u=Z;this.j=2230716170;this.G=139264;}h=hq.prototype;h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){switch(b instanceof E?b.ca:null){case"grammar":return this.Y;case"text":return this.text;case"segment":return this.Ka;case"fail-index":return this.Da;case"node-builder":return this.Ja;case"stack":return this.stack;case"next-stack":return this.Ia;case"generation":return this.Fa;case"negative-listeners":return this.Ha;case"msg-cache":return this.Ga;case"nodes":return this.Z;case"success":return this.La;case"failure":return this.Ea;case"trace?":return this.Ma;default:return Ec.Md(this.B,b,c);}};h.Za=function(a,b,c){return Ud(function(d,e){var f=O(e,0,null);e=O(e,1,null);return b.Md?b.Md(d,f,e):b.call(null,d,f,e);},c,this);};h.K=function(a,b,c){return Rh(b,function(d){return Rh(b,Zh,""," ","",c,d);},"#instaparse.gll.Tramp{",", ","}",c,Ke.rd(new Q(null,14,5,S,[new Q(null,2,5,S,[uk,this.Y],null),new Q(null,2,5,S,[Wn,this.text],null),new Q(null,2,5,S,[fm,this.Ka],null),new Q(null,2,5,S,[bm,this.Da],null),new Q(null,2,5,S,[rm,this.Ja],null),new Q(null,2,5,S,[Im,this.stack],null),new Q(null,2,5,S,[Am,this.Ia],null),new Q(null,2,5,S,[vn,this.Fa],null),new Q(null,2,5,S,[Gl,this.Ha],null),new Q(null,2,5,S,[ij,this.Ga],null),new Q(null,2,5,S,[Ik,this.Z],null),new Q(null,2,5,S,[Tj,this.La],null),new Q(null,2,5,S,[wm,this.Ea],null),new Q(null,2,5,S,[Sj,this.Ma],null)],null),this.B));};h.Ta=function(){return new ng(this,14,new Q(null,14,5,S,[uk,Wn,fm,bm,rm,Im,Am,vn,Gl,ij,Ik,Tj,wm,Sj],null),r(this.B)?qc(this.B):Ze());};h.S=function(){return this.J;};h.X=function(){return 14+J(this.B);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=166878148^Rc(this);};h.N=function(a,b){return null!=b&&this.constructor===b.constructor&&G.rd(this.Y,b.Y)&&G.rd(this.text,b.text)&&G.rd(this.Ka,b.Ka)&&G.rd(this.Da,b.Da)&&G.rd(this.Ja,b.Ja)&&G.rd(this.stack,b.stack)&&G.rd(this.Ia,b.Ia)&&G.rd(this.Fa,b.Fa)&&G.rd(this.Ha,b.Ha)&&G.rd(this.Ga,b.Ga)&&G.rd(this.Z,b.Z)&&G.rd(this.La,b.La)&&G.rd(this.Ea,b.Ea)&&G.rd(this.Ma,b.Ma)&&G.rd(this.B,b.B);};h.rb=function(a,b){return Qd(new Ch(null,new m(null,14,[ij,null,Gl,null,vn,null,wm,null,bm,null,uk,null,Tj,null,Ik,null,rm,null,fm,null,Im,null,Sj,null,Am,null,Wn,null],null),null),b)?xd.rd(Jb(zf.rd($e,this),this.J),b):new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,Ye(xd.rd(this.B,b)),null);};h.Qd=function(a,b){switch(b instanceof E?b.ca:null){case"grammar":case"text":case"segment":case"fail-index":case"node-builder":case"stack":case"next-stack":case"generation":case"negative-listeners":case"msg-cache":case"nodes":case"success":case"failure":case"trace?":return!0;default:return Qd(this.B,b);}};h.ya=function(a,b,c){return r(ve.rd?ve.rd(uk,b):ve.call(null,uk,b))?new hq(c,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(Wn,b):ve.call(null,Wn,b))?new hq(this.Y,c,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(fm,b):ve.call(null,fm,b))?new hq(this.Y,this.text,c,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(bm,b):ve.call(null,bm,b))?new hq(this.Y,this.text,this.Ka,c,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(rm,b):ve.call(null,rm,b))?new hq(this.Y,this.text,this.Ka,this.Da,c,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(Im,b):ve.call(null,Im,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,c,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(Am,b):ve.call(null,Am,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,c,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(vn,b):ve.call(null,vn,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,c,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(Gl,b):ve.call(null,Gl,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,c,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(ij,b):ve.call(null,ij,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,c,this.Z,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(Ik,b):ve.call(null,Ik,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,c,this.La,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(Tj,b):ve.call(null,Tj,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,c,this.Ea,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(wm,b):ve.call(null,wm,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,c,this.Ma,this.J,this.B,null):r(ve.rd?ve.rd(Sj,b):ve.call(null,Sj,b))?new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,c,this.J,this.B,null):new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,this.J,vd.Md(this.B,b,c),null);};h.R=function(){return H(Ke.rd(new Q(null,14,5,S,[new Sf(uk,this.Y),new Sf(Wn,this.text),new Sf(fm,this.Ka),new Sf(bm,this.Da),new Sf(rm,this.Ja),new Sf(Im,this.stack),new Sf(Am,this.Ia),new Sf(vn,this.Fa),new Sf(Gl,this.Ha),new Sf(ij,this.Ga),new Sf(Ik,this.Z),new Sf(Tj,this.La),new Sf(wm,this.Ea),new Sf(Sj,this.Ma)],null),this.B));};h.T=function(a,b){return new hq(this.Y,this.text,this.Ka,this.Da,this.Ja,this.stack,this.Ia,this.Fa,this.Ha,this.Ga,this.Z,this.La,this.Ea,this.Ma,b,this.B,this.u);};h.V=function(a,b){return Jd(b)?this.ya(null,kb(b,0),kb(b,1)):Ud(ib,this,b);};function iq(a,b,c,d,e){return new hq(a,b,c,d,e,kf(td),kf(td),kf(0),kf(wh(ge)),kf($e),kf($e),kf(null),kf(new fq(0,td,null,null,null)),!1,null,null,null);}function jq(a,b){return new m(null,2,[rl,a,vm,b],null);}function kq(a,b){return G.rd(J(Wn.Ca(a)),vm.Ca(b));}function lq(a,b,c,d,e,f,g){this.gb=a;this.bb=b;this.results=c;this.cb=d;this.J=e;this.B=f;this.u=g;this.j=2230716170;this.G=139264;}h=lq.prototype;h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){switch(b instanceof E?b.ca:null){case"listeners":return this.gb;case"full-listeners":return this.bb;case"results":return this.results;case"full-results":return this.cb;default:return Ec.Md(this.B,b,c);}};h.Za=function(a,b,c){return Ud(function(d,e){var f=O(e,0,null);e=O(e,1,null);return b.Md?b.Md(d,f,e):b.call(null,d,f,e);},c,this);};h.K=function(a,b,c){return Rh(b,function(d){return Rh(b,Zh,""," ","",c,d);},"#instaparse.gll.Node{",", ","}",c,Ke.rd(new Q(null,4,5,S,[new Q(null,2,5,S,[lo,this.gb],null),new Q(null,2,5,S,[no,this.bb],null),new Q(null,2,5,S,[Sn,this.results],null),new Q(null,2,5,S,[Zn,this.cb],null)],null),this.B));};h.Ta=function(){return new ng(this,4,new Q(null,4,5,S,[lo,no,Sn,Zn],null),r(this.B)?qc(this.B):Ze());};h.S=function(){return this.J;};h.X=function(){return 4+J(this.B);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=-1610074144^Rc(this);};h.N=function(a,b){return null!=b&&this.constructor===b.constructor&&G.rd(this.gb,b.gb)&&G.rd(this.bb,b.bb)&&G.rd(this.results,b.results)&&G.rd(this.cb,b.cb)&&G.rd(this.B,b.B);};h.rb=function(a,b){return Qd(new Ch(null,new m(null,4,[Zn,null,no,null,lo,null,Sn,null],null),null),b)?xd.rd(Jb(zf.rd($e,this),this.J),b):new lq(this.gb,this.bb,this.results,this.cb,this.J,Ye(xd.rd(this.B,b)),null);};h.Qd=function(a,b){switch(b instanceof E?b.ca:null){case"listeners":case"full-listeners":case"results":case"full-results":return!0;default:return Qd(this.B,b);}};h.ya=function(a,b,c){return r(ve.rd?ve.rd(lo,b):ve.call(null,lo,b))?new lq(c,this.bb,this.results,this.cb,this.J,this.B,null):r(ve.rd?ve.rd(no,b):ve.call(null,no,b))?new lq(this.gb,c,this.results,this.cb,this.J,this.B,null):r(ve.rd?ve.rd(Sn,b):ve.call(null,Sn,b))?new lq(this.gb,this.bb,c,this.cb,this.J,this.B,null):r(ve.rd?ve.rd(Zn,b):ve.call(null,Zn,b))?new lq(this.gb,this.bb,this.results,c,this.J,this.B,null):new lq(this.gb,this.bb,this.results,this.cb,this.J,vd.Md(this.B,b,c),null);};h.R=function(){return H(Ke.rd(new Q(null,4,5,S,[new Sf(lo,this.gb),new Sf(no,this.bb),new Sf(Sn,this.results),new Sf(Zn,this.cb)],null),this.B));};h.T=function(a,b){return new lq(this.gb,this.bb,this.results,this.cb,b,this.B,this.u);};h.V=function(a,b){return Jd(b)?this.ya(null,kb(b,0),kb(b,1)):Ud(ib,this,b);};function mq(a,b){return mf.Md(Im.Ca(a),sd,b);}function nq(a,b,c){function d(){return b.Ca?b.Ca(c):b.call(null,c);}var e=ij.Ca(a),f=vm.Ca(c);f=new Q(null,2,5,S,[b,f],null);var g=Ec.Md(Fb(e),f,0);g>Fb(vn.Ca(a))?mf.Md(Am.Ca(a),sd,d):mf.Md(Im.Ca(a),sd,d);mf.v(e,vd,f,g+1);}function oq(a,b){a=Ik.Ca(a);a=Fb(a);b=a.Ca?a.Ca(b):a.call(null,b);return r(b)?0<J(Fb(lo.Ca(b))):null;}function pq(a,b){a=Ik.Ca(a);a=Fb(a);b=a.Ca?a.Ca(b):a.call(null,b);return r(b)?0<J(Fb(no.Ca(b)))||0<J(Fb(lo.Ca(b))):null;}function qq(a,b){a=Ik.Ca(a);a=Fb(a);b=a.Ca?a.Ca(b):a.call(null,b);return r(b)?0<J(Fb(Zn.Ca(b)))||0<J(Fb(Sn.Ca(b))):null;}function rq(a,b){a=Ik.Ca(a);var c=Fb(a);c=c.Ca?c.Ca(b):c.call(null,b);r(c)||(c=new lq(kf(td),kf(td),kf(Eh),kf(Eh),null,null,null),mf.v(a,vd,b,c));return c;}function sq(a,b){return(null!=a?a.j&262144||Fa===a.Ec||(a.j?0:Ra(Ib,a)):Ra(Ib,a))?zd(a,b):a;}function tq(a,b,c){var d=rq(a,b),e=b.Ca?b.Ca(1):b.call(null,1),f=r(ko.Ca(e))?vd.Md(c,rl,null):c,g=function(){var A=kl.Ca(e);return r(A)?jq(sq(bp(A,rl.Ca(f)),new m(null,2,[mm,b.Ca?b.Ca(0):b.call(null,0),ol,vm.Ca(f)],null)),vm.Ca(f)):f;}(),k=(c=kq(a,g))?Zn.Ca(d):Sn.Ca(d);if(Qa(function(){var A=Fb(k);return A.Ca?A.Ca(g):A.call(null,g);}())){mf.Md(k,sd,g);for(var l=H(Fb(lo.Ca(d))),n=null,q=0,t=0;;){if(t<q){var u=n.H(null,t);nq(a,u,g);t+=1;}else if(l=H(l))n=l,Kd(n)?(l=hc(n),t=ic(n),n=l,q=J(l),l=t):(l=x(n),nq(a,l,g),l=z(n),n=null,q=0),t=0;else break;}if(c)for(d=H(Fb(no.Ca(d))),c=null,q=n=0;;){if(q<n)l=c.H(null,q),nq(a,l,g),q+=1;else if(d=H(d))c=d,Kd(c)?(d=hc(c),n=ic(c),c=d,l=J(d),d=n,n=l):(l=x(c),nq(a,l,g),d=z(c),c=null,n=0),q=0;else return null;}else return null;}else return null;}function uq(a,b,c){var d=oq(a,b),e=rq(a,b),f=lo.Ca(e);mf.Md(f,sd,c);f=H(Fb(Sn.Ca(e)));for(var g=null,k=0,l=0;;){if(l<k){var n=g.H(null,l);nq(a,c,n);l+=1;}else if(f=H(f))g=f,Kd(g)?(f=hc(g),l=ic(g),g=f,k=J(f),f=l):(f=x(g),nq(a,c,f),f=z(g),g=null,k=0),l=0;else break;}e=H(Fb(Zn.Ca(e)));f=null;for(k=g=0;;){if(k<g)l=f.H(null,k),nq(a,c,l),k+=1;else if(e=H(e))f=e,Kd(f)?(e=hc(f),k=ic(f),f=e,g=J(e),e=k):(e=x(f),nq(a,c,e),e=z(f),f=null,g=0),k=0;else break;}return Qa(d)?mq(a,function(){return Bp(b.Ca?b.Ca(1):b.call(null,1),b.Ca?b.Ca(0):b.call(null,0),a);}):null;}function vq(a,b,c){var d=pq(a,b),e=rq(a,b),f=no.Ca(e);mf.Md(f,sd,c);e=H(Fb(Zn.Ca(e)));f=null;for(var g=0,k=0;;){if(k<g){var l=f.H(null,k);nq(a,c,l);k+=1;}else if(e=H(e))f=e,Kd(f)?(e=hc(f),k=ic(f),f=e,g=J(e),e=k):(e=x(f),nq(a,c,e),e=z(f),f=null,g=0),k=0;else break;}return Qa(d)?mq(a,function(){return Rp(b.Ca?b.Ca(1):b.call(null,1),b.Ca?b.Ca(0):b.call(null,0),a);}):null;}var wq=ff(Ah,zf);function xq(a,b,c){return mf.Md(Gl.Ca(a),wq,wd([b.Ca?b.Ca(0):b.call(null,0),new Q(null,1,5,S,[c],null)]));}function yq(a,b,c,d){mf.rd(wm.Ca(a),function(e){var f=vm.Ca(e);f=Rd(c,f);switch(f){case 1:return new fq(c,new Q(null,1,5,S,[d],null),null,null,null);case 0:return new fq(c,sd.rd(Jn.Ca(e),d),null,null,null);case-1:return e;default:throw Error(["No matching clause: ",v.Ca(f)].join(""));}});return G.rd(c,bm.Ca(a))?tq(a,b,jq(function(){var e=rm.Ca(a);var f=Wn.Ca(a);f=ne?f.substring(c):me.call(null,f,c);var g=J(Wn.Ca(a));return zq.I?zq.I(e,gm,f,c,g):zq.call(null,e,gm,f,c,g);}(),J(Wn.Ca(a)))):null;}function Aq(a){var b=Bd(Fb(a));mf.rd(a,Cd);b.i?b.i():b.call(null);}function Bq(a,b){for(;;){var c=Im.Ca(a);if(r(Fb(Tj.Ca(a))))return ld(rl.Ca(Fb(Tj.Ca(a))),new ze(null,function(f){return function(){lf(Tj.Ca(f),null);return Bq(f,!0);};}(a),null,null));if(0<J(Fb(c)))Aq(c);else if(0<J(Fb(Gl.Ca(a)))){var d=x(Fb(Gl.Ca(a)));c=O(d,0,null);d=O(d,1,null);var e=Bd(d);e.i?e.i():e.call(null);G.rd(J(d),1)?mf.Md(Gl.Ca(a),xd,c):mf.v(Gl.Ca(a),Cf,new Q(null,1,5,S,[c],null),Cd);}else if(r(b))b=Am.Ca(a),lf(c,Fb(b)),lf(b,td),mf.rd(vn.Ca(a),Tc),b=null;else return null;}}function Cq(a,b){return function(c){return tq(b,a,c);};}function Dq(a,b){return function(){return tq(b,a,jq(null,a.Ca?a.Ca(0):a.call(null,0)));};}var Eq=function Eq(a,b,c,d){return function(f){var g=D(f);f=Ec.rd(g,rl);g=Ec.rd(g,vm);f=ro(a,f);if(H(b)){g=new Q(null,2,5,S,[g,x(b)],null);var k=z(b);f=Eq.v?Eq.v(f,k,c,d):Eq.call(null,f,k,c,d);f=uq(d,g,f);}else f=tq(d,c,jq(f,g));return f;};},Fq=function Fq(a,b,c,d){return function(f){var g=D(f);f=Ec.rd(g,rl);g=Ec.rd(g,vm);var k=ro(a,f);return Xo(b)?vq(d,new Q(null,2,5,S,[g,x(b)],null),function(){var l=z(b);return Fq.v?Fq.v(k,l,c,d):Fq.call(null,k,l,c,d);}()):H(b)?uq(d,new Q(null,2,5,S,[g,x(b)],null),function(){var l=z(b);return Fq.v?Fq.v(k,l,c,d):Fq.call(null,k,l,c,d);}()):tq(d,c,jq(k,g));};},Gq=function Gq(a,b,c,d,e){return function(g){var k=D(g);g=Ec.rd(k,rl);k=Ec.rd(k,vm);if(G.rd(k,c))return 0===J(a)?tq(e,d,jq(null,k)):null;g=ro(a,g);uq(e,new Q(null,2,5,S,[k,b],null),Gq.I?Gq.I(g,b,k,d,e):Gq.call(null,g,b,k,d,e));return tq(e,d,jq(g,k));};},Hq=function Hq(a,b,c,d,e){return function(g){var k=D(g);g=Ec.rd(k,rl);k=Ec.rd(k,vm);if(G.rd(k,c))return 0===J(a)?tq(e,d,jq(null,k)):null;g=ro(a,g);return G.rd(k,J(Wn.Ca(e)))?tq(e,d,jq(g,k)):uq(e,new Q(null,2,5,S,[k,b],null),Hq.I?Hq.I(g,b,k,d,e):Hq.call(null,g,b,k,d,e));};},Iq=function Iq(a,b,c,d,e,f,g,k){return function(n){n=D(n);var q=Ec.rd(n,rl);n=Ec.rd(n,vm);q=ro(a,q);var t=b+1;d<=t&&t<=e&&tq(k,g,jq(q,n));return t<e?uq(k,new Q(null,2,5,S,[n,c],null),Iq.aa?Iq.aa(q,t,c,d,e,n,g,k):Iq.call(null,q,t,c,d,e,n,g,k)):null;};},Jq=function Jq(a,b,c,d,e,f,g,k){return function(n){n=D(n);var q=Ec.rd(n,rl);n=Ec.rd(n,vm);q=ro(a,q);var t=b+1;return G.rd(n,J(Wn.Ca(k)))?d<=t&&t<=e?tq(k,g,jq(q,n)):null:t<e?uq(k,new Q(null,2,5,S,[n,c],null),Jq.aa?Jq.aa(q,t,c,d,e,n,g,k):Jq.call(null,q,t,c,d,e,n,g,k)):null;};};function Kq(a){return function(b){return lf(Tj.Ca(a),b);};}function Fp(a,b,c){var d=Bj.Ca(a),e=Wn.Ca(c);var f=J(e);var g=b+J(d);f=f<g?f:g;e=oe?e.substring(b,f):me.call(null,e,b,f);return G.rd(d,e)?tq(c,new Q(null,2,5,S,[b,a],null),jq(d,f)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,Bj,al,d],null));}function Vp(a,b,c){var d=Bj.Ca(a),e=Wn.Ca(c);var f=J(e);var g=b+J(d);f=f<g?f:g;g=oe?e.substring(b,f):me.call(null,e,b,f);return G.rd(f,J(e))&&G.rd(d,g)?tq(c,new Q(null,2,5,S,[b,a],null),jq(d,f)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,3,[W,Bj,al,d,Nm,!0],null));}function Gp(a,b,c){var d=Bj.Ca(a),e=Wn.Ca(c);var f=J(e);var g=b+J(d);f=f<g?f:g;e=oe?e.substring(b,f):me.call(null,e,b,f);return G.rd(d.toUpperCase(),e.toUpperCase())?tq(c,new Q(null,2,5,S,[b,a],null),jq(d,f)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,Bj,al,d],null));}function Wp(a,b,c){var d=Bj.Ca(a),e=Wn.Ca(c);var f=J(e);var g=b+J(d);f=f<g?f:g;g=oe?e.substring(b,f):me.call(null,e,b,f);return G.rd(f,J(e))&&G.rd(d.toUpperCase(),g.toUpperCase())?tq(c,new Q(null,2,5,S,[b,a],null),jq(d,f)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,3,[W,Bj,al,d,Nm,!0],null));}function Hp(a,b,c){var d=xj.Ca(a),e=bo.Ca(a),f=Wn.Ca(c);if(b>=J(f))return yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,il,al,new m(null,3,[el,!0,xj,d,bo,e],null)],null));if(65535>=e)return f=f.charCodeAt(b),d<=f&&f<=e?tq(c,new Q(null,2,5,S,[b,a],null),jq(v.Ca(he(f)),b+1)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,il,al,new m(null,3,[el,!0,xj,d,bo,e],null)],null));f=Ap(f,b|0);var g=zp(f);return d<=f&&f<=e?tq(c,new Q(null,2,5,S,[b,a],null),jq(g,b+J(g))):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,il,al,new m(null,3,[el,!0,xj,d,bo,e],null)],null));}function Xp(a,b,c){var d=xj.Ca(a),e=bo.Ca(a),f=Wn.Ca(c),g=J(f);if(b>=J(f))return yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,il,al,new m(null,3,[el,!0,xj,d,bo,e],null)],null));if(65535>=e)return f=f.charCodeAt(b),G.rd(b+1,g)&&d<=f&&f<=e?tq(c,new Q(null,2,5,S,[b,a],null),jq(v.Ca(he(f)),g)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,il,al,new m(null,3,[el,!0,xj,d,bo,e],null)],null));f=Ap(f,b|0);var k=zp(f);return G.rd(b+J(k),g)&&d<=f&&f<=e?tq(c,new Q(null,2,5,S,[b,a],null),jq(k,g)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,3,[W,il,al,new m(null,3,[el,!0,xj,d,bo,e],null),Nm,!0],null));}function Lq(a,b){a=new RegExp(a.source,["g",Wo(a)].join("")).exec(b);return r(r(a)?0===a.index:a)?x(a):null;}function Np(a,b,c){var d=sk.Ca(a),e=fm.Ca(c);e=ne?e.substring(b):me.call(null,e,b);e=Lq(d,e);return r(e)?tq(c,new Q(null,2,5,S,[b,a],null),jq(e,b+J(e))):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,sk,al,d],null));}function cq(a,b,c){var d=sk.Ca(a),e=fm.Ca(c),f=ne?e.substring(b):me.call(null,e,b);f=Lq(d,f);var g=J(e)-b;return r(r(f)?G.rd(J(f),g):f)?tq(c,new Q(null,2,5,S,[b,a],null),jq(f,J(e))):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,3,[W,sk,al,d,Nm,!0],null));}function Ep(a,b,c){var d=Gj.Ca(a);return uq(c,new Q(null,2,5,S,[b,x(d)],null),Eq(xo,z(d),new Q(null,2,5,S,[b,a],null),c));}function Up(a,b,c){var d=Gj.Ca(a);return uq(c,new Q(null,2,5,S,[b,x(d)],null),Fq(xo,z(d),new Q(null,2,5,S,[b,a],null),c));}function Kp(a,b,c){var d=Ul.Ca(a);return uq(c,new Q(null,2,5,S,[b,d],null),Gq(xo,d,b,new Q(null,2,5,S,[b,a],null),c));}function $p(a,b,c){var d=Ul.Ca(a);return uq(c,new Q(null,2,5,S,[b,d],null),Hq(xo,d,b,new Q(null,2,5,S,[b,a],null),c));}function Lp(a,b,c){var d=Ul.Ca(a),e=pn.Ca(a),f=om.Ca(a);return 0===e?(tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b)),1<=f?uq(c,new Q(null,2,5,S,[b,d],null),Iq(xo,0,d,1,f,b,new Q(null,2,5,S,[b,a],null),c)):null):uq(c,new Q(null,2,5,S,[b,d],null),Iq(xo,0,d,e,f,b,new Q(null,2,5,S,[b,a],null),c));}function aq(a,b,c){var d=Ul.Ca(a),e=pn.Ca(a),f=om.Ca(a);return 0===e?(tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b)),1<=f?uq(c,new Q(null,2,5,S,[b,d],null),Jq(xo,0,d,1,f,b,new Q(null,2,5,S,[b,a],null),c)):null):uq(c,new Q(null,2,5,S,[b,d],null),Jq(xo,0,d,e,f,b,new Q(null,2,5,S,[b,a],null),c));}function Mp(a,b,c){var d=Ul.Ca(a);uq(c,new Q(null,2,5,S,[b,d],null),Gq(xo,d,b,new Q(null,2,5,S,[b,a],null),c));return tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b));}function bq(a,b,c){var d=Ul.Ca(a);return G.rd(b,J(Wn.Ca(c)))?tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b)):uq(c,new Q(null,2,5,S,[b,d],null),Hq(xo,d,b,new Q(null,2,5,S,[b,a],null),c));}function Dp(a,b,c){var d=Gj.Ca(a);d=H(d);for(var e=null,f=0,g=0;;){if(g<f){var k=e.H(null,g);uq(c,new Q(null,2,5,S,[b,k],null),Cq(new Q(null,2,5,S,[b,a],null),c));g+=1;}else if(d=H(d))e=d,Kd(e)?(d=hc(e),f=ic(e),e=d,k=J(d),d=f,f=k):(k=x(e),uq(c,new Q(null,2,5,S,[b,k],null),Cq(new Q(null,2,5,S,[b,a],null),c)),d=z(e),e=null,f=0),g=0;else return null;}}function Tp(a,b,c){var d=Gj.Ca(a);d=H(d);for(var e=null,f=0,g=0;;){if(g<f){var k=e.H(null,g);vq(c,new Q(null,2,5,S,[b,k],null),Cq(new Q(null,2,5,S,[b,a],null),c));g+=1;}else if(d=H(d))e=d,Kd(e)?(d=hc(e),f=ic(e),e=d,k=J(d),d=f,f=k):(k=x(e),vq(c,new Q(null,2,5,S,[b,k],null),Cq(new Q(null,2,5,S,[b,a],null),c)),d=z(e),e=null,f=0),g=0;else return null;}}function Qp(a,b,c){var d=dk.Ca(a),e=ak.Ca(a);d=new Q(null,2,5,S,[b,d],null);var f=new Q(null,2,5,S,[b,e],null),g=Cq(new Q(null,2,5,S,[b,a],null),c);uq(c,d,g);return xq(c,d,function(){return uq(c,f,g);});}function eq(a,b,c){var d=dk.Ca(a),e=ak.Ca(a);d=new Q(null,2,5,S,[b,d],null);var f=new Q(null,2,5,S,[b,e],null),g=Cq(new Q(null,2,5,S,[b,a],null),c);vq(c,d,g);return xq(c,d,function(){return vq(c,f,g);});}function Jp(a,b,c){var d=Ul.Ca(a);uq(c,new Q(null,2,5,S,[b,d],null),Cq(new Q(null,2,5,S,[b,a],null),c));return tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b));}function Zp(a,b,c){var d=Ul.Ca(a);vq(c,new Q(null,2,5,S,[b,d],null),Cq(new Q(null,2,5,S,[b,a],null),c));return G.rd(b,J(Wn.Ca(c)))?tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,Sl,al,ok],null));}function Cp(a,b,c){var d=uk.Ca(c);var e=X.Ca(a);d=Ec.Md(d,e,e);return uq(c,new Q(null,2,5,S,[b,d],null),Cq(new Q(null,2,5,S,[b,a],null),c));}function Sp(a,b,c){var d=uk.Ca(c);var e=X.Ca(a);d=Ec.Md(d,e,e);return vq(c,new Q(null,2,5,S,[b,d],null),Cq(new Q(null,2,5,S,[b,a],null),c));}function Op(a,b,c){var d=Ul.Ca(a);return uq(c,new Q(null,2,5,S,[b,d],null),Dq(new Q(null,2,5,S,[b,a],null),c));}function dq(a,b,c){return G.rd(b,J(Wn.Ca(c)))?Op(a,b,c):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,cm,al,ok],null));}function Pp(a,b,c){var d=Ul.Ca(a),e=new Q(null,2,5,S,[b,d],null);if(r(qq(c,e)))return yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,1,[W,Sk],null));uq(c,e,function(){var f=new mi(function(){return yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,Sk,al,new m(null,1,[Hn,Io(d,!1)],null)],null));});return function(){return f instanceof mi?Fb(f):f;};}());return xq(c,e,function(){return Qa(qq(c,e))?tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b)):null;});}function Ip(a,b,c){return tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b));}function Yp(a,b,c){return G.rd(b,J(Wn.Ca(c)))?tq(c,new Q(null,2,5,S,[b,a],null),jq(null,b)):yq(c,new Q(null,2,5,S,[b,a],null),b,new m(null,2,[W,yj,al,ok],null));}function Mq(a,b,c){r(c)?uq(a,new Q(null,2,5,S,[0,b],null),Kq(a)):vq(a,new Q(null,2,5,S,[0,b],null),Kq(a));}function Nq(a,b,c,d){a=iq(a,c,c,-1,null);Mq(a,pp(b),d);b=Bq(a,null);if(r(b))b=x(b);else{b=Fb(wm.Ca(a));a:{d=vm.Ca(b);for(var e=a=1,f=0;;){if(G.rd(d,f)){d=new m(null,2,[lj,a,tn,e],null);break a;}G.rd("\n",Ec.rd(c,f))?(f+=1,a+=1,e=1):(f+=1,e+=1);}}a:for(a=lj.Ca(d),c=H(Go(c,"\r\n","\n"));;){if(Dd(c)){c="";break a;}if(G.rd(a,1)){c=Te(v,Kh(df(new Ch(null,new m(null,1,["\n",null],null),null)),c));break a;}G.rd("\n",x(c))?(c=z(c),--a):c=z(c);}b=Li(M([b,d,new m(null,1,[Wn,c],null)]));}return b;}function zq(a,b,c,d,e){return zd(a.rd?a.rd(b,c):a.call(null,b,c),new m(null,2,[mm,d,ol,e],null));}function vu(a){return null==a?null:he(a);}function Pq(a,b,c,d,e){this.ob=a;this.form=b;this.J=c;this.B=d;this.u=e;this.j=2230716170;this.G=139264;}h=Pq.prototype;h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){switch(b instanceof E?b.ca:null){case"splicing?":return this.ob;case"form":return this.form;default:return Ec.Md(this.B,b,c);}};h.Za=function(a,b,c){return Ud(function(d,e){var f=O(e,0,null);e=O(e,1,null);return b.Md?b.Md(d,f,e):b.call(null,d,f,e);},c,this);};h.K=function(a,b,c){return Rh(b,function(d){return Rh(b,Zh,""," ","",c,d);},"#cljs.tools.reader.impl.utils.ReaderConditional{",", ","}",c,Ke.rd(new Q(null,2,5,S,[new Q(null,2,5,S,[Cn,this.ob],null),new Q(null,2,5,S,[An,this.form],null)],null),this.B));};h.Ta=function(){return new ng(this,2,new Q(null,2,5,S,[Cn,An],null),r(this.B)?qc(this.B):Ze());};h.S=function(){return this.J;};h.X=function(){return 2+J(this.B);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=-209062840^Rc(this);};h.N=function(a,b){return null!=b&&this.constructor===b.constructor&&G.rd(this.ob,b.ob)&&G.rd(this.form,b.form)&&G.rd(this.B,b.B);};h.rb=function(a,b){return Qd(new Ch(null,new m(null,2,[Cn,null,An,null],null),null),b)?xd.rd(Jb(zf.rd($e,this),this.J),b):new Pq(this.ob,this.form,this.J,Ye(xd.rd(this.B,b)),null);};h.Qd=function(a,b){switch(b instanceof E?b.ca:null){case"splicing?":case"form":return!0;default:return Qd(this.B,b);}};h.ya=function(a,b,c){return r(ve.rd?ve.rd(Cn,b):ve.call(null,Cn,b))?new Pq(c,this.form,this.J,this.B,null):r(ve.rd?ve.rd(An,b):ve.call(null,An,b))?new Pq(this.ob,c,this.J,this.B,null):new Pq(this.ob,this.form,this.J,vd.Md(this.B,b,c),null);};h.R=function(){return H(Ke.rd(new Q(null,2,5,S,[new Sf(Cn,this.ob),new Sf(An,this.form)],null),this.B));};h.T=function(a,b){return new Pq(this.ob,this.form,b,this.B,this.u);};h.V=function(a,b){return Jd(b)?this.ya(null,kb(b,0),kb(b,1)):Ud(ib,this,b);};function Qq(a,b){return new Pq(b,a,null,null,null);}h.W=Fa;h.K=function(a,b,c){Yb(b,["#?",r(this.ob)?"@":null].join(""));return Zh(this.form,b,c);};var Rq=/[\s]/;function Sq(a){return null==a?null:","===a?!0:Rq.test(a);}function Tq(a){return null==a?null:!/[^0-9]/.test(a);}function wu(a){return a instanceof E?wd([a,!0]):a instanceof Dc?new m(null,1,[W,a],null):"string"===typeof a?new m(null,1,[W,a],null):a;}var Vq=kf(0);function Wq(a,b){return function e(d){return new ze(null,function(){for(;;){var f=H(d);if(f){if(Kd(f)){var g=hc(f),k=J(g),l=De(k);return function(){for(var q=0;;){if(q<k){var t=kb(g,q),u=l;if(t instanceof Dc||t instanceof E){var A=Nh()(t),K=O(A,0,null);A=O(A,1,null);var U=t instanceof Dc?Fc:xe;t=null==K?U.rd?U.rd(a,A):U.call(null,a,A):G.rd("_",K)?U.Ca?U.Ca(A):U.call(null,A):t;}u.add(t);q+=1;}else return!0;}}()?Fe(l.da(),e(ic(f))):Fe(l.da(),null);}var n=x(f);return ld(n instanceof Dc||n instanceof E?function(){var q=Nh()(n),t=O(q,0,null);q=O(q,1,null);var u=n instanceof Dc?Fc:xe;return null==t?u.rd?u.rd(a,q):u.call(null,a,q):G.rd("_",t)?u.Ca?u.Ca(q):u.call(null,q):n;}():n,e(Jc(f)));}return null;}},null,null);}(b);}function Xq(a){var b=O(a,0,null);a=O(a,1,null);return r(b)?null:a;}function Yq(a,b){a=(0,_parseInt2["default"])(a,b);return r(isNaN(a))?-1:a;}function Zq(a){if(null!=a&&null!=a.ia)a=a.ia(a);else{var b=Zq[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=Zq._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("Reader.read-char",a);}return a;}function xu(a){if(null!=a&&null!=a.tb)a=a.tb(a);else{var b=xu[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=xu._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("Reader.peek-char",a);}return a;}function ar(a,b){if(null!=a&&null!=a.bc)a.bc(a,b);else{var c=ar[ia(null==a?null:a)];if(null!=c)c.rd?c.rd(a,b):c.call(null,a,b);else if(c=ar._,null!=c)c.rd?c.rd(a,b):c.call(null,a,b);else throw Ta("IPushbackReader.unread",a);}}function br(a){if(null!=a&&null!=a.dc)a=a.dc(a);else{var b=br[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=br._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IndexingReader.get-line-number",a);}return a;}function cr(a){if(null!=a&&null!=a.cc)a=a.cc(a);else{var b=cr[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=cr._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IndexingReader.get-column-number",a);}return a;}function dr(a){if(null!=a&&null!=a.Fc)a=a.Fc(a);else{var b=dr[ia(null==a?null:a)];if(null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else if(b=dr._,null!=b)a=b.Ca?b.Ca(a):b.call(null,a);else throw Ta("IndexingReader.get-file-name",a);}return a;}function er(a,b){this.M=a;this.Wc=b;this.Wb=0;}er.prototype.ia=function(){if(this.Wc>this.Wb){var a=this.M.charAt(this.Wb);this.Wb+=1;return a;}return null;};er.prototype.tb=function(){return this.Wc>this.Wb?this.M.charAt(this.Wb):null;};function fr(a,b){this.Uc=a;this.Fb=b;this.ab=this.yc=1;}fr.prototype.ia=function(){var a=this.ab<this.yc?this.Fb[this.ab]:this.Uc.ia(null);this.ab<this.yc&&(this.ab+=1);return vu(a);};fr.prototype.tb=function(){var a=this.ab<this.yc?this.Fb[this.ab]:this.Uc.tb(null);return vu(a);};fr.prototype.bc=function(a,b){if(r(b)){if(0===this.ab)throw Error("Pushback buffer is full");--this.ab;return this.Fb[this.ab]=b;}return null;};function gr(a){return null!=a?Fa===a.Kd?!0:!1:!1;}function yu(a){a=new er(a,J(a));a:{var b=Array(1);if(Nd(null))for(var c=0,d=H(null);;){if(d&&1>c)b[c]=x(d),c+=1,d=z(d);else break a;}else for(c=0;;){if(1>c)b[c]=null,c+=1;else break;}}return new fr(a,b);}function ir(a,b,c,d){var e=J(b);a=r(a)?0:10<e?10:e;b=nf.rd(ff(Ri,!0),of(a,b));b=Te(v,pf(1,uf.rd(ti(" "),b)));e=a<e?"...":null;return[v.Ca(c),v.Ca(b),e,v.Ca(d)].join("");}function Ni(a,b){return null==b?en:"string"===typeof b?Bj:b instanceof E?$k:"number"===typeof b?$k:b instanceof Dc?$k:Jd(b)?vl:pe(b)?on:Hd(b)?hm:Fd(b)?Yk:G.rd(b,!0)?$k:G.rd(b,!1)?$k:Sa(b);}var Ri,Ca=kf($e),Da=kf($e),cb=kf($e),lb=kf($e),P=Ec.Md($e,Tk,wi.i?wi.i():wi.call(null));Ri=new Hi();Qi(Bj,function(a,b){a=r(a)?5:20;var c=b.length>a?'..."':'"',d=b.length;return['"',v.Ca(b.substring(0,a<d?a:d)),c].join("");});Qi($k,function(a,b){return v.Ca(b);});Qi(Za,function(){return"\x3cindexed seq\x3e";});Qi(rg,function(){return"\x3cmap seq\x3e";});Qi(Ug,function(){return"\x3cmap seq\x3e";});Qi(te,function(){return"\x3ccons\x3e";});Qi(ze,function(){return"\x3clazy seq\x3e";});Qi(en,function(){return"nil";});Qi(on,function(a,b){return ir(a,b,"(",")");});Qi(hm,function(a,b){var c=J(b),d=r(a)?0:c;b=Te(Ke,of(d,b));return ir(a,b,"{",c>d?"...}":"}");});Qi(Yk,function(a,b){return ir(a,b,"#{","}");});Qi(vl,function(a,b){return ir(a,b,"[","]");});Qi(Oi,function(a,b){return di(M([Sa(b)]),Ja());});function jr(a,b,c){b=new m(null,2,[Ll,fn,Lm,b],null);a=gr(a)?vd.Nd(b,Kn,dr(a),M([lj,br(a),tm,cr(a)])):b;var d=Kn.Ca(a);b=lj.Ca(a);var e=tm.Ca(a);d=r(d)?[v.Ca(d)," "].join(""):null;b=r(b)?["[line ",v.Ca(b),", col ",v.Ca(e),"]"].join(""):null;c=Ve(v,d,b,r(r(d)?d:b)?" ":null,c);throw Ui(c,a);}function kr(a,b){return jr(a,Ql,M([Te(v,b)]));}function lr(a,b){return jr(a,Ek,M([Te(v,b)]));}function mr(a,b){return jr(a,Hl,M([Te(v,b)]));}function zu(a,b,c,d,e){return mr(a,M(["Unexpected EOF while reading ",r(e)?["item ",v.Ca(e)," of "].join(""):null,ye(b),r(c)?[", starting at line ",v.Ca(c)," and column ",v.Ca(d)].join(""):null,"."]));}function or(a,b,c,d){kr(a,M(["The map literal starting with ",Ri.rd(!1,x(d)),r(b)?[" on line ",v.Ca(b)," column ",v.Ca(c)].join(""):null," contains ",J(d)," form(s). Map literals must contain an even number of forms."]));}function Au(a){throw lr(null,M(["Invalid unicode literal: \\",a,"."]));}function Bu(a,b){return kr(a,M(["Invalid unicode escape: \\u",b,"."]));}function rr(a,b,c){return kr(a,M(["Invalid ",ye(b),": ",c,"."]));}function Cu(a,b){return mr(a,M(["Unexpected EOF while reading start of ",ye(b),"."]));}function Du(a,b,c){return kr(a,M(["Invalid character: ",c," found while reading ",ye(b),"."]));}function Eu(a){return mr(a,M(["Unexpected EOF while reading dispatch character."]));}function vr(a,b,c){a:{var d=b instanceof E?b.ca:null;switch(d){case"regex":d='#"';break a;case"string":d='"';break a;default:throw Error(["No matching clause: ",v.Ca(d)].join(""));}}return mr(a,M(["Unexpected EOF reading ",ye(b)," starting ",$a(v,d,c),"."]));}function Ku(a,b){return lr(null,M(["Invalid digit ",a," in unicode character \\",b,"."]));}function xr(a,b){return lr(a,M(["Invalid digit ",b," in unicode character."]));}function Lu(a,b,c){return lr(a,M(["Invalid unicode literal. Unicode literals should be ",c,"characters long.  ","value suppled is ",b,"characters long."]));}function Mu(a,b){return kr(a,M(["Invalid character literal \\u",b,"."]));}function Nu(a,b){return kr(a,M(["Invalid octal escape sequence in a character literal:",b,". Octal escape sequences must be 3 or fewer digits."]));}function Br(a){return kr(a,M(["Octal escape sequence must be in range [0, 377]."]));}function Cr(a){return mr(a,M(["Unexpected EOF while reading character."]));}function Ou(a,b){return kr(a,M(["Unsupported escape character: \\",b,"."]));}function Pu(a){return kr(a,M(["A single colon is not a valid keyword."]));}function Qu(a,b){kr(a,M(["Metadata cannot be ",Ri.rd(!1,b),". Metadata must be a Symbol, Keyword, String or Map."]));}function Ru(a,b){return kr(a,M(["Metadata can not be applied to ",Ri.rd(!1,b),". ","Metadata can only be applied to IMetas."]));}function Su(a,b){return kr(a,M(["Namespaced map with namespace ",b," does not specify a map."]));}function Tu(a,b){return kr(a,M(["Invalid value used as namespace in namespaced map: ",b,"."]));}function Uu(a,b){kr(a,M(["Invalid reader tag: ",Ri.rd(!1,b),". Reader tags must be symbols."]));}function Vu(a,b){return kr(a,M(["No reader function for tag ",Ri.rd(!1,b),"."]));}function Lr(a,b){b=function(c){return function f(e){return new ze(null,function(){for(var g=e;;){if(g=H(g)){if(Kd(g)){var k=hc(g),l=J(k),n=De(l);a:for(var q=0;;){if(q<l){var t=kb(k,q),u=O(t,0,null);1<O(t,1,null)&&n.add(u);q+=1;}else{k=!0;break a;}}return k?Fe(n.da(),f(ic(g))):Fe(n.da(),null);}n=x(g);k=O(n,0,null);if(1<O(n,1,null))return ld(k,f(Jc(g)));g=Jc(g);}else return null;}},null,null);}(Mh(c));}(b);return Ve(v,a,1<J(b)?"s":null,": ",pf(1,uf.rd(ti(", "),b)));}function Mr(a,b,c){b=ye(b);return kr(a,M([Lr([String(b.charAt(0)).toUpperCase()+String(b.substr(1)).toLowerCase()," literal contains duplicate key"].join(""),c)]));}function Nr(a,b){return r(b)?mr(a,M(["EOF while reading, starting at line ",b,"."])):mr(a,M(["EOF while reading."]));}function Or(a){for(var b=a.ia(null);;){if(Sq.Ca?Sq.Ca(b):Sq.call(null,b))b=a.ia(null);else return b;}}var Pr=/^([-+]?)(?:(0)|([1-9][0-9]*)|0[xX]([0-9A-Fa-f]+)|0([0-7]+)|([1-9][0-9]?)[rR]([0-9A-Za-z]+)|0[0-9]+)(N)?$/,Qr=/([-+]?[0-9]+)\/([0-9]+)/,Rr=/([-+]?[0-9]+(\.[0-9]*)?([eE][-+]?[0-9]+)?)(M)?/;function Sr(a,b){a=Ph(a,b);return O(a,0,null)===b;}function Tr(a){if(Sr(Pr,a)){var b=Yf(Ph(Pr,a));if(null!=(b.Ca?b.Ca(2):b.call(null,2)))a=0;else{a="-"===(b.Ca?b.Ca(1):b.call(null,1));b=null!=(b.Ca?b.Ca(3):b.call(null,3))?new Q(null,2,5,S,[b.Ca?b.Ca(3):b.call(null,3),10],null):null!=(b.Ca?b.Ca(4):b.call(null,4))?new Q(null,2,5,S,[b.Ca?b.Ca(4):b.call(null,4),16],null):null!=(b.Ca?b.Ca(5):b.call(null,5))?new Q(null,2,5,S,[b.Ca?b.Ca(5):b.call(null,5),8],null):null!=(b.Ca?b.Ca(7):b.call(null,7))?new Q(null,2,5,S,[b.Ca?b.Ca(7):b.call(null,7),(0,_parseInt2["default"])(b.Ca?b.Ca(6):b.call(null,6))],null):new Q(null,2,5,S,[null,null],null);var c=b.Ca?b.Ca(0):b.call(null,0);null==c?a=null:(b=(0,_parseInt2["default"])(c,b.Ca?b.Ca(1):b.call(null,1)),a=a?-1*b:b,a=r(isNaN(a))?null:a);}}else Sr(Rr,a)?(b=Yf(Ph(Rr,a)),a=null!=(b.Ca?b.Ca(4):b.call(null,4))?(0,_parseFloat2["default"])(b.Ca?b.Ca(1):b.call(null,1)):(0,_parseFloat2["default"])(a)):Sr(Qr,a)?(b=Yf(Ph(Qr,a)),a=b.Ca?b.Ca(1):b.call(null,1),b=b.Ca?b.Ca(2):b.call(null,2),a=r(Ph(/^\+/,a))?a.substring(1):a,a=(0,_parseInt2["default"])(a)/(0,_parseInt2["default"])(b)):a=null;return a;}function Ur(a){if(""===a||!0===/:$/.test(a)||!0===/^::/.test(a))return null;var b=(0,_indexOf["default"])(a).call(a,"/"),c=0<b?a.substring(0,b):null;if(null!=c){b+=1;if(b===J(a))return null;a=a.substring(b);return Tq(fd(a,0))||""===a||!1!==/:$/.test(c)||"/"!==a&&-1!==(0,_indexOf["default"])(a).call(a,"/")?null:new Q(null,2,5,S,[c,a],null);}return"/"===a||-1===(0,_indexOf["default"])(a).call(a,"/")?new Q(null,2,5,S,[null,a],null):null;}var Vr=function Vr(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Vr.Nd(arguments[0],1<c.length?new Za((0,_slice["default"])(c).call(c,1),0,null):null);};Vr.Nd=function(a){for(;;){var b=a.ia(null);if("\n"===b||"\n"===b||null==b)break;}return a;};Vr.D=1;Vr.C=function(a){var b=x(a);a=z(a);return this.Nd(b,a);};function Wr(a){return function(){function b(d,e){var f=null;if(1<arguments.length){f=0;for(var g=Array(arguments.length-1);f<g.length;){g[f]=arguments[f+1],++f;}f=new Za(g,0,null);}return c.call(this,d,f);}function c(d){return kr(d,M([a]));}b.D=1;b.C=function(d){var e=x(d);d=Jc(d);return c(e);};b.Nd=c;return b;}();}function Xr(a){switch(a){case'"':case";":case"@":case"^":case"`":case"~":case"(":case")":case"[":case"]":case"{":case"}":case"\\":return!0;default:return!1;}}var Yr=new za();function Zr(a,b,c){if(null==c)return Cu(a,b);Yr.clear();for(b=c;;){if(Sq(b)||Xr(b)||null==b)return null!=b&&a.bc(null,b),Yr.toString();Yr.append(b);b=a.ia(null);}}function $r(a,b,c,d){b=a.ia(null);if(r(b)){var e=as.Ca?as.Ca(b):as.call(null,b);if(r(e))return e.v?e.v(a,b,c,d):e.call(null,a,b,c,d);a.bc(null,b);return bs.v?bs.v(a,b,c,d):bs.call(null,a,b,c,d);}return Eu(a);}function cs(a,b){return kr(a,M(["Unmatched delimiter ",b,"."]));}function ds(a){for(var b=new za(),c=a.ia(null);;){if('"'===c)return Qh(v.Ca(b));if(null==c)return vr(a,Dn,M([b]));b.append(c);"\\"===c&&(c=a.ia(null),null==c&&vr(a,Dn,M([b])),b.append(c));c=a.ia(null);}}function es(a,b,c){b=1+b;J(a)!==b&&Au(a);for(var d=1,e=0;;){if(d===b)return String.fromCharCode(e);var f=Yq(fd(a,d),c);if(-1===f)return Ku(fd(a,d),a);e=f+e*c;d+=1;}}function fs(a,b,c,d,e){for(var f=1,g=Yq(b,c);;){if(-1===g)return xr(a,b);if(f!==d){var k=a.tb(null);var l=Sq(k);l||(l=gs.Ca?gs.Ca(k):gs.call(null,k),l=r(l)?l:null==k);if(r(l))return r(e)?Lu(a,f,d):String.fromCharCode(g);l=Yq(k,c);a.ia(null);if(-1===l)return xr(a,k);g=l+g*c;f+=1;}else return String.fromCharCode(g);}}function hs(a){var b=a.ia(null);if(null!=b){b=Xr(b)||Sq(b)?v.Ca(b):Zr(a,Lk,b);var c=b.length;if(1===c)return b.charAt(0);if(G.rd(b,"newline"))return"\n";if(G.rd(b,"space"))return" ";if(G.rd(b,"tab"))return"\t";if(G.rd(b,"backspace"))return"\b";if(G.rd(b,"formfeed"))return"\f";if(G.rd(b,"return"))return"\r";if(r(0==(0,_lastIndexOf["default"])(b).call(b,"u",0)))return b=es(b,4,16),c=b.charCodeAt(0),55295<c&&57344>c?Mu(a,c.toString(16)):b;if(r(0==(0,_lastIndexOf["default"])(b).call(b,"o",0))){--c;if(3<c)return Nu(a,b);c=es(b,c,8);return 255>=(0,_parseInt2["default"])(b.substring(1),8)?c:Br(a);}return kr(a,M(["Unsupported character: ",b,"."]));}return Cr(a);}function is(a){return gr(a)?new Q(null,2,5,S,[a.dc(null),a.cc(null)-1|0],null):null;}function js(a){return gr(a)?new Q(null,2,5,S,[a.dc(null),a.cc(null)],null):null;}var ks={},ls={},ms=!1;function ns(a,b,c,d,e){var f=ms;ms=!0;try{a:for(var g=is(c),k=O(g,0,null),l=O(g,1,null),n=vu(b),q=ac(td);;){var t=os?os(c,!1,ks,n,d,e):ps.call(null,c,!1,ks,n,d,e);if(t===ls){var u=cc(q);break a;}if(t===ks){u=zu(c,a,k,l,J(q));break a;}q=Le.rd(q,t);}return u;}finally{ms=f;}}function qs(a,b,c,d){var e=is(a);b=O(e,0,null);e=O(e,1,null);var f=ns(on,")",a,c,d);d=js(a);c=O(d,0,null);d=O(d,1,null);f=Dd(f)?Kc:Te(se,f);r(b)?(a=dr(a),a=Li(M([r(a)?new m(null,1,[Kn,a],null):null,new m(null,4,[lj,b,tn,e,Ij,c,jk,d],null)]))):a=null;return zd(f,a);}function rs(a,b,c,d){var e=is(a);b=O(e,0,null);e=O(e,1,null);c=ns(vl,"]",a,c,d);var f=js(a);d=O(f,0,null);f=O(f,1,null);r(b)?(a=dr(a),a=Li(M([r(a)?new m(null,1,[Kn,a],null):null,new m(null,4,[lj,b,tn,e,Ij,d,jk,f],null)]))):a=null;return zd(c,a);}function ss(a,b,c,d){var e=is(a);b=O(e,0,null);e=O(e,1,null);var f=ns(hm,"}",a,c,d),g=J(f),k=Lh(2,f),l=Gh(k);d=js(a);c=O(d,0,null);d=O(d,1,null);!cf(g)&&or(a,b,e,f);G.rd(J(l),J(k))||Mr(a,hm,k);f=g<=2*wg?fj(He(f)):kj(He(f));r(b)?(a=dr(a),a=Li(M([r(a)?new m(null,1,[Kn,a],null):null,new m(null,4,[lj,b,tn,e,Ij,c,jk,d],null)]))):a=null;return zd(f,a);}function ts(a,b){for(var c=function(){var g=new za();g.append(b);return g;}(),d=a.ia(null);;){if(r(function(){var g=Sq(d);if(g)return g;g=gs.Ca?gs.Ca(d):gs.call(null,d);return r(g)?g:null==d;}())){var e=v.Ca(c);a.bc(null,d);var f=Tr(e);return r(f)?f:kr(a,M(["Invalid number: ",e,"."]));}e=function(){var g=c;g.append(d);return g;}();f=a.ia(null);c=e;d=f;}}function us(a){var b=a.ia(null);switch(b){case"t":return"\t";case"r":return"\r";case"n":return"\n";case"\\":return"\\";case'"':return'"';case"b":return"\b";case"f":return"\f";case"u":return b=a.ia(null),-1===(0,_parseInt2["default"])(b|0,16)?Bu(a,b):fs(a,b,16,4,!0);default:return Tq(b)?(b=fs(a,b,8,3,!1),255<(b|0)?Br(a):b):Ou(a,b);}}function vs(a){for(var b=new za(),c=a.ia(null);;){if(null==c)return vr(a,Bj,M(['"',b]));switch(c){case"\\":var d=function(){var f=b;f.append(us(a));return f;}(),e=a.ia(null);b=d;c=e;continue;case'"':return v.Ca(b);default:d=function(){var f=b;f.append(c);return f;}(),e=a.ia(null),b=d,c=e;}}}function xs(a,b){var c=is(a),d=O(c,0,null);c=O(c,1,null);b=Zr(a,dl,b);if(null==b)return null;switch(b){case"nil":return null;case"true":return!0;case"false":return!1;case"/":return Ak;default:var e=Ur(b);if(null!=e){b=Fc.rd(e.H(null,0),e.H(null,1));e=b.T;if(null==d)d=null;else{var f=dr(a);f=null==f?null:new m(null,1,[Kn,f],null);var g=js(a);a=O(g,0,null);g=O(g,1,null);d=Li(M([f,new m(null,4,[lj,d,tn,c,Ij,a,jk,g],null)]));}d=e.call(b,null,d);}else d=rr(a,dl,b);return d;}}function ys(a){var b=a.ia(null);if(Sq(b))return Pu(a);b=Zr(a,X,b);var c=Ur(b);if(null!=c){var d=c.H(null,0);c=c.H(null,1);if(":"===b.charAt(0)){if(null!=d)return d=Ec.rd(null,Fc.Ca(d.substring(1))),r(d)?xe.rd(v.Ca(d),c):rr(a,X,[":",v.Ca(b)].join(""));d=null;return r(d)?xe.rd(v.Ca(d),c.substring(1)):kr(a,M(["Invalid token: :",b]));}return xe.rd(d,c);}return rr(a,X,[":",v.Ca(b)].join(""));}function zs(a){return function(b,c,d,e){return new N(null,a,new N(null,As?As(b,!0,null,d,e):ps.call(null,b,!0,null,d,e),null,1,null),2,null);};}function Bs(a,b,c,d){var e=is(a);b=O(e,0,null);e=O(e,1,null);var f=wu(As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d));Hd(f)||Qu(a,f);c=As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d);return null!=c&&(c.j&131072||Fa===c.Cc)?(a=r(r(b)?Nd(c):b)?vd.Nd(f,lj,b,M([tn,e])):f,null!=c&&(c.j&262144||Fa===c.Ec)?zd(c,Li(M([Ad(c),a]))):c.s=a):Ru(a,c);}function Cs(a,b,c,d){var e=is(a);b=O(e,0,null);e=O(e,1,null);e=r(e)?e-1|0:null;var f=ns(Yk,"}",a,c,d);c=Gh(f);var g=js(a);d=O(g,0,null);g=O(g,1,null);G.rd(J(f),J(c))||kr(a,M([Mr(a,Yk,f)]));r(b)?(a=dr(a),a=Li(M([r(a)?new m(null,1,[Kn,a],null):null,new m(null,4,[lj,b,tn,e,Ij,d,jk,g],null)]))):a=null;return zd(c,a);}function Ds(a,b,c,d){As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d);return a;}function Es(a,b,c,d){b=As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d);return G.rd($n,b)?Number.NaN:G.rd(Sm,b)?Number.NEGATIVE_INFINITY:G.rd(Zm,b)?Number.POSITIVE_INFINITY:kr(a,M([["Invalid token: ##",v.Ca(b)].join("")]));}var Fs=new Ch(null,new m(null,2,[ho,null,Ml,null],null),null);function Ss(a,b,c){a===ks&&(a=0>c,Nr(b,a?c:a));}function Gs(a,b,c,d){var e=Hs;Hs=!0;try{var f=os?os(b,!1,ks,")",c,d):ps.call(null,b,!1,ks,")",c,d);Ss(f,b,a);return f===ls?ls:null;}finally{Hs=e;}}var Is={};function Js(a,b,c,d){var e=gr(a)?br(a):-1;a:for(var f=Is,g=null;;){if(f===Is){f=e;g=a;var k=c,l=d,n=os?os(g,!1,ks,")",k,l):ps.call(null,g,!1,ks,")",k,l);Ss(n,g,f);if(G.rd(n,ls))f=ls;else{var q=g,t=n;r(Ec.rd(Fs,t))&&kr(q,M(["Feature name ",t," is reserved"]));q=g;t=k;(n instanceof E?G.rd(Oi,n)||Qd(Ec.rd(t,bk),n):kr(q,M(["Feature should be a keyword: ",n])))?(k=os?os(g,!1,ks,")",k,l):ps.call(null,g,!1,ks,")",k,l),Ss(k,g,f),k===ls&&(0>f?kr(g,M(["read-cond requires an even number of forms"])):kr(g,M(["read-cond starting on line ",f," requires an even number of forms"]))),f=k):(f=Gs(f,g,k,l),f=r(f)?f:Is);}if(f===ls){c=ls;break a;}g=null;}else if(g!==ls)g=Gs(e,a,c,d);else{c=f;break a;}}return c===ls?a:r(b)?null!=c&&(c.j&16777216||Fa===c.Dc)?(b=He(c),oa(aa,d,0,0).apply(null,b),a):kr(a,M(["Spliced form list in read-cond-splicing must implement ISequential"])):c;}function Ks(a,b,c,d){if(Qa(function(){if(r(c)){var g=En.Ca(c),k=new Ch(null,new m(null,2,[Al,null,Mj,null],null),null);return k.Ca?k.Ca(g):k.call(null,g);}return c;}()))throw Ui("Conditional read not allowed",new m(null,1,[Ll,Qn],null));var e=a.ia(null);if(r(e)){if(e=(b=G.rd(e,"@"))?a.ia(null):e,b&&(r(ms)||kr(a,M(["cond-splice not in list"]))),e=Sq(e)?Or(a):e,r(e)){if(Xe(e,"("))throw Ui("read-cond body must be a list",new m(null,1,[Ll,Qn],null));var f=Hs;Hs=function(){var g=Hs;return r(g)?g:G.rd(Al,En.Ca(c));}();try{return r(Hs)?Qq(qs(a,e,c,d),b):Js(a,b,c,d);}finally{Hs=f;}}else return Cr(a);}else return Cr(a);}var Ls=null;function Ms(a){return Fc.Ca([-1===a?"rest":["p",v.Ca(a)].join(""),"__",v.Ca(mf.rd(Vq,Tc)),"#"].join(""));}function Ns(a,b,c,d){if(r(Ls))throw Ui("Nested #()s are not allowed",new m(null,1,[Ll,Pl],null));b=Ls;Ls=vh();try{ar(a,"(");var e=As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d);var f=Xb(Ls);if(f){var g=zb(x(f));a:{a=1;for(var k=ac(td);;){if(a>g){var l=cc(k);break a;}c=a+1;d=Le;var n=d.rd;f=k;var q=Ec.rd(Ls,a);var t=r(q)?q:Ms(a);var u=n.call(d,f,t);a=c;k=u;}}var A=r(Ls.call(null,-1))?sd.Nd(l,Hm,M([Ls.call(null,-1)])):l;}else A=td;return new N(null,Jj,new N(null,A,new N(null,e,null,1,null),2,null),3,null);}finally{Ls=b;}}function Os(a){if(r(Ls)){var b=Ls.call(null,a);if(r(b))return b;b=Ms(a);Ls=vd.Md(Ls,a,b);return b;}throw Ui("Arg literal not in #()",new m(null,1,[Ll,Pl],null));}function Ps(a,b,c,d){if(null==Ls)return xs(a,b);b=a.tb(null);if(Sq(b)||Xr(b)||null==b)return Os(1);if(G.rd(b,"\x26"))return a.ia(null),Os(-1);a=As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d);if(Pd(a))return Os(a);throw Ui("Arg literal must be %, %\x26 or %integer",new m(null,1,[Ll,Pl],null));}var Qs=null;function Rs(a,b,c,d){b=a.tb(null);r(b)?G.rd("@",b)?(b=zs(Pn),a.ia(null),a=b(a,"@",c,d)):a=zs(zl)(a,"~",c,d):a=null;return a;}function Us(a){a=H(a);for(var b=ac(td);;){if(a){var c=x(a);a=z(a);b=Le.rd(Le.rd(b,zb(c)),Ab(c));}else return H(cc(b));}}function Vs(a){if(Qa(Qs))throw Ui("Gensym literal not in syntax-quote",new m(null,1,[Ll,Pl],null));var b=Ec.rd(Qs,a);if(r(b))return b;b=Fc.Ca([oe(ye(a),0,ye(a).length-1),"__",v.Ca(mf.rd(Vq,Tc)),"__auto__"].join(""));Qs=vd.Md(Qs,a,b);return b;}function Ws(a,b){return function(){var c=null!=a?a.j&262144||Fa===a.Ec?!0:!1:!1;return c?H(xd.Nd(Ad(a),lj,M([tn,Ij,jk,Kn,Oj]))):c;}()?new N(null,wn,new N(null,b,new N(null,function(){var c=Ad(a);return Xs.Ca?Xs.Ca(c):Xs.call(null,c);}(),null,1,null),2,null),3,null):b;}function Ys(a,b){a:{b=H(b);for(var c=ac(td);;){if(b){var d=x(b);c=Le.rd(c,Nd(d)&&G.rd(x(d),zl)?new N(null,Dl,new N(null,pd(d),null,1,null),2,null):Nd(d)&&G.rd(x(d),Pn)?pd(d):new N(null,Dl,new N(null,Xs.Ca?Xs.Ca(d):Xs.call(null,d),null,1,null),2,null));b=z(b);}else{b=H(cc(c));break a;}}}b=new N(null,qn,new N(null,ld(Xj,b),null,1,null),2,null);return r(a)?new N(null,sl,new N(null,a,new N(null,b,null,1,null),2,null),3,null):b;}function Zs(a){throw Ui("resolve-symbol is not implemented",new m(null,1,[Mn,a],null));}function Xs(a){if(Qd(new Ch(null,new m(null,24,[Hm,"null",jo,"null",jj,"null",wk,"null",sj,"null",yk,"null",Nk,"null",ek,"null",ml,"null",Jk,"null",Wj,"null",pl,"null",Vn,"null",tl,"null",qj,"null",Jj,"null",Fl,"null",zm,"null",ym,"null",Wl,"null",Pk,"null",wj,"null",zk,"null",kn,"null"],null),null),a))var b=new N(null,Pk,new N(null,a,null,1,null),2,null);else if(a instanceof Dc)b=new N(null,Pk,new N(null,r(function(){var c=Qa(we(a));return c?wa(ye(a),"#"):c;}())?Vs(a):function(){var c=v.Ca(a);return r(wa(c,"."))?(c=Fc.Ca(c.substring(0,c.length-1)),Fc.Ca([v.Ca(Zs.call(null,c)),"."].join(""))):Zs.call(null,a);}(),null,1,null),2,null);else if(Nd(a)&&G.rd(x(a),zl))b=pd(a);else{if(Nd(a)&&G.rd(x(a),Pn))throw Ui("unquote-splice not in list",new m(null,1,[Ll,Pl],null));if(Ed(a)){if(null!=a&&(a.j&67108864||Fa===a.ed))b=a;else if(Hd(a))b=Ys(16<=J(a)?mo:po,Us(a));else if(Jd(a))b=new N(null,Vj,new N(null,Ys(null,a),null,1,null),2,null);else if(Fd(a))b=Ys(bn,a);else if(Nd(a)||pe(a))b=function(){var c=H(a);return c?Ys(null,c):se(pm);}();else throw Ui("Unknown Collection type",new m(null,1,[Ll,ao],null));}else b=a instanceof E||"number"===typeof a||"string"===typeof a||null==a||a instanceof Boolean||!0===a||!1===a||a instanceof RegExp?a:new N(null,Pk,new N(null,a,null,1,null),2,null);}return Ws(a,b);}function $s(a,b,c,d){b=Qs;Qs=$e;try{return Xs(As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d));}finally{Qs=b;}}function at(a,b,c,d){var e=Zr(a,Lj,Zq(a));b=G.rd(e,":")?null.name:G.rd(":",x(e))?function(){var f=null==e?null:e.substring(1);f=null==f?null:Ur(f);f=null==f?null:Xq(f);f=null==f?null:Fc.Ca(f);if(null==f)f=null;else{var g=Ec.rd(null,f);r(g)?f=g:(null==bj&&(bj=kf($e)),g=Ec.rd(Fb(bj),f),null!=g?f=g:null==dj(f)?f=null:(g=new aj(f),mf.v(bj,vd,f,g),f=g),f=r(f)?Fc.Ca(f.name):null);}return f;}():function(){var f=null==e?null:Ur(e);return null==f?null:Xq(f);}();return r(b)?"{"===Or(a)?(c=ns(Lj,"}",a,c,d),!cf(J(c))&&or(a,null,null,c),d=Wq(v.Ca(b),Lh(2,c)),c=Lh(2,Jc(c)),G.rd(J(Gh(d)),J(d))||Mr(a,Lj,d),Ih(d,c)):Su(a,e):Tu(a,e);}function gs(a){switch(a){case'"':return vs;case":":return ys;case";":return Vr;case"'":return zs(Pk);case"@":return zs(Wm);case"^":return Bs;case"`":return $s;case"~":return Rs;case"(":return qs;case")":return cs;case"[":return rs;case"]":return cs;case"{":return ss;case"}":return cs;case"\\":return hs;case"%":return Ps;case"#":return $r;default:return null;}}function as(a){switch(a){case"^":return Bs;case"'":return zs(Wl);case"(":return Ns;case"{":return Cs;case"\x3c":return Wr("Unreadable form");case"\x3d":return Wr("read-eval not supported");case'"':return ds;case"!":return Vr;case"_":return Ds;case"?":return Ks;case":":return at;case"#":return Es;default:return null;}}function bs(a,b,c,d){b=As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d);b instanceof Dc||Uu(a,b);if(r(Hs))return a=As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d),new Wi(b,a);var e=$e.call(null,b);e=r(e)?e:$e.Ca?$e.Ca(b):$e.call(null,b);return r(e)?(b=As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d),e.Ca?e.Ca(b):e.call(null,b)):r(bt)?(e=bt,a=As?As(a,!0,null,c,d):ps.call(null,a,!0,null,c,d),e.rd?e.rd(b,a):e.call(null,b,a)):Vu(a,b);}var bt=null,Hs=!1;function ps(a){switch(arguments.length){case 5:return As(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return os(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function As(a,b,c,d,e){return os(a,b,c,null,d,e);}function os(a,b,c,d,e,f){try{a:for(;;){if(0==f.length){var g=a.ia(null);if(!Sq(g)){if(null==g){var k=b?Nr(a,null):c;break a;}if(g===d){k=ls;break a;}if(Tq(g)||("+"===g||"-"===g)&&Tq(a.tb(null))){k=ts(a,g);break a;}var l=gs(g);if(null!=l){var n=l.v?l.v(a,g,e,f):l.call(null,a,g,e,f);if(n!==a){k=n;break a;}}else{k=xs(a,g);break a;}}}else{var q=f[0];(0,_splice["default"])(Array.prototype).call(f,0,1);k=q;break a;}}return k;}catch(t){if(t instanceof Error){b=t;if(b instanceof Ti){c=b instanceof Ti?b.data:null;if(G.rd(fn,Ll.Ca(c)))throw b;throw Wk(b.message,Li(M([new m(null,1,[Ll,fn],null),c,gr(a)?new m(null,3,[lj,a.dc(null),tn,a.cc(null),Kn,a.Fc(null)],null):null])),b);}throw Wk(b.message,Li(M([new m(null,1,[Ll,fn],null),gr(a)?new m(null,3,[lj,a.dc(null),tn,a.cc(null),Kn,a.Fc(null)],null):null])),b);}throw t;}}var ct=Oi;function dt(a,b){var c=ct;if(G.rd(!0,c))return mp(a);if(G.rd(!1,c))return lp(a);if(G.rd(Oi,c))return r(b)?mp(a):lp(a);throw Error(["No matching clause: ",v.Ca(c)].join(""));}var et=Qh(/'[^'\\]*(?:\\.[^'\\]*)*'/),ft=Qh(/#'[^'\\]*(?:\\.[^'\\]*)*'/),gt=Qh(/"[^"\\]*(?:\\.[^"\\]*)*"/),ht=Qh(/#"[^"\\]*(?:\\.[^"\\]*)*"/),it=/(?:(?!(?:\(\*|\*\)))[\s\S])*/,jt=Qh("[,\\s]*"),kt=sp(pp(Rk)),lt=cp(Km,bh([xm,mk,eo,bl,Bm,Qk,Fk,T,qk,Nn,$m,Bj,Gk,ko,Um,Bl,sk,Fj,em,lm,Zk,Rk,mn,In],[kp.Nd(M([sp(lp("!")),kt,pp(Fj)])),fp(kp.Nd(M([kt,ip.Nd(M([pp(Fj),pp(Qk),pp(xm)])),kt]))),kp.Nd(M([pp(mk),fp(kp.Nd(M([kt,sp(lp("/")),kt,pp(mk)])))])),ip.Nd(M([lp(":"),lp(":\x3d"),lp("::\x3d"),lp("\x3d")])),kp.Nd(M([pp(mk),gp(kp.Nd(M([kt,sp(lp("|")),kt,pp(mk)])))])),kp.Nd(M([sp(lp("\x26")),kt,pp(Fj)])),kp.Nd(M([ip.Nd(M([pp(T),pp(qk)])),kt,sp(pp(bl)),kt,pp(Bl),sp(ip.Nd(M([pp(Rk),kp.Nd(M([pp(Rk),ip.Nd(M([lp(";"),lp(".")])),pp(Rk)]))])))])),kp.Nd(M([rp(pp(Zk)),op(Qh("[^, \\r\\t\\n\x3c\x3e(){}\\[\\]+*?:\x3d|'\"#\x26!;./]+"))])),kp.Nd(M([sp(lp("\x3c")),kt,pp(T),kt,sp(lp("\x3e"))])),kp.Nd(M([op(it),gp(kp.Nd(M([pp(em),op(it)])))])),ip.Nd(M([kp.Nd(M([sp(lp("{")),kt,pp(Bl),kt,sp(lp("}"))])),kp.Nd(M([pp(Fj),kt,sp(lp("*"))]))])),ip.Nd(M([op(et),op(gt)])),Yo(kp.Nd(M([kt,fp(pp(Fk))]))),kp.Nd(M([sp(lp("\x3c")),kt,pp(Bl),kt,sp(lp("\x3e"))])),kp.Nd(M([sp(lp("(")),kt,pp(Bl),kt,sp(lp(")"))])),Yo(ip.Nd(M([pp(Bm),pp(eo)]))),ip.Nd(M([op(ft),op(ht)])),Yo(ip.Nd(M([pp(T),pp(Bj),pp(sk),pp(In),pp($m),pp(lm),pp(Um),pp(ko),pp(Zk)]))),kp.Nd(M([lp("(*"),pp(Nn),lp("*)")])),kp.Nd(M([pp(Fj),kt,sp(lp("+"))])),ip.Nd(M([lp("Epsilon"),lp("epsilon"),lp("EPSILON"),lp("eps"),lp("ε")])),kp.Nd(M([op(jt),gp(kp.Nd(M([pp(em),op(jt)])))])),Yo(ip.Nd(M([pp(Gk),pp(Bl)]))),ip.Nd(M([kp.Nd(M([sp(lp("[")),kt,pp(Bl),kt,sp(lp("]"))])),kp.Nd(M([pp(Fj),kt,sp(lp("?"))]))]))]));function mt(a){for(var b=H(a),c=td;;){var d=x(b);if(r(d))switch(d){case"\\":var e=pd(b);if(r(e)){G.rd(e,"'")?(b=pf(2,b),c=sd.rd(c,e)):(b=pf(2,b),c=sd.Nd(c,d,M([e])));continue;}else return Uo(M(["Encountered backslash character at end of string: ",a]));case'"':b=z(b);c=sd.Nd(c,"\\",M(['"']));continue;default:b=z(b),c=sd.rd(c,d);}else return Te(v,c);}}var Ts=Fb(new Gc(function(){return vs;},xk,bh([Pj,ej,Mm,Kn,jk,tn,lj,Ij,nj,Zl,ik],[!0,am,Un,"cljs/tools/reader.cljs",20,1,305,305,se(new Q(null,4,5,S,[zd(gn,new m(null,1,[W,gj],null)),Ol,nn,nk],null)),null,r(vs)?vs.Jd:null])));function ot(a){a=oe(a,1,J(a)-1);a=mt(a);a=[v.Ca(a),'"'].join("");a=yu(a);return Ts.v?Ts.v(a,null,null,null):Ts.call(null,a,null,null,null);}function pt(a){a=oe(a,2,J(a)-1);a=mt(a);return Qh(a);}var qt=function qt(a){for(;;){var c=x.Ca?x.Ca(a):x.call(null,a);c=c instanceof E?c.ca:null;switch(c){case"rule":c=z.Ca?z.Ca(a):z.call(null,a);var d=O(c,0,null);c=O(c,1,null);return G.rd(x.Ca?x.Ca(d):x.call(null,d),qk)?new Q(null,2,5,S,[xe.Ca(function(){var e=qd.Ca?qd.Ca(d):qd.call(null,d);return qd.Ca?qd.Ca(e):qd.call(null,e);}()),Yo(qt.Ca?qt.Ca(c):qt.call(null,c))],null):new Q(null,2,5,S,[xe.Ca(qd.Ca?qd.Ca(d):qd.call(null,d)),qt.Ca?qt.Ca(c):qt.call(null,c)],null);case"nt":return pp(xe.Ca(qd.Ca?qd.Ca(a):qd.call(null,a)));case"alt":return Te(ip,nf.rd(qt,z.Ca?z.Ca(a):z.call(null,a)));case"ord":return Te(jp,nf.rd(qt,z.Ca?z.Ca(a):z.call(null,a)));case"paren":a=qd.Ca?qd.Ca(a):qd.call(null,a);continue;case"hide":return sp(function(){var e=qd.Ca?qd.Ca(a):qd.call(null,a);return qt.Ca?qt.Ca(e):qt.call(null,e);}());case"cat":return Te(kp,nf.rd(qt,z.Ca?z.Ca(a):z.call(null,a)));case"string":return dt(ot(qd.Ca?qd.Ca(a):qd.call(null,a)),!1);case"regexp":return op(pt(qd.Ca?qd.Ca(a):qd.call(null,a)));case"opt":return ep(function(){var e=qd.Ca?qd.Ca(a):qd.call(null,a);return qt.Ca?qt.Ca(e):qt.call(null,e);}());case"star":return gp(function(){var e=qd.Ca?qd.Ca(a):qd.call(null,a);return qt.Ca?qt.Ca(e):qt.call(null,e);}());case"plus":return fp(function(){var e=qd.Ca?qd.Ca(a):qd.call(null,a);return qt.Ca?qt.Ca(e):qt.call(null,e);}());case"look":return qp(function(){var e=qd.Ca?qd.Ca(a):qd.call(null,a);return qt.Ca?qt.Ca(e):qt.call(null,e);}());case"neg":return rp(function(){var e=qd.Ca?qd.Ca(a):qd.call(null,a);return qt.Ca?qt.Ca(e):qt.call(null,e);}());case"epsilon":return dp;default:throw Error(["No matching clause: ",v.Ca(c)].join(""));}}},rt=function rt(a){for(;;){var c=W.Ca(a);c=c instanceof E?c.ca:null;switch(c){case"nt":return new Q(null,1,5,S,[X.Ca(a)],null);case"string":case"string-ci":case"char":case"regexp":case"epsilon":return td;case"opt":case"plus":case"star":case"look":case"neg":case"rep":a=Ul.Ca(a);continue;case"alt":case"cat":return vf(rt,M([Gj.Ca(a)]));case"ord":return vf(rt,M([new Q(null,2,5,S,[dk.Ca(a),ak.Ca(a)],null)]));default:throw Error(["No matching clause: ",v.Ca(c)].join(""));}}};function st(a){for(var b=Gh(tg(a)),c=H(Hh(vf(rt,M([ug(a)])))),d=null,e=0,f=0;;){if(f<e){var g=d.H(null,f);r(b.Ca?b.Ca(g):b.call(null,g))||Uo(M([ne(v.Ca(g),1)," occurs on the right-hand side of your grammar, but not on the left"]));f+=1;}else if(c=H(c))d=c,Kd(d)?(c=hc(d),f=ic(d),d=c,e=J(c),c=f):(c=x(d),r(b.Ca?b.Ca(c):b.call(null,c))||Uo(M([ne(v.Ca(c),1)," occurs on the right-hand side of your grammar, but not on the left"])),c=z(d),d=null,e=0),f=0;else break;}return a;}function tt(a,b){var c=Nq(lt,Gk,a,!1);if(c instanceof fq)return Uo(M(["Error parsing grammar specification:\n",function(){var e=new za(),f=Ha,g=Ga;Ha=!0;Ga=function Ga(k){return e.append(k);};try{hi(M([c]));}finally{Ga=g,Ha=f;}return v.Ca(e);}()]));a=nf.rd(qt,c);var d=x(x(a));return new m(null,3,[uk,st(cp(b,zf.rd($e,a))),Kj,d,Pm,b],null);}function ut(a,b,c){return null==c?Vo(M(["When you build a parser from a map of parser combinators, you must provide a start production using the :start keyword argument."])):new m(null,3,[uk,st(cp(b,a)),Kj,c,Pm,b],null);}function vt(a,b){return(null!=a?a.j&262144||Fa===a.Ec||(a.j?0:Ra(Ib,a)):Ra(Ib,a))?zd(a,Li(M([b,Ad(a)]))):a;}var wt=function wt(a,b){var d=W.Ca(b);d=a.Ca?a.Ca(d):a.call(null,d);return r(d)?vt(Te(d,nf.rd(ff(wt,a),hj.Ca(b))),Ad(b)):r(W.Ca(b))?vd.Md(b,hj,nf.rd(ff(wt,a),hj.Ca(b))):b;},xt=function xt(a,b){if(Gd(b)&&H(b)){var d=x(b);d=a.Ca?a.Ca(d):a.call(null,d);return r(d)?vt(Te(d,nf.rd(ff(xt,a),z(b))),Ad(b)):zd(zf.rd(new Q(null,1,5,S,[x(b)],null),nf.rd(ff(xt,a),z(b))),Ad(b));}return b;},yt=function yt(a,b){if("string"===typeof b)a=b;else{var d=(d=Hd(b))?W.Ca(b):d;a=r(d)?wt(a,b):Jd(b)&&x(b)instanceof E?xt(a,b):Gd(b)?zd(nf.rd(ff(yt,a),b),Ad(b)):b instanceof fq?b:Vo(M(["Invalid parse-tree, not recognized as either enlive or hiccup format."]));}return a;};var zt=bh([Gm,Jm,Ln,Dj,Om,oj,gl,co,Xm,an,Nl,zn,io,rj,Rl,Kl],[lp("\r\n"),lp("\t"),ip.Nd(M([ip.Nd(M([lp(" "),lp("\t")])),gp(kp.Nd(M([lp("\r\n"),ip.Nd(M([lp(" "),lp("\t")]))])))])),lp("\n"),op("[\\u0021-\\u007E]"),op("[0-9]"),lp(" "),op("[0-9a-fA-F]"),op("[\\u0000-\\u001F|\\u007F]"),lp('"'),ip.Nd(M([lp(" "),lp("\t")])),lp("\r"),op("[\\u0000-\\u00FF]"),op("[a-zA-Z]"),op("[\\u0001-\\u007F]"),op("[01]")]),At=bh([xm,El,Vm,Tn,jm,um,Qk,wl,Fk,Nj,oj,Cj,Yl,Zj,ko,uj,co,xl,Gn,rk,ln,On,Kk,gk,sk,sm,im,Vl,Rk,pj,Xl,Fn,mn],[new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"!"],null),new N(null,new m(null,2,[W,T,X,Rk],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,jm],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,xm],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"("],null),new N(null,new m(null,2,[W,T,X,Rk],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,gk],null),new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Rk],null),new N(null,new m(null,2,[W,Bj,Bj,")"],null),null,1,null),2,null),ko,!0],null),null,1,null),2,null),3,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"\x3c"],null),new N(null,new m(null,2,[W,T,X,Rk],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,im],null),new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Rk],null),new N(null,new m(null,2,[W,Bj,Bj,"\x3e"],null),null,1,null),2,null),ko,!0],null),null,1,null),2,null),3,null),kl,new m(null,1,[go,Dk],null)],null),Li(M([op("\\s+(?:;.*?\\u000D?\\u000A\\s*)*"),new m(null,1,[kl,new m(null,2,[go,Km,un,Tn],null)],null)])),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Nj],null),new N(null,new m(null,2,[W,T,X,El],null),new N(null,new m(null,2,[W,T,X,ko],null),new N(null,new m(null,2,[W,T,X,xl],null),new N(null,new m(null,2,[W,T,X,Yl],null),new N(null,new m(null,2,[W,T,X,Zj],null),new N(null,new m(null,2,[W,T,X,Qk],null),new N(null,new m(null,2,[W,T,X,xm],null),new N(null,new m(null,2,[W,T,X,sk],null),null,1,null),2,null),3,null),4,null),5,null),6,null),7,null),8,null),9,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Vm],null),new N(null,new m(null,3,[W,T,X,uj,ko,!0],null),new N(null,new m(null,2,[W,T,X,gk],null),new N(null,new m(null,3,[W,T,X,Rk,ko,!0],null),null,1,null),2,null),3,null),4,null),kl,new m(null,2,[go,Km,un,um],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"\x26"],null),new N(null,new m(null,2,[W,T,X,Rk],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,jm],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,Qk],null)],null),new m(null,3,[W,lm,Ul,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,Bj,Bj,"0"],null),new N(null,new m(null,2,[W,Bj,Bj,"1"],null),null,1,null),2,null)],null),kl,new m(null,2,[go,Km,un,wl],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,im],null),new N(null,new m(null,3,[W,T,X,uj,ko,!0],null),new N(null,new m(null,2,[W,T,X,gk],null),new N(null,new m(null,3,[W,T,X,Rk,ko,!0],null),null,1,null),2,null),3,null),4,null),kl,new m(null,2,[go,Km,un,Fk],null)],null),new m(null,3,[W,T,X,rk,kl,new m(null,2,[go,Km,un,Nj],null)],null),Li(M([op("[0-9]"),new m(null,1,[kl,new m(null,1,[go,Dk],null)],null)])),new m(null,3,[W,lm,Ul,new m(null,2,[W,T,X,oj],null),kl,new m(null,2,[go,Km,un,Cj],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,'"',ko,!0],null),new N(null,new m(null,2,[W,$m,Ul,Li(M([op("[\\u0020-\\u0021\\u0023-\\u007E]"),$e]))],null),new N(null,new m(null,3,[W,Bj,Bj,'"',ko,!0],null),null,1,null),2,null),3,null)],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,"'",ko,!0],null),new N(null,new m(null,2,[W,$m,Ul,Li(M([op("[\\u0020-\\u0026(-~]"),$e]))],null),new N(null,new m(null,3,[W,Bj,Bj,"'",ko,!0],null),null,1,null),2,null),3,null)],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,Yl],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,"%",ko,!0],null),new N(null,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,ln],null),new N(null,new m(null,2,[W,T,X,On],null),new N(null,new m(null,2,[W,T,X,Xl],null),null,1,null),2,null),3,null)],null),null,1,null),2,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"\x3c"],null),new N(null,new m(null,2,[W,T,X,Rk],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,gk],null),new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Rk],null),new N(null,new m(null,2,[W,Bj,Bj,"\x3e"],null),null,1,null),2,null),ko,!0],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,ko],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,T,X,Rk,ko,!0],null),new N(null,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,Bj,Bj,"\x3d"],null),new N(null,new m(null,2,[W,Bj,Bj,"\x3d/"],null),null,1,null),2,null)],null),new N(null,new m(null,3,[W,T,X,Rk,ko,!0],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,uj],null)],null),Li(M([op("[0-9a-fA-F]"),new m(null,1,[kl,new m(null,1,[go,Dk],null)],null)])),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"["],null),new N(null,new m(null,2,[W,T,X,Rk],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,gk],null),new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Rk],null),new N(null,new m(null,2,[W,Bj,Bj,"]"],null),null,1,null),2,null),ko,!0],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,xl],null)],null),new m(null,3,[W,lm,Ul,new m(null,2,[W,T,X,co],null),kl,new m(null,2,[go,Km,un,Gn],null)],null),Li(M([op("[a-zA-Z][-a-zA-Z0-9]*"),new m(null,1,[kl,new m(null,1,[go,Dk],null)],null)])),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,"b",ko,!0],null),new N(null,new m(null,2,[W,T,X,wl],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,lm,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,".",ko,!0],null),new N(null,new m(null,2,[W,T,X,wl],null),null,1,null),2,null)],null)],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"-"],null),new N(null,new m(null,2,[W,T,X,wl],null),null,1,null),2,null)],null),null,1,null),2,null)],null)],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,ln],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,"d",ko,!0],null),new N(null,new m(null,2,[W,T,X,Fn],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,lm,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,".",ko,!0],null),new N(null,new m(null,2,[W,T,X,Fn],null),null,1,null),2,null)],null)],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"-"],null),new N(null,new m(null,2,[W,T,X,Fn],null),null,1,null),2,null)],null),null,1,null),2,null)],null)],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,On],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,sm],null),new N(null,new m(null,2,[W,$m,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,T,X,Tn,ko,!0],null),new N(null,new m(null,2,[W,T,X,sm],null),null,1,null),2,null)],null)],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,Kk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Kk],null),new N(null,new m(null,2,[W,$m,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Rk],null),new N(null,new m(null,2,[W,Bj,Bj,"/"],null),new N(null,new m(null,2,[W,T,X,Rk],null),null,1,null),2,null),3,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,Kk],null),null,1,null),2,null)],null)],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,gk],null)],null),new m(null,3,[W,Bm,Gj,new N(null,Li(M([op("#'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'"),$e])),new N(null,Li(M([op('#\\"[^\\"\\\\]*(?:\\\\.[^\\"\\\\]*)*\\"'),$e])),null,1,null),2,null),kl,new m(null,2,[go,Km,un,sk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,T,X,pj],null)],null),new N(null,new m(null,3,[W,T,X,Rk,ko,!0],null),new N(null,new m(null,2,[W,T,X,jm],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,sm],null)],null),new m(null,3,[W,T,X,rk,kl,new m(null,2,[go,Km,un,im],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,T,X,Rk,ko,!0],null),new N(null,new m(null,2,[W,lm,Ul,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Fk],null),new N(null,new m(null,2,[W,T,X,um],null),null,1,null),2,null)],null)],null),null,1,null),2,null),kl,new m(null,1,[go,Dk],null)],null),Li(M([op("\\s*(?:;.*?(?:\\u000D?\\u000A\\s*|$))*"),new m(null,1,[kl,new m(null,2,[go,Km,un,Rk],null)],null)])),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Cj],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,T,X,Cj],null)],null),new N(null,new m(null,2,[W,Bj,Bj,"*"],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,T,X,Cj],null)],null),null,1,null),2,null),3,null)],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,pj],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,"x",ko,!0],null),new N(null,new m(null,2,[W,T,X,Gn],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,lm,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,".",ko,!0],null),new N(null,new m(null,2,[W,T,X,Gn],null),null,1,null),2,null)],null)],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,Bj,Bj,"-"],null),new N(null,new m(null,2,[W,T,X,Gn],null),null,1,null),2,null)],null),null,1,null),2,null)],null)],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,Xl],null)],null),new m(null,3,[W,lm,Ul,new m(null,2,[W,T,X,oj],null),kl,new m(null,2,[go,Km,un,Fn],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Vl],null),new N(null,new m(null,2,[W,T,X,gk],null),null,1,null),2,null),kl,new m(null,1,[go,Dk],null)],null)]),Bt=function Bt(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Bt.Nd(0<c.length?new Za((0,_slice["default"])(c).call(c,0),0,null):null);};Bt.Nd=function(a){if(G.rd("-",pd(a))){var b=O(a,0,null);O(a,1,null);var c=O(a,2,null);return np(b,c);}return Te(kp,function(){return function f(e){return new ze(null,function(){for(;;){var g=H(e);if(g){if(Kd(g)){var k=hc(g),l=J(k),n=De(l);a:for(var q=0;;){if(q<l){var t=kb(k,q);n.add(np(t,t));q+=1;}else{k=!0;break a;}}return k?Fe(n.da(),f(ic(g))):Fe(n.da(),null);}n=x(g);return ld(np(n,n),f(Jc(g)));}return null;}},null,null);}(a);}());};Bt.D=0;Bt.C=function(a){return this.Nd(H(a));};function Ct(a,b){return zf.rd($e,function(){return function e(d){return new ze(null,function(){for(var f=d;;){if(f=H(f)){if(Kd(f)){var g=hc(f),k=J(g),l=De(k);a:for(var n=0;;){if(n<k){var q=kb(g,n);Qd(a,q)&&(q=new Q(null,2,5,S,[q,a.Ca?a.Ca(q):a.call(null,q)],null),l.add(q));n+=1;}else{g=!0;break a;}}return g?Fe(l.da(),e(ic(f))):Fe(l.da(),null);}l=x(f);if(Qd(a,l))return ld(new Q(null,2,5,S,[l,a.Ca?a.Ca(l):a.call(null,l)],null),e(Jc(f)));f=Jc(f);}else return null;}},null,null);}(b);}());}function Dt(a){return Li(M([Ct(zt,Hh(vf(rt,M([ug(a)])))),a]));}function Et(a,b){var c=G.rd(kl.Ca(a),Zo),d=G.rd(kl.Ca(b),Zo);return c&&d?Yo(ip.Nd(M([xd.rd(a,kl),xd.rd(b,kl)]))):c?Yo(ip.Nd(M([xd.rd(a,kl),b]))):d?Yo(ip.Nd(M([a,xd.rd(b,kl)]))):ip.Nd(M([a,b]));}var Ft=_parseInt2["default"],Gt=bh([xm,um,Qk,wl,Fk,Nj,Cj,Yl,ko,xl,Gn,ln,On,Kk,gk,sk,sm,im,pj,Xl,Fn],[rp,function(a,b){return wd([a,Yo(b)]);},qp,function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){c=Te(v,c);return Ft.rd?Ft.rd(c,2):Ft.call(null,c,2);}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}(),uh,function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){return r(!1)?pp(xe.Ca(Te(v,c).toUpperCase())):pp(xe.Ca(Te(v,c)));}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}(),function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){c=Te(v,c);return Ft.Ca?Ft.Ca(c):Ft.call(null,c);}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}(),function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){return dt(Te(v,c),!0);}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}(),sp,ep,function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){c=Te(v,c);return Ft.rd?Ft.rd(c,16):Ft.call(null,c,16);}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}(),Bt,Bt,kp,ip,ef.rd(op,pt),function(){function a(c,d){return Dd(c)?gp(d):G.rd(J(c),2)?hp(zj.Ca(c),km.Ca(c),d):G.rd(zj.Ca(c),1)?fp(d):G.rd(km.Ca(c),1)?ep(d):hp(function(){var e=zj.Ca(c);return r(e)?e:0;}(),function(){var e=km.Ca(c);return r(e)?e:Infinity;}(),d);}var b=null;b=function b(c,d){switch(arguments.length){case 1:return c;case 2:return a.call(this,c,d);}throw Error("Invalid arity: "+arguments.length);};b.Ca=function(c){return c;};b.rd=a;return b;}(),function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){return r(!1)?xe.Ca(Te(v,c).toUpperCase()):xe.Ca(Te(v,c));}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}(),function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){var d=J(c);switch(d){case 1:return G.rd(x(c),"*")?$e:new m(null,2,[zj,x(c),km,x(c)],null);case 2:return G.rd(x(c),"*")?new m(null,1,[km,pd(c)],null):new m(null,1,[zj,x(c)],null);case 3:return new m(null,2,[zj,x(c),km,fd(c,2)],null);default:throw Error(["No matching clause: ",v.Ca(d)].join(""));}}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}(),Bt,function(){function a(c){var d=null;if(0<arguments.length){d=0;for(var e=Array(arguments.length-0);d<e.length;){e[d]=arguments[d+0],++d;}d=new Za(e,0,null);}return b.call(this,d);}function b(c){c=Te(v,c);return Ft.Ca?Ft.Ca(c):Ft.call(null,c);}a.D=0;a.C=function(c){c=H(c);return b(c);};a.Nd=b;return a;}()]);function Ht(a,b){var c=Nq(At,Vl,a,!1);if(c instanceof fq)return Uo(M(["Error parsing grammar specification:\n",function(){var e=new za(),f=Ha,g=Ga;Ha=!0;Ga=function Ga(k){return e.append(k);};try{hi(M([c]));}finally{Ga=g,Ha=f;}return v.Ca(e);}()]));var d=yt(Gt,c);a=Dt($a(Ah,Et,d));d=x(x(x(d)));return new m(null,3,[uk,st(cp(b,a)),Kj,d,Pm,b],null);}function It(a){var b=Ad(a);a=mm.Ca(b);b=ol.Ca(b);return r(r(a)?b:a)?new Q(null,2,5,S,[a,b],null):null;}function Jt(a){return Jd(a)&&G.rd(J(a),1)||Hd(a)&&Qd(a,W)&&Dd(Ec.rd(a,hj))||Dd(a);}var Kt=new fq(null,null,null,null,null),Lt=function Lt(a){switch(arguments.length){case 1:return Lt.Ca(arguments[0]);case 2:return Lt.rd(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};Lt.Ca=function(a){var b=It(a);O(b,0,null);b=O(b,1,null);return r(b)?ie(b):J(a);};Lt.rd=function(a,b){var c=It(a);O(c,0,null);c=O(c,1,null);return r(c)?ie(c):b+J(a);};Lt.D=2;function Mt(a,b,c,d,e){a=iq(a,c,d,-1,null);uq(a,new Q(null,2,5,S,[e,b],null),Kq(a));return Bq(a,null);}function Nt(a,b,c,d,e,f){var g=J(c);for(f=H(f);;){if(f){var k=x(f),l=It(k);O(l,0,null);l=O(l,1,null);l=r(l)?l:e+J(k);if(G.rd(l,g))return new Q(null,3,5,S,[k,l,null],null);var n=H(Mt(a,b,c,d,l));if(n)return new Q(null,3,5,S,[k,l,n],null);f=z(f);}else return null;}}function Ot(a,b,c,d,e){var f=J(c),g=Mt(a,b,c,d,e);e=ie(e);var k=Nt(a,b,c,d,e,g);O(k,0,null);O(k,1,null);O(k,2,null);g=e;for(e=xo;;){var l=k,n=O(l,0,null);k=O(l,1,null);var q=O(l,2,null);if(null==l||G.rd(g,k))return Kt;if(null==q)return sq(ro(e,n),new m(null,3,[jl,Rj,mm,0,ol,f],null));g=ie(k);e=ro(e,n);k=Nt(a,b,c,d,k,q);}}function Pt(a,b,c,d,e){if(G.rd(c,Km))a:{c=J(e);var f=Mt(a,b,e,e,0),g=ie(0),k=zo(new Q(null,1,5,S,[d],null));f=Nt(a,b,e,e,g,f);O(f,0,null);O(f,1,null);O(f,2,null);d=g;g=k;for(k=f;;){var l=k,n=O(l,0,null);k=O(l,1,null);f=O(l,2,null);if(null==l||G.rd(d,k)){a=Kt;break a;}if(null==f){a=sq(Do(ro(g,n)),new m(null,3,[jl,Rj,mm,0,ol,c],null));break a;}d=ie(k);g=ro(g,n);k=Nt(a,b,e,e,k,f);}}else if(G.rd(c,cl))a:for(c=J(e),k=Mt(a,b,e,e,0),g=ie(0),f=Nt(a,b,e,e,g,k),O(f,0,null),O(f,1,null),O(f,2,null),k=xo;;){var q=f;l=O(q,0,null);f=O(q,1,null);n=O(q,2,null);if(null==q||G.rd(g,f)){a=Kt;break a;}if(null==n){a=sq(new m(null,2,[W,d,hj,H(ro(k,l))],null),new m(null,3,[jl,Rj,mm,0,ol,c],null));break a;}g=ie(f);k=ro(k,l);f=Nt(a,b,e,e,f,n);}else a=null;return a;}function Qt(a,b,c,d,e,f){var g=J(f),k=Mt(a,b,f,f,0),l=Dd(k);b=l?l:ko.Ca(b);if(r(b))return Kt;k=$a(Jh,Lt,k);b=Lt.Ca(k);a=Ot(a,Ul.Ca(c),f,f,b);g=new m(null,3,[jl,Rj,mm,0,ol,g],null);if(a instanceof fq||G.rd(W.Ca(c),$m)&&Jt(a))return Kt;switch(d instanceof E?d.ca:null){case"enlive":return sq(new m(null,2,[W,e,hj,ro(xo.Db(null,k),a)],null),g);case"hiccup":return sq(Do(ro(zo(new Q(null,1,5,S,[e],null)).Db(null,k),a)),g);default:return sq(ro(xo.Db(null,k),a),g);}}function Rt(a,b,c,d,e){var f=Gj.Ca(d),g=ce(f),k;if(k=G.rd(W.Ca(d),mk)){k=W.Ca(g);var l=new Ch(null,new m(null,2,[$m,null,lm,null],null),null);k=l.Ca?l.Ca(k):l.call(null,k);k=r(k)?Qa(ko.Ca(g))&&Qa(ko.Ca(Ul.Ca(g))):k;}if(Qa(k))return Kt;a:for(k=td;;){if(z(f))k=sd.rd(k,x(f)),f=z(f);else{f=H(k);break a;}}f=Te(kp,f);return G.rd(kl.Ca(d),Zo)?Qt(a,f,g,null,c,b):Qt(a,f,g,e,c,b);}function St(a,b,c){var d=uk.Ca(a);a=Pm.Ca(a);var e=Ec.rd(d,c);return G.rd(ko.Ca(e),!0)?Kt:G.rd(kl.Ca(e),Zo)?G.rd(W.Ca(e),$m)?(c=Ul.Ca(e),Ot(d,c,b,b,0)):G.rd(W.Ca(e),lm)?(c=Ul.Ca(e),b=Ot(d,c,b,b,0),Jt(b)?Kt:b):Rt(d,b,c,e,a):G.rd(W.Ca(e),$m)?Pt(d,Ul.Ca(e),a,c,b):G.rd(W.Ca(e),lm)?(b=Pt(d,Ul.Ca(e),a,c,b),Jt(b)?Kt:b):Rt(d,b,c,e,a);}function Tt(a,b){if(G.rd(null,b))return a;if(G.rd(hj,b))return vd.Md(a,uk,up(uk.Ca(a)));if(G.rd(pk,b))return vd.Md(a,uk,vp(Pm.Ca(a),uk.Ca(a)));if(G.rd(Em,b))return vd.Md(a,uk,wp(Pm.Ca(a),uk.Ca(a)));throw Error(["No matching clause: ",v.Ca(b)].join(""));}var Ut=function Ut(a){for(var c=[],d=arguments.length,e=0;;){if(e<d)c.push(arguments[e]),e+=1;else break;}return Ut.Nd(arguments[0],arguments[1],2<c.length?new Za((0,_slice["default"])(c).call(c,2),0,null):null);};Ut.Nd=function(a,b,c){var d=D(c);c=Ec.Md(d,Uj,Kj.Ca(a));var e=Ec.Md(d,dn,!1),f=Ec.Md(d,jl,!1),g=Ec.rd(d,vk);Ec.Md(d,Uk,!1);a=Tt(a,g);return r(yn.Ca(d))?(f=uk.Ca(a),a=Pm.Ca(a),d=ap.Ca?ap.Ca(a):ap.call(null,a),a=Nq(f,c,b,e),a instanceof fq?(g=vm.Ca(a),f=iq(f,b,b,g,d),Mq(f,pp(c),e),e=Bq(f,null),r(e)?b=x(e):(e=zq(d,gm,b,0,J(b)),b=zq(d,c,e,0,J(b))),b=zd(b,Li(M([a,Ad(b)])))):b=a,b):r(r(f)?Qa(e):f)?(d=St(a,b,c),r(Vt.Ca?Vt.Ca(d):Vt.call(null,d))?Nq(uk.Ca(a),c,b,e):d):Nq(uk.Ca(a),c,b,e);};Ut.D=2;Ut.C=function(a){var b=x(a),c=z(a);a=x(c);c=z(c);return this.Nd(b,a,c);};function Wt(a,b,c,d,e,f){this.Y=a;this.jb=b;this.nb=c;this.J=d;this.B=e;this.u=f;this.j=2230716171;this.G=139264;}h=Wt.prototype;h.P=function(a,b){return this.F(null,b,null);};h.F=function(a,b,c){switch(b instanceof E?b.ca:null){case"grammar":return this.Y;case"start-production":return this.jb;case"output-format":return this.nb;default:return Ec.Md(this.B,b,c);}};h.Za=function(a,b,c){return Ud(function(d,e){var f=O(e,0,null);e=O(e,1,null);return b.Md?b.Md(d,f,e):b.call(null,d,f,e);},c,this);};h.K=function(a,b,c){return Rh(b,function(d){return Rh(b,Zh,""," ","",c,d);},"#instaparse.core.Parser{",", ","}",c,Ke.rd(new Q(null,3,5,S,[new Q(null,2,5,S,[uk,this.Y],null),new Q(null,2,5,S,[Kj,this.jb],null),new Q(null,2,5,S,[Pm,this.nb],null)],null),this.B));};h.Ta=function(){return new ng(this,3,new Q(null,3,5,S,[uk,Kj,Pm],null),r(this.B)?qc(this.B):Ze());};h.S=function(){return this.J;};h.X=function(){return 3+J(this.B);};h.O=function(){var a=this.u;return null!=a?a:this.u=a=-360509877^Rc(this);};h.N=function(a,b){return null!=b&&this.constructor===b.constructor&&G.rd(this.Y,b.Y)&&G.rd(this.jb,b.jb)&&G.rd(this.nb,b.nb)&&G.rd(this.B,b.B);};h.rb=function(a,b){return Qd(new Ch(null,new m(null,3,[Kj,null,uk,null,Pm,null],null),null),b)?xd.rd(Jb(zf.rd($e,this),this.J),b):new Wt(this.Y,this.jb,this.nb,this.J,Ye(xd.rd(this.B,b)),null);};h.Qd=function(a,b){switch(b instanceof E?b.ca:null){case"grammar":case"start-production":case"output-format":return!0;default:return Qd(this.B,b);}};h.ya=function(a,b,c){return r(ve.rd?ve.rd(uk,b):ve.call(null,uk,b))?new Wt(c,this.jb,this.nb,this.J,this.B,null):r(ve.rd?ve.rd(Kj,b):ve.call(null,Kj,b))?new Wt(this.Y,c,this.nb,this.J,this.B,null):r(ve.rd?ve.rd(Pm,b):ve.call(null,Pm,b))?new Wt(this.Y,this.jb,c,this.J,this.B,null):new Wt(this.Y,this.jb,this.nb,this.J,vd.Md(this.B,b,c),null);};h.R=function(){return H(Ke.rd(new Q(null,3,5,S,[new Sf(uk,this.Y),new Sf(Kj,this.jb),new Sf(Pm,this.nb)],null),this.B));};h.T=function(a,b){return new Wt(this.Y,this.jb,this.nb,b,this.B,this.u);};h.V=function(a,b){return Jd(b)?this.ya(null,kb(b,0),kb(b,1)):Ud(ib,this,b);};h.call=function(a){switch(arguments.length-1){case 1:return this.Ca(arguments[1]);case 3:return this.Md(arguments[1],arguments[2],arguments[3]);case 5:return this.I(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return this.ua(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 9:return this.va(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 11:return this.ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 13:return this.ma(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13]);case 15:return this.oa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 17:return this.qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 19:return this.sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 21:return this.Od(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length-1)].join(""));}};h.apply=function(a,b){var _context33;return this.call.apply(this,(0,_concat["default"])(_context33=[this]).call(_context33,bb(b)));};h.Ca=function(a){return Ut(this,a);};h.Md=function(a,b,c){return Ut.Nd(this,a,M([b,c]));};h.I=function(a,b,c,d,e){return Ut.Nd(this,a,M([b,c,d,e]));};h.ua=function(a,b,c,d,e,f,g){return Ut.Nd(this,a,M([b,c,d,e,f,g]));};h.va=function(a,b,c,d,e,f,g,k,l){return Ut.Nd(this,a,M([b,c,d,e,f,g,k,l]));};h.ka=function(a,b,c,d,e,f,g,k,l,n,q){return Ut.Nd(this,a,M([b,c,d,e,f,g,k,l,n,q]));};h.ma=function(a,b,c,d,e,f,g,k,l,n,q,t,u){return Ut.Nd(this,a,M([b,c,d,e,f,g,k,l,n,q,t,u]));};h.oa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K){return Ut.Nd(this,a,M([b,c,d,e,f,g,k,l,n,q,t,u,A,K]));};h.qa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z){return Ut.Nd(this,a,M([b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z]));};h.sa=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z){return Ut.Nd(this,a,M([b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z]));};h.Od=function(a,b,c,d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea){return We(Ut,this,a,b,c,M([d,e,f,g,k,l,n,q,t,u,A,K,U,Z,ja,da,xa,Ea]));};function Xt(a){var b=xd.Nd(a,uk,M([Kj,Pm]));b=Id(a)?zf.rd($e,b):b;return new Wt(uk.Ca(a),Kj.Ca(a),Pm.Ca(a),null,Ye(b),null);}h.W=Fa;h.K=function(a,b){return Yb(b,Qo(this));};function Yt(a){for(var b=[],c=arguments.length,d=0;;){if(d<c)b.push(arguments[d]),d+=1;else break;}return Zt(arguments[0],1<b.length?new Za((0,_slice["default"])(b).call(b,1),0,null):null);}function Zt(a,b){var c=D(b),d=Ec.Md(c,Xn,yl),e=Ec.Md(c,Pm,Km),f=Ec.Md(c,Uj,null);b="string"===typeof a?function(){a:{var l=ct;ct=Fm.rd(c,Oi);try{var n=d instanceof E?d.ca:null;switch(n){case"abnf":var q=Ht(a,e);break a;case"ebnf":q=tt(a,e);break a;default:throw Error(["No matching clause: ",v.Ca(n)].join(""));}}finally{ct=l;}q=void 0;}return r(f)?Xt(vd.Md(q,Kj,f)):Xt(q);}():Hd(a)?function(){var l=ut(a,e,f);return Xt(l);}():Jd(a)?function(){var l=r(f)?f:a.Ca?a.Ca(0):a.call(null,0);l=ut(Te(uh,a),e,l);return Xt(l);}():Vo(M(["Expected string, map, or vector as grammar specification, got ",di(M([a]),Ja())]));var g=Ec.rd(c,Ck);g=g instanceof E?Ec.rd($t,g):g;if(r(g)){var k=D(g);g=Ec.rd(k,uk);k=Ec.rd(k,Kj);return vd.Md(b,uk,yp(b.Y,b.jb,g,k));}return b;}function Vt(a){return a instanceof gq||Ad(a)instanceof gq;}var $t=new m(null,2,[Ym,Yt("whitespace \x3d #'\\s+'"),vj,Yt("whitespace \x3d #'[,\\s]+'")],null);Af(v,"_-0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function Kw(a){var b=Af(v,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),c=J(b),d=0===(c&c-1),e=d?c-1:(2<<(Math.log(c)/Math.log(2)|0))-1,f=d?6:Math.ceil(6*e*1.1/c)|0;return function(){for(var g=a.Ca?a.Ca(f):a.call(null,f),k="";;){if(6===k.length)return k;var l=function(){var q=z(g);return q?q:a.Ca?a.Ca(6):a.call(null,6);}(),n=function(){var q=Ec.rd(b,x(g)&e);return r(q)?[k,v.Ca(q)].join(""):k;}();g=l;k=n;}};}function kv(a){var b="#"!==a;return b?(b="'"!==a)?(b=":"!==a)?lv.Ca?lv.Ca(a):lv.call(null,a):b:b:b;}function mv(a){return"@"===a||"`"===a||"~"===a;}function nv(a,b,c,d){if(Qa(c))return Cu(a,b);if(r(r(d)?mv(c):d))return Du(a,b,c);d=new za();for(ar(a,c);;){if(Sq(c)||kv(c)||null==c)return v.Ca(d);if(mv(c))return Du(a,b,c);d.append(Zq(a));c=xu(a);}}function ov(a,b,c){b=Zq(a);if(r(b)){var d=pv.Ca?pv.Ca(b):pv.call(null,b);if(r(d))return d.Md?d.Md(a,b,c):d.call(null,a,b,c);ar(a,b);return qv.Md?qv.Md(a,b,c):qv.call(null,a,b,c);}return Eu(a);}function rv(a,b){return kr(a,M(["Unmatched delimiter ",b,"."]));}function sv(a,b,c){b=1+b;J(a)!==b&&Au(a);for(var d=1,e=0;;){if(d===b)return String.fromCharCode(e);var f=Yq(fd(a,d),c);if(-1===f)return Ku(fd(a,d),a);e=f+e*c;d+=1;}}function tv(a,b,c,d,e){for(var f=1,g=Yq(b,c);;){if(-1===g)return xr(a,b);if(f!==d){var k=xu(a);var l=Sq(k);l||(l=lv.Ca?lv.Ca(k):lv.call(null,k),l=r(l)?l:null==k);if(r(l))return r(e)?Lu(a,f,d):String.fromCharCode(g);l=Yq(k,c);Zq(a);if(-1===l)return xr(a,k);g=l+g*c;f+=1;}else return String.fromCharCode(g);}}function uv(a){var b=Zq(a);if(null!=b){b=kv(b)||mv(b)||Sq(b)?v.Ca(b):nv(a,Lk,b,!1);var c=b.length;if(1===c)return fd(b,0);if("newline"===b)return"\n";if("space"===b)return" ";if("tab"===b)return"\t";if("backspace"===b)return"\b";if("formfeed"===b)return"\f";if("return"===b)return"\r";if(r(0==(0,_lastIndexOf["default"])(b).call(b,"u",0)))return b=sv(b,4,16),c=b.charCodeAt(),55295<c&&57344>c?Mu(a,c.toString(16)):b;if(r(0==(0,_lastIndexOf["default"])(b).call(b,"o",0))){--c;if(3<c)return Nu(a,b);b=sv(b,c,8);return 255<(b|0)?Br(a):b;}return kr(a,M(["Unsupported character: ",b,"."]));}return Cr(a);}function vv(a){return gr(a)?new Q(null,2,5,S,[br(a),(cr(a)|0)-1|0],null):null;}function wv(a,b,c,d){var e=vv(c),f=O(e,0,null);e=O(e,1,null);b=vu(b);for(var g=ac(td);;){var k=Or(c);r(k)||zu(c,a,f,e,J(g));if(G.rd(b,vu(k)))return cc(g);var l=lv.Ca?lv.Ca(k):lv.call(null,k);r(l)?(k=l.Md?l.Md(c,k,d):l.call(null,c,k,d),g=k!==c?Le.rd(g,k):g):(ar(c,k),k=xv?xv(c,!0,null,d):yv.call(null,c,!0,null,d),g=k!==c?Le.rd(g,k):g);}}function zv(a,b,c){a=wv(on,")",a,c);return Dd(a)?Kc:Te(se,a);}function Av(a,b,c){return wv(vl,"]",a,c);}function Bv(a,b,c){var d=vv(a);b=O(d,0,null);d=O(d,1,null);c=wv(hm,"}",a,c);var e=J(c),f=Lh(2,c),g=Gh(f);!cf(e)&&or(a,b,d,c);G.rd(J(g),J(f))||Mr(a,hm,f);return e<=2*wg?fj(He(c)):kj(He(c));}function Cv(a,b){for(var c=function(){var g=new za();g.append(b);return g;}(),d=Zq(a);;){if(r(function(){var g=Sq(d);if(g)return g;g=lv.Ca?lv.Ca(d):lv.call(null,d);return r(g)?g:null==d;}())){var e=v.Ca(c);ar(a,d);var f=Tr(e);return r(f)?f:kr(a,M(["Invalid number: ",e,"."]));}e=function(){var g=c;g.append(d);return g;}();f=Zq(a);c=e;d=f;}}function Dv(a){var b=Zq(a);switch(b){case"t":return"\t";case"r":return"\r";case"n":return"\n";case"\\":return"\\";case'"':return'"';case"b":return"\b";case"f":return"\f";case"u":return b=Zq(a),-1===(0,_parseInt2["default"])(b|0,16)?Bu(a,b):tv(a,b,16,4,!0);default:return Tq(b)?(b=tv(a,b,8,3,!1),255<(b|0)?Br(a):b):Ou(a,b);}}function Ev(a){for(var b=new za(),c=Zq(a);;){var d=c;if(G.rd(null,d))return vr(a,Bj,M(['"',b]));if(G.rd("\\",d)){d=function(){var f=b;f.append(Dv(a));return f;}();var e=Zq(a);b=d;c=e;}else{if(G.rd('"',d))return v.Ca(b);d=function(){var f=b;f.append(c);return f;}();e=Zq(a);b=d;c=e;}}}function Fv(a,b){b=nv(a,dl,b,!0);if(r(b))switch(b){case"nil":return null;case"true":return!0;case"false":return!1;case"/":return Ak;default:var c=Ur(b);c=r(c)?Fc.rd(c.Ca?c.Ca(0):c.call(null,0),c.Ca?c.Ca(1):c.call(null,1)):null;return r(c)?c:rr(a,dl,b);}else return null;}function Gv(a){var b=Zq(a);if(Sq(b))return Pu(a);b=nv(a,X,b,!0);var c=Ur(b);if(r(r(c)?-1===(0,_indexOf["default"])(b).call(b,"::"):c)){var d=c.Ca?c.Ca(0):c.call(null,0);c=c.Ca?c.Ca(1):c.call(null,1);return":"===fd(b,0)?rr(a,X,[":",v.Ca(b)].join("")):xe.rd(d,c);}return rr(a,X,[":",v.Ca(b)].join(""));}function Hv(a,b,c){b=wu(xv?xv(a,!0,null,c):yv.call(null,a,!0,null,c));Hd(b)||Qu(a,b);c=xv?xv(a,!0,null,c):yv.call(null,a,!0,null,c);return null!=c&&(c.j&131072||Fa===c.Cc)?zd(c,Li(M([Ad(c),b]))):Ru(a,c);}function Iv(a,b,c){b=wv(Yk,"}",a,c);c=Gh(b);G.rd(J(b),J(c))||Mr(a,Yk,b);return c;}function Jv(a){xv?xv(a,!0,null,!0):yv.call(null,a,!0,null,!0);return a;}function Kv(a,b,c){b=Zq(a);b=nv(a,Lj,b,!0);var d=null==b?null:Ur(b);d=null==d?null:Xq(d);return r(d)?"{"===Or(a)?(c=wv(Lj,"}",a,c),!cf(J(c))&&or(a,null,null,c),b=Wq(v.Ca(d),Lh(2,c)),c=Lh(2,Jc(c)),G.rd(J(Gh(b)),J(b))||Mr(a,Lj,b),Ih(b,c)):Su(a,b):Tu(a,b);}function Lv(a,b,c){b=xv?xv(a,!0,null,c):yv.call(null,a,!0,null,c);return G.rd($n,b)?Number.NaN:G.rd(Sm,b)?Number.NEGATIVE_INFINITY:G.rd(Zm,b)?Number.POSITIVE_INFINITY:kr(a,M([["Invalid token: ##",v.Ca(b)].join("")]));}function lv(a){switch(a){case'"':return Ev;case":":return Gv;case";":return Vr;case"^":return Hv;case"(":return zv;case")":return rv;case"[":return Av;case"]":return rv;case"{":return Bv;case"}":return rv;case"\\":return uv;case"#":return ov;default:return null;}}function pv(a){switch(a){case"^":return Hv;case"{":return Iv;case"\x3c":return Wr("Unreadable form");case"!":return Vr;case"_":return Jv;case":":return Kv;case"#":return Lv;default:return null;}}function qv(a,b,c){b=xv?xv(a,!0,null,c):yv.call(null,a,!0,null,c);var d=xv?xv(a,!0,null,c):yv.call(null,a,!0,null,c);b instanceof Dc||Uu(a,"Reader tag must be a symbol");var e=Ec.rd(Vi.Ca(c),b);e=r(e)?e:$e.Ca?$e.Ca(b):$e.call(null,b);if(r(e))return e.Ca?e.Ca(d):e.call(null,d);c=Oi.Ca(c);return r(c)?c.rd?c.rd(b,d):c.call(null,b,d):Vu(a,b);}function yv(a){switch(arguments.length){case 1:return Mv($e,arguments[0]);case 2:return Mv(arguments[0],arguments[1]);case 4:return xv(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}}function Mv(a,b){a=D(a);var c=Ec.rd(a,Hl),d=!Qd(a,Hl);return xv(b,d,c,a);}function xv(a,b,c,d){try{for(;;){var e=Zq(a);if(!Sq(e)){if(null==e)return r(b)?Nr(a,null):c;if(Tq(e)||("+"===e||"-"===e)&&Tq(a.tb(null)))return Cv(a,e);var f=lv(e);if(r(f)){var g=f.Md?f.Md(a,e,d):f.call(null,a,e,d);if(g!==a)return g;}else return Fv(a,e);}}}catch(k){if(k instanceof Error){b=k;if(b instanceof Ti){c=b instanceof Ti?b.data:null;if(G.rd(fn,Ll.Ca(c)))throw b;throw Wk(b.message,Li(M([new m(null,1,[Ll,fn],null),c,gr(a)?new m(null,3,[lj,br(a),tn,cr(a),Kn,dr(a)],null):null])),b);}throw Wk(b.message,Li(M([new m(null,1,[Ll,fn],null),gr(a)?new m(null,3,[lj,br(a),tn,cr(a),Kn,dr(a)],null):null])),b);}throw k;}}function Nv(a,b){return r(r(b)?Xe(b,""):b)?Mv(a,yu(b)):null;}var Fu=function(){var a=new Q(null,13,5,S,[null,31,28,31,30,31,30,31,31,30,31,30,31],null),b=new Q(null,13,5,S,[null,31,29,31,30,31,30,31,31,30,31,30,31],null);return function(c,d){return Ec.rd(r(d)?b:a,c);};}(),Gu=/(\d\d\d\d)(?:-(\d\d)(?:-(\d\d)(?:[T](\d\d)(?::(\d\d)(?::(\d\d)(?:[.](\d+))?)?)?)?)?)?(?:[Z]|([-+])(\d\d):(\d\d))?/;function Hu(a){a=(0,_parseInt2["default"])(a,10);return Qa(isNaN(a))?a:null;}function Iu(a,b,c,d){if(!(a<=b&&b<=c))throw Error([v.Ca(d)," Failed:  ",v.Ca(a),"\x3c\x3d",v.Ca(b),"\x3c\x3d",v.Ca(c)].join(""));return b;}function Ju(a){var b=Oh(Gu,a);O(b,0,null);var c=O(b,1,null),d=O(b,2,null),e=O(b,3,null),f=O(b,4,null),g=O(b,5,null),k=O(b,6,null),l=O(b,7,null),n=O(b,8,null),q=O(b,9,null),t=O(b,10,null);if(Qa(b))throw Error(["Unrecognized date/time syntax: ",v.Ca(a)].join(""));a=Hu(c);b=function(){var Z=Hu(d);return r(Z)?Z:1;}();c=function(){var Z=Hu(e);return r(Z)?Z:1;}();var u=function(){var Z=Hu(f);return r(Z)?Z:0;}(),A=function(){var Z=Hu(g);return r(Z)?Z:0;}(),K=function(){var Z=Hu(k);return r(Z)?Z:0;}(),U=function(){a:if(G.rd(3,J(l)))var Z=l;else if(3<J(l))Z=l.substring(0,3);else for(Z=new za(l);;){if(3>Z.getLength())Z=Z.append("0");else{Z=Z.toString();break a;}}Z=Hu(Z);return r(Z)?Z:0;}();n=(G.rd(n,"-")?-1:1)*(60*function(){var Z=Hu(q);return r(Z)?Z:0;}()+function(){var Z=Hu(t);return r(Z)?Z:0;}());return new Q(null,8,5,S,[a,Iu(1,b,12,"timestamp month field must be in range 1..12"),Iu(1,c,Fu(b,0===(a%4+4)%4&&(0!==(a%100+100)%100||0===(a%400+400)%400)),"timestamp day field must be in range 1..last day in month"),Iu(0,u,23,"timestamp hour field must be in range 0..23"),Iu(0,A,59,"timestamp minute field must be in range 0..59"),Iu(0,K,G.rd(A,59)?60:59,"timestamp second field must be in range 0..60"),Iu(0,U,999,"timestamp millisecond field must be in range 0..999"),n],null);}var Ov=kf(null),Pv=kf(Li(M([new m(null,4,[Cm,function(a){if("string"===typeof a){var b=Ju(a);if(r(b)){a=O(b,0,null);var c=O(b,1,null),d=O(b,2,null),e=O(b,3,null),f=O(b,4,null),g=O(b,5,null),k=O(b,6,null);b=O(b,7,null);b=new Date(Date.UTC(a,c-1,d,e,f,g,k)-6E4*b);}else throw Error(["Unrecognized date/time syntax: ",v.Ca(a)].join(""));return b;}throw Error("Instance literal expects a string for its timestamp.");},Yn,function(a){if("string"===typeof a)return new Si(a.toLowerCase());throw Error("UUID literal expects a string as its representation.");},fo,function(a){if(Jd(a))return zf.rd(jg,a);throw Error("Queue literal expects a vector for its elements.");},Il,function(a){if(Jd(a)){var b=[];a=H(a);for(var c=null,d=0,e=0;;){if(e<d){var f=c.H(null,e);b.push(f);e+=1;}else if(a=H(a))c=a,Kd(c)?(a=hc(c),e=ic(c),c=a,d=J(a),a=e):(a=x(c),b.push(a),a=z(c),c=null,d=0),e=0;else break;}return b;}if(Hd(a)){b={};a=H(a);c=null;for(e=d=0;;){if(e<d){var g=c.H(null,e);f=O(g,0,null);g=O(g,1,null);f=ye(f);b[f]=g;e+=1;}else if(a=H(a))Kd(a)?(d=hc(a),a=ic(a),c=d,d=J(d)):(d=x(a),c=O(d,0,null),d=O(d,1,null),c=ye(c),b[c]=d,a=z(a),c=null,d=0),e=0;else break;}return b;}throw Error("JS literal expects a vector or map containing only string or unqualified keyword keys");}],null),$e]))),Qv=function Qv(a){switch(arguments.length){case 1:return Qv.Ca(arguments[0]);case 2:return Qv.rd(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",v.Ca(arguments.length)].join(""));}};Qv.Ca=function(a){return Nv(new m(null,3,[Vi,Fb(Pv),Oi,Fb(Ov),Hl,null],null),a);};Qv.rd=function(a,b){return Nv(Mi(Li(M([new m(null,1,[Oi,Fb(Ov)],null),a])),function(c){return Li(M([Fb(Pv),c]));}),b);};Qv.D=2;function Rv(a){return Gd(a)||Fd(a)?H(a):null==a?td:ld(a,td);}function R(a){return wf(df(be),Rv(a));}function Ej(a,b){return ld(a,of(b-1,ti(null)));}function Sv(a){return Kw(function(b){return re(of(b,Ki(function(c){return c>>>6;},Ac(a))));})();}function Tv(a){throw Error(a);}var Wu=Xt(Zt(bh([ku,du,lu,pr,sn,Jl,nu,bu,pu,Ma,Jr,fu,zr,Tm,dm,eu,Fr,ur,Mm,tr,jn,Kr,Bj,Gr,au,xn,$l,$q,sr,Ro,Dr,Dm,Qm,Ar,on,rn,Fj,ul,Xk,em,nm,hn,Bn,Yk,yr,hr,qu,qr,hl,ws,Rn,Ir,oo,gu],[new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,Bj,Bj,"(",ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,nu],null),null,1,null),2,null)],null),new N(null,new m(null,2,[W,T,X,pu],null),new N(null,new m(null,2,[W,T,X,Jr],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,pr],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,Bj,Bj,")",ko,!0],null)],null),null,1,null),2,null)],null),null,1,null),2,null),3,null),4,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,Li(M([op("(even|odd|last|first)"),$e])),new N(null,new m(null,3,[W,Bj,Bj,"?",ko,!0],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,du],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Dr],null),new N(null,new m(null,2,[W,$m,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,T,X,au,ko,!0],null),new N(null,new m(null,2,[W,T,X,Dr],null),null,1,null),2,null)],null)],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,lu],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Tm],null),new N(null,new m(null,2,[W,T,X,Ir],null),new N(null,new m(null,2,[W,T,X,du],null),new N(null,new m(null,2,[W,T,X,hr],null),null,1,null),2,null),3,null),4,null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Mm],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,":",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,Rn],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,sn],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Ar],null),new N(null,new m(null,3,[W,Bj,Bj,"-\x3e",ko,!0],null),new N(null,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,qu],null),new N(null,new m(null,2,[W,T,X,ws],null),new N(null,new m(null,2,[W,T,X,Yk],null),new N(null,new m(null,2,[W,T,X,nm],null),null,1,null),2,null),3,null),4,null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,T,X,au,ko,!0],null),new N(null,new m(null,3,[W,T,X,au,ko,!0],null),null,1,null),2,null)],null)],null),null,1,null),2,null),3,null),4,null),kl,new m(null,2,[go,Km,un,Jl],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"[",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,ku],null),new N(null,new m(null,2,[W,$m,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,Bj,Bj,","],null),new N(null,new m(null,2,[W,T,X,au],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,ku],null),null,1,null),2,null)],null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,Bj,Bj,",",ko,!0],null)],null),null,1,null),2,null),3,null)],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"]",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,nu],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,qu],null),new N(null,new m(null,2,[W,T,X,nm],null),new N(null,new m(null,2,[W,T,X,Yk],null),new N(null,new m(null,2,[W,T,X,on],null),null,1,null),2,null),3,null),4,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"{",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,ku],null),new N(null,new m(null,2,[W,$m,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,Bj,Bj,","],null),new N(null,new m(null,2,[W,T,X,au],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,ku],null),null,1,null),2,null)],null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,Bj,Bj,",",ko,!0],null)],null),null,1,null),2,null),3,null)],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"}",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,pu],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,"@",ko,!0],null),new N(null,new m(null,2,[W,T,X,Mm],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,Ma],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,"!",ko,!0],null),new N(null,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,nu],null),new N(null,new m(null,2,[W,T,X,pu],null),null,1,null),2,null)],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,Jr],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,3,[W,Bj,Bj,"(",ko,!0],null),new N(null,new m(null,2,[W,T,X,Fr],null),new N(null,new m(null,3,[W,Bj,Bj,")",ko,!0],null),null,1,null),2,null),3,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"when",ko,!0],null),new N(null,new m(null,3,[W,T,X,au,ko,!0],null),new N(null,new m(null,2,[W,T,X,ku],null),new N(null,new m(null,3,[W,T,X,au,ko,!0],null),new N(null,new m(null,3,[W,Bj,Bj,"do",ko,!0],null),new N(null,new m(null,3,[W,T,X,au,ko,!0],null),new N(null,new m(null,2,[W,T,X,bu],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),6,null),7,null),8,null),9,null),kl,new m(null,2,[go,Km,un,zr],null)],null),Li(M([op("(0|([1-9][0-9]*))"),new m(null,1,[kl,new m(null,2,[go,Km,un,Tm],null)],null)])),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Tm],null),new N(null,new m(null,2,[W,T,X,ur],null),null,1,null),2,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,$l],null),new N(null,new m(null,3,[W,Bj,Bj,"-",ko,!0],null),new N(null,new m(null,2,[W,T,X,Ar],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,eu],null)],null),new m(null,3,[W,$m,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,nm],null),new N(null,new m(null,2,[W,T,X,Bj],null),new N(null,new m(null,2,[W,T,X,sn],null),new N(null,new m(null,2,[W,T,X,Ar],null),null,1,null),2,null),3,null),4,null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,T,X,au,ko,!0],null),new N(null,new m(null,3,[W,Bj,Bj,",",ko,!0],null),new N(null,new m(null,3,[W,T,X,au,ko,!0],null),null,1,null),2,null),3,null)],null)],null),null,1,null),2,null)],null),kl,new m(null,2,[go,Km,un,Fr],null)],null),Li(M([op("(0|([1-9][0-9]*))(\\.[0-9]+)+"),new m(null,1,[kl,new m(null,2,[go,Km,un,ur],null)],null)])),Li(M([op("[a-zA-Z_]+[a-zA-Z0-9_-]*"),new m(null,1,[kl,new m(null,2,[go,Km,un,Mm],null)],null)])),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,hl],null),null,1,null),2,null)],null),new N(null,new m(null,2,[W,T,X,zr],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,T,X,em,ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null)],null),null,1,null),2,null),3,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Bn],null),new N(null,new m(null,2,[W,T,X,Yk],null),null,1,null),2,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Ro],null),new N(null,new m(null,2,[W,T,X,gu],null),null,1,null),2,null),kl,new m(null,1,[go,Dk],null)],null),Li(M([op("['|\\\"](.*?)[\\\"|']"),new m(null,1,[kl,new m(null,2,[go,Km,un,Bj],null)],null)])),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Ma],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"\x3d",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Rn],null),new N(null,new m(null,2,[W,T,X,Ar],null),null,1,null),2,null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,Gr],null)],null),Li(M([op("(\\r\\n|\\n|\\r|\\s)*"),new m(null,1,[kl,new m(null,1,[go,Dk],null)],null)])),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,Tm],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"of",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Yk],null),new N(null,new m(null,2,[W,T,X,on],null),new N(null,new m(null,2,[W,T,X,nm],null),null,1,null),2,null),3,null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),6,null),7,null),kl,new m(null,2,[go,Km,un,xn],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,dm],null),null,1,null),2,null)],null),new N(null,new m(null,2,[W,T,X,Qm],null),new N(null,new m(null,2,[W,T,X,$q],null),new N(null,new m(null,2,[W,T,X,Fj],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Kr],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Fj],null),new N(null,new m(null,3,[W,Bj,Bj,"/",ko,!0],null),new N(null,new m(null,2,[W,T,X,Fj],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,$q],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,hl],null),new N(null,new m(null,2,[W,T,X,Rn],null),new N(null,new m(null,2,[W,T,X,Ar],null),null,1,null),2,null),3,null),kl,new m(null,1,[go,Dk],null)],null),Li(M([op("(beat|bar)"),new m(null,1,[kl,new m(null,2,[go,Km,un,Ro],null)],null)])),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,sr],null),new N(null,new m(null,2,[W,T,X,Dm],null),new N(null,new m(null,2,[W,T,X,Gr],null),new N(null,new m(null,2,[W,T,X,yr],null),new N(null,new m(null,3,[W,T,X,em,ko,!0],null),new N(null,new m(null,3,[W,T,X,au,ko,!0],null),null,1,null),2,null),3,null),4,null),5,null),6,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,nm],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"\x3d",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,sr],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,Dm],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Fj],null),new N(null,new m(null,3,[W,Bj,Bj,"*",ko,!0],null),new N(null,new m(null,2,[W,T,X,Fj],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,Qm],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,$l],null),new N(null,new m(null,2,[W,T,X,qr],null),new N(null,new m(null,2,[W,T,X,eu],null),null,1,null),2,null),3,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"[",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,tr],null),new N(null,new m(null,2,[W,$m,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,Bj,Bj,","],null),new N(null,new m(null,2,[W,T,X,au],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,tr],null),null,1,null),2,null)],null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,Bj,Bj,",",ko,!0],null)],null),null,1,null),2,null),3,null)],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"]",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,on],null)],null),Li(M([op("[a-zA-Z]+"),new m(null,1,[kl,new m(null,2,[go,Km,un,rn],null)],null)])),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,Bj,Bj,"(",ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,Ar],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,Bj,Bj,")",ko,!0],null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,Mm],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,ul],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,Tm],null),new N(null,new m(null,3,[W,Bj,Bj,"|",ko,!0],null),new N(null,new m(null,2,[W,T,X,Tm],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,Xk],null)],null),Li(M([op("#{2}(.+)"),new m(null,1,[kl,new m(null,1,[go,Dk],null)],null)])),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,":",ko,!0],null),new N(null,new m(null,2,[W,T,X,Mm],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),kl,new m(null,2,[go,Km,un,nm],null)],null),Li(M([op("(true|false)"),new m(null,1,[kl,new m(null,2,[go,Km,un,hn],null)],null)])),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,on],null),new N(null,new m(null,2,[W,T,X,xn],null),null,1,null),2,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"{",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,tr],null),new N(null,new m(null,2,[W,$m,Ul,new m(null,2,[W,mk,Gj,new N(null,new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,Bj,Bj,","],null),new N(null,new m(null,2,[W,T,X,au],null),null,1,null),2,null),ko,!0],null),new N(null,new m(null,2,[W,T,X,tr],null),null,1,null),2,null)],null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,Bj,Bj,",",ko,!0],null)],null),null,1,null),2,null),3,null)],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"}",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,Yk],null)],null),new m(null,3,[W,mk,Gj,new N(null,Li(M([op("(?i)play!"),new m(null,1,[ko,!0],null)])),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,sr],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,yr],null)],null),new m(null,3,[W,mk,Gj,new N(null,Li(M([op("(gte|gt|lte|lt|factor)"),$e])),new N(null,new m(null,3,[W,Bj,Bj,"? ",ko,!0],null),new N(null,new m(null,2,[W,T,X,Tm],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,hr],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,ul],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,T,X,fu],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,2,[go,Km,un,qu],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,$l],null),new N(null,new m(null,3,[W,Bj,Bj,"+",ko,!0],null),new N(null,new m(null,2,[W,T,X,Ar],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,qr],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,qu],null),new N(null,new m(null,2,[W,T,X,ws],null),new N(null,new m(null,2,[W,T,X,jn],null),new N(null,new m(null,2,[W,T,X,Jl],null),new N(null,new m(null,2,[W,T,X,nm],null),null,1,null),2,null),3,null),4,null),5,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,3,[W,Bj,Bj,"_",ko,!0],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,ws],null)],null),new m(null,3,[W,Bm,Gj,new N(null,new m(null,2,[W,T,X,Bj],null),new N(null,new m(null,2,[W,T,X,dm],null),new N(null,new m(null,2,[W,T,X,Xk],null),null,1,null),2,null),3,null),kl,new m(null,1,[go,Dk],null)],null),new m(null,3,[W,mk,Gj,new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),new N(null,new m(null,2,[W,mk,Gj,new N(null,new m(null,2,[W,T,X,Tm],null),new N(null,new m(null,3,[W,Bj,Bj,"..",ko,!0],null),new N(null,new m(null,2,[W,T,X,Tm],null),null,1,null),2,null),3,null)],null),new N(null,new m(null,2,[W,In,Ul,new m(null,3,[W,T,X,au,ko,!0],null)],null),null,1,null),2,null),3,null),kl,new m(null,2,[go,Km,un,Ir],null)],null),new m(null,3,[W,$m,Ul,new m(null,2,[W,T,X,lu],null),kl,new m(null,2,[go,Km,un,oo],null)],null),new m(null,3,[W,mk,Gj,new N(null,Li(M([op("(1|2|4|8|16|32|64|128|256)"),$e])),new N(null,new m(null,3,[W,Bj,Bj,"n",ko,!0],null),null,1,null),2,null),kl,new m(null,2,[go,Km,un,gu],null)],null)]),M([Uj,oo]))),bv=ef.rd(Qa,Vt);function Xu(a,b){return J(a)<=J(b)&&af(function(c){return Qd(b,c);},a);}function Yu(a){return ui(function(b){return Jd(b)||Nd(b);},a);}function Zu(a){return Hd(pd(a))?Ke.Nd(ck(v.Ca(x(a))),function(){var b=Hr.Ca(pd(a));return r(b)?nf.rd(function(c){return[".",v.Ca(c)].join("");},uu(b,/ /)):null;}(),M([new Q(null,1,5,S,[["#",v.Ca(ou.Ca(pd(a)))].join("")],null)])):ck(v.Ca(x(a)));}function $u(a,b){for(;;){if(H(b)&&H(a)){var c=Jc(a);b=wf(function(d){return function(e){var f=x(d);return Xu(Gh(ck(v.Ca(f))),zf.rd(Eh,Zu(e)));};}(a),wf(Jd,Yu(b)));a=c;}else return b;}}function cv(a,b){for(;;){if(0===b)return a;var c=(a%b+b)%b;a=b;b=c;}}function Ok(a,b){try{return a/=b,G.rd(ju,a)?NaN(0):G.rd(0,a)?NaN(0):a;}catch(c){if(c instanceof Error)return 0;throw c;}}function V(a,b,c){return Y(tu,a,b,c);}function Y(a,b,c,d){function e(f){return r(b.Ca?b.Ca(f):b.call(null,f))?c.Ca?c.Ca(f):c.call(null,f):f;}return a.rd?a.rd(e,d):a.call(null,e,d);}function dv(a,b){return Gd(b)?Yd(a,Ii(b)):a.Ca?a.Ca(b):a.call(null,b);}function Bk(a){return Gh(wf(df(Fd),Jc(ui(Fd,Gh(a)))));}function Hk(a){var b=function e(d){return new ze(null,function(){var f=H(d);if(f){var g=x(f);return Gd(g)?Ke.rd(e(g),e(Jc(f))):ld(g,e(Jc(f)));}return null;},null,null);};return Gd(a)?b(a):a;}function hv(a){return Dd(a)?Yf(a):Af(function(b){return Af(function(c){return Ec.rd(c,b);},wf(function(c){return Qd(c,b);},a));},Hj(0,Te(zh,nf.rd(J,a))));}function jv(a){return nf.rd(function(b){return ce(b);},$u(new Q(null,1,5,S,[yr],null),a));}var Uv=new Q(null,2,5,S,[4,4],null),Vv=new m(null,2,[hu,120,Xk,Uv],null),Wv=of(9,Ki(ff(yg,2),1));function Xv(a){var b=kf(Vv),c=new m(null,1,[Gr,function(d,e){d=H(d);O(d,0,null);d=O(d,1,null);d=xe.Ca(ye(d).toLowerCase());return mf.v(b,vd,d,e);}],null);a=Yv.Ca?Yv.Ca(a):Yv.call(null,a);yt.rd?yt.rd(c,a):yt.call(null,c,a);return Fb(b);}function Zv(a,b,c){var d=kf(c);c=new m(null,1,[Gr,function(e,f){e=H(e);O(e,0,null);e=O(e,1,null);return r(Oh(b,ye(e)))?lf(d,f):null;}],null);a=Yv.Ca?Yv.Ca(a):Yv.call(null,a);yt.rd?yt.rd(c,a):yt.call(null,c,a);return Fb(d);}function $v(a){var b=ce(jv(a));return r(b)?(a=O(b,0,null),b=O(b,1,null),G.rd(a,xn)?b:null):null;}function bw(a){return Zv(a,/meter/i,Uv);}function cw(a){if(r(a)){var b=H(a);a=x(b);b=z(b);b=O(b,0,null);return Ok(a,b);}return null;}function dw(a){return nf.rd(function(b){O(b,0,null);return O(b,1,null);},$u(new Q(null,1,5,S,[Jl],null),a));}function ew(a){var b=Yv.Ca?Yv.Ca(a):Yv.call(null,a);a=cw(bw(b));b=dw(b);return Ud(cv,a,b);}function fw(a){function b(e,f){return mf.v(d,vd,cu,sd.rd(c(),new Q(null,2,5,S,[e,f],null)));}function c(){return Ec.Md(Fb(d),cu,$e);}var d=kf($e);return a.Md?a.Md(c,b,d):a.call(null,c,b,d);}function gw(a){a=Zv(a,/tempo/i,120);return 1<=a&&256>=a?!0:Tv(["Tempos must be between 0 and ",v.Ca(256)," beats per minute"].join(""));}function hw(a){a=bw(a);a=H(a);x(a);a=z(a);a=O(a,0,null);return Qa(bf(Fh([a]),Jc(Wv)))?Tv(["Meter unit beats (i.e. pulse beats) must be even and no greater than ",v.Ca(ce(Wv))].join("")):!0;}function iw(a){return G.rd(1,J(jv(a)))?!0:Tv("Exactly one Play! export must be defined");}function jw(a){fw(function(b,c){var d=new m(null,4,[Dm,function(e,f){e=H(e);var g=H(f);g=O(g,0,null);switch(g instanceof E?g.ca:null){case"identifier":return Qd(b.i?b.i():b.call(null),f)?null:Tv(["Variable is not declared before it's used: ",v.Ca(f)].join(""));default:return c.rd?c.rd(e,f):c.call(null,e,f);}},Jl,function(e,f){f=O(f,0,null);if(1024<e)f=Tv(["Beat durations must be between 0 and ",v.Ca(1024)].join(""));else{e=Ih(new Q(null,3,5,S,[qu,ws,Yk],null),ti(!0));var g=Rv(f);e=ri.rd?ri.rd(e,g):ri.call(null,e,g);f=r(e)?Tv(["Beat values can only be an atom, rest, or set but found: ",v.Ca(f)].join("")):null;}return f;},$q,function(e,f){e=H(f);return Qa(bf(Fh([e]),Wv))?Tv(["All divisors must be even and no greater than ",v.Ca(ce(Wv))].join("")):null;},xn,function(e,f){return Jd(f)?Qa(bf(Fh([x(f)]),new Q(null,2,5,S,[Yk,on],null)))?Tv("Loop values can only be lists and sets"):null:Tv("Loops values must be a collection");}],null);return yt.rd?yt.rd(d,a):yt.call(null,d,a);});return!0;}function kw(a){return af(ee,nf.rd(function(b){return b.Ca?b.Ca(a):b.call(null,a);},new Q(null,4,5,S,[jw,gw,hw,iw],null)));}function lw(a){return fw(function(b,c){var d=new m(null,3,[Dm,function(e,f){var g=ce(e),k=ce(f),l=O(f,0,null);switch(l instanceof E?l.ca:null){case"identifier":return f=Ec.rd(b.i?b.i():b.call(null),k),c.rd?c.rd(g,f):c.call(null,g,f),new Q(null,3,5,S,[Dm,e,f],null);default:return c.rd?c.rd(g,f):c.call(null,g,f),new Q(null,3,5,S,[Dm,e,f],null);}},nm,function(e){var f=Ec.rd(b.i?b.i():b.call(null),e);return null!=f?f:new Q(null,2,5,S,[nm,e],null);},yr,function(e){var f=H(e),g=O(e,0,null);switch(g instanceof E?g.ca:null){case"identifier":return e=Ec.rd(b.i?b.i():b.call(null),f),new Q(null,2,5,S,[yr,e],null);default:return new Q(null,2,5,S,[yr,e],null);}}],null);return yt.rd?yt.rd(d,a):yt.call(null,d,a);});}function Yv(a){var b=bh([Tm,dm,eu,ur,Mm,Bj,$q,Qm,Xk,qr],[Qv,Qv,Df,Qv,Qv,function(c){return Go(c,/^("|')|("|')$/,"");},ah,yg,function(c,d){return new Q(null,2,5,S,[c,d],null);},Bf]);return yt.rd?yt.rd(b,a):yt.call(null,b,a);}function mw(a){var b=zf.rd(new Q(null,1,5,S,[lu],null),$u(new Q(null,1,5,S,[Gr],null),a)),c=cw(bw(b)),d=1/ce(bw(b));b=new m(null,2,[Ro,function(e){e=xe.Ca(e);e=e instanceof E?e.ca:null;switch(e){case"beat":return d;case"bar":return c;default:throw Error(["No matching clause: ",v.Ca(e)].join(""));}},gu,function(e){return 1/(Qv.Ca?Qv.Ca(e):Qv.call(null,e));}],null);return yt.rd?yt.rd(b,a):yt.call(null,b,a);}function nw(a){if("number"===typeof $v(a)){var b=new m(null,1,[yr,function(c){c=Jc(ce(c));return new Q(null,2,5,S,[yr,zf.rd(new Q(null,1,5,S,[on],null),c)],null);}],null);return yt.rd?yt.rd(b,a):yt.call(null,b,a);}return a;}function ow(a){return Jd(a)?a:"string"===typeof a?Wu.Ca?Wu.Ca(a):Wu.call(null,a):Tv("Cannot parse track, provided unsupported data format. Must be a parsed AST vector or a UTF-8 encoded string.");}var pw=function pw(a){return Hd(a)?(a=ul.Ca(a),pw.Ca?pw.Ca(a):pw.call(null,a)):xe.Ca(ye(a).toLowerCase());};function Iw(a,b){return Hd(a)?ou.Ca(a):[ye(pw(a)),".",v.Ca(Sv.Ca?Sv.Ca(b):Sv.call(null,b))].join("");}function nt(a,b){return new m(null,4,[ou,Iw(a,zf.rd(new Q(null,1,5,S,[a],null),b)),ul,pw(a),nr,v.Ca(x(b)),Er,Jc(b)],null);}var Vk=ef.rd(lk,nt);C("bach.compose.elementize",Vk);function qw(a){return vf(function(b){return Yf(Tl.Ca(b));},M([Rv(a)]));}function tb(a){return je(Rd,nf.rd(ou,vf(iu,M([qw(R(R(a)))]))));}function rw(a){return nf.rd(function(b){return Li(M([b,sa(a,new Q(null,2,5,S,[vm,ou],null))]));},Tl.Ca(a));}function ub(a){return su(function(b){return Fd(b)?dv(qi,R(b)):Gd(b)?dv(Bf,R(b)):b;},a);}function rd(a){return ub(V(Hd,Kr,a));}function Mb(a,b){return V(function(c){var d=Hd(c);return d?Kr.Ca(c):d;},function(c){var d=Kr.Ca(c)/b|0;return vd.Md(c,Kr,d);},a);}function ww(a,b,c){var d=new m(null,7,[Ir,function(e,f){return r(bf(Fh([b]),Hj(e,f+1)))?b:null;},nu,function(){function e(g){var k=null;if(0<arguments.length){k=0;for(var l=Array(arguments.length-0);k<l.length;){l[k]=arguments[k+0],++k;}k=new Za(l,0,null);}return f.call(this,k);}function f(g){return af(Fh([b]),Rv(g))?b:null;}e.D=0;e.C=function(g){g=H(g);return f(g);};e.Nd=f;return e;}(),pu,function(){function e(g){var k=null;if(0<arguments.length){k=0;for(var l=Array(arguments.length-0);k<l.length;){l[k]=arguments[k+0],++k;}k=new Za(l,0,null);}return f.call(this,k);}function f(g){return r(bf(Fh([b]),Rv(g)))?b:null;}e.D=0;e.C=function(g){g=H(g);return f(g);};e.Nd=f;return e;}(),du,function(e){e=xe.Ca(e);e=e instanceof E?e.ca:null;switch(e){case"even":return cf(b)?b:null;case"odd":return cf(b)?null:b;case"last":return a;case"first":return 1;default:throw Error(["No matching clause: ",v.Ca(e)].join(""));}},hr,function(e,f){e=xe.Ca(e);e=e instanceof E?e.ca:null;switch(e){case"gt":return b>f?b:null;case"gte":return b>=f?b:null;case"lt":return b<f?b:null;case"lte":return b<=f?b:null;case"factor":return G.rd(0,(b%f+f)%f)?b:null;default:throw Error(["No matching clause: ",v.Ca(e)].join(""));}},Jr,function(e){return G.rd(b,e)?null:b;},zr,function(e,f){return G.rd(b,e)?Rv(f):null;}],null);return yt.rd?yt.rd(d,c):yt.call(null,d,c);}function xw(a,b){return wf(df(be),vf(function(c){return ww(a,c+1,Jc(b));},M([Hj(0,a)])));}function yw(a){var b=new m(null,1,[xn,function(c,d){return zf.rd(new Q(null,1,5,S,[x(d)],null),xw(c,d));}],null);return yt.rd?yt.rd(b,a):yt.call(null,b,a);}function zw(a){var b=new m(null,5,[on,function(){function c(e){var f=null;if(0<arguments.length){f=0;for(var g=Array(arguments.length-0);f<g.length;){g[f]=arguments[f+0],++f;}f=new Za(g,0,null);}return d.call(this,f);}function d(e){return zd(Yf(R(e)),new m(null,1,[Va,!0],null));}c.D=0;c.C=function(e){e=H(e);return d(e);};c.Nd=d;return c;}(),Yk,function(){function c(e){var f=null;if(0<arguments.length){f=0;for(var g=Array(arguments.length-0);f<g.length;){g[f]=arguments[f+0],++f;}f=new Za(g,0,null);}return d.call(this,f);}function d(e){return zd(zf.rd(Eh,R(e)),new m(null,1,[Va,!0],null));}c.D=0;c.C=function(e){e=H(e);return d(e);};c.Nd=d;return c;}(),qu,function(c,d){O(c,0,null);c=O(c,1,null);d=H(d);x(d);d=z(d);return nt(c,d);},ws,function(){return nt(ws,td);},Jl,function(c,d){return vd.Nd($e,Kr,c,M([iu,Yf(Rv(d))]));}],null);a=yw(Yv.Ca?Yv.Ca(a):Yv.call(null,a));return yt.rd?yt.rd(b,a):yt.call(null,b,a);}function mc(a){return Jd(a)&&!Zf(a)&&Qd(Ad(a),Va);}function Ya(a){return V(Fd,function(b){b=nf.rd(function(c){return Gd(c)?Yf(c):new Q(null,1,5,S,[c],null);},R(b));b=Af(function(c){return zf.rd(Eh,c);},hv(b));return z(b)?b:x(b);},a);}function oc(a){return Y(su,mc,function(b){return Ud(function(c,d){var e=Kr.Ca(d);return r(e)?zf.rd(c,Ej(d,e)):Fd(d)?af(function(f){var g=Hd(f);return g?Kr.Ca(f):g;},d)?sd.rd(c,Ej(d,rd(d))):sd.rd(c,d):Gd(d)?zf.rd(c,d):sd.rd(c,d);},td,b);},a);}function fe(a,b){return V(Fd,Bk,Hk(Ya(oc(Mb(zw(a),b)))));}function ci(a,b){a=fe(a,b);var c=kf(0);return si(function(d,e){return Dd(e)?null:vd.Nd($e,Tl,Gh(R(e)),M([ou,mf.rd(c,Tc)-1,Kr,rd(e),vm,d]));},a);}function Rf(a,b){a=ci(a,b);a=vf(rw,M([a]));return Ud(function(c,d){var e=vm.Ca(d),f=Rv(je(Rd,nf.rd(ou,R(iu.Ca(d)))));d=ta(e,e+Kr.Ca(d));return Ud(function(g,k){return vd.Md(g,k,xf(v,zf.rd(Ec.rd(g,k),f)));},c,d);},td,a);}function mj(a,b){a=ci(a,b);return Ud(function(c,d){return sd.rd(c,null==d?Bd(c):ou.Ca(d));},td,a);}function Mk(a){var b=J(a);a=vf(rw,M([a]));var c=Yf(of(b,ti(Kc)));return Ud(function(d,e){var f=vm.Ca(e)+Kr.Ca(e);f=((0<=f?f:b+f)%b+b)%b;e=Rv(je(Rd,nf.rd(ou,R(iu.Ca(e)))));var g=Rv(Ec.rd(d,f));e=je(Rd,zf.rd(e,g));return vd.Md(d,f,Hh(e));},c,a);}function Fw(a){return Ud(function(b,c){var d=ce(uu(Iw(c,c),/\./)),e=pw(c),f=sa(c,new Q(null,2,5,S,[nr,Er],null));return Dd(c)?b:Ji(b,new Q(null,2,5,S,[e,d],null),f);},$e,vf(iu,M([qw(R(R(a)))])));}function Gw(a){return xf(Kr,nf.rd(function(b){return vd.Md(b,iu,je(Rd,nf.rd(ou,R(iu.Ca(b)))));},Rv(a)));}function Hw(a){return vd.Md(a,Tl,Gw(Tl.Ca(a)));}function ll(a){a=ow(a);if(r(bv(a))){a=mw(lw(ow(a)));var b=Yv.Ca?Yv.Ca(a):Yv.call(null,a);Vt(b)||(kw.Ca?kw.Ca(b):kw.call(null,b));var c=ce(jv(nw($d.Ca?$d.Ca(b):$d.call(null,b))));var d=ew(b);a=ci(c,d);var e=$v(b);var f=Xv(b);var g=bw(b);f=vd.Md(f,Xk,g);g=new m(null,2,[Oq,ew(b),ql,1/ce(bw(b))],null);var k=ew(b);var l=cw(bw(b));k=Ok(k>l?k:l,k<l?k:l);k=new m(null,2,[Oq,k,ql,x(bw(b))],null);l=1/(Zv(b,/tempo/i,120)/60)*1E3;var n=1/ce(bw(b));n=ew(b)/n;b=new m(null,2,[Oq,l*n,ql,1/(Zv(b,/tempo/i,120)/60)*1E3],null);b=new m(null,3,[Jl,g,cn,k,qo,vd.Md(b,cn,(b.Ca?b.Ca(Oq):b.call(null,Oq))*(k.Ca?k.Ca(Oq):k.call(null,Oq)))],null);g=nf.rd(rd,vf(Tl,M([a])));g=R(g);g=new m(null,3,[pn,Te(qi,g),om,Te(zh,g),yn,J(a)],null);k=Fw(a);l=ci(c,d);n=mj(c,d);c=Rf(c,d);c=nf.Md(ld,n,c);d=nf.rd(tb,l);l=Mk(l);c=nf.v(ff(sd,td),c,d,l);a=new m(null,7,[wr,e,Cl,f,mu,b,fl,g,iu,k,Uq,c,qm,nf.rd(Hw,R(a))],null);}else a=zf.rd(new m(null,1,[av,!0],null),a);return lk.Ca?lk.Ca(a):lk.call(null,a);}C("bach.compose.compose",ll);shadow$umd$export={compose:ll,elementize:Vk};return shadow$umd$export;});});var $schema$1="http://json-schema.org/draft-07/schema#";var definitions$1={headers:{type:"object",properties:{meter:{type:"array",items:{type:"number",minimum:1},minItems:2,maxItems:2},tempo:{type:"number",minimum:0}},required:["meter","tempo"],additionalProperties:true},unit:{type:"object",properties:{step:{type:"number",minimum:0},pulse:{type:"number",minimum:0}},required:["step","pulse"]},units:{type:"object",properties:{beat:{$ref:"#/definitions/unit"},bar:{$ref:"#/definitions/unit"},time:{allOf:[{$ref:"#/definitions/unit"},{type:"object",properties:{bar:{type:"number",minimum:0}}}]}},required:["beat","bar","time"],additionalProperties:false},metrics:{type:"object",properties:{min:{oneOf:[{type:"number",minimum:0},{type:"null"}]},max:{oneOf:[{type:"number",minimum:0},{type:"null"}]},total:{type:"number",minimum:0}},required:["min","max","total"],additionalProperties:false},elements:{type:"object",patternProperties:{".*":{type:"object",patternProperties:{".*":{type:"object",properties:{value:{type:"string"},props:{type:"array","default":[]}},required:["value","props"],additionalProperties:true}}}}},steps:{type:"array",items:{type:"array",items:[{type:"array",items:[{type:"number"}],additionalItems:{$ref:"#/definitions/id"},minItems:1},{type:"array",items:{$ref:"#/definitions/id"}},{type:"array",items:{$ref:"#/definitions/id"}}],minItems:0,additionalItems:false}},id:{type:"string",pattern:"[a-zA-Z0-9_-]+\\.[a-zA-Z0-9]{6,}"},uid:{type:"string",pattern:"[a-zA-Z0-9]{6,}"},item:{type:"object",properties:{duration:{type:"number",minimum:0},elements:{type:"array",items:{$ref:"#/definitions/id"}}},required:["duration","elements"]},beat:{type:"object",properties:{duration:{type:"number"},items:{type:"array",items:{$ref:"#/definitions/item"}}},required:["duration","items"]}};var type$2="object";var properties$3={headers:{$ref:"#/definitions/headers"},units:{$ref:"#/definitions/units"},metrics:{$ref:"#/definitions/metrics"},elements:{$ref:"#/definitions/elements"},steps:{$ref:"#/definitions/steps"},beats:{type:"array",items:{$ref:"#/definitions/beat"}}};var required$2=["headers","units","metrics","elements","steps","beats"];var require$$0={$schema:$schema$1,definitions:definitions$1,type:type$2,properties:properties$3,required:required$2};var bachJsonSchema=require$$0;var code$1=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.regexpCode=exports.getProperty=exports.safeStringify=exports.stringify=exports.strConcat=exports.addCodeArg=exports.str=exports._=exports.nil=exports._Code=exports.Name=exports.IDENTIFIER=exports._CodeOrName=void 0;var _CodeOrName=function _CodeOrName(){(0,_classCallCheck2["default"])(this,_CodeOrName);};exports._CodeOrName=_CodeOrName;exports.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Name=/*#__PURE__*/function(_CodeOrName2){(0,_inherits2["default"])(Name,_CodeOrName2);var _super=_createSuper(Name);function Name(s){var _this;(0,_classCallCheck2["default"])(this,Name);_this=_super.call(this);if(!exports.IDENTIFIER.test(s))throw new Error("CodeGen: name must be a valid identifier");_this.str=s;return _this;}(0,_createClass2["default"])(Name,[{key:"toString",value:function toString(){return this.str;}},{key:"emptyStr",value:function emptyStr(){return false;}},{key:"names",get:function get(){return(0,_defineProperty2["default"])({},this.str,1);}}]);return Name;}(_CodeOrName);exports.Name=Name;var _Code=/*#__PURE__*/function(_CodeOrName3){(0,_inherits2["default"])(_Code,_CodeOrName3);var _super2=_createSuper(_Code);function _Code(code){var _this2;(0,_classCallCheck2["default"])(this,_Code);_this2=_super2.call(this);_this2._items=typeof code==="string"?[code]:code;return _this2;}(0,_createClass2["default"])(_Code,[{key:"toString",value:function toString(){return this.str;}},{key:"emptyStr",value:function emptyStr(){if(this._items.length>1)return false;var item=this._items[0];return item===""||item==='""';}},{key:"str",get:function get(){var _context34;var _a;return(_a=this._str)!==null&&_a!==void 0?_a:this._str=(0,_reduce["default"])(_context34=this._items).call(_context34,function(s,c){var _context35;return(0,_concat["default"])(_context35="".concat(s)).call(_context35,c);},"");}},{key:"names",get:function get(){var _context36;var _a;return(_a=this._names)!==null&&_a!==void 0?_a:this._names=(0,_reduce["default"])(_context36=this._items).call(_context36,function(names,c){if(c instanceof Name)names[c.str]=(names[c.str]||0)+1;return names;},{});}}]);return _Code;}(_CodeOrName);exports._Code=_Code;exports.nil=new _Code("");function _(strs){var code=[strs[0]];var i=0;for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}while(i<args.length){addCodeArg(code,args[i]);code.push(strs[++i]);}return new _Code(code);}exports._=_;var plus=new _Code("+");function str(strs){var expr=[safeStringify(strs[0])];var i=0;for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3];}while(i<args.length){expr.push(plus);addCodeArg(expr,args[i]);expr.push(plus,safeStringify(strs[++i]));}optimize(expr);return new _Code(expr);}exports.str=str;function addCodeArg(code,arg){if(arg instanceof _Code)code.push.apply(code,(0,_toConsumableArray2["default"])(arg._items));else if(arg instanceof Name)code.push(arg);else code.push(interpolate(arg));}exports.addCodeArg=addCodeArg;function optimize(expr){var i=1;while(i<expr.length-1){if(expr[i]===plus){var res=mergeExprItems(expr[i-1],expr[i+1]);if(res!==undefined){(0,_splice["default"])(expr).call(expr,i-1,3,res);continue;}expr[i++]="+";}i++;}}function mergeExprItems(a,b){var _context38;if(b==='""')return a;if(a==='""')return b;if(typeof a=="string"){var _context37;if(b instanceof Name||a[a.length-1]!=='"')return;if(typeof b!="string")return(0,_concat["default"])(_context37="".concat((0,_slice["default"])(a).call(a,0,-1))).call(_context37,b,"\"");if(b[0]==='"')return(0,_slice["default"])(a).call(a,0,-1)+(0,_slice["default"])(b).call(b,1);return;}if(typeof b=="string"&&b[0]==='"'&&!(a instanceof Name))return(0,_concat["default"])(_context38="\"".concat(a)).call(_context38,(0,_slice["default"])(b).call(b,1));return;}function strConcat(c1,c2){return c2.emptyStr()?c1:c1.emptyStr()?c2:str(_templateObject||(_templateObject=(0,_taggedTemplateLiteral2["default"])(["","",""])),c1,c2);}exports.strConcat=strConcat;// TODO do not allow arrays here
function interpolate(x){return typeof x=="number"||typeof x=="boolean"||x===null?x:safeStringify((0,_isArray["default"])(x)?x.join(","):x);}function stringify(x){return new _Code(safeStringify(x));}exports.stringify=stringify;function safeStringify(x){return(0,_stringify["default"])(x).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");}exports.safeStringify=safeStringify;function getProperty(key){return typeof key=="string"&&exports.IDENTIFIER.test(key)?new _Code(".".concat(key)):_(_templateObject2||(_templateObject2=(0,_taggedTemplateLiteral2["default"])(["[","]"])),key);}exports.getProperty=getProperty;function regexpCode(rx){return new _Code(rx.toString());}exports.regexpCode=regexpCode;});var scope=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.ValueScope=exports.ValueScopeName=exports.Scope=exports.varKinds=exports.UsedValueState=void 0;var ValueError=/*#__PURE__*/function(_Error){(0,_inherits2["default"])(ValueError,_Error);var _super3=_createSuper(ValueError);function ValueError(name){var _this3;(0,_classCallCheck2["default"])(this,ValueError);_this3=_super3.call(this,"CodeGen: \"code\" for ".concat(name," not defined"));_this3.value=name.value;return _this3;}return ValueError;}(/*#__PURE__*/(0,_wrapNativeSuper2["default"])(Error));var UsedValueState;(function(UsedValueState){UsedValueState[UsedValueState["Started"]=0]="Started";UsedValueState[UsedValueState["Completed"]=1]="Completed";})(UsedValueState=exports.UsedValueState||(exports.UsedValueState={}));exports.varKinds={"const":new code$1.Name("const"),"let":new code$1.Name("let"),"var":new code$1.Name("var")};var Scope=/*#__PURE__*/function(){function Scope(){var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},prefixes=_ref2.prefixes,parent=_ref2.parent;(0,_classCallCheck2["default"])(this,Scope);this._names={};this._prefixes=prefixes;this._parent=parent;}(0,_createClass2["default"])(Scope,[{key:"toName",value:function toName(nameOrPrefix){return nameOrPrefix instanceof code$1.Name?nameOrPrefix:this.name(nameOrPrefix);}},{key:"name",value:function name(prefix){return new code$1.Name(this._newName(prefix));}},{key:"_newName",value:function _newName(prefix){var _context39;var ng=this._names[prefix]||this._nameGroup(prefix);return(0,_concat["default"])(_context39="".concat(prefix)).call(_context39,ng.index++);}},{key:"_nameGroup",value:function _nameGroup(prefix){var _a,_b;if(((_b=(_a=this._parent)===null||_a===void 0?void 0:_a._prefixes)===null||_b===void 0?void 0:_b.has(prefix))||this._prefixes&&!this._prefixes.has(prefix)){throw new Error("CodeGen: prefix \"".concat(prefix,"\" is not allowed in this scope"));}return this._names[prefix]={prefix:prefix,index:0};}}]);return Scope;}();exports.Scope=Scope;var ValueScopeName=/*#__PURE__*/function(_code$1$Name){(0,_inherits2["default"])(ValueScopeName,_code$1$Name);var _super4=_createSuper(ValueScopeName);function ValueScopeName(prefix,nameStr){var _this4;(0,_classCallCheck2["default"])(this,ValueScopeName);_this4=_super4.call(this,nameStr);_this4.prefix=prefix;return _this4;}(0,_createClass2["default"])(ValueScopeName,[{key:"setValue",value:function setValue(value,_ref3){var property=_ref3.property,itemIndex=_ref3.itemIndex;this.value=value;this.scopePath=code$1._(_templateObject3||(_templateObject3=(0,_taggedTemplateLiteral2["default"])([".","[","]"])),new code$1.Name(property),itemIndex);}}]);return ValueScopeName;}(code$1.Name);exports.ValueScopeName=ValueScopeName;var line=code$1._(_templateObject4||(_templateObject4=(0,_taggedTemplateLiteral2["default"])(["\n"],["\\n"])));var ValueScope=/*#__PURE__*/function(_Scope){(0,_inherits2["default"])(ValueScope,_Scope);var _super5=_createSuper(ValueScope);function ValueScope(opts){var _this5;(0,_classCallCheck2["default"])(this,ValueScope);_this5=_super5.call(this,opts);_this5._values={};_this5._scope=opts.scope;_this5.opts=_objectSpread(_objectSpread({},opts),{},{_n:opts.lines?line:code$1.nil});return _this5;}(0,_createClass2["default"])(ValueScope,[{key:"get",value:function get(){return this._scope;}},{key:"name",value:function name(prefix){return new ValueScopeName(prefix,this._newName(prefix));}},{key:"value",value:function value(nameOrPrefix,_value){var _a;if(_value.ref===undefined)throw new Error("CodeGen: ref must be passed in value");var name=this.toName(nameOrPrefix);var prefix=name.prefix;var valueKey=(_a=_value.key)!==null&&_a!==void 0?_a:_value.ref;var vs=this._values[prefix];if(vs){var _name=vs.get(valueKey);if(_name)return _name;}else{vs=this._values[prefix]=new _map2["default"]();}vs.set(valueKey,name);var s=this._scope[prefix]||(this._scope[prefix]=[]);var itemIndex=s.length;s[itemIndex]=_value.ref;name.setValue(_value,{property:prefix,itemIndex:itemIndex});return name;}},{key:"getValue",value:function getValue(prefix,keyOrRef){var vs=this._values[prefix];if(!vs)return;return vs.get(keyOrRef);}},{key:"scopeRefs",value:function scopeRefs(scopeName){var values=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._values;return this._reduceValues(values,function(name){if(name.scopePath===undefined)throw new Error("CodeGen: name \"".concat(name,"\" has no value"));return code$1._(_templateObject5||(_templateObject5=(0,_taggedTemplateLiteral2["default"])(["","",""])),scopeName,name.scopePath);});}},{key:"scopeCode",value:function scopeCode(){var values=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._values;var usedValues=arguments.length>1?arguments[1]:undefined;var getCode=arguments.length>2?arguments[2]:undefined;return this._reduceValues(values,function(name){if(name.value===undefined)throw new Error("CodeGen: name \"".concat(name,"\" has no value"));return name.value.code;},usedValues,getCode);}},{key:"_reduceValues",value:function _reduceValues(values,valueCode){var _this6=this;var usedValues=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var getCode=arguments.length>3?arguments[3]:undefined;var code=code$1.nil;var _loop=function _loop(prefix){var vs=values[prefix];if(!vs)return"continue";var nameSet=usedValues[prefix]=usedValues[prefix]||new _map2["default"]();(0,_forEach["default"])(vs).call(vs,function(name){if(nameSet.has(name))return;nameSet.set(name,UsedValueState.Started);var c=valueCode(name);if(c){var _def=_this6.opts.es5?exports.varKinds["var"]:exports.varKinds["const"];code=code$1._(_templateObject6||(_templateObject6=(0,_taggedTemplateLiteral2["default"])(["",""," "," = ",";",""])),code,_def,name,c,_this6.opts._n);}else if(c=getCode===null||getCode===void 0?void 0:getCode(name)){code=code$1._(_templateObject7||(_templateObject7=(0,_taggedTemplateLiteral2["default"])(["","","",""])),code,c,_this6.opts._n);}else{throw new ValueError(name);}nameSet.set(name,UsedValueState.Completed);});};for(var prefix in values){var _ret=_loop(prefix);if(_ret==="continue")continue;}return code;}}]);return ValueScope;}(Scope);exports.ValueScope=ValueScope;});var codegen=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.or=exports.and=exports.not=exports.CodeGen=exports.operators=exports.varKinds=exports.ValueScopeName=exports.ValueScope=exports.Scope=exports.Name=exports.regexpCode=exports.stringify=exports.getProperty=exports.nil=exports.strConcat=exports.str=exports._=void 0;var code_2=code$1;(0,_defineProperty3["default"])(exports,"_",{enumerable:true,get:function get(){return code_2._;}});(0,_defineProperty3["default"])(exports,"str",{enumerable:true,get:function get(){return code_2.str;}});(0,_defineProperty3["default"])(exports,"strConcat",{enumerable:true,get:function get(){return code_2.strConcat;}});(0,_defineProperty3["default"])(exports,"nil",{enumerable:true,get:function get(){return code_2.nil;}});(0,_defineProperty3["default"])(exports,"getProperty",{enumerable:true,get:function get(){return code_2.getProperty;}});(0,_defineProperty3["default"])(exports,"stringify",{enumerable:true,get:function get(){return code_2.stringify;}});(0,_defineProperty3["default"])(exports,"regexpCode",{enumerable:true,get:function get(){return code_2.regexpCode;}});(0,_defineProperty3["default"])(exports,"Name",{enumerable:true,get:function get(){return code_2.Name;}});var scope_2=scope;(0,_defineProperty3["default"])(exports,"Scope",{enumerable:true,get:function get(){return scope_2.Scope;}});(0,_defineProperty3["default"])(exports,"ValueScope",{enumerable:true,get:function get(){return scope_2.ValueScope;}});(0,_defineProperty3["default"])(exports,"ValueScopeName",{enumerable:true,get:function get(){return scope_2.ValueScopeName;}});(0,_defineProperty3["default"])(exports,"varKinds",{enumerable:true,get:function get(){return scope_2.varKinds;}});exports.operators={GT:new code$1._Code(">"),GTE:new code$1._Code(">="),LT:new code$1._Code("<"),LTE:new code$1._Code("<="),EQ:new code$1._Code("==="),NEQ:new code$1._Code("!=="),NOT:new code$1._Code("!"),OR:new code$1._Code("||"),AND:new code$1._Code("&&"),ADD:new code$1._Code("+")};var Node=/*#__PURE__*/function(){function Node(){(0,_classCallCheck2["default"])(this,Node);}(0,_createClass2["default"])(Node,[{key:"optimizeNodes",value:function optimizeNodes(){return this;}},{key:"optimizeNames",value:function optimizeNames(_names,_constants){return this;}}]);return Node;}();var Def=/*#__PURE__*/function(_Node){(0,_inherits2["default"])(Def,_Node);var _super6=_createSuper(Def);function Def(varKind,name,rhs){var _this7;(0,_classCallCheck2["default"])(this,Def);_this7=_super6.call(this);_this7.varKind=varKind;_this7.name=name;_this7.rhs=rhs;return _this7;}(0,_createClass2["default"])(Def,[{key:"render",value:function render(_ref4){var _context40,_context41;var es5=_ref4.es5,_n=_ref4._n;var varKind=es5?scope.varKinds["var"]:this.varKind;var rhs=this.rhs===undefined?"":" = ".concat(this.rhs);return(0,_concat["default"])(_context40=(0,_concat["default"])(_context41="".concat(varKind," ")).call(_context41,this.name)).call(_context40,rhs,";")+_n;}},{key:"optimizeNames",value:function optimizeNames(names,constants){if(!names[this.name.str])return;if(this.rhs)this.rhs=optimizeExpr(this.rhs,names,constants);return this;}},{key:"names",get:function get(){return this.rhs instanceof code$1._CodeOrName?this.rhs.names:{};}}]);return Def;}(Node);var Assign=/*#__PURE__*/function(_Node2){(0,_inherits2["default"])(Assign,_Node2);var _super7=_createSuper(Assign);function Assign(lhs,rhs,sideEffects){var _this8;(0,_classCallCheck2["default"])(this,Assign);_this8=_super7.call(this);_this8.lhs=lhs;_this8.rhs=rhs;_this8.sideEffects=sideEffects;return _this8;}(0,_createClass2["default"])(Assign,[{key:"render",value:function render(_ref5){var _context42;var _n=_ref5._n;return(0,_concat["default"])(_context42="".concat(this.lhs," = ")).call(_context42,this.rhs,";")+_n;}},{key:"optimizeNames",value:function optimizeNames(names,constants){if(this.lhs instanceof code$1.Name&&!names[this.lhs.str]&&!this.sideEffects)return;this.rhs=optimizeExpr(this.rhs,names,constants);return this;}},{key:"names",get:function get(){var names=this.lhs instanceof code$1.Name?{}:_objectSpread({},this.lhs.names);return addExprNames(names,this.rhs);}}]);return Assign;}(Node);var AssignOp=/*#__PURE__*/function(_Assign){(0,_inherits2["default"])(AssignOp,_Assign);var _super8=_createSuper(AssignOp);function AssignOp(lhs,op,rhs,sideEffects){var _this9;(0,_classCallCheck2["default"])(this,AssignOp);_this9=_super8.call(this,lhs,rhs,sideEffects);_this9.op=op;return _this9;}(0,_createClass2["default"])(AssignOp,[{key:"render",value:function render(_ref6){var _context43,_context44;var _n=_ref6._n;return(0,_concat["default"])(_context43=(0,_concat["default"])(_context44="".concat(this.lhs," ")).call(_context44,this.op,"= ")).call(_context43,this.rhs,";")+_n;}}]);return AssignOp;}(Assign);var Label=/*#__PURE__*/function(_Node3){(0,_inherits2["default"])(Label,_Node3);var _super9=_createSuper(Label);function Label(label){var _this10;(0,_classCallCheck2["default"])(this,Label);_this10=_super9.call(this);_this10.label=label;_this10.names={};return _this10;}(0,_createClass2["default"])(Label,[{key:"render",value:function render(_ref7){var _n=_ref7._n;return"".concat(this.label,":")+_n;}}]);return Label;}(Node);var Break=/*#__PURE__*/function(_Node4){(0,_inherits2["default"])(Break,_Node4);var _super10=_createSuper(Break);function Break(label){var _this11;(0,_classCallCheck2["default"])(this,Break);_this11=_super10.call(this);_this11.label=label;_this11.names={};return _this11;}(0,_createClass2["default"])(Break,[{key:"render",value:function render(_ref8){var _n=_ref8._n;var label=this.label?" ".concat(this.label):"";return"break".concat(label,";")+_n;}}]);return Break;}(Node);var Throw=/*#__PURE__*/function(_Node5){(0,_inherits2["default"])(Throw,_Node5);var _super11=_createSuper(Throw);function Throw(error){var _this12;(0,_classCallCheck2["default"])(this,Throw);_this12=_super11.call(this);_this12.error=error;return _this12;}(0,_createClass2["default"])(Throw,[{key:"render",value:function render(_ref9){var _n=_ref9._n;return"throw ".concat(this.error,";")+_n;}},{key:"names",get:function get(){return this.error.names;}}]);return Throw;}(Node);var AnyCode=/*#__PURE__*/function(_Node6){(0,_inherits2["default"])(AnyCode,_Node6);var _super12=_createSuper(AnyCode);function AnyCode(code){var _this13;(0,_classCallCheck2["default"])(this,AnyCode);_this13=_super12.call(this);_this13.code=code;return _this13;}(0,_createClass2["default"])(AnyCode,[{key:"render",value:function render(_ref10){var _n=_ref10._n;return"".concat(this.code,";")+_n;}},{key:"optimizeNodes",value:function optimizeNodes(){return"".concat(this.code)?this:undefined;}},{key:"optimizeNames",value:function optimizeNames(names,constants){this.code=optimizeExpr(this.code,names,constants);return this;}},{key:"names",get:function get(){return this.code instanceof code$1._CodeOrName?this.code.names:{};}}]);return AnyCode;}(Node);var ParentNode=/*#__PURE__*/function(_Node7){(0,_inherits2["default"])(ParentNode,_Node7);var _super13=_createSuper(ParentNode);function ParentNode(){var _this14;var nodes=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];(0,_classCallCheck2["default"])(this,ParentNode);_this14=_super13.call(this);_this14.nodes=nodes;return _this14;}(0,_createClass2["default"])(ParentNode,[{key:"render",value:function render(opts){var _context45;return(0,_reduce["default"])(_context45=this.nodes).call(_context45,function(code,n){return code+n.render(opts);},"");}},{key:"optimizeNodes",value:function optimizeNodes(){var nodes=this.nodes;var i=nodes.length;while(i--){var _context46;var n=nodes[i].optimizeNodes();if((0,_isArray["default"])(n))(0,_splice["default"])(nodes).apply(nodes,(0,_concat["default"])(_context46=[i,1]).call(_context46,(0,_toConsumableArray2["default"])(n)));else if(n)nodes[i]=n;else(0,_splice["default"])(nodes).call(nodes,i,1);}return nodes.length>0?this:undefined;}},{key:"optimizeNames",value:function optimizeNames(names,constants){var nodes=this.nodes;var i=nodes.length;while(i--){// iterating backwards improves 1-pass optimization
var n=nodes[i];if(n.optimizeNames(names,constants))continue;subtractNames(names,n.names);(0,_splice["default"])(nodes).call(nodes,i,1);}return nodes.length>0?this:undefined;}},{key:"names",get:function get(){var _context47;return(0,_reduce["default"])(_context47=this.nodes).call(_context47,function(names,n){return addNames(names,n.names);},{});}}]);return ParentNode;}(Node);var BlockNode=/*#__PURE__*/function(_ParentNode){(0,_inherits2["default"])(BlockNode,_ParentNode);var _super14=_createSuper(BlockNode);function BlockNode(){(0,_classCallCheck2["default"])(this,BlockNode);return _super14.apply(this,arguments);}(0,_createClass2["default"])(BlockNode,[{key:"render",value:function render(opts){return"{"+opts._n+(0,_get2["default"])((0,_getPrototypeOf2["default"])(BlockNode.prototype),"render",this).call(this,opts)+"}"+opts._n;}}]);return BlockNode;}(ParentNode);var Root=/*#__PURE__*/function(_ParentNode2){(0,_inherits2["default"])(Root,_ParentNode2);var _super15=_createSuper(Root);function Root(){(0,_classCallCheck2["default"])(this,Root);return _super15.apply(this,arguments);}return Root;}(ParentNode);var Else=/*#__PURE__*/function(_BlockNode){(0,_inherits2["default"])(Else,_BlockNode);var _super16=_createSuper(Else);function Else(){(0,_classCallCheck2["default"])(this,Else);return _super16.apply(this,arguments);}return Else;}(BlockNode);Else.kind="else";var If=/*#__PURE__*/function(_BlockNode2){(0,_inherits2["default"])(If,_BlockNode2);var _super17=_createSuper(If);function If(condition,nodes){var _this15;(0,_classCallCheck2["default"])(this,If);_this15=_super17.call(this,nodes);_this15.condition=condition;return _this15;}(0,_createClass2["default"])(If,[{key:"render",value:function render(opts){var code="if(".concat(this.condition,")")+(0,_get2["default"])((0,_getPrototypeOf2["default"])(If.prototype),"render",this).call(this,opts);if(this["else"])code+="else "+this["else"].render(opts);return code;}},{key:"optimizeNodes",value:function optimizeNodes(){(0,_get2["default"])((0,_getPrototypeOf2["default"])(If.prototype),"optimizeNodes",this).call(this);var cond=this.condition;if(cond===true)return this.nodes;// else is ignored here
var e=this["else"];if(e){var ns=e.optimizeNodes();e=this["else"]=(0,_isArray["default"])(ns)?new Else(ns):ns;}if(e){if(cond===false)return e instanceof If?e:e.nodes;if(this.nodes.length)return this;return new If(not(cond),e instanceof If?[e]:e.nodes);}if(cond===false||!this.nodes.length)return undefined;return this;}},{key:"optimizeNames",value:function optimizeNames(names,constants){var _a;this["else"]=(_a=this["else"])===null||_a===void 0?void 0:_a.optimizeNames(names,constants);if(!((0,_get2["default"])((0,_getPrototypeOf2["default"])(If.prototype),"optimizeNames",this).call(this,names,constants)||this["else"]))return;this.condition=optimizeExpr(this.condition,names,constants);return this;}},{key:"names",get:function get(){var names=(0,_get2["default"])((0,_getPrototypeOf2["default"])(If.prototype),"names",this);addExprNames(names,this.condition);if(this["else"])addNames(names,this["else"].names);return names;}}]);return If;}(BlockNode);If.kind="if";var For=/*#__PURE__*/function(_BlockNode3){(0,_inherits2["default"])(For,_BlockNode3);var _super18=_createSuper(For);function For(){(0,_classCallCheck2["default"])(this,For);return _super18.apply(this,arguments);}return For;}(BlockNode);For.kind="for";var ForLoop=/*#__PURE__*/function(_For){(0,_inherits2["default"])(ForLoop,_For);var _super19=_createSuper(ForLoop);function ForLoop(iteration){var _this16;(0,_classCallCheck2["default"])(this,ForLoop);_this16=_super19.call(this);_this16.iteration=iteration;return _this16;}(0,_createClass2["default"])(ForLoop,[{key:"render",value:function render(opts){return"for(".concat(this.iteration,")")+(0,_get2["default"])((0,_getPrototypeOf2["default"])(ForLoop.prototype),"render",this).call(this,opts);}},{key:"optimizeNames",value:function optimizeNames(names,constants){if(!(0,_get2["default"])((0,_getPrototypeOf2["default"])(ForLoop.prototype),"optimizeNames",this).call(this,names,constants))return;this.iteration=optimizeExpr(this.iteration,names,constants);return this;}},{key:"names",get:function get(){return addNames((0,_get2["default"])((0,_getPrototypeOf2["default"])(ForLoop.prototype),"names",this),this.iteration.names);}}]);return ForLoop;}(For);var ForRange=/*#__PURE__*/function(_For2){(0,_inherits2["default"])(ForRange,_For2);var _super20=_createSuper(ForRange);function ForRange(varKind,name,from,to){var _this17;(0,_classCallCheck2["default"])(this,ForRange);_this17=_super20.call(this);_this17.varKind=varKind;_this17.name=name;_this17.from=from;_this17.to=to;return _this17;}(0,_createClass2["default"])(ForRange,[{key:"render",value:function render(opts){var _context48,_context49,_context50,_context51,_context52;var varKind=opts.es5?scope.varKinds["var"]:this.varKind;var name=this.name,from=this.from,to=this.to;return(0,_concat["default"])(_context48=(0,_concat["default"])(_context49=(0,_concat["default"])(_context50=(0,_concat["default"])(_context51=(0,_concat["default"])(_context52="for(".concat(varKind," ")).call(_context52,name,"=")).call(_context51,from,"; ")).call(_context50,name,"<")).call(_context49,to,"; ")).call(_context48,name,"++)")+(0,_get2["default"])((0,_getPrototypeOf2["default"])(ForRange.prototype),"render",this).call(this,opts);}},{key:"names",get:function get(){var names=addExprNames((0,_get2["default"])((0,_getPrototypeOf2["default"])(ForRange.prototype),"names",this),this.from);return addExprNames(names,this.to);}}]);return ForRange;}(For);var ForIter=/*#__PURE__*/function(_For3){(0,_inherits2["default"])(ForIter,_For3);var _super21=_createSuper(ForIter);function ForIter(loop,varKind,name,iterable){var _this18;(0,_classCallCheck2["default"])(this,ForIter);_this18=_super21.call(this);_this18.loop=loop;_this18.varKind=varKind;_this18.name=name;_this18.iterable=iterable;return _this18;}(0,_createClass2["default"])(ForIter,[{key:"render",value:function render(opts){var _context53,_context54,_context55;return(0,_concat["default"])(_context53=(0,_concat["default"])(_context54=(0,_concat["default"])(_context55="for(".concat(this.varKind," ")).call(_context55,this.name," ")).call(_context54,this.loop," ")).call(_context53,this.iterable,")")+(0,_get2["default"])((0,_getPrototypeOf2["default"])(ForIter.prototype),"render",this).call(this,opts);}},{key:"optimizeNames",value:function optimizeNames(names,constants){if(!(0,_get2["default"])((0,_getPrototypeOf2["default"])(ForIter.prototype),"optimizeNames",this).call(this,names,constants))return;this.iterable=optimizeExpr(this.iterable,names,constants);return this;}},{key:"names",get:function get(){return addNames((0,_get2["default"])((0,_getPrototypeOf2["default"])(ForIter.prototype),"names",this),this.iterable.names);}}]);return ForIter;}(For);var Func=/*#__PURE__*/function(_BlockNode4){(0,_inherits2["default"])(Func,_BlockNode4);var _super22=_createSuper(Func);function Func(name,args,async){var _this19;(0,_classCallCheck2["default"])(this,Func);_this19=_super22.call(this);_this19.name=name;_this19.args=args;_this19.async=async;return _this19;}(0,_createClass2["default"])(Func,[{key:"render",value:function render(opts){var _context56,_context57;var _async=this.async?"async ":"";return(0,_concat["default"])(_context56=(0,_concat["default"])(_context57="".concat(_async,"function ")).call(_context57,this.name,"(")).call(_context56,this.args,")")+(0,_get2["default"])((0,_getPrototypeOf2["default"])(Func.prototype),"render",this).call(this,opts);}}]);return Func;}(BlockNode);Func.kind="func";var Return=/*#__PURE__*/function(_ParentNode3){(0,_inherits2["default"])(Return,_ParentNode3);var _super23=_createSuper(Return);function Return(){(0,_classCallCheck2["default"])(this,Return);return _super23.apply(this,arguments);}(0,_createClass2["default"])(Return,[{key:"render",value:function render(opts){return"return "+(0,_get2["default"])((0,_getPrototypeOf2["default"])(Return.prototype),"render",this).call(this,opts);}}]);return Return;}(ParentNode);Return.kind="return";var Try=/*#__PURE__*/function(_BlockNode5){(0,_inherits2["default"])(Try,_BlockNode5);var _super24=_createSuper(Try);function Try(){(0,_classCallCheck2["default"])(this,Try);return _super24.apply(this,arguments);}(0,_createClass2["default"])(Try,[{key:"render",value:function render(opts){var code="try"+(0,_get2["default"])((0,_getPrototypeOf2["default"])(Try.prototype),"render",this).call(this,opts);if(this["catch"])code+=this["catch"].render(opts);if(this["finally"])code+=this["finally"].render(opts);return code;}},{key:"optimizeNodes",value:function optimizeNodes(){var _a,_b;(0,_get2["default"])((0,_getPrototypeOf2["default"])(Try.prototype),"optimizeNodes",this).call(this);(_a=this["catch"])===null||_a===void 0?void 0:_a.optimizeNodes();(_b=this["finally"])===null||_b===void 0?void 0:_b.optimizeNodes();return this;}},{key:"optimizeNames",value:function optimizeNames(names,constants){var _a,_b;(0,_get2["default"])((0,_getPrototypeOf2["default"])(Try.prototype),"optimizeNames",this).call(this,names,constants);(_a=this["catch"])===null||_a===void 0?void 0:_a.optimizeNames(names,constants);(_b=this["finally"])===null||_b===void 0?void 0:_b.optimizeNames(names,constants);return this;}},{key:"names",get:function get(){var names=(0,_get2["default"])((0,_getPrototypeOf2["default"])(Try.prototype),"names",this);if(this["catch"])addNames(names,this["catch"].names);if(this["finally"])addNames(names,this["finally"].names);return names;}}]);return Try;}(BlockNode);var Catch=/*#__PURE__*/function(_BlockNode6){(0,_inherits2["default"])(Catch,_BlockNode6);var _super25=_createSuper(Catch);function Catch(error){var _this20;(0,_classCallCheck2["default"])(this,Catch);_this20=_super25.call(this);_this20.error=error;return _this20;}(0,_createClass2["default"])(Catch,[{key:"render",value:function render(opts){return"catch(".concat(this.error,")")+(0,_get2["default"])((0,_getPrototypeOf2["default"])(Catch.prototype),"render",this).call(this,opts);}}]);return Catch;}(BlockNode);Catch.kind="catch";var Finally=/*#__PURE__*/function(_BlockNode7){(0,_inherits2["default"])(Finally,_BlockNode7);var _super26=_createSuper(Finally);function Finally(){(0,_classCallCheck2["default"])(this,Finally);return _super26.apply(this,arguments);}(0,_createClass2["default"])(Finally,[{key:"render",value:function render(opts){return"finally"+(0,_get2["default"])((0,_getPrototypeOf2["default"])(Finally.prototype),"render",this).call(this,opts);}}]);return Finally;}(BlockNode);Finally.kind="finally";var CodeGen=/*#__PURE__*/function(){function CodeGen(extScope){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};(0,_classCallCheck2["default"])(this,CodeGen);this._values={};this._blockStarts=[];this._constants={};this.opts=_objectSpread(_objectSpread({},opts),{},{_n:opts.lines?"\n":""});this._extScope=extScope;this._scope=new scope.Scope({parent:extScope});this._nodes=[new Root()];}(0,_createClass2["default"])(CodeGen,[{key:"toString",value:function toString(){return this._root.render(this.opts);}// returns unique name in the internal scope
},{key:"name",value:function name(prefix){return this._scope.name(prefix);}// reserves unique name in the external scope
},{key:"scopeName",value:function scopeName(prefix){return this._extScope.name(prefix);}// reserves unique name in the external scope and assigns value to it
},{key:"scopeValue",value:function scopeValue(prefixOrName,value){var name=this._extScope.value(prefixOrName,value);var vs=this._values[name.prefix]||(this._values[name.prefix]=new _set["default"]());vs.add(name);return name;}},{key:"getScopeValue",value:function getScopeValue(prefix,keyOrRef){return this._extScope.getValue(prefix,keyOrRef);}// return code that assigns values in the external scope to the names that are used internally
// (same names that were returned by gen.scopeName or gen.scopeValue)
},{key:"scopeRefs",value:function scopeRefs(scopeName){return this._extScope.scopeRefs(scopeName,this._values);}},{key:"scopeCode",value:function scopeCode(){return this._extScope.scopeCode(this._values);}},{key:"_def",value:function _def(varKind,nameOrPrefix,rhs,constant){var name=this._scope.toName(nameOrPrefix);if(rhs!==undefined&&constant)this._constants[name.str]=rhs;this._leafNode(new Def(varKind,name,rhs));return name;}// `const` declaration (`var` in es5 mode)
},{key:"const",value:function _const(nameOrPrefix,rhs,_constant){return this._def(scope.varKinds["const"],nameOrPrefix,rhs,_constant);}// `let` declaration with optional assignment (`var` in es5 mode)
},{key:"let",value:function _let(nameOrPrefix,rhs,_constant){return this._def(scope.varKinds["let"],nameOrPrefix,rhs,_constant);}// `var` declaration with optional assignment
},{key:"var",value:function _var(nameOrPrefix,rhs,_constant){return this._def(scope.varKinds["var"],nameOrPrefix,rhs,_constant);}// assignment code
},{key:"assign",value:function assign(lhs,rhs,sideEffects){return this._leafNode(new Assign(lhs,rhs,sideEffects));}// `+=` code
},{key:"add",value:function add(lhs,rhs){return this._leafNode(new AssignOp(lhs,exports.operators.ADD,rhs));}// appends passed SafeExpr to code or executes Block
},{key:"code",value:function code(c){if(typeof c=="function")c();else if(c!==code$1.nil)this._leafNode(new AnyCode(c));return this;}// returns code for object literal for the passed argument list of key-value pairs
},{key:"object",value:function object(){var code=["{"];for(var _len4=arguments.length,keyValues=new Array(_len4),_key4=0;_key4<_len4;_key4++){keyValues[_key4]=arguments[_key4];}for(var _i2=0,_keyValues=keyValues;_i2<_keyValues.length;_i2++){var _keyValues$_i=(0,_slicedToArray2["default"])(_keyValues[_i2],2),key=_keyValues$_i[0],value=_keyValues$_i[1];if(code.length>1)code.push(",");code.push(key);if(key!==value||this.opts.es5){code.push(":");code$1.addCodeArg(code,value);}}code.push("}");return new code$1._Code(code);}// `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)
},{key:"if",value:function _if(condition,thenBody,elseBody){this._blockNode(new If(condition));if(thenBody&&elseBody){this.code(thenBody)["else"]().code(elseBody).endIf();}else if(thenBody){this.code(thenBody).endIf();}else if(elseBody){throw new Error('CodeGen: "else" body without "then" body');}return this;}// `else if` clause - invalid without `if` or after `else` clauses
},{key:"elseIf",value:function elseIf(condition){return this._elseNode(new If(condition));}// `else` clause - only valid after `if` or `else if` clauses
},{key:"else",value:function _else(){return this._elseNode(new Else());}// end `if` statement (needed if gen.if was used only with condition)
},{key:"endIf",value:function endIf(){return this._endBlockNode(If,Else);}},{key:"_for",value:function _for(node,forBody){this._blockNode(node);if(forBody)this.code(forBody).endFor();return this;}// a generic `for` clause (or statement if `forBody` is passed)
},{key:"for",value:function _for(iteration,forBody){return this._for(new ForLoop(iteration),forBody);}// `for` statement for a range of values
},{key:"forRange",value:function forRange(nameOrPrefix,from,to,forBody){var varKind=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.opts.es5?scope.varKinds["var"]:scope.varKinds["let"];var name=this._scope.toName(nameOrPrefix);return this._for(new ForRange(varKind,name,from,to),function(){return forBody(name);});}// `for-of` statement (in es5 mode replace with a normal for loop)
},{key:"forOf",value:function forOf(nameOrPrefix,iterable,forBody){var _this21=this;var varKind=arguments.length>3&&arguments[3]!==undefined?arguments[3]:scope.varKinds["const"];var name=this._scope.toName(nameOrPrefix);if(this.opts.es5){var arr=iterable instanceof code$1.Name?iterable:this["var"]("_arr",iterable);return this.forRange("_i",0,code$1._(_templateObject8||(_templateObject8=(0,_taggedTemplateLiteral2["default"])(["",".length"])),arr),function(i){_this21["var"](name,code$1._(_templateObject9||(_templateObject9=(0,_taggedTemplateLiteral2["default"])(["","[","]"])),arr,i));forBody(name);});}return this._for(new ForIter("of",varKind,name,iterable),function(){return forBody(name);});}// `for-in` statement.
// With option `ownProperties` replaced with a `for-of` loop for object keys
},{key:"forIn",value:function forIn(nameOrPrefix,obj,forBody){var varKind=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.opts.es5?scope.varKinds["var"]:scope.varKinds["const"];if(this.opts.ownProperties){return this.forOf(nameOrPrefix,code$1._(_templateObject10||(_templateObject10=(0,_taggedTemplateLiteral2["default"])(["Object.keys(",")"])),obj),forBody);}var name=this._scope.toName(nameOrPrefix);return this._for(new ForIter("in",varKind,name,obj),function(){return forBody(name);});}// end `for` loop
},{key:"endFor",value:function endFor(){return this._endBlockNode(For);}// `label` statement
},{key:"label",value:function label(_label){return this._leafNode(new Label(_label));}// `break` statement
},{key:"break",value:function _break(label){return this._leafNode(new Break(label));}// `return` statement
},{key:"return",value:function _return(value){var node=new Return();this._blockNode(node);this.code(value);if(node.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Return);}// `try` statement
},{key:"try",value:function _try(tryBody,catchCode,finallyCode){if(!catchCode&&!finallyCode)throw new Error('CodeGen: "try" without "catch" and "finally"');var node=new Try();this._blockNode(node);this.code(tryBody);if(catchCode){var _error=this.name("e");this._currNode=node["catch"]=new Catch(_error);catchCode(_error);}if(finallyCode){this._currNode=node["finally"]=new Finally();this.code(finallyCode);}return this._endBlockNode(Catch,Finally);}// `throw` statement
},{key:"throw",value:function _throw(error){return this._leafNode(new Throw(error));}// start self-balancing block
},{key:"block",value:function block(body,nodeCount){this._blockStarts.push(this._nodes.length);if(body)this.code(body).endBlock(nodeCount);return this;}// end the current self-balancing block
},{key:"endBlock",value:function endBlock(nodeCount){var len=this._blockStarts.pop();if(len===undefined)throw new Error("CodeGen: not in self-balancing block");var toClose=this._nodes.length-len;if(toClose<0||nodeCount!==undefined&&toClose!==nodeCount){var _context58;throw new Error((0,_concat["default"])(_context58="CodeGen: wrong number of nodes: ".concat(toClose," vs ")).call(_context58,nodeCount," expected"));}this._nodes.length=len;return this;}// `function` heading (or definition if funcBody is passed)
},{key:"func",value:function func(name){var args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:code$1.nil;var async=arguments.length>2?arguments[2]:undefined;var funcBody=arguments.length>3?arguments[3]:undefined;this._blockNode(new Func(name,args,async));if(funcBody)this.code(funcBody).endFunc();return this;}// end function definition
},{key:"endFunc",value:function endFunc(){return this._endBlockNode(Func);}},{key:"optimize",value:function optimize(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;while(n-->0){this._root.optimizeNodes();this._root.optimizeNames(this._root.names,this._constants);}}},{key:"_leafNode",value:function _leafNode(node){this._currNode.nodes.push(node);return this;}},{key:"_blockNode",value:function _blockNode(node){this._currNode.nodes.push(node);this._nodes.push(node);}},{key:"_endBlockNode",value:function _endBlockNode(N1,N2){var _context59;var n=this._currNode;if(n instanceof N1||N2&&n instanceof N2){this._nodes.pop();return this;}throw new Error("CodeGen: not in block \"".concat(N2?(0,_concat["default"])(_context59="".concat(N1.kind,"/")).call(_context59,N2.kind):N1.kind,"\""));}},{key:"_elseNode",value:function _elseNode(node){var n=this._currNode;if(!(n instanceof If)){throw new Error('CodeGen: "else" without "if"');}this._currNode=n["else"]=node;return this;}},{key:"_root",get:function get(){return this._nodes[0];}},{key:"_currNode",get:function get(){var ns=this._nodes;return ns[ns.length-1];},set:function set(node){var ns=this._nodes;ns[ns.length-1]=node;}}]);return CodeGen;}();exports.CodeGen=CodeGen;function addNames(names,from){for(var n in from){names[n]=(names[n]||0)+(from[n]||0);}return names;}function addExprNames(names,from){return from instanceof code$1._CodeOrName?addNames(names,from.names):names;}function optimizeExpr(expr,names,constants){var _context60;if(expr instanceof code$1.Name)return replaceName(expr);if(!canOptimize(expr))return expr;return new code$1._Code((0,_reduce["default"])(_context60=expr._items).call(_context60,function(items,c){if(c instanceof code$1.Name)c=replaceName(c);if(c instanceof code$1._Code)items.push.apply(items,(0,_toConsumableArray2["default"])(c._items));else items.push(c);return items;},[]));function replaceName(n){var c=constants[n.str];if(c===undefined||names[n.str]!==1)return n;delete names[n.str];return c;}function canOptimize(e){var _context61;return e instanceof code$1._Code&&(0,_some["default"])(_context61=e._items).call(_context61,function(c){return c instanceof code$1.Name&&names[c.str]===1&&constants[c.str]!==undefined;});}}function subtractNames(names,from){for(var n in from){names[n]=(names[n]||0)-(from[n]||0);}}function not(x){return typeof x=="boolean"||typeof x=="number"||x===null?!x:code$1._(_templateObject11||(_templateObject11=(0,_taggedTemplateLiteral2["default"])(["!",""])),par(x));}exports.not=not;var andCode=mappend(exports.operators.AND);// boolean AND (&&) expression with the passed arguments
function and(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5];}return(0,_reduce["default"])(args).call(args,andCode);}exports.and=and;var orCode=mappend(exports.operators.OR);// boolean OR (||) expression with the passed arguments
function or(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++){args[_key6]=arguments[_key6];}return(0,_reduce["default"])(args).call(args,orCode);}exports.or=or;function mappend(op){return function(x,y){return x===code$1.nil?y:y===code$1.nil?x:code$1._(_templateObject12||(_templateObject12=(0,_taggedTemplateLiteral2["default"])([""," "," ",""])),par(x),op,par(y));};}function par(x){return x instanceof code$1.Name?x:code$1._(_templateObject13||(_templateObject13=(0,_taggedTemplateLiteral2["default"])(["(",")"])),x);}});var util=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.checkStrictMode=exports.getErrorPath=exports.Type=exports.useFunc=exports.setEvaluated=exports.evaluatedPropsToName=exports.mergeEvaluated=exports.eachItem=exports.unescapeJsonPointer=exports.escapeJsonPointer=exports.escapeFragment=exports.unescapeFragment=exports.schemaRefOrVal=exports.schemaHasRulesButRef=exports.schemaHasRules=exports.checkUnknownRules=exports.alwaysValidSchema=exports.toHash=void 0;// TODO refactor to use Set
function toHash(arr){var hash={};var _iterator4=_createForOfIteratorHelper(arr),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var item=_step4.value;hash[item]=true;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return hash;}exports.toHash=toHash;function alwaysValidSchema(it,schema){if(typeof schema=="boolean")return schema;if((0,_keys["default"])(schema).length===0)return true;checkUnknownRules(it,schema);return!schemaHasRules(schema,it.self.RULES.all);}exports.alwaysValidSchema=alwaysValidSchema;function checkUnknownRules(it){var schema=arguments.length>1&&arguments[1]!==undefined?arguments[1]:it.schema;var opts=it.opts,self=it.self;if(!opts.strictSchema)return;if(typeof schema==="boolean")return;var rules=self.RULES.keywords;for(var key in schema){if(!rules[key])checkStrictMode(it,"unknown keyword: \"".concat(key,"\""));}}exports.checkUnknownRules=checkUnknownRules;function schemaHasRules(schema,rules){if(typeof schema=="boolean")return!schema;for(var key in schema){if(rules[key])return true;}return false;}exports.schemaHasRules=schemaHasRules;function schemaHasRulesButRef(schema,RULES){if(typeof schema=="boolean")return!schema;for(var key in schema){if(key!=="$ref"&&RULES.all[key])return true;}return false;}exports.schemaHasRulesButRef=schemaHasRulesButRef;function schemaRefOrVal(_ref11,schema,keyword,$data){var topSchemaRef=_ref11.topSchemaRef,schemaPath=_ref11.schemaPath;if(!$data){if(typeof schema=="number"||typeof schema=="boolean")return schema;if(typeof schema=="string")return codegen._(_templateObject14||(_templateObject14=(0,_taggedTemplateLiteral2["default"])(["",""])),schema);}return codegen._(_templateObject15||(_templateObject15=(0,_taggedTemplateLiteral2["default"])(["","","",""])),topSchemaRef,schemaPath,codegen.getProperty(keyword));}exports.schemaRefOrVal=schemaRefOrVal;function unescapeFragment(str){return unescapeJsonPointer(decodeURIComponent(str));}exports.unescapeFragment=unescapeFragment;function escapeFragment(str){return encodeURIComponent(escapeJsonPointer(str));}exports.escapeFragment=escapeFragment;function escapeJsonPointer(str){if(typeof str=="number")return"".concat(str);return str.replace(/~/g,"~0").replace(/\//g,"~1");}exports.escapeJsonPointer=escapeJsonPointer;function unescapeJsonPointer(str){return str.replace(/~1/g,"/").replace(/~0/g,"~");}exports.unescapeJsonPointer=unescapeJsonPointer;function eachItem(xs,f){if((0,_isArray["default"])(xs)){var _iterator5=_createForOfIteratorHelper(xs),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var x=_step5.value;f(x);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}else{f(xs);}}exports.eachItem=eachItem;function makeMergeEvaluated(_ref12){var mergeNames=_ref12.mergeNames,mergeToName=_ref12.mergeToName,mergeValues=_ref12.mergeValues,resultToName=_ref12.resultToName;return function(gen,from,to,toName){var res=to===undefined?from:to instanceof codegen.Name?(from instanceof codegen.Name?mergeNames(gen,from,to):mergeToName(gen,from,to),to):from instanceof codegen.Name?(mergeToName(gen,to,from),from):mergeValues(from,to);return toName===codegen.Name&&!(res instanceof codegen.Name)?resultToName(gen,res):res;};}exports.mergeEvaluated={props:makeMergeEvaluated({mergeNames:function mergeNames(gen,from,to){return gen["if"](codegen._(_templateObject16||(_templateObject16=(0,_taggedTemplateLiteral2["default"])([""," !== true && "," !== undefined"])),to,from),function(){gen["if"](codegen._(_templateObject17||(_templateObject17=(0,_taggedTemplateLiteral2["default"])([""," === true"])),from),function(){return gen.assign(to,true);},function(){return gen.assign(to,codegen._(_templateObject18||(_templateObject18=(0,_taggedTemplateLiteral2["default"])([""," || {}"])),to)).code(codegen._(_templateObject19||(_templateObject19=(0,_taggedTemplateLiteral2["default"])(["Object.assign(",", ",")"])),to,from));});});},mergeToName:function mergeToName(gen,from,to){return gen["if"](codegen._(_templateObject20||(_templateObject20=(0,_taggedTemplateLiteral2["default"])([""," !== true"])),to),function(){if(from===true){gen.assign(to,true);}else{gen.assign(to,codegen._(_templateObject21||(_templateObject21=(0,_taggedTemplateLiteral2["default"])([""," || {}"])),to));setEvaluated(gen,to,from);}});},mergeValues:function mergeValues(from,to){return from===true?true:_objectSpread(_objectSpread({},from),to);},resultToName:evaluatedPropsToName}),items:makeMergeEvaluated({mergeNames:function mergeNames(gen,from,to){return gen["if"](codegen._(_templateObject22||(_templateObject22=(0,_taggedTemplateLiteral2["default"])([""," !== true && "," !== undefined"])),to,from),function(){return gen.assign(to,codegen._(_templateObject23||(_templateObject23=(0,_taggedTemplateLiteral2["default"])([""," === true ? true : "," > "," ? "," : ",""])),from,to,from,to,from));});},mergeToName:function mergeToName(gen,from,to){return gen["if"](codegen._(_templateObject24||(_templateObject24=(0,_taggedTemplateLiteral2["default"])([""," !== true"])),to),function(){return gen.assign(to,from===true?true:codegen._(_templateObject25||(_templateObject25=(0,_taggedTemplateLiteral2["default"])([""," > "," ? "," : ",""])),to,from,to,from));});},mergeValues:function mergeValues(from,to){return from===true?true:Math.max(from,to);},resultToName:function resultToName(gen,items){return gen["var"]("items",items);}})};function evaluatedPropsToName(gen,ps){if(ps===true)return gen["var"]("props",true);var props=gen["var"]("props",codegen._(_templateObject26||(_templateObject26=(0,_taggedTemplateLiteral2["default"])(["{}"]))));if(ps!==undefined)setEvaluated(gen,props,ps);return props;}exports.evaluatedPropsToName=evaluatedPropsToName;function setEvaluated(gen,props,ps){var _context62;(0,_forEach["default"])(_context62=(0,_keys["default"])(ps)).call(_context62,function(p){return gen.assign(codegen._(_templateObject27||(_templateObject27=(0,_taggedTemplateLiteral2["default"])(["","",""])),props,codegen.getProperty(p)),true);});}exports.setEvaluated=setEvaluated;var snippets={};function useFunc(gen,f){return gen.scopeValue("func",{ref:f,code:snippets[f.code]||(snippets[f.code]=new code$1._Code(f.code))});}exports.useFunc=useFunc;var Type;(function(Type){Type[Type["Num"]=0]="Num";Type[Type["Str"]=1]="Str";})(Type=exports.Type||(exports.Type={}));function getErrorPath(dataProp,dataPropType,jsPropertySyntax){// let path
if(dataProp instanceof codegen.Name){var isNumber=dataPropType===Type.Num;return jsPropertySyntax?isNumber?codegen._(_templateObject28||(_templateObject28=(0,_taggedTemplateLiteral2["default"])(["\"[\" + "," + \"]\""])),dataProp):codegen._(_templateObject29||(_templateObject29=(0,_taggedTemplateLiteral2["default"])(["\"['\" + "," + \"']\""])),dataProp):isNumber?codegen._(_templateObject30||(_templateObject30=(0,_taggedTemplateLiteral2["default"])(["\"/\" + ",""])),dataProp):codegen._(_templateObject31||(_templateObject31=(0,_taggedTemplateLiteral2["default"])(["\"/\" + ",".replace(/~/g, \"~0\").replace(/\\//g, \"~1\")"],["\"/\" + ",".replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")"])),dataProp);// TODO maybe use global escapePointer
}return jsPropertySyntax?codegen.getProperty(dataProp).toString():"/"+escapeJsonPointer(dataProp);}exports.getErrorPath=getErrorPath;function checkStrictMode(it,msg){var mode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:it.opts.strictSchema;if(!mode)return;msg="strict mode: ".concat(msg);if(mode===true)throw new Error(msg);it.self.logger.warn(msg);}exports.checkStrictMode=checkStrictMode;});var names={// validation function arguments
data:new codegen.Name("data"),// args passed from referencing schema
valCxt:new codegen.Name("valCxt"),instancePath:new codegen.Name("instancePath"),parentData:new codegen.Name("parentData"),parentDataProperty:new codegen.Name("parentDataProperty"),rootData:new codegen.Name("rootData"),dynamicAnchors:new codegen.Name("dynamicAnchors"),// function scoped variables
vErrors:new codegen.Name("vErrors"),errors:new codegen.Name("errors"),"this":new codegen.Name("this"),// "globals"
self:new codegen.Name("self"),scope:new codegen.Name("scope"),// JTD serialize/parse name for JSON string and position
json:new codegen.Name("json"),jsonPos:new codegen.Name("jsonPos"),jsonLen:new codegen.Name("jsonLen"),jsonPart:new codegen.Name("jsonPart")};var _default$z=names;var names_1=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$z},'__esModule',{value:true});var errors=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.extendErrors=exports.resetErrorsCount=exports.reportExtraError=exports.reportError=exports.keyword$DataError=exports.keywordError=void 0;exports.keywordError={message:function message(_ref13){var keyword=_ref13.keyword;return codegen.str(_templateObject32||(_templateObject32=(0,_taggedTemplateLiteral2["default"])(["should pass \"","\" keyword validation"])),keyword);}};exports.keyword$DataError={message:function message(_ref14){var keyword=_ref14.keyword,schemaType=_ref14.schemaType;return schemaType?codegen.str(_templateObject33||(_templateObject33=(0,_taggedTemplateLiteral2["default"])(["\"","\" keyword must be "," ($data)"])),keyword,schemaType):codegen.str(_templateObject34||(_templateObject34=(0,_taggedTemplateLiteral2["default"])(["\"","\" keyword is invalid ($data)"])),keyword);}};function reportError(cxt){var error=arguments.length>1&&arguments[1]!==undefined?arguments[1]:exports.keywordError;var errorPaths=arguments.length>2?arguments[2]:undefined;var overrideAllErrors=arguments.length>3?arguments[3]:undefined;var it=cxt.it;var gen=it.gen,compositeRule=it.compositeRule,allErrors=it.allErrors;var errObj=errorObjectCode(cxt,error,errorPaths);if(overrideAllErrors!==null&&overrideAllErrors!==void 0?overrideAllErrors:compositeRule||allErrors){addError(gen,errObj);}else{returnErrors(it,codegen._(_templateObject35||(_templateObject35=(0,_taggedTemplateLiteral2["default"])(["[","]"])),errObj));}}exports.reportError=reportError;function reportExtraError(cxt){var error=arguments.length>1&&arguments[1]!==undefined?arguments[1]:exports.keywordError;var errorPaths=arguments.length>2?arguments[2]:undefined;var it=cxt.it;var gen=it.gen,compositeRule=it.compositeRule,allErrors=it.allErrors;var errObj=errorObjectCode(cxt,error,errorPaths);addError(gen,errObj);if(!(compositeRule||allErrors)){returnErrors(it,names_1["default"].vErrors);}}exports.reportExtraError=reportExtraError;function resetErrorsCount(gen,errsCount){gen.assign(names_1["default"].errors,errsCount);gen["if"](codegen._(_templateObject36||(_templateObject36=(0,_taggedTemplateLiteral2["default"])([""," !== null"])),names_1["default"].vErrors),function(){return gen["if"](errsCount,function(){return gen.assign(codegen._(_templateObject37||(_templateObject37=(0,_taggedTemplateLiteral2["default"])(["",".length"])),names_1["default"].vErrors),errsCount);},function(){return gen.assign(names_1["default"].vErrors,null);});});}exports.resetErrorsCount=resetErrorsCount;function extendErrors(_ref15){var gen=_ref15.gen,keyword=_ref15.keyword,schemaValue=_ref15.schemaValue,data=_ref15.data,errsCount=_ref15.errsCount,it=_ref15.it;/* istanbul ignore if */if(errsCount===undefined)throw new Error("ajv implementation error");var err=gen.name("err");gen.forRange("i",errsCount,names_1["default"].errors,function(i){gen["const"](err,codegen._(_templateObject38||(_templateObject38=(0,_taggedTemplateLiteral2["default"])(["","[","]"])),names_1["default"].vErrors,i));gen["if"](codegen._(_templateObject39||(_templateObject39=(0,_taggedTemplateLiteral2["default"])(["",".instancePath === undefined"])),err),function(){return gen.assign(codegen._(_templateObject40||(_templateObject40=(0,_taggedTemplateLiteral2["default"])(["",".instancePath"])),err),codegen.strConcat(names_1["default"].instancePath,it.errorPath));});gen.assign(codegen._(_templateObject41||(_templateObject41=(0,_taggedTemplateLiteral2["default"])(["",".schemaPath"])),err),codegen.str(_templateObject42||(_templateObject42=(0,_taggedTemplateLiteral2["default"])(["","/",""])),it.errSchemaPath,keyword));if(it.opts.verbose){gen.assign(codegen._(_templateObject43||(_templateObject43=(0,_taggedTemplateLiteral2["default"])(["",".schema"])),err),schemaValue);gen.assign(codegen._(_templateObject44||(_templateObject44=(0,_taggedTemplateLiteral2["default"])(["",".data"])),err),data);}});}exports.extendErrors=extendErrors;function addError(gen,errObj){var err=gen["const"]("err",errObj);gen["if"](codegen._(_templateObject45||(_templateObject45=(0,_taggedTemplateLiteral2["default"])([""," === null"])),names_1["default"].vErrors),function(){return gen.assign(names_1["default"].vErrors,codegen._(_templateObject46||(_templateObject46=(0,_taggedTemplateLiteral2["default"])(["[","]"])),err));},codegen._(_templateObject47||(_templateObject47=(0,_taggedTemplateLiteral2["default"])(["",".push(",")"])),names_1["default"].vErrors,err));gen.code(codegen._(_templateObject48||(_templateObject48=(0,_taggedTemplateLiteral2["default"])(["","++"])),names_1["default"].errors));}function returnErrors(it,errs){var gen=it.gen,validateName=it.validateName,schemaEnv=it.schemaEnv;if(schemaEnv.$async){gen["throw"](codegen._(_templateObject49||(_templateObject49=(0,_taggedTemplateLiteral2["default"])(["new ","(",")"])),it.ValidationError,errs));}else{gen.assign(codegen._(_templateObject50||(_templateObject50=(0,_taggedTemplateLiteral2["default"])(["",".errors"])),validateName),errs);gen["return"](false);}}var E={keyword:new codegen.Name("keyword"),schemaPath:new codegen.Name("schemaPath"),params:new codegen.Name("params"),propertyName:new codegen.Name("propertyName"),message:new codegen.Name("message"),schema:new codegen.Name("schema"),parentSchema:new codegen.Name("parentSchema")};function errorObjectCode(cxt,error,errorPaths){var createErrors=cxt.it.createErrors;if(createErrors===false)return codegen._(_templateObject51||(_templateObject51=(0,_taggedTemplateLiteral2["default"])(["{}"])));return errorObject(cxt,error,errorPaths);}function errorObject(cxt,error){var errorPaths=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var gen=cxt.gen,it=cxt.it;var keyValues=[errorInstancePath(it,errorPaths),errorSchemaPath(cxt,errorPaths)];extraErrorProps(cxt,error,keyValues);return gen.object.apply(gen,keyValues);}function errorInstancePath(_ref16,_ref17){var errorPath=_ref16.errorPath;var instancePath=_ref17.instancePath;var instPath=instancePath?codegen.str(_templateObject52||(_templateObject52=(0,_taggedTemplateLiteral2["default"])(["","",""])),errorPath,util.getErrorPath(instancePath,util.Type.Str)):errorPath;return[names_1["default"].instancePath,codegen.strConcat(names_1["default"].instancePath,instPath)];}function errorSchemaPath(_ref18,_ref19){var keyword=_ref18.keyword,errSchemaPath=_ref18.it.errSchemaPath;var schemaPath=_ref19.schemaPath,parentSchema=_ref19.parentSchema;var schPath=parentSchema?errSchemaPath:codegen.str(_templateObject53||(_templateObject53=(0,_taggedTemplateLiteral2["default"])(["","/",""])),errSchemaPath,keyword);if(schemaPath){schPath=codegen.str(_templateObject54||(_templateObject54=(0,_taggedTemplateLiteral2["default"])(["","",""])),schPath,util.getErrorPath(schemaPath,util.Type.Str));}return[E.schemaPath,schPath];}function extraErrorProps(cxt,_ref20,keyValues){var params=_ref20.params,message=_ref20.message;var keyword=cxt.keyword,data=cxt.data,schemaValue=cxt.schemaValue,it=cxt.it;var opts=it.opts,propertyName=it.propertyName,topSchemaRef=it.topSchemaRef,schemaPath=it.schemaPath;keyValues.push([E.keyword,keyword],[E.params,typeof params=="function"?params(cxt):params||codegen._(_templateObject55||(_templateObject55=(0,_taggedTemplateLiteral2["default"])(["{}"])))]);if(opts.messages){keyValues.push([E.message,typeof message=="function"?message(cxt):message]);}if(opts.verbose){keyValues.push([E.schema,schemaValue],[E.parentSchema,codegen._(_templateObject56||(_templateObject56=(0,_taggedTemplateLiteral2["default"])(["","",""])),topSchemaRef,schemaPath)],[names_1["default"].data,data]);}if(propertyName)keyValues.push([E.propertyName,propertyName]);}});var boolSchema=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.boolOrEmptySchema=exports.topBoolOrEmptySchema=void 0;var boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(it){var gen=it.gen,schema=it.schema,validateName=it.validateName;if(schema===false){falseSchemaError(it,false);}else if((0,_typeof2["default"])(schema)=="object"&&schema.$async===true){gen["return"](names_1["default"].data);}else{gen.assign(codegen._(_templateObject57||(_templateObject57=(0,_taggedTemplateLiteral2["default"])(["",".errors"])),validateName),null);gen["return"](true);}}exports.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(it,valid){var gen=it.gen,schema=it.schema;if(schema===false){gen["var"](valid,false);// TODO var
falseSchemaError(it);}else{gen["var"](valid,true);// TODO var
}}exports.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(it,overrideAllErrors){var gen=it.gen,data=it.data;// TODO maybe some other interface should be used for non-keyword validation errors...
var cxt={gen:gen,keyword:"false schema",data:data,schema:false,schemaCode:false,schemaValue:false,params:{},it:it};errors.reportError(cxt,boolError,undefined,overrideAllErrors);}});var rules=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.getRules=exports.isJSONType=void 0;var _jsonTypes=["string","number","integer","boolean","null","object","array"];var jsonTypes=new _set["default"](_jsonTypes);function isJSONType(x){return typeof x=="string"&&jsonTypes.has(x);}exports.isJSONType=isJSONType;function getRules(){var groups={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:_objectSpread(_objectSpread({},groups),{},{integer:true,"boolean":true,"null":true}),rules:[{rules:[]},groups.number,groups.string,groups.array,groups.object],post:{rules:[]},all:{},keywords:{}};}exports.getRules=getRules;});var applicability=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.shouldUseRule=exports.shouldUseGroup=exports.schemaHasRulesForType=void 0;function schemaHasRulesForType(_ref21,type){var schema=_ref21.schema,self=_ref21.self;var group=self.RULES.types[type];return group&&group!==true&&shouldUseGroup(schema,group);}exports.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(schema,group){var _context63;return(0,_some["default"])(_context63=group.rules).call(_context63,function(rule){return shouldUseRule(schema,rule);});}exports.shouldUseGroup=shouldUseGroup;function shouldUseRule(schema,rule){var _a;return schema[rule.keyword]!==undefined||((_a=rule.definition["implements"])===null||_a===void 0?void 0:(0,_some["default"])(_a).call(_a,function(kwd){return schema[kwd]!==undefined;}));}exports.shouldUseRule=shouldUseRule;});var dataType=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.reportTypeError=exports.checkDataTypes=exports.checkDataType=exports.coerceAndCheckDataType=exports.getJSONTypes=exports.getSchemaTypes=exports.DataType=void 0;var DataType;(function(DataType){DataType[DataType["Correct"]=0]="Correct";DataType[DataType["Wrong"]=1]="Wrong";})(DataType=exports.DataType||(exports.DataType={}));function getSchemaTypes(schema){var types=getJSONTypes(schema.type);var hasNull=(0,_includes["default"])(types).call(types,"null");if(hasNull){if(schema.nullable===false)throw new Error("type: null contradicts nullable: false");}else{if(!types.length&&schema.nullable!==undefined){throw new Error('"nullable" cannot be used without "type"');}if(schema.nullable===true)types.push("null");}return types;}exports.getSchemaTypes=getSchemaTypes;function getJSONTypes(ts){var types=(0,_isArray["default"])(ts)?ts:ts?[ts]:[];if((0,_every["default"])(types).call(types,rules.isJSONType))return types;throw new Error("type must be JSONType or JSONType[]: "+types.join(","));}exports.getJSONTypes=getJSONTypes;function coerceAndCheckDataType(it,types){var gen=it.gen,data=it.data,opts=it.opts;var coerceTo=coerceToTypes(types,opts.coerceTypes);var checkTypes=types.length>0&&!(coerceTo.length===0&&types.length===1&&applicability.schemaHasRulesForType(it,types[0]));if(checkTypes){var wrongType=checkDataTypes(types,data,opts.strictNumbers,DataType.Wrong);gen["if"](wrongType,function(){if(coerceTo.length)coerceData(it,types,coerceTo);else reportTypeError(it);});}return checkTypes;}exports.coerceAndCheckDataType=coerceAndCheckDataType;var COERCIBLE=new _set["default"](["string","number","integer","boolean","null"]);function coerceToTypes(types,coerceTypes){return coerceTypes?(0,_filter["default"])(types).call(types,function(t){return COERCIBLE.has(t)||coerceTypes==="array"&&t==="array";}):[];}function coerceData(it,types,coerceTo){var gen=it.gen,data=it.data,opts=it.opts;var dataType=gen["let"]("dataType",codegen._(_templateObject58||(_templateObject58=(0,_taggedTemplateLiteral2["default"])(["typeof ",""])),data));var coerced=gen["let"]("coerced",codegen._(_templateObject59||(_templateObject59=(0,_taggedTemplateLiteral2["default"])(["undefined"]))));if(opts.coerceTypes==="array"){gen["if"](codegen._(_templateObject60||(_templateObject60=(0,_taggedTemplateLiteral2["default"])([""," == 'object' && Array.isArray(",") && ",".length == 1"])),dataType,data,data),function(){return gen.assign(data,codegen._(_templateObject61||(_templateObject61=(0,_taggedTemplateLiteral2["default"])(["","[0]"])),data)).assign(dataType,codegen._(_templateObject62||(_templateObject62=(0,_taggedTemplateLiteral2["default"])(["typeof ",""])),data))["if"](checkDataTypes(types,data,opts.strictNumbers),function(){return gen.assign(coerced,data);});});}gen["if"](codegen._(_templateObject63||(_templateObject63=(0,_taggedTemplateLiteral2["default"])([""," !== undefined"])),coerced));var _iterator6=_createForOfIteratorHelper(coerceTo),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var t=_step6.value;if(COERCIBLE.has(t)||t==="array"&&opts.coerceTypes==="array"){coerceSpecificType(t);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}gen["else"]();reportTypeError(it);gen.endIf();gen["if"](codegen._(_templateObject64||(_templateObject64=(0,_taggedTemplateLiteral2["default"])([""," !== undefined"])),coerced),function(){gen.assign(data,coerced);assignParentData(it,coerced);});function coerceSpecificType(t){switch(t){case"string":gen.elseIf(codegen._(_templateObject65||(_templateObject65=(0,_taggedTemplateLiteral2["default"])([""," == \"number\" || "," == \"boolean\""])),dataType,dataType)).assign(coerced,codegen._(_templateObject66||(_templateObject66=(0,_taggedTemplateLiteral2["default"])(["\"\" + ",""])),data)).elseIf(codegen._(_templateObject67||(_templateObject67=(0,_taggedTemplateLiteral2["default"])([""," === null"])),data)).assign(coerced,codegen._(_templateObject68||(_templateObject68=(0,_taggedTemplateLiteral2["default"])(["\"\""]))));return;case"number":gen.elseIf(codegen._(_templateObject69||(_templateObject69=(0,_taggedTemplateLiteral2["default"])([""," == \"boolean\" || "," === null\n              || ("," == \"string\" && "," && "," == +",")"])),dataType,data,dataType,data,data,data)).assign(coerced,codegen._(_templateObject70||(_templateObject70=(0,_taggedTemplateLiteral2["default"])(["+",""])),data));return;case"integer":gen.elseIf(codegen._(_templateObject71||(_templateObject71=(0,_taggedTemplateLiteral2["default"])([""," === \"boolean\" || "," === null\n              || ("," === \"string\" && "," && "," == +"," && !("," % 1))"])),dataType,data,dataType,data,data,data,data)).assign(coerced,codegen._(_templateObject72||(_templateObject72=(0,_taggedTemplateLiteral2["default"])(["+",""])),data));return;case"boolean":gen.elseIf(codegen._(_templateObject73||(_templateObject73=(0,_taggedTemplateLiteral2["default"])([""," === \"false\" || "," === 0 || "," === null"])),data,data,data)).assign(coerced,false).elseIf(codegen._(_templateObject74||(_templateObject74=(0,_taggedTemplateLiteral2["default"])([""," === \"true\" || "," === 1"])),data,data)).assign(coerced,true);return;case"null":gen.elseIf(codegen._(_templateObject75||(_templateObject75=(0,_taggedTemplateLiteral2["default"])([""," === \"\" || "," === 0 || "," === false"])),data,data,data));gen.assign(coerced,null);return;case"array":gen.elseIf(codegen._(_templateObject76||(_templateObject76=(0,_taggedTemplateLiteral2["default"])([""," === \"string\" || "," === \"number\"\n              || "," === \"boolean\" || "," === null"])),dataType,dataType,dataType,data)).assign(coerced,codegen._(_templateObject77||(_templateObject77=(0,_taggedTemplateLiteral2["default"])(["[","]"])),data));}}}function assignParentData(_ref22,expr){var gen=_ref22.gen,parentData=_ref22.parentData,parentDataProperty=_ref22.parentDataProperty;// TODO use gen.property
gen["if"](codegen._(_templateObject78||(_templateObject78=(0,_taggedTemplateLiteral2["default"])([""," !== undefined"])),parentData),function(){return gen.assign(codegen._(_templateObject79||(_templateObject79=(0,_taggedTemplateLiteral2["default"])(["","[","]"])),parentData,parentDataProperty),expr);});}function checkDataType(dataType,data,strictNums){var correct=arguments.length>3&&arguments[3]!==undefined?arguments[3]:DataType.Correct;var EQ=correct===DataType.Correct?codegen.operators.EQ:codegen.operators.NEQ;var cond;switch(dataType){case"null":return codegen._(_templateObject80||(_templateObject80=(0,_taggedTemplateLiteral2["default"])([""," "," null"])),data,EQ);case"array":cond=codegen._(_templateObject81||(_templateObject81=(0,_taggedTemplateLiteral2["default"])(["Array.isArray(",")"])),data);break;case"object":cond=codegen._(_templateObject82||(_templateObject82=(0,_taggedTemplateLiteral2["default"])([""," && typeof "," == \"object\" && !Array.isArray(",")"])),data,data,data);break;case"integer":cond=numCond(codegen._(_templateObject83||(_templateObject83=(0,_taggedTemplateLiteral2["default"])(["!("," % 1) && !isNaN(",")"])),data,data));break;case"number":cond=numCond();break;default:return codegen._(_templateObject84||(_templateObject84=(0,_taggedTemplateLiteral2["default"])(["typeof "," "," ",""])),data,EQ,dataType);}return correct===DataType.Correct?cond:codegen.not(cond);function numCond(){var _cond=arguments.length>0&&arguments[0]!==undefined?arguments[0]:codegen.nil;return codegen.and(codegen._(_templateObject85||(_templateObject85=(0,_taggedTemplateLiteral2["default"])(["typeof "," == \"number\""])),data),_cond,strictNums?codegen._(_templateObject86||(_templateObject86=(0,_taggedTemplateLiteral2["default"])(["isFinite(",")"])),data):codegen.nil);}}exports.checkDataType=checkDataType;function checkDataTypes(dataTypes,data,strictNums,correct){if(dataTypes.length===1){return checkDataType(dataTypes[0],data,strictNums,correct);}var cond;var types=util.toHash(dataTypes);if(types.array&&types.object){var notObj=codegen._(_templateObject87||(_templateObject87=(0,_taggedTemplateLiteral2["default"])(["typeof "," != \"object\""])),data);cond=types["null"]?notObj:codegen._(_templateObject88||(_templateObject88=(0,_taggedTemplateLiteral2["default"])(["!"," || ",""])),data,notObj);delete types["null"];delete types.array;delete types.object;}else{cond=codegen.nil;}if(types.number)delete types.integer;for(var t in types){cond=codegen.and(cond,checkDataType(t,data,strictNums,correct));}return cond;}exports.checkDataTypes=checkDataTypes;var typeError={message:function message(_ref23){var schema=_ref23.schema;return"must be ".concat(schema);},params:function params(_ref24){var schema=_ref24.schema,schemaValue=_ref24.schemaValue;return typeof schema=="string"?codegen._(_templateObject89||(_templateObject89=(0,_taggedTemplateLiteral2["default"])(["{type: ","}"])),schema):codegen._(_templateObject90||(_templateObject90=(0,_taggedTemplateLiteral2["default"])(["{type: ","}"])),schemaValue);}};function reportTypeError(it){var cxt=getTypeErrorContext(it);errors.reportError(cxt,typeError);}exports.reportTypeError=reportTypeError;function getTypeErrorContext(it){var gen=it.gen,data=it.data,schema=it.schema;var schemaCode=util.schemaRefOrVal(it,schema,"type");return{gen:gen,keyword:"type",data:data,schema:schema.type,schemaCode:schemaCode,schemaValue:schemaCode,parentSchema:schema,params:{},it:it};}});var defaults=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.assignDefaults=void 0;function assignDefaults(it,ty){var _it$schema=it.schema,properties=_it$schema.properties,items=_it$schema.items;if(ty==="object"&&properties){for(var key in properties){assignDefault(it,key,properties[key]["default"]);}}else if(ty==="array"&&(0,_isArray["default"])(items)){(0,_forEach["default"])(items).call(items,function(sch,i){return assignDefault(it,i,sch["default"]);});}}exports.assignDefaults=assignDefaults;function assignDefault(it,prop,defaultValue){var gen=it.gen,compositeRule=it.compositeRule,data=it.data,opts=it.opts;if(defaultValue===undefined)return;var childData=codegen._(_templateObject91||(_templateObject91=(0,_taggedTemplateLiteral2["default"])(["","",""])),data,codegen.getProperty(prop));if(compositeRule){util.checkStrictMode(it,"default is ignored for: ".concat(childData));return;}var condition=codegen._(_templateObject92||(_templateObject92=(0,_taggedTemplateLiteral2["default"])([""," === undefined"])),childData);if(opts.useDefaults==="empty"){condition=codegen._(_templateObject93||(_templateObject93=(0,_taggedTemplateLiteral2["default"])([""," || "," === null || "," === \"\""])),condition,childData,childData);}// `${childData} === undefined` +
// (opts.useDefaults === "empty" ? ` || ${childData} === null || ${childData} === ""` : "")
gen["if"](condition,codegen._(_templateObject94||(_templateObject94=(0,_taggedTemplateLiteral2["default"])([""," = ",""])),childData,codegen.stringify(defaultValue)));}});var _code=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.validateUnion=exports.validateArray=exports.usePattern=exports.callValidateCode=exports.schemaProperties=exports.allSchemaProperties=exports.noPropertyInData=exports.propertyInData=exports.isOwnProperty=exports.hasPropFunc=exports.reportMissingProp=exports.checkMissingProp=exports.checkReportMissingProp=void 0;function checkReportMissingProp(cxt,prop){var gen=cxt.gen,data=cxt.data,it=cxt.it;gen["if"](noPropertyInData(gen,data,prop,it.opts.ownProperties),function(){cxt.setParams({missingProperty:codegen._(_templateObject95||(_templateObject95=(0,_taggedTemplateLiteral2["default"])(["",""])),prop)},true);cxt.error();});}exports.checkReportMissingProp=checkReportMissingProp;function checkMissingProp(_ref25,properties,missing){var gen=_ref25.gen,data=_ref25.data,opts=_ref25.it.opts;return codegen.or.apply(codegen,(0,_toConsumableArray2["default"])((0,_map["default"])(properties).call(properties,function(prop){return codegen.and(noPropertyInData(gen,data,prop,opts.ownProperties),codegen._(_templateObject96||(_templateObject96=(0,_taggedTemplateLiteral2["default"])([""," = ",""])),missing,prop));})));}exports.checkMissingProp=checkMissingProp;function reportMissingProp(cxt,missing){cxt.setParams({missingProperty:missing},true);cxt.error();}exports.reportMissingProp=reportMissingProp;function hasPropFunc(gen){return gen.scopeValue("func",{// eslint-disable-next-line @typescript-eslint/unbound-method
ref:Object.prototype.hasOwnProperty,code:codegen._(_templateObject97||(_templateObject97=(0,_taggedTemplateLiteral2["default"])(["Object.prototype.hasOwnProperty"])))});}exports.hasPropFunc=hasPropFunc;function isOwnProperty(gen,data,property){return codegen._(_templateObject98||(_templateObject98=(0,_taggedTemplateLiteral2["default"])(["",".call(",", ",")"])),hasPropFunc(gen),data,property);}exports.isOwnProperty=isOwnProperty;function propertyInData(gen,data,property,ownProperties){var cond=codegen._(_templateObject99||(_templateObject99=(0,_taggedTemplateLiteral2["default"])(["",""," !== undefined"])),data,codegen.getProperty(property));return ownProperties?codegen._(_templateObject100||(_templateObject100=(0,_taggedTemplateLiteral2["default"])([""," && ",""])),cond,isOwnProperty(gen,data,property)):cond;}exports.propertyInData=propertyInData;function noPropertyInData(gen,data,property,ownProperties){var cond=codegen._(_templateObject101||(_templateObject101=(0,_taggedTemplateLiteral2["default"])(["",""," === undefined"])),data,codegen.getProperty(property));return ownProperties?codegen.or(cond,codegen.not(isOwnProperty(gen,data,property))):cond;}exports.noPropertyInData=noPropertyInData;function allSchemaProperties(schemaMap){var _context64;return schemaMap?(0,_filter["default"])(_context64=(0,_keys["default"])(schemaMap)).call(_context64,function(p){return p!=="__proto__";}):[];}exports.allSchemaProperties=allSchemaProperties;function schemaProperties(it,schemaMap){var _context65;return(0,_filter["default"])(_context65=allSchemaProperties(schemaMap)).call(_context65,function(p){return!util.alwaysValidSchema(it,schemaMap[p]);});}exports.schemaProperties=schemaProperties;function callValidateCode(_ref26,func,context,passSchema){var schemaCode=_ref26.schemaCode,data=_ref26.data,_ref26$it=_ref26.it,gen=_ref26$it.gen,topSchemaRef=_ref26$it.topSchemaRef,schemaPath=_ref26$it.schemaPath,errorPath=_ref26$it.errorPath,it=_ref26.it;var dataAndSchema=passSchema?codegen._(_templateObject102||(_templateObject102=(0,_taggedTemplateLiteral2["default"])(["",", ",", ","",""])),schemaCode,data,topSchemaRef,schemaPath):data;var valCxt=[[names_1["default"].instancePath,codegen.strConcat(names_1["default"].instancePath,errorPath)],[names_1["default"].parentData,it.parentData],[names_1["default"].parentDataProperty,it.parentDataProperty],[names_1["default"].rootData,names_1["default"].rootData]];if(it.opts.dynamicRef)valCxt.push([names_1["default"].dynamicAnchors,names_1["default"].dynamicAnchors]);var args=codegen._(_templateObject103||(_templateObject103=(0,_taggedTemplateLiteral2["default"])(["",", ",""])),dataAndSchema,gen.object.apply(gen,valCxt));return context!==codegen.nil?codegen._(_templateObject104||(_templateObject104=(0,_taggedTemplateLiteral2["default"])(["",".call(",", ",")"])),func,context,args):codegen._(_templateObject105||(_templateObject105=(0,_taggedTemplateLiteral2["default"])(["","(",")"])),func,args);}exports.callValidateCode=callValidateCode;function usePattern(_ref27,pattern){var gen=_ref27.gen,opts=_ref27.it.opts;var u=opts.unicodeRegExp?"u":"";return gen.scopeValue("pattern",{key:pattern,ref:new RegExp(pattern,u),code:codegen._(_templateObject106||(_templateObject106=(0,_taggedTemplateLiteral2["default"])(["new RegExp(",", ",")"])),pattern,u)});}exports.usePattern=usePattern;function validateArray(cxt){var gen=cxt.gen,data=cxt.data,keyword=cxt.keyword,it=cxt.it;var valid=gen.name("valid");if(it.allErrors){var validArr=gen["let"]("valid",true);validateItems(function(){return gen.assign(validArr,false);});return validArr;}gen["var"](valid,true);validateItems(function(){return gen["break"]();});return valid;function validateItems(notValid){var len=gen["const"]("len",codegen._(_templateObject107||(_templateObject107=(0,_taggedTemplateLiteral2["default"])(["",".length"])),data));gen.forRange("i",0,len,function(i){cxt.subschema({keyword:keyword,dataProp:i,dataPropType:util.Type.Num},valid);gen["if"](codegen.not(valid),notValid);});}}exports.validateArray=validateArray;function validateUnion(cxt){var gen=cxt.gen,schema=cxt.schema,keyword=cxt.keyword,it=cxt.it;/* istanbul ignore if */if(!(0,_isArray["default"])(schema))throw new Error("ajv implementation error");var alwaysValid=(0,_some["default"])(schema).call(schema,function(sch){return util.alwaysValidSchema(it,sch);});if(alwaysValid&&!it.opts.unevaluated)return;var valid=gen["let"]("valid",false);var schValid=gen.name("_valid");gen.block(function(){return(0,_forEach["default"])(schema).call(schema,function(_sch,i){var schCxt=cxt.subschema({keyword:keyword,schemaProp:i,compositeRule:true},schValid);gen.assign(valid,codegen._(_templateObject108||(_templateObject108=(0,_taggedTemplateLiteral2["default"])([""," || ",""])),valid,schValid));var merged=cxt.mergeValidEvaluated(schCxt,schValid);// can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)
// or if all properties and items were evaluated (it.props === true && it.items === true)
if(!merged)gen["if"](codegen.not(valid));});});cxt.result(valid,function(){return cxt.reset();},function(){return cxt.error(true);});}exports.validateUnion=validateUnion;});var keyword=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.validateKeywordUsage=exports.validSchemaType=exports.funcKeywordCode=exports.macroKeywordCode=void 0;function macroKeywordCode(cxt,def){var _context66;var gen=cxt.gen,keyword=cxt.keyword,schema=cxt.schema,parentSchema=cxt.parentSchema,it=cxt.it;var macroSchema=def.macro.call(it.self,schema,parentSchema,it);var schemaRef=useKeyword(gen,keyword,macroSchema);if(it.opts.validateSchema!==false)it.self.validateSchema(macroSchema,true);var valid=gen.name("valid");cxt.subschema({schema:macroSchema,schemaPath:codegen.nil,errSchemaPath:(0,_concat["default"])(_context66="".concat(it.errSchemaPath,"/")).call(_context66,keyword),topSchemaRef:schemaRef,compositeRule:true},valid);cxt.pass(valid,function(){return cxt.error(true);});}exports.macroKeywordCode=macroKeywordCode;function funcKeywordCode(cxt,def){var _a;var gen=cxt.gen,keyword=cxt.keyword,schema=cxt.schema,parentSchema=cxt.parentSchema,$data=cxt.$data,it=cxt.it;checkAsyncKeyword(it,def);var validate=!$data&&def.compile?def.compile.call(it.self,schema,parentSchema,it):def.validate;var validateRef=useKeyword(gen,keyword,validate);var valid=gen["let"]("valid");cxt.block$data(valid,validateKeyword);cxt.ok((_a=def.valid)!==null&&_a!==void 0?_a:valid);function validateKeyword(){if(def.errors===false){assignValid();if(def.modifying)modifyData(cxt);reportErrs(function(){return cxt.error();});}else{var ruleErrs=def.async?validateAsync():validateSync();if(def.modifying)modifyData(cxt);reportErrs(function(){return addErrs(cxt,ruleErrs);});}}function validateAsync(){var ruleErrs=gen["let"]("ruleErrs",null);gen["try"](function(){return assignValid(codegen._(_templateObject109||(_templateObject109=(0,_taggedTemplateLiteral2["default"])(["await "]))));},function(e){return gen.assign(valid,false)["if"](codegen._(_templateObject110||(_templateObject110=(0,_taggedTemplateLiteral2["default"])([""," instanceof ",""])),e,it.ValidationError),function(){return gen.assign(ruleErrs,codegen._(_templateObject111||(_templateObject111=(0,_taggedTemplateLiteral2["default"])(["",".errors"])),e));},function(){return gen["throw"](e);});});return ruleErrs;}function validateSync(){var validateErrs=codegen._(_templateObject112||(_templateObject112=(0,_taggedTemplateLiteral2["default"])(["",".errors"])),validateRef);gen.assign(validateErrs,null);assignValid(codegen.nil);return validateErrs;}function assignValid(){var _await=arguments.length>0&&arguments[0]!==undefined?arguments[0]:def.async?codegen._(_templateObject113||(_templateObject113=(0,_taggedTemplateLiteral2["default"])(["await "]))):codegen.nil;var passCxt=it.opts.passContext?names_1["default"]["this"]:names_1["default"].self;var passSchema=!("compile"in def&&!$data||def.schema===false);gen.assign(valid,codegen._(_templateObject114||(_templateObject114=(0,_taggedTemplateLiteral2["default"])(["","",""])),_await,_code.callValidateCode(cxt,validateRef,passCxt,passSchema)),def.modifying);}function reportErrs(errors){var _a;gen["if"](codegen.not((_a=def.valid)!==null&&_a!==void 0?_a:valid),errors);}}exports.funcKeywordCode=funcKeywordCode;function modifyData(cxt){var gen=cxt.gen,data=cxt.data,it=cxt.it;gen["if"](it.parentData,function(){return gen.assign(data,codegen._(_templateObject115||(_templateObject115=(0,_taggedTemplateLiteral2["default"])(["","[","]"])),it.parentData,it.parentDataProperty));});}function addErrs(cxt,errs){var gen=cxt.gen;gen["if"](codegen._(_templateObject116||(_templateObject116=(0,_taggedTemplateLiteral2["default"])(["Array.isArray(",")"])),errs),function(){gen.assign(names_1["default"].vErrors,codegen._(_templateObject117||(_templateObject117=(0,_taggedTemplateLiteral2["default"])([""," === null ? "," : ",".concat(",")"])),names_1["default"].vErrors,errs,names_1["default"].vErrors,errs)).assign(names_1["default"].errors,codegen._(_templateObject118||(_templateObject118=(0,_taggedTemplateLiteral2["default"])(["",".length"])),names_1["default"].vErrors));errors.extendErrors(cxt);},function(){return cxt.error();});}function checkAsyncKeyword(_ref28,def){var schemaEnv=_ref28.schemaEnv;if(def.async&&!schemaEnv.$async)throw new Error("async keyword in sync schema");}function useKeyword(gen,keyword,result){if(result===undefined)throw new Error("keyword \"".concat(keyword,"\" failed to compile"));return gen.scopeValue("keyword",typeof result=="function"?{ref:result}:{ref:result,code:codegen.stringify(result)});}function validSchemaType(schema,schemaType){var allowUndefined=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;// TODO add tests
return!schemaType.length||(0,_some["default"])(schemaType).call(schemaType,function(st){return st==="array"?(0,_isArray["default"])(schema):st==="object"?schema&&(0,_typeof2["default"])(schema)=="object"&&!(0,_isArray["default"])(schema):(0,_typeof2["default"])(schema)==st||allowUndefined&&typeof schema=="undefined";});}exports.validSchemaType=validSchemaType;function validateKeywordUsage(_ref29,def,keyword){var _context67;var schema=_ref29.schema,opts=_ref29.opts,self=_ref29.self,errSchemaPath=_ref29.errSchemaPath;/* istanbul ignore if */if((0,_isArray["default"])(def.keyword)?!(0,_includes["default"])(_context67=def.keyword).call(_context67,keyword):def.keyword!==keyword){throw new Error("ajv implementation error");}var deps=def.dependencies;if(deps===null||deps===void 0?void 0:(0,_some["default"])(deps).call(deps,function(kwd){return!Object.prototype.hasOwnProperty.call(schema,kwd);})){var _context68;throw new Error((0,_concat["default"])(_context68="parent schema must have dependencies of ".concat(keyword,": ")).call(_context68,deps.join(",")));}if(def.validateSchema){var _valid2=def.validateSchema(schema[keyword]);if(!_valid2){var _context69;var msg=(0,_concat["default"])(_context69="keyword \"".concat(keyword,"\" value is invalid at path \"")).call(_context69,errSchemaPath,"\": ")+self.errorsText(def.validateSchema.errors);if(opts.validateSchema==="log")self.logger.error(msg);else throw new Error(msg);}}}exports.validateKeywordUsage=validateKeywordUsage;});var _subschema=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.extendSubschemaMode=exports.extendSubschemaData=exports.getSubschema=void 0;function getSubschema(it,_ref30){var keyword=_ref30.keyword,schemaProp=_ref30.schemaProp,schema=_ref30.schema,schemaPath=_ref30.schemaPath,errSchemaPath=_ref30.errSchemaPath,topSchemaRef=_ref30.topSchemaRef;if(keyword!==undefined&&schema!==undefined){throw new Error('both "keyword" and "schema" passed, only one allowed');}if(keyword!==undefined){var _context70,_context71,_context72;var sch=it.schema[keyword];return schemaProp===undefined?{schema:sch,schemaPath:codegen._(_templateObject119||(_templateObject119=(0,_taggedTemplateLiteral2["default"])(["","",""])),it.schemaPath,codegen.getProperty(keyword)),errSchemaPath:(0,_concat["default"])(_context70="".concat(it.errSchemaPath,"/")).call(_context70,keyword)}:{schema:sch[schemaProp],schemaPath:codegen._(_templateObject120||(_templateObject120=(0,_taggedTemplateLiteral2["default"])(["","","",""])),it.schemaPath,codegen.getProperty(keyword),codegen.getProperty(schemaProp)),errSchemaPath:(0,_concat["default"])(_context71=(0,_concat["default"])(_context72="".concat(it.errSchemaPath,"/")).call(_context72,keyword,"/")).call(_context71,util.escapeFragment(schemaProp))};}if(schema!==undefined){if(schemaPath===undefined||errSchemaPath===undefined||topSchemaRef===undefined){throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');}return{schema:schema,schemaPath:schemaPath,topSchemaRef:topSchemaRef,errSchemaPath:errSchemaPath};}throw new Error('either "keyword" or "schema" must be passed');}exports.getSubschema=getSubschema;function extendSubschemaData(subschema,it,_ref31){var dataProp=_ref31.dataProp,dpType=_ref31.dataPropType,data=_ref31.data,dataTypes=_ref31.dataTypes,propertyName=_ref31.propertyName;if(data!==undefined&&dataProp!==undefined){throw new Error('both "data" and "dataProp" passed, only one allowed');}var gen=it.gen;if(dataProp!==undefined){var _context73;var errorPath=it.errorPath,dataPathArr=it.dataPathArr,opts=it.opts;var nextData=gen["let"]("data",codegen._(_templateObject121||(_templateObject121=(0,_taggedTemplateLiteral2["default"])(["","",""])),it.data,codegen.getProperty(dataProp)),true);dataContextProps(nextData);subschema.errorPath=codegen.str(_templateObject122||(_templateObject122=(0,_taggedTemplateLiteral2["default"])(["","",""])),errorPath,util.getErrorPath(dataProp,dpType,opts.jsPropertySyntax));subschema.parentDataProperty=codegen._(_templateObject123||(_templateObject123=(0,_taggedTemplateLiteral2["default"])(["",""])),dataProp);subschema.dataPathArr=(0,_concat["default"])(_context73=[]).call(_context73,(0,_toConsumableArray2["default"])(dataPathArr),[subschema.parentDataProperty]);}if(data!==undefined){var _nextData2=data instanceof codegen.Name?data:gen["let"]("data",data,true);// replaceable if used once?
dataContextProps(_nextData2);if(propertyName!==undefined)subschema.propertyName=propertyName;// TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr
}if(dataTypes)subschema.dataTypes=dataTypes;function dataContextProps(_nextData){var _context74;subschema.data=_nextData;subschema.dataLevel=it.dataLevel+1;subschema.dataTypes=[];it.definedProperties=new _set["default"]();subschema.parentData=it.data;subschema.dataNames=(0,_concat["default"])(_context74=[]).call(_context74,(0,_toConsumableArray2["default"])(it.dataNames),[_nextData]);}}exports.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(subschema,_ref32){var jtdDiscriminator=_ref32.jtdDiscriminator,jtdMetadata=_ref32.jtdMetadata,compositeRule=_ref32.compositeRule,createErrors=_ref32.createErrors,allErrors=_ref32.allErrors;if(compositeRule!==undefined)subschema.compositeRule=compositeRule;if(createErrors!==undefined)subschema.createErrors=createErrors;if(allErrors!==undefined)subschema.allErrors=allErrors;subschema.jtdDiscriminator=jtdDiscriminator;// not inherited
subschema.jtdMetadata=jtdMetadata;// not inherited
}exports.extendSubschemaMode=extendSubschemaMode;});// do not edit .js files directly - edit src/index.jst
var fastDeepEqual=function equal(a,b){if(a===b)return true;if(a&&b&&(0,_typeof2["default"])(a)=='object'&&(0,_typeof2["default"])(b)=='object'){if(a.constructor!==b.constructor)return false;var length,i,keys;if((0,_isArray["default"])(a)){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;){if(!equal(a[i],b[i]))return false;}return true;}if(a.constructor===RegExp)return a.source===b.source&&(0,_flags["default"])(a)===(0,_flags["default"])(b);if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();keys=(0,_keys["default"])(a);length=keys.length;if(length!==(0,_keys["default"])(b).length)return false;for(i=length;i--!==0;){if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return false;}for(i=length;i--!==0;){var key=keys[i];if(!equal(a[key],b[key]))return false;}return true;}// true if both NaN, false otherwise
return a!==a&&b!==b;};var jsonSchemaTraverse=createCommonjsModule(function(module){var traverse=module.exports=function(schema,opts,cb){// Legacy support for v0.3.1 and earlier.
if(typeof opts=='function'){cb=opts;opts={};}cb=opts.cb||cb;var pre=typeof cb=='function'?cb:cb.pre||function(){};var post=cb.post||function(){};_traverse(opts,pre,post,schema,'',schema);};traverse.keywords={additionalItems:true,items:true,contains:true,additionalProperties:true,propertyNames:true,not:true,"if":true,then:true,"else":true};traverse.arrayKeywords={items:true,allOf:true,anyOf:true,oneOf:true};traverse.propsKeywords={$defs:true,definitions:true,properties:true,patternProperties:true,dependencies:true};traverse.skipKeywords={"default":true,"enum":true,"const":true,required:true,maximum:true,minimum:true,exclusiveMaximum:true,exclusiveMinimum:true,multipleOf:true,maxLength:true,minLength:true,pattern:true,format:true,maxItems:true,minItems:true,uniqueItems:true,maxProperties:true,minProperties:true};function _traverse(opts,pre,post,schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(schema&&(0,_typeof2["default"])(schema)=='object'&&!(0,_isArray["default"])(schema)){pre(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);for(var key in schema){var sch=schema[key];if((0,_isArray["default"])(sch)){if(key in traverse.arrayKeywords){for(var i=0;i<sch.length;i++){_traverse(opts,pre,post,sch[i],jsonPtr+'/'+key+'/'+i,rootSchema,jsonPtr,key,schema,i);}}}else if(key in traverse.propsKeywords){if(sch&&(0,_typeof2["default"])(sch)=='object'){for(var prop in sch){_traverse(opts,pre,post,sch[prop],jsonPtr+'/'+key+'/'+escapeJsonPtr(prop),rootSchema,jsonPtr,key,schema,prop);}}}else if(key in traverse.keywords||opts.allKeys&&!(key in traverse.skipKeywords)){_traverse(opts,pre,post,sch,jsonPtr+'/'+key,rootSchema,jsonPtr,key,schema);}}post(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);}}function escapeJsonPtr(str){return str.replace(/~/g,'~0').replace(/\//g,'~1');}});/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */var uri_all=createCommonjsModule(function(module,exports){(function(global,factory){factory(exports);})(commonjsGlobal,function(exports){function merge(){for(var _len=arguments.length,sets=Array(_len),_key=0;_key<_len;_key++){sets[_key]=arguments[_key];}if(sets.length>1){var _context75,_context77;sets[0]=(0,_slice["default"])(_context75=sets[0]).call(_context75,0,-1);var xl=sets.length-1;for(var x=1;x<xl;++x){var _context76;sets[x]=(0,_slice["default"])(_context76=sets[x]).call(_context76,1,-1);}sets[xl]=(0,_slice["default"])(_context77=sets[xl]).call(_context77,1);return sets.join('');}else{return sets[0];}}function subexp(str){return"(?:"+str+")";}function typeOf(o){return o===undefined?"undefined":o===null?"null":Object.prototype.toString.call(o).split(" ").pop().split("]").shift().toLowerCase();}function toUpperCase(str){return str.toUpperCase();}function toArray(obj){return obj!==undefined&&obj!==null?obj instanceof Array?obj:typeof obj.length!=="number"||obj.split||obj.setInterval||obj.call?[obj]:(0,_slice["default"])(Array.prototype).call(obj):[];}function assign(target,source){var obj=target;if(source){for(var key in source){obj[key]=source[key];}}return obj;}function buildExps(isIRI){var ALPHA$$="[A-Za-z]",DIGIT$$="[0-9]",HEXDIG$$=merge(DIGIT$$,"[A-Fa-f]"),PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$)),//expanded
GEN_DELIMS$$="[\\:\\/\\?\\#\\[\\]\\@]",SUB_DELIMS$$="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",RESERVED$$=merge(GEN_DELIMS$$,SUB_DELIMS$$),UCSCHAR$$=isIRI?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",//subset, excludes bidi control characters
IPRIVATE$$=isIRI?"[\\uE000-\\uF8FF]":"[]",//subset
UNRESERVED$$=merge(ALPHA$$,DIGIT$$,"[\\-\\.\\_\\~]",UCSCHAR$$);subexp(ALPHA$$+merge(ALPHA$$,DIGIT$$,"[\\+\\-\\.]")+"*");subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]"))+"*");var DEC_OCTET_RELAXED$=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+DIGIT$$)+"|"+subexp("1"+DIGIT$$+DIGIT$$)+"|"+subexp("0?[1-9]"+DIGIT$$)+"|0?0?"+DIGIT$$),//relaxed parsing rules
IPV4ADDRESS$=subexp(DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$),H16$=subexp(HEXDIG$$+"{1,4}"),LS32$=subexp(subexp(H16$+"\\:"+H16$)+"|"+IPV4ADDRESS$),IPV6ADDRESS1$=subexp(subexp(H16$+"\\:")+"{6}"+LS32$),//                           6( h16 ":" ) ls32
IPV6ADDRESS2$=subexp("\\:\\:"+subexp(H16$+"\\:")+"{5}"+LS32$),//                      "::" 5( h16 ":" ) ls32
IPV6ADDRESS3$=subexp(subexp(H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{4}"+LS32$),//[               h16 ] "::" 4( h16 ":" ) ls32
IPV6ADDRESS4$=subexp(subexp(subexp(H16$+"\\:")+"{0,1}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{3}"+LS32$),//[ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
IPV6ADDRESS5$=subexp(subexp(subexp(H16$+"\\:")+"{0,2}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{2}"+LS32$),//[ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
IPV6ADDRESS6$=subexp(subexp(subexp(H16$+"\\:")+"{0,3}"+H16$)+"?\\:\\:"+H16$+"\\:"+LS32$),//[ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
IPV6ADDRESS7$=subexp(subexp(subexp(H16$+"\\:")+"{0,4}"+H16$)+"?\\:\\:"+LS32$),//[ *4( h16 ":" ) h16 ] "::"              ls32
IPV6ADDRESS8$=subexp(subexp(subexp(H16$+"\\:")+"{0,5}"+H16$)+"?\\:\\:"+H16$),//[ *5( h16 ":" ) h16 ] "::"              h16
IPV6ADDRESS9$=subexp(subexp(subexp(H16$+"\\:")+"{0,6}"+H16$)+"?\\:\\:"),//[ *6( h16 ":" ) h16 ] "::"
IPV6ADDRESS$=subexp([IPV6ADDRESS1$,IPV6ADDRESS2$,IPV6ADDRESS3$,IPV6ADDRESS4$,IPV6ADDRESS5$,IPV6ADDRESS6$,IPV6ADDRESS7$,IPV6ADDRESS8$,IPV6ADDRESS9$].join("|")),ZONEID$=subexp(subexp(UNRESERVED$$+"|"+PCT_ENCODED$)+"+");//RFC 6874, with relaxed parsing rules
subexp("[vV]"+HEXDIG$$+"+\\."+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]")+"+");//RFC 6874
subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$))+"*");var PCHAR$=subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@]"));subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\@]"))+"+");subexp(subexp(PCHAR$+"|"+merge("[\\/\\?]",IPRIVATE$$))+"*");return{NOT_SCHEME:new RegExp(merge("[^]",ALPHA$$,DIGIT$$,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]",IPRIVATE$$),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",UNRESERVED$$,SUB_DELIMS$$),"g"),UNRESERVED:new RegExp(UNRESERVED$$,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",UNRESERVED$$,RESERVED$$),"g"),PCT_ENCODED:new RegExp(PCT_ENCODED$,"g"),IPV4ADDRESS:new RegExp("^("+IPV4ADDRESS$+")$"),IPV6ADDRESS:new RegExp("^\\[?("+IPV6ADDRESS$+")"+subexp(subexp("\\%25|\\%(?!"+HEXDIG$$+"{2})")+"("+ZONEID$+")")+"?\\]?$")//RFC 6874, with relaxed parsing rules
};}var URI_PROTOCOL=buildExps(false);var IRI_PROTOCOL=buildExps(true);var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=(0,_getIterator2["default"])(arr),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if((0,_isArray["default"])(arr)){return arr;}else if((0,_isIterable2["default"])(Object(arr))){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();var toConsumableArray=function toConsumableArray(arr){if((0,_isArray["default"])(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return(0,_from["default"])(arr);}};/** Highest positive signed 32-bit float value */var maxInt=2147483647;// aka. 0x7FFFFFFF or 2^31-1
/** Bootstring parameters */var base=36;var tMin=1;var tMax=26;var skew=38;var damp=700;var initialBias=72;var initialN=128;// 0x80
var delimiter='-';// '\x2D'
/** Regular expressions */var regexPunycode=/^xn--/;var regexNonASCII=/[^\0-\x7E]/;// non-ASCII chars
var regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g;// RFC 3490 separators
/** Error messages */var errors={'overflow':'Overflow: input needs wider integers to process','not-basic':'Illegal input >= 0x80 (not a basic code point)','invalid-input':'Invalid input'};/** Convenience shortcuts */var baseMinusTMin=base-tMin;var floor=Math.floor;var stringFromCharCode=String.fromCharCode;/*--------------------------------------------------------------------------*/ /**
 * A generic error utility function.
 * @private
 * @param {String} type The error type.
 * @returns {Error} Throws a `RangeError` with the applicable error message.
 */function error$1(type){throw new RangeError(errors[type]);}/**
 * A generic `Array#map` utility function.
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} callback The function that gets called for every array
 * item.
 * @returns {Array} A new array of values returned by the callback function.
 */function map(array,fn){var result=[];var length=array.length;while(length--){result[length]=fn(array[length]);}return result;}/**
 * A simple `Array#map`-like wrapper to work with domain name strings or email
 * addresses.
 * @private
 * @param {String} domain The domain name or email address.
 * @param {Function} callback The function that gets called for every
 * character.
 * @returns {Array} A new string of characters returned by the callback
 * function.
 */function mapDomain(string,fn){var parts=string.split('@');var result='';if(parts.length>1){// In email addresses, only the domain name should be punycoded. Leave
// the local part (i.e. everything up to `@`) intact.
result=parts[0]+'@';string=parts[1];}// Avoid `split(regex)` for IE8 compatibility. See #17.
string=string.replace(regexSeparators,'\x2E');var labels=string.split('.');var encoded=map(labels,fn).join('.');return result+encoded;}/**
 * Creates an array containing the numeric code points of each Unicode
 * character in the string. While JavaScript uses UCS-2 internally,
 * this function will convert a pair of surrogate halves (each of which
 * UCS-2 exposes as separate characters) into a single code point,
 * matching UTF-16.
 * @see `punycode.ucs2.encode`
 * @see <https://mathiasbynens.be/notes/javascript-encoding>
 * @memberOf punycode.ucs2
 * @name decode
 * @param {String} string The Unicode input string (UCS-2).
 * @returns {Array} The new array of code points.
 */function ucs2decode(string){var output=[];var counter=0;var length=string.length;while(counter<length){var value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){// It's a high surrogate, and there is a next character.
var extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){// Low surrogate.
output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{// It's an unmatched surrogate; only append this code unit, in case the
// next code unit is the high surrogate of a surrogate pair.
output.push(value);counter--;}}else{output.push(value);}}return output;}/**
 * Creates a string based on an array of numeric code points.
 * @see `punycode.ucs2.decode`
 * @memberOf punycode.ucs2
 * @name encode
 * @param {Array} codePoints The array of numeric code points.
 * @returns {String} The new Unicode string (UCS-2).
 */var ucs2encode=function ucs2encode(array){return _fromCodePoint["default"].apply(String,toConsumableArray(array));};/**
 * Converts a basic code point into a digit/integer.
 * @see `digitToBasic()`
 * @private
 * @param {Number} codePoint The basic numeric code point value.
 * @returns {Number} The numeric value of a basic code point (for use in
 * representing integers) in the range `0` to `base - 1`, or `base` if
 * the code point does not represent a value.
 */var basicToDigit=function basicToDigit(codePoint){if(codePoint-0x30<0x0A){return codePoint-0x16;}if(codePoint-0x41<0x1A){return codePoint-0x41;}if(codePoint-0x61<0x1A){return codePoint-0x61;}return base;};/**
 * Converts a digit/integer into a basic code point.
 * @see `basicToDigit()`
 * @private
 * @param {Number} digit The numeric value of a basic code point.
 * @returns {Number} The basic code point whose value (when used for
 * representing integers) is `digit`, which needs to be in the range
 * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is
 * used; else, the lowercase form is used. The behavior is undefined
 * if `flag` is non-zero and `digit` has no uppercase form.
 */var digitToBasic=function digitToBasic(digit,flag){//  0..25 map to ASCII a..z or A..Z
// 26..35 map to ASCII 0..9
return digit+22+75*(digit<26)-((flag!=0)<<5);};/**
 * Bias adaptation function as per section 3.4 of RFC 3492.
 * https://tools.ietf.org/html/rfc3492#section-3.4
 * @private
 */var adapt=function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;/* no initialization */delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin);}return floor(k+(baseMinusTMin+1)*delta/(delta+skew));};/**
 * Converts a Punycode string of ASCII-only symbols to a string of Unicode
 * symbols.
 * @memberOf punycode
 * @param {String} input The Punycode string of ASCII-only symbols.
 * @returns {String} The resulting string of Unicode symbols.
 */var decode=function decode(input){// Don't use UCS-2.
var output=[];var inputLength=input.length;var i=0;var n=initialN;var bias=initialBias;// Handle the basic code points: let `basic` be the number of input code
// points before the last delimiter, or `0` if there is none, then copy
// the first basic code points to the output.
var basic=(0,_lastIndexOf["default"])(input).call(input,delimiter);if(basic<0){basic=0;}for(var j=0;j<basic;++j){// if it's not a basic code point
if(input.charCodeAt(j)>=0x80){error$1('not-basic');}output.push(input.charCodeAt(j));}// Main decoding loop: start just after the last delimiter if any basic code
// points were copied; start at the beginning otherwise.
for(var index=basic>0?basic+1:0;index<inputLength;)/* no final expression */{// `index` is the index of the next character to be consumed.
// Decode a generalized variable-length integer into `delta`,
// which gets added to `i`. The overflow checking is easier
// if we increase `i` as we go, then subtract off its starting
// value at the end to obtain `delta`.
var oldi=i;for(var w=1,k=base;;/* no condition */k+=base){if(index>=inputLength){error$1('invalid-input');}var digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error$1('overflow');}i+=digit*w;var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break;}var baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error$1('overflow');}w*=baseMinusT;}var out=output.length+1;bias=adapt(i-oldi,out,oldi==0);// `i` was supposed to wrap around from `out` to `0`,
// incrementing `n` each time, so we'll fix that now:
if(floor(i/out)>maxInt-n){error$1('overflow');}n+=floor(i/out);i%=out;// Insert `n` at position `i` of the output.
(0,_splice["default"])(output).call(output,i++,0,n);}return _fromCodePoint["default"].apply(String,output);};/**
 * Converts a string of Unicode symbols (e.g. a domain name label) to a
 * Punycode string of ASCII-only symbols.
 * @memberOf punycode
 * @param {String} input The string of Unicode symbols.
 * @returns {String} The resulting Punycode string of ASCII-only symbols.
 */var encode=function encode(input){var output=[];// Convert the input in UCS-2 to an array of Unicode code points.
input=ucs2decode(input);// Cache the length.
var inputLength=input.length;// Initialize the state.
var n=initialN;var delta=0;var bias=initialBias;// Handle the basic code points.
var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=(0,_getIterator2["default"])(input),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _currentValue2=_step.value;if(_currentValue2<0x80){output.push(stringFromCharCode(_currentValue2));}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}var basicLength=output.length;var handledCPCount=basicLength;// `handledCPCount` is the number of code points that have been handled;
// `basicLength` is the number of basic code points.
// Finish the basic string with a delimiter unless it's empty.
if(basicLength){output.push(delimiter);}// Main encoding loop:
while(handledCPCount<inputLength){// All non-basic code points < n have been handled already. Find the next
// larger one:
var m=maxInt;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=(0,_getIterator2["default"])(input),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var currentValue=_step2.value;if(currentValue>=n&&currentValue<m){m=currentValue;}}// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,
// but guard against overflow.
}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error$1('overflow');}delta+=(m-n)*handledCPCountPlusOne;n=m;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=(0,_getIterator2["default"])(input),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _currentValue=_step3.value;if(_currentValue<n&&++delta>maxInt){error$1('overflow');}if(_currentValue==n){// Represent delta as a generalized variable-length integer.
var q=delta;for(var k=base;;/* no condition */k+=base){var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break;}var qMinusT=q-t;var baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT);}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount;}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}++delta;++n;}return output.join('');};/**
 * Converts a Punycode string representing a domain name or an email address
 * to Unicode. Only the Punycoded parts of the input will be converted, i.e.
 * it doesn't matter if you call it on a string that has already been
 * converted to Unicode.
 * @memberOf punycode
 * @param {String} input The Punycoded domain name or email address to
 * convert to Unicode.
 * @returns {String} The Unicode representation of the given Punycode
 * string.
 */var toUnicode=function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode((0,_slice["default"])(string).call(string,4).toLowerCase()):string;});};/**
 * Converts a Unicode string representing a domain name or an email address to
 * Punycode. Only the non-ASCII parts of the domain name will be converted,
 * i.e. it doesn't matter if you call it with a domain that's already in
 * ASCII.
 * @memberOf punycode
 * @param {String} input The domain name or email address to convert, as a
 * Unicode string.
 * @returns {String} The Punycode representation of the given domain name or
 * email address.
 */var toASCII=function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?'xn--'+encode(string):string;});};/*--------------------------------------------------------------------------*/ /** Define the public API */var punycode={/**
  * A string representing the current Punycode.js version number.
  * @memberOf punycode
  * @type String
  */'version':'2.1.0',/**
  * An object of methods to convert from JavaScript's internal character
  * representation (UCS-2) to Unicode code points, and back.
  * @see <https://mathiasbynens.be/notes/javascript-encoding>
  * @memberOf punycode
  * @type Object
  */'ucs2':{'decode':ucs2decode,'encode':ucs2encode},'decode':decode,'encode':encode,'toASCII':toASCII,'toUnicode':toUnicode};/**
 * URI.js
 *
 * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/uri-js
 */ /**
 * Copyright 2011 Gary Court. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 *
 *    1. Redistributions of source code must retain the above copyright notice, this list of
 *       conditions and the following disclaimer.
 *
 *    2. Redistributions in binary form must reproduce the above copyright notice, this list
 *       of conditions and the following disclaimer in the documentation and/or other materials
 *       provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of Gary Court.
 */var SCHEMES={};function pctEncChar(chr){var c=chr.charCodeAt(0);var e=void 0;if(c<16)e="%0"+c.toString(16).toUpperCase();else if(c<128)e="%"+c.toString(16).toUpperCase();else if(c<2048)e="%"+(c>>6|192).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();else e="%"+(c>>12|224).toString(16).toUpperCase()+"%"+(c>>6&63|128).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();return e;}function pctDecChars(str){var newStr="";var i=0;var il=str.length;while(i<il){var c=(0,_parseInt2["default"])(str.substr(i+1,2),16);if(c<128){newStr+=String.fromCharCode(c);i+=3;}else if(c>=194&&c<224){if(il-i>=6){var c2=(0,_parseInt2["default"])(str.substr(i+4,2),16);newStr+=String.fromCharCode((c&31)<<6|c2&63);}else{newStr+=str.substr(i,6);}i+=6;}else if(c>=224){if(il-i>=9){var _c=(0,_parseInt2["default"])(str.substr(i+4,2),16);var c3=(0,_parseInt2["default"])(str.substr(i+7,2),16);newStr+=String.fromCharCode((c&15)<<12|(_c&63)<<6|c3&63);}else{newStr+=str.substr(i,9);}i+=9;}else{newStr+=str.substr(i,3);i+=3;}}return newStr;}function _normalizeComponentEncoding(components,protocol){function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(protocol.UNRESERVED)?str:decStr;}if(components.scheme)components.scheme=String(components.scheme).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME,"");if(components.userinfo!==undefined)components.userinfo=String(components.userinfo).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_USERINFO,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.host!==undefined)components.host=String(components.host).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.path!==undefined)components.path=String(components.path).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(components.scheme?protocol.NOT_PATH:protocol.NOT_PATH_NOSCHEME,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.query!==undefined)components.query=String(components.query).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_QUERY,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.fragment!==undefined)components.fragment=String(components.fragment).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_FRAGMENT,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);return components;}function _stripLeadingZeros(str){return str.replace(/^0*(.*)/,"$1")||"0";}function _normalizeIPv4(host,protocol){var matches=host.match(protocol.IPV4ADDRESS)||[];var _matches=slicedToArray(matches,2),address=_matches[1];if(address){var _context78;return(0,_map["default"])(_context78=address.split(".")).call(_context78,_stripLeadingZeros).join(".");}else{return host;}}function _normalizeIPv6(host,protocol){var matches=host.match(protocol.IPV6ADDRESS)||[];var _matches2=slicedToArray(matches,3),address=_matches2[1],zone=_matches2[2];if(address){var _context79,_context80,_context81;var _address$toLowerCase$=(0,_reverse["default"])(_context79=address.toLowerCase().split('::')).call(_context79),_address$toLowerCase$2=slicedToArray(_address$toLowerCase$,2),last=_address$toLowerCase$2[0],first=_address$toLowerCase$2[1];var firstFields=first?(0,_map["default"])(_context80=first.split(":")).call(_context80,_stripLeadingZeros):[];var lastFields=(0,_map["default"])(_context81=last.split(":")).call(_context81,_stripLeadingZeros);var isLastFieldIPv4Address=protocol.IPV4ADDRESS.test(lastFields[lastFields.length-1]);var fieldCount=isLastFieldIPv4Address?7:8;var lastFieldsStart=lastFields.length-fieldCount;var fields=Array(fieldCount);for(var x=0;x<fieldCount;++x){fields[x]=firstFields[x]||lastFields[lastFieldsStart+x]||'';}if(isLastFieldIPv4Address){fields[fieldCount-1]=_normalizeIPv4(fields[fieldCount-1],protocol);}var allZeroFields=(0,_reduce["default"])(fields).call(fields,function(acc,field,index){if(!field||field==="0"){var lastLongest=acc[acc.length-1];if(lastLongest&&lastLongest.index+lastLongest.length===index){lastLongest.length++;}else{acc.push({index:index,length:1});}}return acc;},[]);var longestZeroFields=(0,_sort["default"])(allZeroFields).call(allZeroFields,function(a,b){return b.length-a.length;})[0];var newHost=void 0;if(longestZeroFields&&longestZeroFields.length>1){var newFirst=(0,_slice["default"])(fields).call(fields,0,longestZeroFields.index);var newLast=(0,_slice["default"])(fields).call(fields,longestZeroFields.index+longestZeroFields.length);newHost=newFirst.join(":")+"::"+newLast.join(":");}else{newHost=fields.join(":");}if(zone){newHost+="%"+zone;}return newHost;}else{return host;}}var URI_PARSE=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;var NO_MATCH_IS_UNDEFINED="".match(/(){0}/)[1]===undefined;function parse(uriString){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var components={};var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;if(options.reference==="suffix")uriString=(options.scheme?options.scheme+":":"")+"//"+uriString;var matches=uriString.match(URI_PARSE);if(matches){if(NO_MATCH_IS_UNDEFINED){//store each component
components.scheme=matches[1];components.userinfo=matches[3];components.host=matches[4];components.port=(0,_parseInt2["default"])(matches[5],10);components.path=matches[6]||"";components.query=matches[7];components.fragment=matches[8];//fix port number
if(isNaN(components.port)){components.port=matches[5];}}else{//IE FIX for improper RegExp matching
//store each component
components.scheme=matches[1]||undefined;components.userinfo=(0,_indexOf["default"])(uriString).call(uriString,"@")!==-1?matches[3]:undefined;components.host=(0,_indexOf["default"])(uriString).call(uriString,"//")!==-1?matches[4]:undefined;components.port=(0,_parseInt2["default"])(matches[5],10);components.path=matches[6]||"";components.query=(0,_indexOf["default"])(uriString).call(uriString,"?")!==-1?matches[7]:undefined;components.fragment=(0,_indexOf["default"])(uriString).call(uriString,"#")!==-1?matches[8]:undefined;//fix port number
if(isNaN(components.port)){components.port=uriString.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?matches[4]:undefined;}}if(components.host){//normalize IP hosts
components.host=_normalizeIPv6(_normalizeIPv4(components.host,protocol),protocol);}//determine reference type
if(components.scheme===undefined&&components.userinfo===undefined&&components.host===undefined&&components.port===undefined&&!components.path&&components.query===undefined){components.reference="same-document";}else if(components.scheme===undefined){components.reference="relative";}else if(components.fragment===undefined){components.reference="absolute";}else{components.reference="uri";}//check for reference errors
if(options.reference&&options.reference!=="suffix"&&options.reference!==components.reference){components.error=components.error||"URI is not a "+options.reference+" reference.";}//find scheme handler
var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];//check if scheme can't handle IRIs
if(!options.unicodeSupport&&(!schemeHandler||!schemeHandler.unicodeSupport)){//if host component is a domain name
if(components.host&&(options.domainHost||schemeHandler&&schemeHandler.domainHost)){//convert Unicode IDN -> ASCII IDN
try{components.host=punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase());}catch(e){components.error=components.error||"Host's domain name can not be converted to ASCII via punycode: "+e;}}//convert IRI -> URI
_normalizeComponentEncoding(components,URI_PROTOCOL);}else{//normalize encodings
_normalizeComponentEncoding(components,protocol);}//perform scheme specific parsing
if(schemeHandler&&schemeHandler.parse){schemeHandler.parse(components,options);}}else{components.error=components.error||"URI can not be parsed.";}return components;}function _recomposeAuthority(components,options){var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];if(components.userinfo!==undefined){uriTokens.push(components.userinfo);uriTokens.push("@");}if(components.host!==undefined){//normalize IP hosts, add brackets and escape zone separator for IPv6
uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host),protocol),protocol).replace(protocol.IPV6ADDRESS,function(_,$1,$2){return"["+$1+($2?"%25"+$2:"")+"]";}));}if(typeof components.port==="number"||typeof components.port==="string"){uriTokens.push(":");uriTokens.push(String(components.port));}return uriTokens.length?uriTokens.join(""):undefined;}var RDS1=/^\.\.?\//;var RDS2=/^\/\.(\/|$)/;var RDS3=/^\/\.\.(\/|$)/;var RDS5=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(input){var output=[];while(input.length){if(input.match(RDS1)){input=input.replace(RDS1,"");}else if(input.match(RDS2)){input=input.replace(RDS2,"/");}else if(input.match(RDS3)){input=input.replace(RDS3,"/");output.pop();}else if(input==="."||input===".."){input="";}else{var im=input.match(RDS5);if(im){var s=im[0];input=(0,_slice["default"])(input).call(input,s.length);output.push(s);}else{throw new Error("Unexpected dot segment condition");}}}return output.join("");}function serialize(components){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var protocol=options.iri?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];//find scheme handler
var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];//perform scheme specific serialization
if(schemeHandler&&schemeHandler.serialize)schemeHandler.serialize(components,options);if(components.host){//if host component is an IPv6 address
if(protocol.IPV6ADDRESS.test(components.host));//TODO: normalize IPv6 address as per RFC 5952
//if host component is a domain name
else if(options.domainHost||schemeHandler&&schemeHandler.domainHost){//convert IDN via punycode
try{components.host=!options.iri?punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase()):punycode.toUnicode(components.host);}catch(e){components.error=components.error||"Host's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e;}}}//normalize encoding
_normalizeComponentEncoding(components,protocol);if(options.reference!=="suffix"&&components.scheme){uriTokens.push(components.scheme);uriTokens.push(":");}var authority=_recomposeAuthority(components,options);if(authority!==undefined){if(options.reference!=="suffix"){uriTokens.push("//");}uriTokens.push(authority);if(components.path&&components.path.charAt(0)!=="/"){uriTokens.push("/");}}if(components.path!==undefined){var s=components.path;if(!options.absolutePath&&(!schemeHandler||!schemeHandler.absolutePath)){s=removeDotSegments(s);}if(authority===undefined){s=s.replace(/^\/\//,"/%2F");//don't allow the path to start with "//"
}uriTokens.push(s);}if(components.query!==undefined){uriTokens.push("?");uriTokens.push(components.query);}if(components.fragment!==undefined){uriTokens.push("#");uriTokens.push(components.fragment);}return uriTokens.join("");//merge tokens into a string
}function resolveComponents(base,relative){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var skipNormalization=arguments[3];var target={};if(!skipNormalization){base=parse(serialize(base,options),options);//normalize base components
relative=parse(serialize(relative,options),options);//normalize relative components
}options=options||{};if(!options.tolerant&&relative.scheme){target.scheme=relative.scheme;//target.authority = relative.authority;
target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query;}else{if(relative.userinfo!==undefined||relative.host!==undefined||relative.port!==undefined){//target.authority = relative.authority;
target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query;}else{if(!relative.path){target.path=base.path;if(relative.query!==undefined){target.query=relative.query;}else{target.query=base.query;}}else{if(relative.path.charAt(0)==="/"){target.path=removeDotSegments(relative.path);}else{if((base.userinfo!==undefined||base.host!==undefined||base.port!==undefined)&&!base.path){target.path="/"+relative.path;}else if(!base.path){target.path=relative.path;}else{var _context82,_context83;target.path=(0,_slice["default"])(_context82=base.path).call(_context82,0,(0,_lastIndexOf["default"])(_context83=base.path).call(_context83,"/")+1)+relative.path;}target.path=removeDotSegments(target.path);}target.query=relative.query;}//target.authority = base.authority;
target.userinfo=base.userinfo;target.host=base.host;target.port=base.port;}target.scheme=base.scheme;}target.fragment=relative.fragment;return target;}function resolve(baseURI,relativeURI,options){var schemelessOptions=assign({scheme:'null'},options);return serialize(resolveComponents(parse(baseURI,schemelessOptions),parse(relativeURI,schemelessOptions),schemelessOptions,true),schemelessOptions);}function normalize(uri,options){if(typeof uri==="string"){uri=serialize(parse(uri,options),options);}else if(typeOf(uri)==="object"){uri=parse(serialize(uri,options),options);}return uri;}function equal(uriA,uriB,options){if(typeof uriA==="string"){uriA=serialize(parse(uriA,options),options);}else if(typeOf(uriA)==="object"){uriA=serialize(uriA,options);}if(typeof uriB==="string"){uriB=serialize(parse(uriB,options),options);}else if(typeOf(uriB)==="object"){uriB=serialize(uriB,options);}return uriA===uriB;}function escapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.ESCAPE:IRI_PROTOCOL.ESCAPE,pctEncChar);}function unescapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.PCT_ENCODED:IRI_PROTOCOL.PCT_ENCODED,pctDecChars);}var handler={scheme:"http",domainHost:true,parse:function parse(components,options){//report missing host
if(!components.host){components.error=components.error||"HTTP URIs must have a host.";}return components;},serialize:function serialize(components,options){var secure=String(components.scheme).toLowerCase()==="https";//normalize the default port
if(components.port===(secure?443:80)||components.port===""){components.port=undefined;}//normalize the empty path
if(!components.path){components.path="/";}//NOTE: We do not parse query strings for HTTP URIs
//as WWW Form Url Encoded query strings are part of the HTML4+ spec,
//and not the HTTP spec.
return components;}};var handler$1={scheme:"https",domainHost:handler.domainHost,parse:handler.parse,serialize:handler.serialize};function isSecure(wsComponents){return typeof wsComponents.secure==='boolean'?wsComponents.secure:String(wsComponents.scheme).toLowerCase()==="wss";}//RFC 6455
var handler$2={scheme:"ws",domainHost:true,parse:function parse(components,options){var wsComponents=components;//indicate if the secure flag is set
wsComponents.secure=isSecure(wsComponents);//construct resouce name
wsComponents.resourceName=(wsComponents.path||'/')+(wsComponents.query?'?'+wsComponents.query:'');wsComponents.path=undefined;wsComponents.query=undefined;return wsComponents;},serialize:function serialize(wsComponents,options){//normalize the default port
if(wsComponents.port===(isSecure(wsComponents)?443:80)||wsComponents.port===""){wsComponents.port=undefined;}//ensure scheme matches secure flag
if(typeof wsComponents.secure==='boolean'){wsComponents.scheme=wsComponents.secure?'wss':'ws';wsComponents.secure=undefined;}//reconstruct path from resource name
if(wsComponents.resourceName){var _wsComponents$resourc=wsComponents.resourceName.split('?'),_wsComponents$resourc2=slicedToArray(_wsComponents$resourc,2),path=_wsComponents$resourc2[0],query=_wsComponents$resourc2[1];wsComponents.path=path&&path!=='/'?path:undefined;wsComponents.query=query;wsComponents.resourceName=undefined;}//forbid fragment component
wsComponents.fragment=undefined;return wsComponents;}};var handler$3={scheme:"wss",domainHost:handler$2.domainHost,parse:handler$2.parse,serialize:handler$2.serialize};var O={};//RFC 3986
var UNRESERVED$$="[A-Za-z0-9\\-\\.\\_\\~"+"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF"+"]";var HEXDIG$$="[0-9A-Fa-f]";//case-insensitive
var PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$));//expanded
//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; =
//const ATEXT$$ = "[A-Za-z0-9\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~]";
//const WSP$$ = "[\\x20\\x09]";
//const OBS_QTEXT$$ = "[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]";  //(%d1-8 / %d11-12 / %d14-31 / %d127)
//const QTEXT$$ = merge("[\\x21\\x23-\\x5B\\x5D-\\x7E]", OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext
//const VCHAR$$ = "[\\x21-\\x7E]";
//const WSP$$ = "[\\x20\\x09]";
//const OBS_QP$ = subexp("\\\\" + merge("[\\x00\\x0D\\x0A]", OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext
//const FWS$ = subexp(subexp(WSP$$ + "*" + "\\x0D\\x0A") + "?" + WSP$$ + "+");
//const QUOTED_PAIR$ = subexp(subexp("\\\\" + subexp(VCHAR$$ + "|" + WSP$$)) + "|" + OBS_QP$);
//const QUOTED_STRING$ = subexp('\\"' + subexp(FWS$ + "?" + QCONTENT$) + "*" + FWS$ + "?" + '\\"');
var ATEXT$$="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]";var QTEXT$$="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]";var VCHAR$$=merge(QTEXT$$,"[\\\"\\\\]");var SOME_DELIMS$$="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]";var UNRESERVED=new RegExp(UNRESERVED$$,"g");var PCT_ENCODED=new RegExp(PCT_ENCODED$,"g");var NOT_LOCAL_PART=new RegExp(merge("[^]",ATEXT$$,"[\\.]",'[\\"]',VCHAR$$),"g");var NOT_HFNAME=new RegExp(merge("[^]",UNRESERVED$$,SOME_DELIMS$$),"g");var NOT_HFVALUE=NOT_HFNAME;function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(UNRESERVED)?str:decStr;}var handler$4={scheme:"mailto",parse:function parse$$1(components,options){var mailtoComponents=components;var to=mailtoComponents.to=mailtoComponents.path?mailtoComponents.path.split(","):[];mailtoComponents.path=undefined;if(mailtoComponents.query){var unknownHeaders=false;var headers={};var hfields=mailtoComponents.query.split("&");for(var x=0,xl=hfields.length;x<xl;++x){var hfield=hfields[x].split("=");switch(hfield[0]){case"to":var toAddrs=hfield[1].split(",");for(var _x=0,_xl=toAddrs.length;_x<_xl;++_x){to.push(toAddrs[_x]);}break;case"subject":mailtoComponents.subject=unescapeComponent(hfield[1],options);break;case"body":mailtoComponents.body=unescapeComponent(hfield[1],options);break;default:unknownHeaders=true;headers[unescapeComponent(hfield[0],options)]=unescapeComponent(hfield[1],options);break;}}if(unknownHeaders)mailtoComponents.headers=headers;}mailtoComponents.query=undefined;for(var _x2=0,_xl2=to.length;_x2<_xl2;++_x2){var addr=to[_x2].split("@");addr[0]=unescapeComponent(addr[0]);if(!options.unicodeSupport){//convert Unicode IDN -> ASCII IDN
try{addr[1]=punycode.toASCII(unescapeComponent(addr[1],options).toLowerCase());}catch(e){mailtoComponents.error=mailtoComponents.error||"Email address's domain name can not be converted to ASCII via punycode: "+e;}}else{addr[1]=unescapeComponent(addr[1],options).toLowerCase();}to[_x2]=addr.join("@");}return mailtoComponents;},serialize:function serialize$$1(mailtoComponents,options){var components=mailtoComponents;var to=toArray(mailtoComponents.to);if(to){for(var x=0,xl=to.length;x<xl;++x){var toAddr=String(to[x]);var atIdx=(0,_lastIndexOf["default"])(toAddr).call(toAddr,"@");var localPart=(0,_slice["default"])(toAddr).call(toAddr,0,atIdx).replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_LOCAL_PART,pctEncChar);var domain=(0,_slice["default"])(toAddr).call(toAddr,atIdx+1);//convert IDN via punycode
try{domain=!options.iri?punycode.toASCII(unescapeComponent(domain,options).toLowerCase()):punycode.toUnicode(domain);}catch(e){components.error=components.error||"Email address's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e;}to[x]=localPart+"@"+domain;}components.path=to.join(",");}var headers=mailtoComponents.headers=mailtoComponents.headers||{};if(mailtoComponents.subject)headers["subject"]=mailtoComponents.subject;if(mailtoComponents.body)headers["body"]=mailtoComponents.body;var fields=[];for(var name in headers){if(headers[name]!==O[name]){fields.push(name.replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFNAME,pctEncChar)+"="+headers[name].replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFVALUE,pctEncChar));}}if(fields.length){components.query=fields.join("&");}return components;}};var URN_PARSE=/^([^\:]+)\:(.*)/;//RFC 2141
var handler$5={scheme:"urn",parse:function parse$$1(components,options){var matches=components.path&&components.path.match(URN_PARSE);var urnComponents=components;if(matches){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=matches[1].toLowerCase();var nss=matches[2];var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];urnComponents.nid=nid;urnComponents.nss=nss;urnComponents.path=undefined;if(schemeHandler){urnComponents=schemeHandler.parse(urnComponents,options);}}else{urnComponents.error=urnComponents.error||"URN can not be parsed.";}return urnComponents;},serialize:function serialize$$1(urnComponents,options){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=urnComponents.nid;var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];if(schemeHandler){urnComponents=schemeHandler.serialize(urnComponents,options);}var uriComponents=urnComponents;var nss=urnComponents.nss;uriComponents.path=(nid||options.nid)+":"+nss;return uriComponents;}};var UUID=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;//RFC 4122
var handler$6={scheme:"urn:uuid",parse:function parse(urnComponents,options){var uuidComponents=urnComponents;uuidComponents.uuid=uuidComponents.nss;uuidComponents.nss=undefined;if(!options.tolerant&&(!uuidComponents.uuid||!uuidComponents.uuid.match(UUID))){uuidComponents.error=uuidComponents.error||"UUID is not valid.";}return uuidComponents;},serialize:function serialize(uuidComponents,options){var urnComponents=uuidComponents;//normalize UUID
urnComponents.nss=(uuidComponents.uuid||"").toLowerCase();return urnComponents;}};SCHEMES[handler.scheme]=handler;SCHEMES[handler$1.scheme]=handler$1;SCHEMES[handler$2.scheme]=handler$2;SCHEMES[handler$3.scheme]=handler$3;SCHEMES[handler$4.scheme]=handler$4;SCHEMES[handler$5.scheme]=handler$5;SCHEMES[handler$6.scheme]=handler$6;exports.SCHEMES=SCHEMES;exports.pctEncChar=pctEncChar;exports.pctDecChars=pctDecChars;exports.parse=parse;exports.removeDotSegments=removeDotSegments;exports.serialize=serialize;exports.resolveComponents=resolveComponents;exports.resolve=resolve;exports.normalize=normalize;exports.equal=equal;exports.escapeComponent=escapeComponent;exports.unescapeComponent=unescapeComponent;(0,_defineProperty3["default"])(exports,'__esModule',{value:true});});});var resolve=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.getSchemaRefs=exports.resolveUrl=exports.normalizeId=exports._getFullPath=exports.getFullPath=exports.inlineRef=void 0;// TODO refactor to use keyword definitions
var SIMPLE_INLINED=new _set["default"](["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(schema){var limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(typeof schema=="boolean")return true;if(limit===true)return!hasRef(schema);if(!limit)return false;return countKeys(schema)<=limit;}exports.inlineRef=inlineRef;var REF_KEYWORDS=new _set["default"](["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(schema){for(var key in schema){if(REF_KEYWORDS.has(key))return true;var sch=schema[key];if((0,_isArray["default"])(sch)&&(0,_some["default"])(sch).call(sch,hasRef))return true;if((0,_typeof2["default"])(sch)=="object"&&hasRef(sch))return true;}return false;}function countKeys(schema){var count=0;for(var key in schema){if(key==="$ref")return Infinity;count++;if(SIMPLE_INLINED.has(key))continue;if((0,_typeof2["default"])(schema[key])=="object"){util.eachItem(schema[key],function(sch){return count+=countKeys(sch);});}if(count===Infinity)return Infinity;}return count;}function getFullPath(){var id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var normalize=arguments.length>1?arguments[1]:undefined;if(normalize!==false)id=normalizeId(id);var p=uri_all.parse(id);return _getFullPath(p);}exports.getFullPath=getFullPath;function _getFullPath(p){return uri_all.serialize(p).split("#")[0]+"#";}exports._getFullPath=_getFullPath;var TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(id){return id?id.replace(TRAILING_SLASH_HASH,""):"";}exports.normalizeId=normalizeId;function resolveUrl(baseId,id){id=normalizeId(id);return uri_all.resolve(baseId,id);}exports.resolveUrl=resolveUrl;var ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(schema){var _this22=this;if(typeof schema=="boolean")return{};var schemaId=this.opts.schemaId;var schId=normalizeId(schema[schemaId]);var baseIds={"":schId};var pathPrefix=getFullPath(schId,false);var localRefs={};var schemaRefs=new _set["default"]();jsonSchemaTraverse(schema,{allKeys:true},function(sch,jsonPtr,_,parentJsonPtr){if(parentJsonPtr===undefined)return;var fullPath=pathPrefix+jsonPtr;var baseId=baseIds[parentJsonPtr];if(typeof sch[schemaId]=="string")baseId=addRef.call(_this22,sch[schemaId]);addAnchor.call(_this22,sch.$anchor);addAnchor.call(_this22,sch.$dynamicAnchor);baseIds[jsonPtr]=baseId;function addRef(ref){ref=normalizeId(baseId?uri_all.resolve(baseId,ref):ref);if(schemaRefs.has(ref))throw ambiguos(ref);schemaRefs.add(ref);var schOrRef=this.refs[ref];if(typeof schOrRef=="string")schOrRef=this.refs[schOrRef];if((0,_typeof2["default"])(schOrRef)=="object"){checkAmbiguosRef(sch,schOrRef.schema,ref);}else if(ref!==normalizeId(fullPath)){if(ref[0]==="#"){checkAmbiguosRef(sch,localRefs[ref],ref);localRefs[ref]=sch;}else{this.refs[ref]=fullPath;}}return ref;}function addAnchor(anchor){if(typeof anchor=="string"){if(!ANCHOR.test(anchor))throw new Error("invalid anchor \"".concat(anchor,"\""));addRef.call(this,"#".concat(anchor));}}});return localRefs;function checkAmbiguosRef(sch1,sch2,ref){if(sch2!==undefined&&!fastDeepEqual(sch1,sch2))throw ambiguos(ref);}function ambiguos(ref){return new Error("reference \"".concat(ref,"\" resolves to more than one schema"));}}exports.getSchemaRefs=getSchemaRefs;});var validate$1=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.getData=exports.KeywordCxt=exports.validateFunctionCode=void 0;var dataType_2=dataType;// schema compilation - generates validation function, subschemaCode (below) is used for subschemas
function validateFunctionCode(it){if(isSchemaObj(it)){checkKeywords(it);if(schemaCxtHasRules(it)){topSchemaObjCode(it);return;}}validateFunction(it,function(){return boolSchema.topBoolOrEmptySchema(it);});}exports.validateFunctionCode=validateFunctionCode;function validateFunction(_ref33,body){var gen=_ref33.gen,validateName=_ref33.validateName,schema=_ref33.schema,schemaEnv=_ref33.schemaEnv,opts=_ref33.opts;if(opts.code.es5){gen.func(validateName,codegen._(_templateObject124||(_templateObject124=(0,_taggedTemplateLiteral2["default"])(["",", ",""])),names_1["default"].data,names_1["default"].valCxt),schemaEnv.$async,function(){gen.code(codegen._(_templateObject125||(_templateObject125=(0,_taggedTemplateLiteral2["default"])(["\"use strict\"; ",""])),funcSourceUrl(schema,opts)));destructureValCxtES5(gen,opts);gen.code(body);});}else{gen.func(validateName,codegen._(_templateObject126||(_templateObject126=(0,_taggedTemplateLiteral2["default"])(["",", ",""])),names_1["default"].data,destructureValCxt(opts)),schemaEnv.$async,function(){return gen.code(funcSourceUrl(schema,opts)).code(body);});}}function destructureValCxt(opts){return codegen._(_templateObject127||(_templateObject127=(0,_taggedTemplateLiteral2["default"])(["{","=\"\", ",", ",", ","=","","}={}"])),names_1["default"].instancePath,names_1["default"].parentData,names_1["default"].parentDataProperty,names_1["default"].rootData,names_1["default"].data,opts.dynamicRef?codegen._(_templateObject128||(_templateObject128=(0,_taggedTemplateLiteral2["default"])([", ","={}"])),names_1["default"].dynamicAnchors):codegen.nil);}function destructureValCxtES5(gen,opts){gen["if"](names_1["default"].valCxt,function(){gen["var"](names_1["default"].instancePath,codegen._(_templateObject129||(_templateObject129=(0,_taggedTemplateLiteral2["default"])(["",".",""])),names_1["default"].valCxt,names_1["default"].instancePath));gen["var"](names_1["default"].parentData,codegen._(_templateObject130||(_templateObject130=(0,_taggedTemplateLiteral2["default"])(["",".",""])),names_1["default"].valCxt,names_1["default"].parentData));gen["var"](names_1["default"].parentDataProperty,codegen._(_templateObject131||(_templateObject131=(0,_taggedTemplateLiteral2["default"])(["",".",""])),names_1["default"].valCxt,names_1["default"].parentDataProperty));gen["var"](names_1["default"].rootData,codegen._(_templateObject132||(_templateObject132=(0,_taggedTemplateLiteral2["default"])(["",".",""])),names_1["default"].valCxt,names_1["default"].rootData));if(opts.dynamicRef)gen["var"](names_1["default"].dynamicAnchors,codegen._(_templateObject133||(_templateObject133=(0,_taggedTemplateLiteral2["default"])(["",".",""])),names_1["default"].valCxt,names_1["default"].dynamicAnchors));},function(){gen["var"](names_1["default"].instancePath,codegen._(_templateObject134||(_templateObject134=(0,_taggedTemplateLiteral2["default"])(["\"\""]))));gen["var"](names_1["default"].parentData,codegen._(_templateObject135||(_templateObject135=(0,_taggedTemplateLiteral2["default"])(["undefined"]))));gen["var"](names_1["default"].parentDataProperty,codegen._(_templateObject136||(_templateObject136=(0,_taggedTemplateLiteral2["default"])(["undefined"]))));gen["var"](names_1["default"].rootData,names_1["default"].data);if(opts.dynamicRef)gen["var"](names_1["default"].dynamicAnchors,codegen._(_templateObject137||(_templateObject137=(0,_taggedTemplateLiteral2["default"])(["{}"]))));});}function topSchemaObjCode(it){var schema=it.schema,opts=it.opts,gen=it.gen;validateFunction(it,function(){if(opts.$comment&&schema.$comment)commentKeyword(it);checkNoDefault(it);gen["let"](names_1["default"].vErrors,null);gen["let"](names_1["default"].errors,0);if(opts.unevaluated)resetEvaluated(it);typeAndKeywords(it);returnResults(it);});return;}function resetEvaluated(it){// TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated
var gen=it.gen,validateName=it.validateName;it.evaluated=gen["const"]("evaluated",codegen._(_templateObject138||(_templateObject138=(0,_taggedTemplateLiteral2["default"])(["",".evaluated"])),validateName));gen["if"](codegen._(_templateObject139||(_templateObject139=(0,_taggedTemplateLiteral2["default"])(["",".dynamicProps"])),it.evaluated),function(){return gen.assign(codegen._(_templateObject140||(_templateObject140=(0,_taggedTemplateLiteral2["default"])(["",".props"])),it.evaluated),codegen._(_templateObject141||(_templateObject141=(0,_taggedTemplateLiteral2["default"])(["undefined"]))));});gen["if"](codegen._(_templateObject142||(_templateObject142=(0,_taggedTemplateLiteral2["default"])(["",".dynamicItems"])),it.evaluated),function(){return gen.assign(codegen._(_templateObject143||(_templateObject143=(0,_taggedTemplateLiteral2["default"])(["",".items"])),it.evaluated),codegen._(_templateObject144||(_templateObject144=(0,_taggedTemplateLiteral2["default"])(["undefined"]))));});}function funcSourceUrl(schema,opts){var schId=(0,_typeof2["default"])(schema)=="object"&&schema[opts.schemaId];return schId&&(opts.code.source||opts.code.process)?codegen._(_templateObject145||(_templateObject145=(0,_taggedTemplateLiteral2["default"])(["/*# sourceURL="," */"])),schId):codegen.nil;}// schema compilation - this function is used recursively to generate code for sub-schemas
function subschemaCode(it,valid){if(isSchemaObj(it)){checkKeywords(it);if(schemaCxtHasRules(it)){subSchemaObjCode(it,valid);return;}}boolSchema.boolOrEmptySchema(it,valid);}function schemaCxtHasRules(_ref34){var schema=_ref34.schema,self=_ref34.self;if(typeof schema=="boolean")return!schema;for(var key in schema){if(self.RULES.all[key])return true;}return false;}function isSchemaObj(it){return typeof it.schema!="boolean";}function subSchemaObjCode(it,valid){var schema=it.schema,gen=it.gen,opts=it.opts;if(opts.$comment&&schema.$comment)commentKeyword(it);updateContext(it);checkAsyncSchema(it);var errsCount=gen["const"]("_errs",names_1["default"].errors);typeAndKeywords(it,errsCount);// TODO var
gen["var"](valid,codegen._(_templateObject146||(_templateObject146=(0,_taggedTemplateLiteral2["default"])([""," === ",""])),errsCount,names_1["default"].errors));}function checkKeywords(it){util.checkUnknownRules(it);checkRefsAndKeywords(it);}function typeAndKeywords(it,errsCount){if(it.opts.jtd)return schemaKeywords(it,[],false,errsCount);var types=dataType.getSchemaTypes(it.schema);var checkedTypes=dataType.coerceAndCheckDataType(it,types);schemaKeywords(it,types,!checkedTypes,errsCount);}function checkRefsAndKeywords(it){var schema=it.schema,errSchemaPath=it.errSchemaPath,opts=it.opts,self=it.self;if(schema.$ref&&opts.ignoreKeywordsWithRef&&util.schemaHasRulesButRef(schema,self.RULES)){self.logger.warn("$ref: keywords ignored in schema at path \"".concat(errSchemaPath,"\""));}}function checkNoDefault(it){var schema=it.schema,opts=it.opts;if(schema["default"]!==undefined&&opts.useDefaults&&opts.strictSchema){util.checkStrictMode(it,"default is ignored in the schema root");}}function updateContext(it){var schId=it.schema[it.opts.schemaId];if(schId)it.baseId=resolve.resolveUrl(it.baseId,schId);}function checkAsyncSchema(it){if(it.schema.$async&&!it.schemaEnv.$async)throw new Error("async schema in sync schema");}function commentKeyword(_ref35){var gen=_ref35.gen,schemaEnv=_ref35.schemaEnv,schema=_ref35.schema,errSchemaPath=_ref35.errSchemaPath,opts=_ref35.opts;var msg=schema.$comment;if(opts.$comment===true){gen.code(codegen._(_templateObject147||(_templateObject147=(0,_taggedTemplateLiteral2["default"])(["",".logger.log(",")"])),names_1["default"].self,msg));}else if(typeof opts.$comment=="function"){var schemaPath=codegen.str(_templateObject148||(_templateObject148=(0,_taggedTemplateLiteral2["default"])(["","/$comment"])),errSchemaPath);var rootName=gen.scopeValue("root",{ref:schemaEnv.root});gen.code(codegen._(_templateObject149||(_templateObject149=(0,_taggedTemplateLiteral2["default"])(["",".opts.$comment(",", ",", ",".schema)"])),names_1["default"].self,msg,schemaPath,rootName));}}function returnResults(it){var gen=it.gen,schemaEnv=it.schemaEnv,validateName=it.validateName,ValidationError=it.ValidationError,opts=it.opts;if(schemaEnv.$async){// TODO assign unevaluated
gen["if"](codegen._(_templateObject150||(_templateObject150=(0,_taggedTemplateLiteral2["default"])([""," === 0"])),names_1["default"].errors),function(){return gen["return"](names_1["default"].data);},function(){return gen["throw"](codegen._(_templateObject151||(_templateObject151=(0,_taggedTemplateLiteral2["default"])(["new ","(",")"])),ValidationError,names_1["default"].vErrors));});}else{gen.assign(codegen._(_templateObject152||(_templateObject152=(0,_taggedTemplateLiteral2["default"])(["",".errors"])),validateName),names_1["default"].vErrors);if(opts.unevaluated)assignEvaluated(it);gen["return"](codegen._(_templateObject153||(_templateObject153=(0,_taggedTemplateLiteral2["default"])([""," === 0"])),names_1["default"].errors));}}function assignEvaluated(_ref36){var gen=_ref36.gen,evaluated=_ref36.evaluated,props=_ref36.props,items=_ref36.items;if(props instanceof codegen.Name)gen.assign(codegen._(_templateObject154||(_templateObject154=(0,_taggedTemplateLiteral2["default"])(["",".props"])),evaluated),props);if(items instanceof codegen.Name)gen.assign(codegen._(_templateObject155||(_templateObject155=(0,_taggedTemplateLiteral2["default"])(["",".items"])),evaluated),items);}function schemaKeywords(it,types,typeErrors,errsCount){var gen=it.gen,schema=it.schema,data=it.data,allErrors=it.allErrors,opts=it.opts,self=it.self;var RULES=self.RULES;if(schema.$ref&&(opts.ignoreKeywordsWithRef||!util.schemaHasRulesButRef(schema,RULES))){gen.block(function(){return keywordCode(it,"$ref",RULES.all.$ref.definition);});// TODO typecast
return;}if(!opts.jtd)checkStrictTypes(it,types);gen.block(function(){var _iterator7=_createForOfIteratorHelper(RULES.rules),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var group=_step7.value;groupKeywords(group);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}groupKeywords(RULES.post);});function groupKeywords(group){if(!applicability.shouldUseGroup(schema,group))return;if(group.type){gen["if"](dataType_2.checkDataType(group.type,data,opts.strictNumbers));iterateKeywords(it,group);if(types.length===1&&types[0]===group.type&&typeErrors){gen["else"]();dataType_2.reportTypeError(it);}gen.endIf();}else{iterateKeywords(it,group);}// TODO make it "ok" call?
if(!allErrors)gen["if"](codegen._(_templateObject156||(_templateObject156=(0,_taggedTemplateLiteral2["default"])([""," === ",""])),names_1["default"].errors,errsCount||0));}}function iterateKeywords(it,group){var gen=it.gen,schema=it.schema,useDefaults=it.opts.useDefaults;if(useDefaults)defaults.assignDefaults(it,group.type);gen.block(function(){var _iterator8=_createForOfIteratorHelper(group.rules),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var rule=_step8.value;if(applicability.shouldUseRule(schema,rule)){keywordCode(it,rule.keyword,rule.definition,group.type);}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}});}function checkStrictTypes(it,types){if(it.schemaEnv.meta||!it.opts.strictTypes)return;checkContextTypes(it,types);if(!it.opts.allowUnionTypes)checkMultipleTypes(it,types);checkKeywordTypes(it,it.dataTypes);}function checkContextTypes(it,types){var _context85;if(!types.length)return;if(!it.dataTypes.length){it.dataTypes=types;return;}(0,_forEach["default"])(types).call(types,function(t){if(!includesType(it.dataTypes,t)){var _context84;strictTypesError(it,(0,_concat["default"])(_context84="type \"".concat(t,"\" not allowed by context \"")).call(_context84,it.dataTypes.join(","),"\""));}});it.dataTypes=(0,_filter["default"])(_context85=it.dataTypes).call(_context85,function(t){return includesType(types,t);});}function checkMultipleTypes(it,ts){if(ts.length>1&&!(ts.length===2&&(0,_includes["default"])(ts).call(ts,"null"))){strictTypesError(it,"use allowUnionTypes to allow union type keyword");}}function checkKeywordTypes(it,ts){var rules=it.self.RULES.all;for(var _keyword in rules){var rule=rules[_keyword];if((0,_typeof2["default"])(rule)=="object"&&applicability.shouldUseRule(it.schema,rule)){var _type=rule.definition.type;if(_type.length&&!(0,_some["default"])(_type).call(_type,function(t){return hasApplicableType(ts,t);})){var _context86;strictTypesError(it,(0,_concat["default"])(_context86="missing type \"".concat(_type.join(","),"\" for keyword \"")).call(_context86,_keyword,"\""));}}}}function hasApplicableType(schTs,kwdT){return(0,_includes["default"])(schTs).call(schTs,kwdT)||kwdT==="number"&&(0,_includes["default"])(schTs).call(schTs,"integer");}function includesType(ts,t){return(0,_includes["default"])(ts).call(ts,t)||t==="integer"&&(0,_includes["default"])(ts).call(ts,"number");}function strictTypesError(it,msg){var schemaPath=it.schemaEnv.baseId+it.errSchemaPath;msg+=" at \"".concat(schemaPath,"\" (strictTypes)");util.checkStrictMode(it,msg,it.opts.strictTypes);}var KeywordCxt=/*#__PURE__*/function(){function KeywordCxt(it,def,keyword$1){(0,_classCallCheck2["default"])(this,KeywordCxt);keyword.validateKeywordUsage(it,def,keyword$1);this.gen=it.gen;this.allErrors=it.allErrors;this.keyword=keyword$1;this.data=it.data;this.schema=it.schema[keyword$1];this.$data=def.$data&&it.opts.$data&&this.schema&&this.schema.$data;this.schemaValue=util.schemaRefOrVal(it,this.schema,keyword$1,this.$data);this.schemaType=def.schemaType;this.parentSchema=it.schema;this.params={};this.it=it;this.def=def;if(this.$data){this.schemaCode=it.gen["const"]("vSchema",getData(this.$data,it));}else{this.schemaCode=this.schemaValue;if(!keyword.validSchemaType(this.schema,def.schemaType,def.allowUndefined)){var _context87;throw new Error((0,_concat["default"])(_context87="".concat(keyword$1," value must be ")).call(_context87,(0,_stringify["default"])(def.schemaType)));}}if("code"in def?def.trackErrors:def.errors!==false){this.errsCount=it.gen["const"]("_errs",names_1["default"].errors);}}(0,_createClass2["default"])(KeywordCxt,[{key:"result",value:function result(condition,successAction,failAction){this.gen["if"](codegen.not(condition));if(failAction)failAction();else this.error();if(successAction){this.gen["else"]();successAction();if(this.allErrors)this.gen.endIf();}else{if(this.allErrors)this.gen.endIf();else this.gen["else"]();}}},{key:"pass",value:function pass(condition,failAction){this.result(condition,undefined,failAction);}},{key:"fail",value:function fail(condition){if(condition===undefined){this.error();if(!this.allErrors)this.gen["if"](false);// this branch will be removed by gen.optimize
return;}this.gen["if"](condition);this.error();if(this.allErrors)this.gen.endIf();else this.gen["else"]();}},{key:"fail$data",value:function fail$data(condition){if(!this.$data)return this.fail(condition);var schemaCode=this.schemaCode;this.fail(codegen._(_templateObject157||(_templateObject157=(0,_taggedTemplateLiteral2["default"])([""," !== undefined && (",")"])),schemaCode,codegen.or(this.invalid$data(),condition)));}},{key:"error",value:function error(append,errorParams,errorPaths){if(errorParams){this.setParams(errorParams);this._error(append,errorPaths);this.setParams({});return;}this._error(append,errorPaths);}},{key:"_error",value:function _error(append,errorPaths){(append?errors.reportExtraError:errors.reportError)(this,this.def.error,errorPaths);}},{key:"$dataError",value:function $dataError(){errors.reportError(this,this.def.$dataError||errors.keyword$DataError);}},{key:"reset",value:function reset(){if(this.errsCount===undefined)throw new Error('add "trackErrors" to keyword definition');errors.resetErrorsCount(this.gen,this.errsCount);}},{key:"ok",value:function ok(cond){if(!this.allErrors)this.gen["if"](cond);}},{key:"setParams",value:function setParams(obj,assign){if(assign)(0,_assign["default"])(this.params,obj);else this.params=obj;}},{key:"block$data",value:function block$data(valid,codeBlock){var _this23=this;var $dataValid=arguments.length>2&&arguments[2]!==undefined?arguments[2]:codegen.nil;this.gen.block(function(){_this23.check$data(valid,$dataValid);codeBlock();});}},{key:"check$data",value:function check$data(){var valid=arguments.length>0&&arguments[0]!==undefined?arguments[0]:codegen.nil;var $dataValid=arguments.length>1&&arguments[1]!==undefined?arguments[1]:codegen.nil;if(!this.$data)return;var gen=this.gen,schemaCode=this.schemaCode,schemaType=this.schemaType,def=this.def;gen["if"](codegen.or(codegen._(_templateObject158||(_templateObject158=(0,_taggedTemplateLiteral2["default"])([""," === undefined"])),schemaCode),$dataValid));if(valid!==codegen.nil)gen.assign(valid,true);if(schemaType.length||def.validateSchema){gen.elseIf(this.invalid$data());this.$dataError();if(valid!==codegen.nil)gen.assign(valid,false);}gen["else"]();}},{key:"invalid$data",value:function invalid$data(){var gen=this.gen,schemaCode=this.schemaCode,schemaType=this.schemaType,def=this.def,it=this.it;return codegen.or(wrong$DataType(),invalid$DataSchema());function wrong$DataType(){if(schemaType.length){/* istanbul ignore if */if(!(schemaCode instanceof codegen.Name))throw new Error("ajv implementation error");var st=(0,_isArray["default"])(schemaType)?schemaType:[schemaType];return codegen._(_templateObject159||(_templateObject159=(0,_taggedTemplateLiteral2["default"])(["",""])),dataType_2.checkDataTypes(st,schemaCode,it.opts.strictNumbers,dataType_2.DataType.Wrong));}return codegen.nil;}function invalid$DataSchema(){if(def.validateSchema){var validateSchemaRef=gen.scopeValue("validate$data",{ref:def.validateSchema});// TODO value.code for standalone
return codegen._(_templateObject160||(_templateObject160=(0,_taggedTemplateLiteral2["default"])(["!","(",")"])),validateSchemaRef,schemaCode);}return codegen.nil;}}},{key:"subschema",value:function subschema(appl,valid){var subschema$1=_subschema.getSubschema(this.it,appl);_subschema.extendSubschemaData(subschema$1,this.it,appl);_subschema.extendSubschemaMode(subschema$1,appl);var nextContext=_objectSpread(_objectSpread(_objectSpread({},this.it),subschema$1),{},{items:undefined,props:undefined});subschemaCode(nextContext,valid);return nextContext;}},{key:"mergeEvaluated",value:function mergeEvaluated(schemaCxt,toName){var it=this.it,gen=this.gen;if(!it.opts.unevaluated)return;if(it.props!==true&&schemaCxt.props!==undefined){it.props=util.mergeEvaluated.props(gen,schemaCxt.props,it.props,toName);}if(it.items!==true&&schemaCxt.items!==undefined){it.items=util.mergeEvaluated.items(gen,schemaCxt.items,it.items,toName);}}},{key:"mergeValidEvaluated",value:function mergeValidEvaluated(schemaCxt,valid){var _this24=this;var it=this.it,gen=this.gen;if(it.opts.unevaluated&&(it.props!==true||it.items!==true)){gen["if"](valid,function(){return _this24.mergeEvaluated(schemaCxt,codegen.Name);});return true;}}}]);return KeywordCxt;}();exports.KeywordCxt=KeywordCxt;function keywordCode(it,keyword$1,def,ruleType){var cxt=new KeywordCxt(it,def,keyword$1);if("code"in def){def.code(cxt,ruleType);}else if(cxt.$data&&def.validate){keyword.funcKeywordCode(cxt,def);}else if("macro"in def){keyword.macroKeywordCode(cxt,def);}else if(def.compile||def.validate){keyword.funcKeywordCode(cxt,def);}}var JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/;var RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData($data,_ref37){var dataLevel=_ref37.dataLevel,dataNames=_ref37.dataNames,dataPathArr=_ref37.dataPathArr;var jsonPointer;var data;if($data==="")return names_1["default"].rootData;if($data[0]==="/"){if(!JSON_POINTER.test($data))throw new Error("Invalid JSON-pointer: ".concat($data));jsonPointer=$data;data=names_1["default"].rootData;}else{var matches=RELATIVE_JSON_POINTER.exec($data);if(!matches)throw new Error("Invalid JSON-pointer: ".concat($data));var up=+matches[1];jsonPointer=matches[2];if(jsonPointer==="#"){if(up>=dataLevel)throw new Error(errorMsg("property/index",up));return dataPathArr[dataLevel-up];}if(up>dataLevel)throw new Error(errorMsg("data",up));data=dataNames[dataLevel-up];if(!jsonPointer)return data;}var expr=data;var segments=jsonPointer.split("/");var _iterator9=_createForOfIteratorHelper(segments),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var segment=_step9.value;if(segment){data=codegen._(_templateObject161||(_templateObject161=(0,_taggedTemplateLiteral2["default"])(["","",""])),data,codegen.getProperty(util.unescapeJsonPointer(segment)));expr=codegen._(_templateObject162||(_templateObject162=(0,_taggedTemplateLiteral2["default"])([""," && ",""])),expr,data);}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return expr;function errorMsg(pointerType,up){var _context88,_context89;return(0,_concat["default"])(_context88=(0,_concat["default"])(_context89="Cannot access ".concat(pointerType," ")).call(_context89,up," levels up, current level is ")).call(_context88,dataLevel);}}exports.getData=getData;});var ValidationError=/*#__PURE__*/function(_Error2){(0,_inherits2["default"])(ValidationError,_Error2);var _super27=_createSuper(ValidationError);function ValidationError(errors){var _this25;(0,_classCallCheck2["default"])(this,ValidationError);_this25=_super27.call(this,"validation failed");_this25.errors=errors;_this25.ajv=_this25.validation=true;return _this25;}return ValidationError;}(/*#__PURE__*/(0,_wrapNativeSuper2["default"])(Error));var _default$y=ValidationError;var validation_error=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$y},'__esModule',{value:true});var MissingRefError=/*#__PURE__*/function(_Error3){(0,_inherits2["default"])(MissingRefError,_Error3);var _super28=_createSuper(MissingRefError);function MissingRefError(baseId,ref,msg){var _context90;var _this26;(0,_classCallCheck2["default"])(this,MissingRefError);_this26=_super28.call(this,msg||(0,_concat["default"])(_context90="can't resolve reference ".concat(ref," from id ")).call(_context90,baseId));_this26.missingRef=resolve.resolveUrl(baseId,ref);_this26.missingSchema=resolve.normalizeId(resolve.getFullPath(_this26.missingRef));return _this26;}return MissingRefError;}(/*#__PURE__*/(0,_wrapNativeSuper2["default"])(Error));var _default$x=MissingRefError;var ref_error=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$x},'__esModule',{value:true});var compile=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.resolveSchema=exports.getCompilingSchema=exports.resolveRef=exports.compileSchema=exports.SchemaEnv=void 0;var SchemaEnv=function SchemaEnv(env){(0,_classCallCheck2["default"])(this,SchemaEnv);var _a;this.refs={};this.dynamicAnchors={};var schema;if((0,_typeof2["default"])(env.schema)=="object")schema=env.schema;this.schema=env.schema;this.schemaId=env.schemaId;this.root=env.root||this;this.baseId=(_a=env.baseId)!==null&&_a!==void 0?_a:resolve.normalizeId(schema===null||schema===void 0?void 0:schema[env.schemaId||"$id"]);this.schemaPath=env.schemaPath;this.localRefs=env.localRefs;this.meta=env.meta;this.$async=schema===null||schema===void 0?void 0:schema.$async;this.refs={};};exports.SchemaEnv=SchemaEnv;// let codeSize = 0
// let nodeCount = 0
// Compiles schema in SchemaEnv
function compileSchema(sch){// TODO refactor - remove compilations
var _sch=getCompilingSchema.call(this,sch);if(_sch)return _sch;var rootId=resolve.getFullPath(sch.root.baseId);// TODO if getFullPath removed 1 tests fails
var _this$opts$code=this.opts.code,es5=_this$opts$code.es5,lines=_this$opts$code.lines;var ownProperties=this.opts.ownProperties;var gen=new codegen.CodeGen(this.scope,{es5:es5,lines:lines,ownProperties:ownProperties});var _ValidationError;if(sch.$async){_ValidationError=gen.scopeValue("Error",{ref:validation_error["default"],code:codegen._(_templateObject163||(_templateObject163=(0,_taggedTemplateLiteral2["default"])(["require(\"ajv/dist/runtime/validation_error\").default"])))});}var validateName=gen.scopeName("validate");sch.validateName=validateName;var schemaCxt={gen:gen,allErrors:this.opts.allErrors,data:names_1["default"].data,parentData:names_1["default"].parentData,parentDataProperty:names_1["default"].parentDataProperty,dataNames:[names_1["default"].data],dataPathArr:[codegen.nil],dataLevel:0,dataTypes:[],definedProperties:new _set["default"](),topSchemaRef:gen.scopeValue("schema",this.opts.code.source===true?{ref:sch.schema,code:codegen.stringify(sch.schema)}:{ref:sch.schema}),validateName:validateName,ValidationError:_ValidationError,schema:sch.schema,schemaEnv:sch,rootId:rootId,baseId:sch.baseId||rootId,schemaPath:codegen.nil,errSchemaPath:sch.schemaPath||(this.opts.jtd?"":"#"),errorPath:codegen._(_templateObject164||(_templateObject164=(0,_taggedTemplateLiteral2["default"])(["\"\""]))),opts:this.opts,self:this};var sourceCode;try{var _context91;this._compilations.add(sch);validate$1.validateFunctionCode(schemaCxt);gen.optimize(this.opts.code.optimize);// gen.optimize(1)
var validateCode=gen.toString();sourceCode=(0,_concat["default"])(_context91="".concat(gen.scopeRefs(names_1["default"].scope),"return ")).call(_context91,validateCode);// console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))
if(this.opts.code.process)sourceCode=this.opts.code.process(sourceCode,sch);// console.log("\n\n\n *** \n", sourceCode)
var makeValidate=new Function("".concat(names_1["default"].self),"".concat(names_1["default"].scope),sourceCode);var _validate=makeValidate(this,this.scope.get());this.scope.value(validateName,{ref:_validate});_validate.errors=null;_validate.schema=sch.schema;_validate.schemaEnv=sch;if(sch.$async)_validate.$async=true;if(this.opts.code.source===true){_validate.source={validateName:validateName,validateCode:validateCode,scopeValues:gen._values};}if(this.opts.unevaluated){var props=schemaCxt.props,_items=schemaCxt.items;_validate.evaluated={props:props instanceof codegen.Name?undefined:props,items:_items instanceof codegen.Name?undefined:_items,dynamicProps:props instanceof codegen.Name,dynamicItems:_items instanceof codegen.Name};if(_validate.source)_validate.source.evaluated=codegen.stringify(_validate.evaluated);}sch.validate=_validate;return sch;}catch(e){delete sch.validate;delete sch.validateName;if(sourceCode)this.logger.error("Error compiling schema, function code:",sourceCode);// console.log("\n\n\n *** \n", sourceCode, this.opts)
throw e;}finally{this._compilations["delete"](sch);}}exports.compileSchema=compileSchema;function resolveRef(root,baseId,ref){var _a;ref=resolve.resolveUrl(baseId,ref);var schOrFunc=root.refs[ref];if(schOrFunc)return schOrFunc;var _sch=resolve$1.call(this,root,ref);if(_sch===undefined){var schema=(_a=root.localRefs)===null||_a===void 0?void 0:_a[ref];// TODO maybe localRefs should hold SchemaEnv
var schemaId=this.opts.schemaId;if(schema)_sch=new SchemaEnv({schema:schema,schemaId:schemaId,root:root,baseId:baseId});}if(_sch===undefined)return;return root.refs[ref]=inlineOrCompile.call(this,_sch);}exports.resolveRef=resolveRef;function inlineOrCompile(sch){if(resolve.inlineRef(sch.schema,this.opts.inlineRefs))return sch.schema;return sch.validate?sch:compileSchema.call(this,sch);}// Index of schema compilation in the currently compiled list
function getCompilingSchema(schEnv){var _iterator10=_createForOfIteratorHelper(this._compilations),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var sch=_step10.value;if(sameSchemaEnv(sch,schEnv))return sch;}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}exports.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(s1,s2){return s1.schema===s2.schema&&s1.root===s2.root&&s1.baseId===s2.baseId;}// resolve and compile the references ($ref)
// TODO returns AnySchemaObject (if the schema can be inlined) or validation function
function resolve$1(root,// information about the root schema for the current schema
ref// reference to resolve
){var sch;while(typeof(sch=this.refs[ref])=="string"){ref=sch;}return sch||this.schemas[ref]||resolveSchema.call(this,root,ref);}// Resolve schema, its root and baseId
function resolveSchema(root,// root object with properties schema, refs TODO below SchemaEnv is assigned to it
ref// reference to resolve
){var p=uri_all.parse(ref);var refPath=resolve._getFullPath(p);var baseId=resolve.getFullPath(root.baseId);// TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests
if((0,_keys["default"])(root.schema).length>0&&refPath===baseId){return getJsonPointer.call(this,p,root);}var id=resolve.normalizeId(refPath);var schOrRef=this.refs[id]||this.schemas[id];if(typeof schOrRef=="string"){var sch=resolveSchema.call(this,root,schOrRef);if((0,_typeof2["default"])(sch===null||sch===void 0?void 0:sch.schema)!=="object")return;return getJsonPointer.call(this,p,sch);}if((0,_typeof2["default"])(schOrRef===null||schOrRef===void 0?void 0:schOrRef.schema)!=="object")return;if(!schOrRef.validate)compileSchema.call(this,schOrRef);if(id===resolve.normalizeId(ref)){var schema=schOrRef.schema;var schemaId=this.opts.schemaId;var schId=schema[schemaId];if(schId)baseId=resolve.resolveUrl(baseId,schId);return new SchemaEnv({schema:schema,schemaId:schemaId,root:root,baseId:baseId});}return getJsonPointer.call(this,p,schOrRef);}exports.resolveSchema=resolveSchema;var PREVENT_SCOPE_CHANGE=new _set["default"](["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(parsedRef,_ref38){var _context92;var baseId=_ref38.baseId,schema=_ref38.schema,root=_ref38.root;var _a;if(((_a=parsedRef.fragment)===null||_a===void 0?void 0:_a[0])!=="/")return;var _iterator11=_createForOfIteratorHelper((0,_slice["default"])(_context92=parsedRef.fragment).call(_context92,1).split("/")),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var part=_step11.value;if(typeof schema=="boolean")return;schema=schema[util.unescapeFragment(part)];if(schema===undefined)return;// TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?
var schId=(0,_typeof2["default"])(schema)=="object"&&schema[this.opts.schemaId];if(!PREVENT_SCOPE_CHANGE.has(part)&&schId){baseId=resolve.resolveUrl(baseId,schId);}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}var env;if(typeof schema!="boolean"&&schema.$ref&&!util.schemaHasRulesButRef(schema,this.RULES)){var $ref=resolve.resolveUrl(baseId,schema.$ref);env=resolveSchema.call(this,root,$ref);}// even though resolution failed we need to return SchemaEnv to throw exception
// so that compileAsync loads missing schema.
var schemaId=this.opts.schemaId;env=env||new SchemaEnv({schema:schema,schemaId:schemaId,root:root,baseId:baseId});if(env.schema!==env.root.schema)return env;return undefined;}});var $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#";var description="Meta-schema for $data reference (JSON AnySchema extension proposal)";var type$1="object";var required$1=["$data"];var properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}};var additionalProperties$1=false;var $dataRefSchema={$id:$id$1,description:description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var core$1=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.CodeGen=exports.Name=exports.nil=exports.stringify=exports.str=exports._=exports.KeywordCxt=void 0;(0,_defineProperty3["default"])(exports,"KeywordCxt",{enumerable:true,get:function get(){return validate$1.KeywordCxt;}});(0,_defineProperty3["default"])(exports,"_",{enumerable:true,get:function get(){return codegen._;}});(0,_defineProperty3["default"])(exports,"str",{enumerable:true,get:function get(){return codegen.str;}});(0,_defineProperty3["default"])(exports,"stringify",{enumerable:true,get:function get(){return codegen.stringify;}});(0,_defineProperty3["default"])(exports,"nil",{enumerable:true,get:function get(){return codegen.nil;}});(0,_defineProperty3["default"])(exports,"Name",{enumerable:true,get:function get(){return codegen.Name;}});(0,_defineProperty3["default"])(exports,"CodeGen",{enumerable:true,get:function get(){return codegen.CodeGen;}});var codegen_2=codegen;var META_IGNORE_OPTIONS=["removeAdditional","useDefaults","coerceTypes"];var EXT_SCOPE_NAMES=new _set["default"](["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]);var removedOptions={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."};var deprecatedOptions={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};var MAX_EXPRESSION=200;// eslint-disable-next-line complexity
function requiredOptions(o){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,_u,_v,_w;var s=o.strict;var _optz=(_a=o.code)===null||_a===void 0?void 0:_a.optimize;var optimize=_optz===true||_optz===undefined?1:_optz||0;return{strictSchema:(_c=(_b=o.strictSchema)!==null&&_b!==void 0?_b:s)!==null&&_c!==void 0?_c:true,strictNumbers:(_e=(_d=o.strictNumbers)!==null&&_d!==void 0?_d:s)!==null&&_e!==void 0?_e:true,strictTypes:(_g=(_f=o.strictTypes)!==null&&_f!==void 0?_f:s)!==null&&_g!==void 0?_g:"log",strictTuples:(_j=(_h=o.strictTuples)!==null&&_h!==void 0?_h:s)!==null&&_j!==void 0?_j:"log",strictRequired:(_l=(_k=o.strictRequired)!==null&&_k!==void 0?_k:s)!==null&&_l!==void 0?_l:false,code:o.code?_objectSpread(_objectSpread({},o.code),{},{optimize:optimize}):{optimize:optimize},loopRequired:(_m=o.loopRequired)!==null&&_m!==void 0?_m:MAX_EXPRESSION,loopEnum:(_o=o.loopEnum)!==null&&_o!==void 0?_o:MAX_EXPRESSION,meta:(_p=o.meta)!==null&&_p!==void 0?_p:true,messages:(_q=o.messages)!==null&&_q!==void 0?_q:true,inlineRefs:(_r=o.inlineRefs)!==null&&_r!==void 0?_r:true,schemaId:(_s=o.schemaId)!==null&&_s!==void 0?_s:"$id",addUsedSchema:(_t=o.addUsedSchema)!==null&&_t!==void 0?_t:true,validateSchema:(_u=o.validateSchema)!==null&&_u!==void 0?_u:true,validateFormats:(_v=o.validateFormats)!==null&&_v!==void 0?_v:true,unicodeRegExp:(_w=o.unicodeRegExp)!==null&&_w!==void 0?_w:true};}var Ajv=/*#__PURE__*/function(){function Ajv(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,_classCallCheck2["default"])(this,Ajv);this.schemas={};this.refs={};this.formats={};this._compilations=new _set["default"]();this._loading={};this._cache=new _map2["default"]();opts=this.opts=_objectSpread(_objectSpread({},opts),requiredOptions(opts));var _this$opts$code2=this.opts.code,es5=_this$opts$code2.es5,lines=_this$opts$code2.lines;this.scope=new codegen_2.ValueScope({scope:{},prefixes:EXT_SCOPE_NAMES,es5:es5,lines:lines});this.logger=getLogger(opts.logger);var formatOpt=opts.validateFormats;opts.validateFormats=false;this.RULES=rules.getRules();checkOptions.call(this,removedOptions,opts,"NOT SUPPORTED");checkOptions.call(this,deprecatedOptions,opts,"DEPRECATED","warn");this._metaOpts=getMetaSchemaOptions.call(this);if(opts.formats)addInitialFormats.call(this);this._addVocabularies();this._addDefaultMetaSchema();if(opts.keywords)addInitialKeywords.call(this,opts.keywords);if((0,_typeof2["default"])(opts.meta)=="object")this.addMetaSchema(opts.meta);addInitialSchemas.call(this);opts.validateFormats=formatOpt;}(0,_createClass2["default"])(Ajv,[{key:"_addVocabularies",value:function _addVocabularies(){this.addKeyword("$async");}},{key:"_addDefaultMetaSchema",value:function _addDefaultMetaSchema(){var _this$opts=this.opts,$data=_this$opts.$data,meta=_this$opts.meta,schemaId=_this$opts.schemaId;var _dataRefSchema=$dataRefSchema;if(schemaId==="id"){_dataRefSchema=_objectSpread({},$dataRefSchema);_dataRefSchema.id=_dataRefSchema.$id;delete _dataRefSchema.$id;}if(meta&&$data)this.addMetaSchema(_dataRefSchema,_dataRefSchema[schemaId],false);}},{key:"defaultMeta",value:function defaultMeta(){var _this$opts2=this.opts,meta=_this$opts2.meta,schemaId=_this$opts2.schemaId;return this.opts.defaultMeta=(0,_typeof2["default"])(meta)=="object"?meta[schemaId]||meta:undefined;}},{key:"validate",value:function validate(schemaKeyRef,// key, ref or schema object
data// to be validated
){var v;if(typeof schemaKeyRef=="string"){v=this.getSchema(schemaKeyRef);if(!v)throw new Error("no schema with key or ref \"".concat(schemaKeyRef,"\""));}else{v=this.compile(schemaKeyRef);}var valid=v(data);if(!("$async"in v))this.errors=v.errors;return valid;}},{key:"compile",value:function compile(schema,_meta){var sch=this._addSchema(schema,_meta);return sch.validate||this._compileSchemaEnv(sch);}},{key:"compileAsync",value:function compileAsync(schema,meta){if(typeof this.opts.loadSchema!="function"){throw new Error("options.loadSchema should be a function");}var loadSchema=this.opts.loadSchema;return runCompileAsync.call(this,schema,meta);function runCompileAsync(_x3,_x4){return _runCompileAsync.apply(this,arguments);}function _runCompileAsync(){_runCompileAsync=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(_schema,_meta){var sch;return _regenerator["default"].wrap(function _callee$(_context94){while(1){switch(_context94.prev=_context94.next){case 0:_context94.next=2;return loadMetaSchema.call(this,_schema.$schema);case 2:sch=this._addSchema(_schema,_meta);return _context94.abrupt("return",sch.validate||_compileAsync.call(this,sch));case 4:case"end":return _context94.stop();}}},_callee,this);}));return _runCompileAsync.apply(this,arguments);}function loadMetaSchema(_x5){return _loadMetaSchema.apply(this,arguments);}function _loadMetaSchema(){_loadMetaSchema=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2($ref){return _regenerator["default"].wrap(function _callee2$(_context95){while(1){switch(_context95.prev=_context95.next){case 0:if(!($ref&&!this.getSchema($ref))){_context95.next=3;break;}_context95.next=3;return runCompileAsync.call(this,{$ref:$ref},true);case 3:case"end":return _context95.stop();}}},_callee2,this);}));return _loadMetaSchema.apply(this,arguments);}function _compileAsync(_x6){return _compileAsync2.apply(this,arguments);}function _compileAsync2(){_compileAsync2=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee3(sch){return _regenerator["default"].wrap(function _callee3$(_context96){while(1){switch(_context96.prev=_context96.next){case 0:_context96.prev=0;return _context96.abrupt("return",this._compileSchemaEnv(sch));case 4:_context96.prev=4;_context96.t0=_context96["catch"](0);if(_context96.t0 instanceof ref_error["default"]){_context96.next=8;break;}throw _context96.t0;case 8:checkLoaded.call(this,_context96.t0);_context96.next=11;return loadMissingSchema.call(this,_context96.t0.missingSchema);case 11:return _context96.abrupt("return",_compileAsync.call(this,sch));case 12:case"end":return _context96.stop();}}},_callee3,this,[[0,4]]);}));return _compileAsync2.apply(this,arguments);}function checkLoaded(_ref39){var ref=_ref39.missingSchema,missingRef=_ref39.missingRef;if(this.refs[ref]){var _context93;throw new Error((0,_concat["default"])(_context93="AnySchema ".concat(ref," is loaded but ")).call(_context93,missingRef," cannot be resolved"));}}function loadMissingSchema(_x7){return _loadMissingSchema.apply(this,arguments);}function _loadMissingSchema(){_loadMissingSchema=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee4(ref){var _schema;return _regenerator["default"].wrap(function _callee4$(_context97){while(1){switch(_context97.prev=_context97.next){case 0:_context97.next=2;return _loadSchema.call(this,ref);case 2:_schema=_context97.sent;if(this.refs[ref]){_context97.next=6;break;}_context97.next=6;return loadMetaSchema.call(this,_schema.$schema);case 6:if(!this.refs[ref])this.addSchema(_schema,ref,meta);case 7:case"end":return _context97.stop();}}},_callee4,this);}));return _loadMissingSchema.apply(this,arguments);}function _loadSchema(_x8){return _loadSchema2.apply(this,arguments);}function _loadSchema2(){_loadSchema2=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee5(ref){var p;return _regenerator["default"].wrap(function _callee5$(_context98){while(1){switch(_context98.prev=_context98.next){case 0:p=this._loading[ref];if(!p){_context98.next=3;break;}return _context98.abrupt("return",p);case 3:_context98.prev=3;_context98.next=6;return this._loading[ref]=loadSchema(ref);case 6:return _context98.abrupt("return",_context98.sent);case 7:_context98.prev=7;delete this._loading[ref];return _context98.finish(7);case 10:case"end":return _context98.stop();}}},_callee5,this,[[3,,7,10]]);}));return _loadSchema2.apply(this,arguments);}}// Adds schema to the instance
},{key:"addSchema",value:function addSchema(schema,// If array is passed, `key` will be ignored
key,// Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.
_meta)// false to skip schema validation. Used internally, option validateSchema should be used instead.
{var _validateSchema=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.opts.validateSchema;if((0,_isArray["default"])(schema)){var _iterator12=_createForOfIteratorHelper(schema),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var sch=_step12.value;this.addSchema(sch,undefined,_meta,_validateSchema);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}return this;}var id;if((0,_typeof2["default"])(schema)==="object"){var schemaId=this.opts.schemaId;id=schema[schemaId];if(id!==undefined&&typeof id!="string"){throw new Error("schema ".concat(schemaId," must be string"));}}key=resolve.normalizeId(key||id);this._checkUnique(key);this.schemas[key]=this._addSchema(schema,_meta,key,_validateSchema,true);return this;}// Add schema that will be used to validate other schemas
// options in META_IGNORE_OPTIONS are alway set to false
},{key:"addMetaSchema",value:function addMetaSchema(schema,key)// false to skip schema validation, can be used to override validateSchema option for meta-schema
{var _validateSchema=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.opts.validateSchema;this.addSchema(schema,key,true,_validateSchema);return this;}//  Validate schema against its meta-schema
},{key:"validateSchema",value:function validateSchema(schema,throwOrLogError){if(typeof schema=="boolean")return true;var $schema;$schema=schema.$schema;if($schema!==undefined&&typeof $schema!="string"){throw new Error("$schema must be a string");}$schema=$schema||this.opts.defaultMeta||this.defaultMeta();if(!$schema){this.logger.warn("meta-schema not available");this.errors=null;return true;}var valid=this.validate($schema,schema);if(!valid&&throwOrLogError){var message="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(message);else throw new Error(message);}return valid;}// Get compiled schema by `key` or `ref`.
// (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)
},{key:"getSchema",value:function getSchema(keyRef){var sch;while(typeof(sch=getSchEnv.call(this,keyRef))=="string"){keyRef=sch;}if(sch===undefined){var schemaId=this.opts.schemaId;var root=new compile.SchemaEnv({schema:{},schemaId:schemaId});sch=compile.resolveSchema.call(this,root,keyRef);if(!sch)return;this.refs[keyRef]=sch;}return sch.validate||this._compileSchemaEnv(sch);}// Remove cached schema(s).
// If no parameter is passed all schemas but meta-schemas are removed.
// If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.
// Even if schema is referenced by other schemas it still can be removed as other schemas have local references.
},{key:"removeSchema",value:function removeSchema(schemaKeyRef){if(schemaKeyRef instanceof RegExp){this._removeAllSchemas(this.schemas,schemaKeyRef);this._removeAllSchemas(this.refs,schemaKeyRef);return this;}switch((0,_typeof2["default"])(schemaKeyRef)){case"undefined":this._removeAllSchemas(this.schemas);this._removeAllSchemas(this.refs);this._cache.clear();return this;case"string":{var sch=getSchEnv.call(this,schemaKeyRef);if((0,_typeof2["default"])(sch)=="object")this._cache["delete"](sch.schema);delete this.schemas[schemaKeyRef];delete this.refs[schemaKeyRef];return this;}case"object":{var cacheKey=schemaKeyRef;this._cache["delete"](cacheKey);var _id=schemaKeyRef[this.opts.schemaId];if(_id){_id=resolve.normalizeId(_id);delete this.schemas[_id];delete this.refs[_id];}return this;}default:throw new Error("ajv.removeSchema: invalid parameter");}}// add "vocabulary" - a collection of keywords
},{key:"addVocabulary",value:function addVocabulary(definitions){var _iterator13=_createForOfIteratorHelper(definitions),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _def2=_step13.value;this.addKeyword(_def2);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}return this;}},{key:"addKeyword",value:function addKeyword(kwdOrDef,def// deprecated
){var _this27=this;var keyword;if(typeof kwdOrDef=="string"){keyword=kwdOrDef;if((0,_typeof2["default"])(def)=="object"){this.logger.warn("these parameters are deprecated, see docs for addKeyword");def.keyword=keyword;}}else if((0,_typeof2["default"])(kwdOrDef)=="object"&&def===undefined){def=kwdOrDef;keyword=def.keyword;if((0,_isArray["default"])(keyword)&&!keyword.length){throw new Error("addKeywords: keyword must be string or non-empty array");}}else{throw new Error("invalid addKeywords parameters");}checkKeyword.call(this,keyword,def);if(!def){util.eachItem(keyword,function(kwd){return addRule.call(_this27,kwd);});return this;}keywordMetaschema.call(this,def);var definition=_objectSpread(_objectSpread({},def),{},{type:dataType.getJSONTypes(def.type),schemaType:dataType.getJSONTypes(def.schemaType)});util.eachItem(keyword,definition.type.length===0?function(k){return addRule.call(_this27,k,definition);}:function(k){var _context99;return(0,_forEach["default"])(_context99=definition.type).call(_context99,function(t){return addRule.call(_this27,k,definition,t);});});return this;}},{key:"getKeyword",value:function getKeyword(keyword){var rule=this.RULES.all[keyword];return(0,_typeof2["default"])(rule)=="object"?rule.definition:!!rule;}// Remove keyword
},{key:"removeKeyword",value:function removeKeyword(keyword){// TODO return type should be Ajv
var RULES=this.RULES;delete RULES.keywords[keyword];delete RULES.all[keyword];var _iterator14=_createForOfIteratorHelper(RULES.rules),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _context100,_context101;var group=_step14.value;var i=(0,_findIndex["default"])(_context100=group.rules).call(_context100,function(rule){return rule.keyword===keyword;});if(i>=0)(0,_splice["default"])(_context101=group.rules).call(_context101,i,1);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}return this;}// Add format
},{key:"addFormat",value:function addFormat(name,format){if(typeof format=="string")format=new RegExp(format);this.formats[name]=format;return this;}},{key:"errorsText",value:function errorsText()// optional options with properties `separator` and `dataVar`
{var _context102;var errors=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.errors;var _ref40=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref40$separator=_ref40.separator,separator=_ref40$separator===void 0?", ":_ref40$separator,_ref40$dataVar=_ref40.dataVar,dataVar=_ref40$dataVar===void 0?"data":_ref40$dataVar;if(!errors||errors.length===0)return"No errors";return(0,_reduce["default"])(_context102=(0,_map["default"])(errors).call(errors,function(e){var _context103,_context104;return(0,_concat["default"])(_context103=(0,_concat["default"])(_context104="".concat(dataVar)).call(_context104,e.instancePath," ")).call(_context103,e.message);})).call(_context102,function(text,msg){return text+separator+msg;});}},{key:"$dataMetaSchema",value:function $dataMetaSchema(metaSchema,keywordsJsonPointers){var rules=this.RULES.all;metaSchema=JSON.parse((0,_stringify["default"])(metaSchema));var _iterator15=_createForOfIteratorHelper(keywordsJsonPointers),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _context105;var jsonPointer=_step15.value;var segments=(0,_slice["default"])(_context105=jsonPointer.split("/")).call(_context105,1);// first segment is an empty string
var keywords=metaSchema;var _iterator16=_createForOfIteratorHelper(segments),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var seg=_step16.value;keywords=keywords[seg];}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}for(var key in rules){var rule=rules[key];if((0,_typeof2["default"])(rule)!="object")continue;var $data=rule.definition.$data;var schema=keywords[key];if($data&&schema)keywords[key]=schemaOrData(schema);}}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}return metaSchema;}},{key:"_removeAllSchemas",value:function _removeAllSchemas(schemas,regex){for(var keyRef in schemas){var sch=schemas[keyRef];if(!regex||regex.test(keyRef)){if(typeof sch=="string"){delete schemas[keyRef];}else if(sch&&!sch.meta){this._cache["delete"](sch.schema);delete schemas[keyRef];}}}}},{key:"_addSchema",value:function _addSchema(schema,meta,baseId){var validateSchema=arguments.length>3&&arguments[3]!==undefined?arguments[3]:this.opts.validateSchema;var addSchema=arguments.length>4&&arguments[4]!==undefined?arguments[4]:this.opts.addUsedSchema;var id;var schemaId=this.opts.schemaId;if((0,_typeof2["default"])(schema)=="object"){id=schema[schemaId];}else{if(this.opts.jtd)throw new Error("schema must be object");else if(typeof schema!="boolean")throw new Error("schema must be object or boolean");}var sch=this._cache.get(schema);if(sch!==undefined)return sch;var localRefs=resolve.getSchemaRefs.call(this,schema);baseId=resolve.normalizeId(id||baseId);sch=new compile.SchemaEnv({schema:schema,schemaId:schemaId,meta:meta,baseId:baseId,localRefs:localRefs});this._cache.set(sch.schema,sch);if(addSchema&&!(0,_startsWith["default"])(baseId).call(baseId,"#")){// TODO atm it is allowed to overwrite schemas without id (instead of not adding them)
if(baseId)this._checkUnique(baseId);this.refs[baseId]=sch;}if(validateSchema)this.validateSchema(schema,true);return sch;}},{key:"_checkUnique",value:function _checkUnique(id){if(this.schemas[id]||this.refs[id]){throw new Error("schema with key or id \"".concat(id,"\" already exists"));}}},{key:"_compileSchemaEnv",value:function _compileSchemaEnv(sch){if(sch.meta)this._compileMetaSchema(sch);else compile.compileSchema.call(this,sch);/* istanbul ignore if */if(!sch.validate)throw new Error("ajv implementation error");return sch.validate;}},{key:"_compileMetaSchema",value:function _compileMetaSchema(sch){var currentOpts=this.opts;this.opts=this._metaOpts;try{compile.compileSchema.call(this,sch);}finally{this.opts=currentOpts;}}}]);return Ajv;}();exports["default"]=Ajv;Ajv.ValidationError=validation_error["default"];Ajv.MissingRefError=ref_error["default"];function checkOptions(checkOpts,options,msg){var log=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"error";for(var key in checkOpts){var _context106,_context107;var opt=key;if(opt in options)this.logger[log]((0,_concat["default"])(_context106=(0,_concat["default"])(_context107="".concat(msg,": option ")).call(_context107,key,". ")).call(_context106,checkOpts[opt]));}}function getSchEnv(keyRef){keyRef=resolve.normalizeId(keyRef);// TODO tests fail without this line
return this.schemas[keyRef]||this.refs[keyRef];}function addInitialSchemas(){var optsSchemas=this.opts.schemas;if(!optsSchemas)return;if((0,_isArray["default"])(optsSchemas))this.addSchema(optsSchemas);else for(var key in optsSchemas){this.addSchema(optsSchemas[key],key);}}function addInitialFormats(){for(var name in this.opts.formats){var _format=this.opts.formats[name];if(_format)this.addFormat(name,_format);}}function addInitialKeywords(defs){if((0,_isArray["default"])(defs)){this.addVocabulary(defs);return;}this.logger.warn("keywords option as map is deprecated, pass array");for(var _keyword2 in defs){var _def3=defs[_keyword2];if(!_def3.keyword)_def3.keyword=_keyword2;this.addKeyword(_def3);}}function getMetaSchemaOptions(){var metaOpts=_objectSpread({},this.opts);var _iterator17=_createForOfIteratorHelper(META_IGNORE_OPTIONS),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var opt=_step17.value;delete metaOpts[opt];}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}return metaOpts;}var noLogs={log:function log(){},warn:function warn(){},error:function error(){}};function getLogger(logger){if(logger===false)return noLogs;if(logger===undefined)return console;if(logger.log&&logger.warn&&logger.error)return logger;throw new Error("logger must implement log, warn and error methods");}var KEYWORD_NAME=/^[a-z_$][a-z0-9_$:-]*$/i;function checkKeyword(keyword,def){var RULES=this.RULES;util.eachItem(keyword,function(kwd){if(RULES.keywords[kwd])throw new Error("Keyword ".concat(kwd," is already defined"));if(!KEYWORD_NAME.test(kwd))throw new Error("Keyword ".concat(kwd," has invalid name"));});if(!def)return;if(def.$data&&!("code"in def||"validate"in def)){throw new Error('$data keyword must have "code" or "validate" function');}}function addRule(keyword,definition,dataType$1){var _context108,_this28=this;var _a;var post=definition===null||definition===void 0?void 0:definition.post;if(dataType$1&&post)throw new Error('keyword with "post" flag cannot have "type"');var RULES=this.RULES;var ruleGroup=post?RULES.post:(0,_find["default"])(_context108=RULES.rules).call(_context108,function(_ref41){var t=_ref41.type;return t===dataType$1;});if(!ruleGroup){ruleGroup={type:dataType$1,rules:[]};RULES.rules.push(ruleGroup);}RULES.keywords[keyword]=true;if(!definition)return;var rule={keyword:keyword,definition:_objectSpread(_objectSpread({},definition),{},{type:dataType.getJSONTypes(definition.type),schemaType:dataType.getJSONTypes(definition.schemaType)})};if(definition.before)addBeforeRule.call(this,ruleGroup,rule,definition.before);else ruleGroup.rules.push(rule);RULES.all[keyword]=rule;(_a=definition["implements"])===null||_a===void 0?void 0:(0,_forEach["default"])(_a).call(_a,function(kwd){return _this28.addKeyword(kwd);});}function addBeforeRule(ruleGroup,rule,before){var _context109;var i=(0,_findIndex["default"])(_context109=ruleGroup.rules).call(_context109,function(_rule){return _rule.keyword===before;});if(i>=0){var _context110;(0,_splice["default"])(_context110=ruleGroup.rules).call(_context110,i,0,rule);}else{ruleGroup.rules.push(rule);this.logger.warn("rule ".concat(before," is not defined"));}}function keywordMetaschema(def){var metaSchema=def.metaSchema;if(metaSchema===undefined)return;if(def.$data&&this.opts.$data)metaSchema=schemaOrData(metaSchema);def.validateSchema=this.compile(metaSchema,true);}var $dataRef={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function schemaOrData(schema){return{anyOf:[schema,$dataRef]};}});var def$p={keyword:"id",code:function code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID');}};var _default$w=def$p;var id=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$w},'__esModule',{value:true});var ref=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.callRef=exports.getValidate=void 0;var def={keyword:"$ref",schemaType:"string",code:function code(cxt){var gen=cxt.gen,$ref=cxt.schema,it=cxt.it;var baseId=it.baseId,env=it.schemaEnv,validateName=it.validateName,opts=it.opts,self=it.self;var root=env.root;if(($ref==="#"||$ref==="#/")&&baseId===root.baseId)return callRootRef();var schOrEnv=compile.resolveRef.call(self,root,baseId,$ref);if(schOrEnv===undefined)throw new ref_error["default"](baseId,$ref);if(schOrEnv instanceof compile.SchemaEnv)return callValidate(schOrEnv);return inlineRefSchema(schOrEnv);function callRootRef(){if(env===root)return callRef(cxt,validateName,env,env.$async);var rootName=gen.scopeValue("root",{ref:root});return callRef(cxt,codegen._(_templateObject165||(_templateObject165=(0,_taggedTemplateLiteral2["default"])(["",".validate"])),rootName),root,root.$async);}function callValidate(sch){var v=getValidate(cxt,sch);callRef(cxt,v,sch,sch.$async);}function inlineRefSchema(sch){var schName=gen.scopeValue("schema",opts.code.source===true?{ref:sch,code:codegen.stringify(sch)}:{ref:sch});var valid=gen.name("valid");var schCxt=cxt.subschema({schema:sch,dataTypes:[],schemaPath:codegen.nil,topSchemaRef:schName,errSchemaPath:$ref},valid);cxt.mergeEvaluated(schCxt);cxt.ok(valid);}}};function getValidate(cxt,sch){var gen=cxt.gen;return sch.validate?gen.scopeValue("validate",{ref:sch.validate}):codegen._(_templateObject166||(_templateObject166=(0,_taggedTemplateLiteral2["default"])(["",".validate"])),gen.scopeValue("wrapper",{ref:sch}));}exports.getValidate=getValidate;function callRef(cxt,v,sch,$async){var gen=cxt.gen,it=cxt.it;var allErrors=it.allErrors,env=it.schemaEnv,opts=it.opts;var passCxt=opts.passContext?names_1["default"]["this"]:codegen.nil;if($async)callAsyncRef();else callSyncRef();function callAsyncRef(){if(!env.$async)throw new Error("async schema referenced by sync schema");var valid=gen["let"]("valid");gen["try"](function(){gen.code(codegen._(_templateObject167||(_templateObject167=(0,_taggedTemplateLiteral2["default"])(["await ",""])),_code.callValidateCode(cxt,v,passCxt)));addEvaluatedFrom(v);// TODO will not work with async, it has to be returned with the result
if(!allErrors)gen.assign(valid,true);},function(e){gen["if"](codegen._(_templateObject168||(_templateObject168=(0,_taggedTemplateLiteral2["default"])(["!("," instanceof ",")"])),e,it.ValidationError),function(){return gen["throw"](e);});addErrorsFrom(e);if(!allErrors)gen.assign(valid,false);});cxt.ok(valid);}function callSyncRef(){cxt.result(_code.callValidateCode(cxt,v,passCxt),function(){return addEvaluatedFrom(v);},function(){return addErrorsFrom(v);});}function addErrorsFrom(source){var errs=codegen._(_templateObject169||(_templateObject169=(0,_taggedTemplateLiteral2["default"])(["",".errors"])),source);gen.assign(names_1["default"].vErrors,codegen._(_templateObject170||(_templateObject170=(0,_taggedTemplateLiteral2["default"])([""," === null ? "," : ",".concat(",")"])),names_1["default"].vErrors,errs,names_1["default"].vErrors,errs));// TODO tagged
gen.assign(names_1["default"].errors,codegen._(_templateObject171||(_templateObject171=(0,_taggedTemplateLiteral2["default"])(["",".length"])),names_1["default"].vErrors));}function addEvaluatedFrom(source){var _a;if(!it.opts.unevaluated)return;var schEvaluated=(_a=sch===null||sch===void 0?void 0:sch.validate)===null||_a===void 0?void 0:_a.evaluated;// TODO refactor
if(it.props!==true){if(schEvaluated&&!schEvaluated.dynamicProps){if(schEvaluated.props!==undefined){it.props=util.mergeEvaluated.props(gen,schEvaluated.props,it.props);}}else{var props=gen["var"]("props",codegen._(_templateObject172||(_templateObject172=(0,_taggedTemplateLiteral2["default"])(["",".evaluated.props"])),source));it.props=util.mergeEvaluated.props(gen,props,it.props,codegen.Name);}}if(it.items!==true){if(schEvaluated&&!schEvaluated.dynamicItems){if(schEvaluated.items!==undefined){it.items=util.mergeEvaluated.items(gen,schEvaluated.items,it.items);}}else{var _items2=gen["var"]("items",codegen._(_templateObject173||(_templateObject173=(0,_taggedTemplateLiteral2["default"])(["",".evaluated.items"])),source));it.items=util.mergeEvaluated.items(gen,_items2,it.items,codegen.Name);}}}}exports.callRef=callRef;exports["default"]=def;});var core=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id["default"],ref["default"]];var _default$v=core;var core_1=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$v},'__esModule',{value:true});var ops=codegen.operators;var KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}};var error$h={message:function message(_ref42){var keyword=_ref42.keyword,schemaCode=_ref42.schemaCode;return codegen.str(_templateObject174||(_templateObject174=(0,_taggedTemplateLiteral2["default"])(["must be "," ",""])),KWDs[keyword].okStr,schemaCode);},params:function params(_ref43){var keyword=_ref43.keyword,schemaCode=_ref43.schemaCode;return codegen._(_templateObject175||(_templateObject175=(0,_taggedTemplateLiteral2["default"])(["{comparison: ",", limit: ","}"])),KWDs[keyword].okStr,schemaCode);}};var def$o={keyword:(0,_keys["default"])(KWDs),type:"number",schemaType:"number",$data:true,error:error$h,code:function code(cxt){var keyword=cxt.keyword,data=cxt.data,schemaCode=cxt.schemaCode;cxt.fail$data(codegen._(_templateObject176||(_templateObject176=(0,_taggedTemplateLiteral2["default"])([""," "," "," || isNaN(",")"])),data,KWDs[keyword].fail,schemaCode,data));}};var _default$u=def$o;var limitNumber=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$u},'__esModule',{value:true});var error$g={message:function message(_ref44){var schemaCode=_ref44.schemaCode;return codegen.str(_templateObject177||(_templateObject177=(0,_taggedTemplateLiteral2["default"])(["must be multiple of ",""])),schemaCode);},params:function params(_ref45){var schemaCode=_ref45.schemaCode;return codegen._(_templateObject178||(_templateObject178=(0,_taggedTemplateLiteral2["default"])(["{multipleOf: ","}"])),schemaCode);}};var def$n={keyword:"multipleOf",type:"number",schemaType:"number",$data:true,error:error$g,code:function code(cxt){var gen=cxt.gen,data=cxt.data,schemaCode=cxt.schemaCode,it=cxt.it;// const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)
var prec=it.opts.multipleOfPrecision;var res=gen["let"]("res");var invalid=prec?codegen._(_templateObject179||(_templateObject179=(0,_taggedTemplateLiteral2["default"])(["Math.abs(Math.round(",") - ",") > 1e-",""])),res,res,prec):codegen._(_templateObject180||(_templateObject180=(0,_taggedTemplateLiteral2["default"])([""," !== parseInt(",")"])),res,res);cxt.fail$data(codegen._(_templateObject181||(_templateObject181=(0,_taggedTemplateLiteral2["default"])(["("," === 0 || ("," = ","/",", ","))"])),schemaCode,res,data,schemaCode,invalid));}};var _default$t=def$n;var multipleOf=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$t},'__esModule',{value:true});// https://mathiasbynens.be/notes/javascript-encoding
// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode
function ucs2length(str){var len=str.length;var length=0;var pos=0;var value;while(pos<len){length++;value=str.charCodeAt(pos++);if(value>=0xd800&&value<=0xdbff&&pos<len){// high surrogate, and there is a next character
value=str.charCodeAt(pos);if((value&0xfc00)===0xdc00)pos++;// low surrogate
}}return length;}var _default$s=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default';var ucs2length_1=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$s},'__esModule',{value:true});var error$f={message:function message(_ref46){var keyword=_ref46.keyword,schemaCode=_ref46.schemaCode;var comp=keyword==="maxLength"?"more":"fewer";return codegen.str(_templateObject182||(_templateObject182=(0,_taggedTemplateLiteral2["default"])(["must NOT have "," than "," characters"])),comp,schemaCode);},params:function params(_ref47){var schemaCode=_ref47.schemaCode;return codegen._(_templateObject183||(_templateObject183=(0,_taggedTemplateLiteral2["default"])(["{limit: ","}"])),schemaCode);}};var def$m={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:true,error:error$f,code:function code(cxt){var keyword=cxt.keyword,data=cxt.data,schemaCode=cxt.schemaCode,it=cxt.it;var op=keyword==="maxLength"?codegen.operators.GT:codegen.operators.LT;var len=it.opts.unicode===false?codegen._(_templateObject184||(_templateObject184=(0,_taggedTemplateLiteral2["default"])(["",".length"])),data):codegen._(_templateObject185||(_templateObject185=(0,_taggedTemplateLiteral2["default"])(["","(",")"])),util.useFunc(cxt.gen,ucs2length_1["default"]),data);cxt.fail$data(codegen._(_templateObject186||(_templateObject186=(0,_taggedTemplateLiteral2["default"])([""," "," ",""])),len,op,schemaCode));}};var _default$r=def$m;var limitLength=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$r},'__esModule',{value:true});var error$e={message:function message(_ref48){var schemaCode=_ref48.schemaCode;return codegen.str(_templateObject187||(_templateObject187=(0,_taggedTemplateLiteral2["default"])(["must match pattern \"","\""])),schemaCode);},params:function params(_ref49){var schemaCode=_ref49.schemaCode;return codegen._(_templateObject188||(_templateObject188=(0,_taggedTemplateLiteral2["default"])(["{pattern: ","}"])),schemaCode);}};var def$l={keyword:"pattern",type:"string",schemaType:"string",$data:true,error:error$e,code:function code(cxt){var data=cxt.data,$data=cxt.$data,schema=cxt.schema,schemaCode=cxt.schemaCode,it=cxt.it;// TODO regexp should be wrapped in try/catchs
var u=it.opts.unicodeRegExp?"u":"";var regExp=$data?codegen._(_templateObject189||(_templateObject189=(0,_taggedTemplateLiteral2["default"])(["(new RegExp(",", ","))"])),schemaCode,u):_code.usePattern(cxt,schema);cxt.fail$data(codegen._(_templateObject190||(_templateObject190=(0,_taggedTemplateLiteral2["default"])(["!",".test(",")"])),regExp,data));}};var _default$q=def$l;var pattern=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$q},'__esModule',{value:true});var error$d={message:function message(_ref50){var keyword=_ref50.keyword,schemaCode=_ref50.schemaCode;var comp=keyword==="maxProperties"?"more":"fewer";return codegen.str(_templateObject191||(_templateObject191=(0,_taggedTemplateLiteral2["default"])(["must NOT have "," than "," items"])),comp,schemaCode);},params:function params(_ref51){var schemaCode=_ref51.schemaCode;return codegen._(_templateObject192||(_templateObject192=(0,_taggedTemplateLiteral2["default"])(["{limit: ","}"])),schemaCode);}};var def$k={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:true,error:error$d,code:function code(cxt){var keyword=cxt.keyword,data=cxt.data,schemaCode=cxt.schemaCode;var op=keyword==="maxProperties"?codegen.operators.GT:codegen.operators.LT;cxt.fail$data(codegen._(_templateObject193||(_templateObject193=(0,_taggedTemplateLiteral2["default"])(["Object.keys(",").length "," ",""])),data,op,schemaCode));}};var _default$p=def$k;var limitProperties=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$p},'__esModule',{value:true});var error$c={message:function message(_ref52){var missingProperty=_ref52.params.missingProperty;return codegen.str(_templateObject194||(_templateObject194=(0,_taggedTemplateLiteral2["default"])(["must have required property '","'"])),missingProperty);},params:function params(_ref53){var missingProperty=_ref53.params.missingProperty;return codegen._(_templateObject195||(_templateObject195=(0,_taggedTemplateLiteral2["default"])(["{missingProperty: ","}"])),missingProperty);}};var def$j={keyword:"required",type:"object",schemaType:"array",$data:true,error:error$c,code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,schemaCode=cxt.schemaCode,data=cxt.data,$data=cxt.$data,it=cxt.it;var opts=it.opts;if(!$data&&schema.length===0)return;var useLoop=schema.length>=opts.loopRequired;if(it.allErrors)allErrorsMode();else exitOnErrorMode();if(opts.strictRequired){var props=cxt.parentSchema.properties;var definedProperties=cxt.it.definedProperties;var _iterator18=_createForOfIteratorHelper(schema),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var requiredKey=_step18.value;if((props===null||props===void 0?void 0:props[requiredKey])===undefined&&!definedProperties.has(requiredKey)){var _context111;var schemaPath=it.schemaEnv.baseId+it.errSchemaPath;var msg=(0,_concat["default"])(_context111="required property \"".concat(requiredKey,"\" is not defined at \"")).call(_context111,schemaPath,"\" (strictRequired)");util.checkStrictMode(it,msg,it.opts.strictRequired);}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}function allErrorsMode(){if(useLoop||$data){cxt.block$data(codegen.nil,loopAllRequired);}else{var _iterator19=_createForOfIteratorHelper(schema),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var prop=_step19.value;_code.checkReportMissingProp(cxt,prop);}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}}function exitOnErrorMode(){var missing=gen["let"]("missing");if(useLoop||$data){var _valid3=gen["let"]("valid",true);cxt.block$data(_valid3,function(){return loopUntilMissing(missing,_valid3);});cxt.ok(_valid3);}else{gen["if"](_code.checkMissingProp(cxt,schema,missing));_code.reportMissingProp(cxt,missing);gen["else"]();}}function loopAllRequired(){gen.forOf("prop",schemaCode,function(prop){cxt.setParams({missingProperty:prop});gen["if"](_code.noPropertyInData(gen,data,prop,opts.ownProperties),function(){return cxt.error();});});}function loopUntilMissing(missing,valid){cxt.setParams({missingProperty:missing});gen.forOf(missing,schemaCode,function(){gen.assign(valid,_code.propertyInData(gen,data,missing,opts.ownProperties));gen["if"](codegen.not(valid),function(){cxt.error();gen["break"]();});},codegen.nil);}}};var _default$o=def$j;var required=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$o},'__esModule',{value:true});var error$b={message:function message(_ref54){var keyword=_ref54.keyword,schemaCode=_ref54.schemaCode;var comp=keyword==="maxItems"?"more":"fewer";return codegen.str(_templateObject196||(_templateObject196=(0,_taggedTemplateLiteral2["default"])(["must NOT have "," than "," items"])),comp,schemaCode);},params:function params(_ref55){var schemaCode=_ref55.schemaCode;return codegen._(_templateObject197||(_templateObject197=(0,_taggedTemplateLiteral2["default"])(["{limit: ","}"])),schemaCode);}};var def$i={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:true,error:error$b,code:function code(cxt){var keyword=cxt.keyword,data=cxt.data,schemaCode=cxt.schemaCode;var op=keyword==="maxItems"?codegen.operators.GT:codegen.operators.LT;cxt.fail$data(codegen._(_templateObject198||(_templateObject198=(0,_taggedTemplateLiteral2["default"])(["",".length "," ",""])),data,op,schemaCode));}};var _default$n=def$i;var limitItems=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$n},'__esModule',{value:true});// https://github.com/ajv-validator/ajv/issues/889
fastDeepEqual.code='require("ajv/dist/runtime/equal").default';var _default$m=fastDeepEqual;var equal_1=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$m},'__esModule',{value:true});var error$a={message:function message(_ref56){var _ref56$params=_ref56.params,i=_ref56$params.i,j=_ref56$params.j;return codegen.str(_templateObject199||(_templateObject199=(0,_taggedTemplateLiteral2["default"])(["must NOT have duplicate items (items ## "," and "," are identical)"])),j,i);},params:function params(_ref57){var _ref57$params=_ref57.params,i=_ref57$params.i,j=_ref57$params.j;return codegen._(_templateObject200||(_templateObject200=(0,_taggedTemplateLiteral2["default"])(["{i: ",", j: ","}"])),i,j);}};var def$h={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:true,error:error$a,code:function code(cxt){var gen=cxt.gen,data=cxt.data,$data=cxt.$data,schema=cxt.schema,parentSchema=cxt.parentSchema,schemaCode=cxt.schemaCode,it=cxt.it;if(!$data&&!schema)return;var valid=gen["let"]("valid");var itemTypes=parentSchema.items?dataType.getSchemaTypes(parentSchema.items):[];cxt.block$data(valid,validateUniqueItems,codegen._(_templateObject201||(_templateObject201=(0,_taggedTemplateLiteral2["default"])([""," === false"])),schemaCode));cxt.ok(valid);function validateUniqueItems(){var i=gen["let"]("i",codegen._(_templateObject202||(_templateObject202=(0,_taggedTemplateLiteral2["default"])(["",".length"])),data));var j=gen["let"]("j");cxt.setParams({i:i,j:j});gen.assign(valid,true);gen["if"](codegen._(_templateObject203||(_templateObject203=(0,_taggedTemplateLiteral2["default"])([""," > 1"])),i),function(){return(canOptimize()?loopN:loopN2)(i,j);});}function canOptimize(){return itemTypes.length>0&&!(0,_some["default"])(itemTypes).call(itemTypes,function(t){return t==="object"||t==="array";});}function loopN(i,j){var item=gen.name("item");var wrongType=dataType.checkDataTypes(itemTypes,item,it.opts.strictNumbers,dataType.DataType.Wrong);var indices=gen["const"]("indices",codegen._(_templateObject204||(_templateObject204=(0,_taggedTemplateLiteral2["default"])(["{}"]))));gen["for"](codegen._(_templateObject205||(_templateObject205=(0,_taggedTemplateLiteral2["default"])([";","--;"])),i),function(){gen["let"](item,codegen._(_templateObject206||(_templateObject206=(0,_taggedTemplateLiteral2["default"])(["","[","]"])),data,i));gen["if"](wrongType,codegen._(_templateObject207||(_templateObject207=(0,_taggedTemplateLiteral2["default"])(["continue"]))));if(itemTypes.length>1)gen["if"](codegen._(_templateObject208||(_templateObject208=(0,_taggedTemplateLiteral2["default"])(["typeof "," == \"string\""])),item),codegen._(_templateObject209||(_templateObject209=(0,_taggedTemplateLiteral2["default"])([""," += \"_\""])),item));gen["if"](codegen._(_templateObject210||(_templateObject210=(0,_taggedTemplateLiteral2["default"])(["typeof ","[","] == \"number\""])),indices,item),function(){gen.assign(j,codegen._(_templateObject211||(_templateObject211=(0,_taggedTemplateLiteral2["default"])(["","[","]"])),indices,item));cxt.error();gen.assign(valid,false)["break"]();}).code(codegen._(_templateObject212||(_templateObject212=(0,_taggedTemplateLiteral2["default"])(["","[","] = ",""])),indices,item,i));});}function loopN2(i,j){var eql=util.useFunc(gen,equal_1["default"]);var outer=gen.name("outer");gen.label(outer)["for"](codegen._(_templateObject213||(_templateObject213=(0,_taggedTemplateLiteral2["default"])([";","--;"])),i),function(){return gen["for"](codegen._(_templateObject214||(_templateObject214=(0,_taggedTemplateLiteral2["default"])([""," = ","; ","--;"])),j,i,j),function(){return gen["if"](codegen._(_templateObject215||(_templateObject215=(0,_taggedTemplateLiteral2["default"])(["","(","[","], ","[","])"])),eql,data,i,data,j),function(){cxt.error();gen.assign(valid,false)["break"](outer);});});});}}};var _default$l=def$h;var uniqueItems=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$l},'__esModule',{value:true});var error$9={message:"must be equal to constant",params:function params(_ref58){var schemaCode=_ref58.schemaCode;return codegen._(_templateObject216||(_templateObject216=(0,_taggedTemplateLiteral2["default"])(["{allowedValue: ","}"])),schemaCode);}};var def$g={keyword:"const",$data:true,error:error$9,code:function code(cxt){var gen=cxt.gen,data=cxt.data,$data=cxt.$data,schemaCode=cxt.schemaCode,schema=cxt.schema;if($data||schema&&(0,_typeof2["default"])(schema)=="object"){cxt.fail$data(codegen._(_templateObject217||(_templateObject217=(0,_taggedTemplateLiteral2["default"])(["!","(",", ",")"])),util.useFunc(gen,equal_1["default"]),data,schemaCode));}else{cxt.fail(codegen._(_templateObject218||(_templateObject218=(0,_taggedTemplateLiteral2["default"])([""," !== ",""])),schema,data));}}};var _default$k=def$g;var _const=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$k},'__esModule',{value:true});var error$8={message:"must be equal to one of the allowed values",params:function params(_ref59){var schemaCode=_ref59.schemaCode;return codegen._(_templateObject219||(_templateObject219=(0,_taggedTemplateLiteral2["default"])(["{allowedValues: ","}"])),schemaCode);}};var def$f={keyword:"enum",schemaType:"array",$data:true,error:error$8,code:function code(cxt){var gen=cxt.gen,data=cxt.data,$data=cxt.$data,schema=cxt.schema,schemaCode=cxt.schemaCode,it=cxt.it;if(!$data&&schema.length===0)throw new Error("enum must have non-empty array");var useLoop=schema.length>=it.opts.loopEnum;var eql=util.useFunc(gen,equal_1["default"]);var valid;if(useLoop||$data){valid=gen["let"]("valid");cxt.block$data(valid,loopEnum);}else{/* istanbul ignore if */if(!(0,_isArray["default"])(schema))throw new Error("ajv implementation error");var vSchema=gen["const"]("vSchema",schemaCode);valid=codegen.or.apply(codegen,(0,_toConsumableArray2["default"])((0,_map["default"])(schema).call(schema,function(_x,i){return equalCode(vSchema,i);})));}cxt.pass(valid);function loopEnum(){gen.assign(valid,false);gen.forOf("v",schemaCode,function(v){return gen["if"](codegen._(_templateObject220||(_templateObject220=(0,_taggedTemplateLiteral2["default"])(["","(",", ",")"])),eql,data,v),function(){return gen.assign(valid,true)["break"]();});});}function equalCode(vSchema,i){var sch=schema[i];return(0,_typeof2["default"])(sch)==="object"&&sch!==null?codegen._(_templateObject221||(_templateObject221=(0,_taggedTemplateLiteral2["default"])(["","(",", ","[","])"])),eql,data,vSchema,i):codegen._(_templateObject222||(_templateObject222=(0,_taggedTemplateLiteral2["default"])([""," === ",""])),data,sch);}}};var _default$j=def$f;var _enum=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$j},'__esModule',{value:true});var validation=[// number
limitNumber["default"],multipleOf["default"],// string
limitLength["default"],pattern["default"],// object
limitProperties["default"],required["default"],// array
limitItems["default"],uniqueItems["default"],// any
{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},_const["default"],_enum["default"]];var _default$i=validation;var validation_1=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$i},'__esModule',{value:true});var additionalItems=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.validateAdditionalItems=void 0;var error={message:function message(_ref60){var len=_ref60.params.len;return codegen.str(_templateObject223||(_templateObject223=(0,_taggedTemplateLiteral2["default"])(["must NOT have more than "," items"])),len);},params:function params(_ref61){var len=_ref61.params.len;return codegen._(_templateObject224||(_templateObject224=(0,_taggedTemplateLiteral2["default"])(["{limit: ","}"])),len);}};var def={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error,code:function code(cxt){var parentSchema=cxt.parentSchema,it=cxt.it;var items=parentSchema.items;if(!(0,_isArray["default"])(items)){util.checkStrictMode(it,'"additionalItems" is ignored when "items" is not an array of schemas');return;}validateAdditionalItems(cxt,items);}};function validateAdditionalItems(cxt,items){var gen=cxt.gen,schema=cxt.schema,data=cxt.data,keyword=cxt.keyword,it=cxt.it;it.items=true;var len=gen["const"]("len",codegen._(_templateObject225||(_templateObject225=(0,_taggedTemplateLiteral2["default"])(["",".length"])),data));if(schema===false){cxt.setParams({len:items.length});cxt.pass(codegen._(_templateObject226||(_templateObject226=(0,_taggedTemplateLiteral2["default"])([""," <= ",""])),len,items.length));}else if((0,_typeof2["default"])(schema)=="object"&&!util.alwaysValidSchema(it,schema)){var _valid4=gen["var"]("valid",codegen._(_templateObject227||(_templateObject227=(0,_taggedTemplateLiteral2["default"])([""," <= ",""])),len,items.length));// TODO var
gen["if"](codegen.not(_valid4),function(){return validateItems(_valid4);});cxt.ok(_valid4);}function validateItems(valid){gen.forRange("i",items.length,len,function(i){cxt.subschema({keyword:keyword,dataProp:i,dataPropType:util.Type.Num},valid);if(!it.allErrors)gen["if"](codegen.not(valid),function(){return gen["break"]();});});}}exports.validateAdditionalItems=validateAdditionalItems;exports["default"]=def;});var items=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.validateTuple=void 0;var def={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code:function code(cxt){var schema=cxt.schema,it=cxt.it;if((0,_isArray["default"])(schema))return validateTuple(cxt,"additionalItems",schema);it.items=true;if(util.alwaysValidSchema(it,schema))return;cxt.ok(_code.validateArray(cxt));}};function validateTuple(cxt,extraItems){var schArr=arguments.length>2&&arguments[2]!==undefined?arguments[2]:cxt.schema;var gen=cxt.gen,parentSchema=cxt.parentSchema,data=cxt.data,keyword=cxt.keyword,it=cxt.it;checkStrictTuple(parentSchema);if(it.opts.unevaluated&&schArr.length&&it.items!==true){it.items=util.mergeEvaluated.items(gen,schArr.length,it.items);}var valid=gen.name("valid");var len=gen["const"]("len",codegen._(_templateObject228||(_templateObject228=(0,_taggedTemplateLiteral2["default"])(["",".length"])),data));(0,_forEach["default"])(schArr).call(schArr,function(sch,i){if(util.alwaysValidSchema(it,sch))return;gen["if"](codegen._(_templateObject229||(_templateObject229=(0,_taggedTemplateLiteral2["default"])([""," > ",""])),len,i),function(){return cxt.subschema({keyword:keyword,schemaProp:i,dataProp:i},valid);});cxt.ok(valid);});function checkStrictTuple(sch){var opts=it.opts,errSchemaPath=it.errSchemaPath;var l=schArr.length;var fullTuple=l===sch.minItems&&(l===sch.maxItems||sch[extraItems]===false);if(opts.strictTuples&&!fullTuple){var _context112,_context113,_context114;var msg=(0,_concat["default"])(_context112=(0,_concat["default"])(_context113=(0,_concat["default"])(_context114="\"".concat(keyword,"\" is ")).call(_context114,l,"-tuple, but minItems or maxItems/")).call(_context113,extraItems," are not specified or different at path \"")).call(_context112,errSchemaPath,"\"");util.checkStrictMode(it,msg,opts.strictTuples);}}}exports.validateTuple=validateTuple;exports["default"]=def;});var def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:function code(cxt){return items.validateTuple(cxt,"items");}};var _default$h=def$e;var prefixItems=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$h},'__esModule',{value:true});var error$7={message:function message(_ref62){var len=_ref62.params.len;return codegen.str(_templateObject230||(_templateObject230=(0,_taggedTemplateLiteral2["default"])(["must NOT have more than "," items"])),len);},params:function params(_ref63){var len=_ref63.params.len;return codegen._(_templateObject231||(_templateObject231=(0,_taggedTemplateLiteral2["default"])(["{limit: ","}"])),len);}};var def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$7,code:function code(cxt){var schema=cxt.schema,parentSchema=cxt.parentSchema,it=cxt.it;var prefixItems=parentSchema.prefixItems;it.items=true;if(util.alwaysValidSchema(it,schema))return;if(prefixItems)additionalItems.validateAdditionalItems(cxt,prefixItems);else cxt.ok(_code.validateArray(cxt));}};var _default$g=def$d;var items2020=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$g},'__esModule',{value:true});var error$6={message:function message(_ref64){var _ref64$params=_ref64.params,min=_ref64$params.min,max=_ref64$params.max;return max===undefined?codegen.str(_templateObject232||(_templateObject232=(0,_taggedTemplateLiteral2["default"])(["must contain at least "," valid item(s)"])),min):codegen.str(_templateObject233||(_templateObject233=(0,_taggedTemplateLiteral2["default"])(["must contain at least "," and no more than "," valid item(s)"])),min,max);},params:function params(_ref65){var _ref65$params=_ref65.params,min=_ref65$params.min,max=_ref65$params.max;return max===undefined?codegen._(_templateObject234||(_templateObject234=(0,_taggedTemplateLiteral2["default"])(["{minContains: ","}"])),min):codegen._(_templateObject235||(_templateObject235=(0,_taggedTemplateLiteral2["default"])(["{minContains: ",", maxContains: ","}"])),min,max);}};var def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:true,error:error$6,code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,parentSchema=cxt.parentSchema,data=cxt.data,it=cxt.it;var min;var max;var minContains=parentSchema.minContains,maxContains=parentSchema.maxContains;if(it.opts.next){min=minContains===undefined?1:minContains;max=maxContains;}else{min=1;}var len=gen["const"]("len",codegen._(_templateObject236||(_templateObject236=(0,_taggedTemplateLiteral2["default"])(["",".length"])),data));cxt.setParams({min:min,max:max});if(max===undefined&&min===0){util.checkStrictMode(it,"\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored");return;}if(max!==undefined&&min>max){util.checkStrictMode(it,"\"minContains\" > \"maxContains\" is always invalid");cxt.fail();return;}if(util.alwaysValidSchema(it,schema)){var cond=codegen._(_templateObject237||(_templateObject237=(0,_taggedTemplateLiteral2["default"])([""," >= ",""])),len,min);if(max!==undefined)cond=codegen._(_templateObject238||(_templateObject238=(0,_taggedTemplateLiteral2["default"])([""," && "," <= ",""])),cond,len,max);cxt.pass(cond);return;}it.items=true;var valid=gen.name("valid");if(max===undefined&&min===1){validateItems(valid,function(){return gen["if"](valid,function(){return gen["break"]();});});}else{gen["let"](valid,false);var schValid=gen.name("_valid");var count=gen["let"]("count",0);validateItems(schValid,function(){return gen["if"](schValid,function(){return checkLimits(count);});});}cxt.result(valid,function(){return cxt.reset();});function validateItems(_valid,block){gen.forRange("i",0,len,function(i){cxt.subschema({keyword:"contains",dataProp:i,dataPropType:util.Type.Num,compositeRule:true},_valid);block();});}function checkLimits(count){gen.code(codegen._(_templateObject239||(_templateObject239=(0,_taggedTemplateLiteral2["default"])(["","++"])),count));if(max===undefined){gen["if"](codegen._(_templateObject240||(_templateObject240=(0,_taggedTemplateLiteral2["default"])([""," >= ",""])),count,min),function(){return gen.assign(valid,true)["break"]();});}else{gen["if"](codegen._(_templateObject241||(_templateObject241=(0,_taggedTemplateLiteral2["default"])([""," > ",""])),count,max),function(){return gen.assign(valid,false)["break"]();});if(min===1)gen.assign(valid,true);else gen["if"](codegen._(_templateObject242||(_templateObject242=(0,_taggedTemplateLiteral2["default"])([""," >= ",""])),count,min),function(){return gen.assign(valid,true);});}}}};var _default$f=def$c;var contains=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$f},'__esModule',{value:true});var dependencies=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.validateSchemaDeps=exports.validatePropertyDeps=exports.error=void 0;exports.error={message:function message(_ref66){var _ref66$params=_ref66.params,property=_ref66$params.property,depsCount=_ref66$params.depsCount,deps=_ref66$params.deps;var property_ies=depsCount===1?"property":"properties";return codegen.str(_templateObject243||(_templateObject243=(0,_taggedTemplateLiteral2["default"])(["must have "," "," when property "," is present"])),property_ies,deps,property);},params:function params(_ref67){var _ref67$params=_ref67.params,property=_ref67$params.property,depsCount=_ref67$params.depsCount,deps=_ref67$params.deps,missingProperty=_ref67$params.missingProperty;return codegen._(_templateObject244||(_templateObject244=(0,_taggedTemplateLiteral2["default"])(["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"])),property,missingProperty,depsCount,deps);}// TODO change to reference
};var def={keyword:"dependencies",type:"object",schemaType:"object",error:exports.error,code:function code(cxt){var _splitDependencies=splitDependencies(cxt),_splitDependencies2=(0,_slicedToArray2["default"])(_splitDependencies,2),propDeps=_splitDependencies2[0],schDeps=_splitDependencies2[1];validatePropertyDeps(cxt,propDeps);validateSchemaDeps(cxt,schDeps);}};function splitDependencies(_ref68){var schema=_ref68.schema;var propertyDeps={};var schemaDeps={};for(var key in schema){if(key==="__proto__")continue;var deps=(0,_isArray["default"])(schema[key])?propertyDeps:schemaDeps;deps[key]=schema[key];}return[propertyDeps,schemaDeps];}function validatePropertyDeps(cxt){var propertyDeps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:cxt.schema;var gen=cxt.gen,data=cxt.data,it=cxt.it;if((0,_keys["default"])(propertyDeps).length===0)return;var missing=gen["let"]("missing");var _loop2=function _loop2(prop){var deps=propertyDeps[prop];if(deps.length===0)return"continue";var hasProperty=_code.propertyInData(gen,data,prop,it.opts.ownProperties);cxt.setParams({property:prop,depsCount:deps.length,deps:deps.join(", ")});if(it.allErrors){gen["if"](hasProperty,function(){var _iterator20=_createForOfIteratorHelper(deps),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var depProp=_step20.value;_code.checkReportMissingProp(cxt,depProp);}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}});}else{gen["if"](codegen._(_templateObject245||(_templateObject245=(0,_taggedTemplateLiteral2["default"])([""," && (",")"])),hasProperty,_code.checkMissingProp(cxt,deps,missing)));_code.reportMissingProp(cxt,missing);gen["else"]();}};for(var prop in propertyDeps){var _ret2=_loop2(prop);if(_ret2==="continue")continue;}}exports.validatePropertyDeps=validatePropertyDeps;function validateSchemaDeps(cxt){var schemaDeps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:cxt.schema;var gen=cxt.gen,data=cxt.data,keyword=cxt.keyword,it=cxt.it;var valid=gen.name("valid");var _loop3=function _loop3(prop){if(util.alwaysValidSchema(it,schemaDeps[prop]))return"continue";gen["if"](_code.propertyInData(gen,data,prop,it.opts.ownProperties),function(){var schCxt=cxt.subschema({keyword:keyword,schemaProp:prop},valid);cxt.mergeValidEvaluated(schCxt,valid);},function(){return gen["var"](valid,true);}// TODO var
);cxt.ok(valid);};for(var prop in schemaDeps){var _ret3=_loop3(prop);if(_ret3==="continue")continue;}}exports.validateSchemaDeps=validateSchemaDeps;exports["default"]=def;});var error$5={message:"property name must be valid",params:function params(_ref69){var _params=_ref69.params;return codegen._(_templateObject246||(_templateObject246=(0,_taggedTemplateLiteral2["default"])(["{propertyName: ","}"])),_params.propertyName);}};var def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$5,code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,data=cxt.data,it=cxt.it;if(util.alwaysValidSchema(it,schema))return;var valid=gen.name("valid");gen.forIn("key",data,function(key){cxt.setParams({propertyName:key});cxt.subschema({keyword:"propertyNames",data:key,dataTypes:["string"],propertyName:key,compositeRule:true},valid);gen["if"](codegen.not(valid),function(){cxt.error(true);if(!it.allErrors)gen["break"]();});});cxt.ok(valid);}};var _default$e=def$b;var propertyNames=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$e},'__esModule',{value:true});var error$4={message:"must NOT have additional properties",params:function params(_ref70){var _params2=_ref70.params;return codegen._(_templateObject247||(_templateObject247=(0,_taggedTemplateLiteral2["default"])(["{additionalProperty: ","}"])),_params2.additionalProperty);}};var def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:true,trackErrors:true,error:error$4,code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,parentSchema=cxt.parentSchema,data=cxt.data,errsCount=cxt.errsCount,it=cxt.it;/* istanbul ignore if */if(!errsCount)throw new Error("ajv implementation error");var allErrors=it.allErrors,opts=it.opts;it.props=true;if(opts.removeAdditional!=="all"&&util.alwaysValidSchema(it,schema))return;var props=_code.allSchemaProperties(parentSchema.properties);var patProps=_code.allSchemaProperties(parentSchema.patternProperties);checkAdditionalProperties();cxt.ok(codegen._(_templateObject248||(_templateObject248=(0,_taggedTemplateLiteral2["default"])([""," === ",""])),errsCount,names_1["default"].errors));function checkAdditionalProperties(){gen.forIn("key",data,function(key){if(!props.length&&!patProps.length)additionalPropertyCode(key);else gen["if"](isAdditional(key),function(){return additionalPropertyCode(key);});});}function isAdditional(key){var definedProp;if(props.length>8){// TODO maybe an option instead of hard-coded 8?
var propsSchema=util.schemaRefOrVal(it,parentSchema.properties,"properties");definedProp=_code.isOwnProperty(gen,propsSchema,key);}else if(props.length){definedProp=codegen.or.apply(codegen,(0,_toConsumableArray2["default"])((0,_map["default"])(props).call(props,function(p){return codegen._(_templateObject249||(_templateObject249=(0,_taggedTemplateLiteral2["default"])([""," === ",""])),key,p);})));}else{definedProp=codegen.nil;}if(patProps.length){var _context115;definedProp=codegen.or.apply(codegen,(0,_concat["default"])(_context115=[definedProp]).call(_context115,(0,_toConsumableArray2["default"])((0,_map["default"])(patProps).call(patProps,function(p){return codegen._(_templateObject250||(_templateObject250=(0,_taggedTemplateLiteral2["default"])(["",".test(",")"])),_code.usePattern(cxt,p),key);}))));}return codegen.not(definedProp);}function deleteAdditional(key){gen.code(codegen._(_templateObject251||(_templateObject251=(0,_taggedTemplateLiteral2["default"])(["delete ","[","]"])),data,key));}function additionalPropertyCode(key){if(opts.removeAdditional==="all"||opts.removeAdditional&&schema===false){deleteAdditional(key);return;}if(schema===false){cxt.setParams({additionalProperty:key});cxt.error();if(!allErrors)gen["break"]();return;}if((0,_typeof2["default"])(schema)=="object"&&!util.alwaysValidSchema(it,schema)){var _valid5=gen.name("valid");if(opts.removeAdditional==="failing"){applyAdditionalSchema(key,_valid5,false);gen["if"](codegen.not(_valid5),function(){cxt.reset();deleteAdditional(key);});}else{applyAdditionalSchema(key,_valid5);if(!allErrors)gen["if"](codegen.not(_valid5),function(){return gen["break"]();});}}}function applyAdditionalSchema(key,valid,errors){var subschema={keyword:"additionalProperties",dataProp:key,dataPropType:util.Type.Str};if(errors===false){(0,_assign["default"])(subschema,{compositeRule:true,createErrors:false,allErrors:false});}cxt.subschema(subschema,valid);}}};var _default$d=def$a;var additionalProperties=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$d},'__esModule',{value:true});var def$9={keyword:"properties",type:"object",schemaType:"object",code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,parentSchema=cxt.parentSchema,data=cxt.data,it=cxt.it;if(it.opts.removeAdditional==="all"&&parentSchema.additionalProperties===undefined){additionalProperties["default"].code(new validate$1.KeywordCxt(it,additionalProperties["default"],"additionalProperties"));}var allProps=_code.allSchemaProperties(schema);var _iterator21=_createForOfIteratorHelper(allProps),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var prop=_step21.value;it.definedProperties.add(prop);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}if(it.opts.unevaluated&&allProps.length&&it.props!==true){it.props=util.mergeEvaluated.props(gen,util.toHash(allProps),it.props);}var properties=(0,_filter["default"])(allProps).call(allProps,function(p){return!util.alwaysValidSchema(it,schema[p]);});if(properties.length===0)return;var valid=gen.name("valid");var _iterator22=_createForOfIteratorHelper(properties),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _prop=_step22.value;if(hasDefault(_prop)){applyPropertySchema(_prop);}else{gen["if"](_code.propertyInData(gen,data,_prop,it.opts.ownProperties));applyPropertySchema(_prop);if(!it.allErrors)gen["else"]()["var"](valid,true);gen.endIf();}cxt.it.definedProperties.add(_prop);cxt.ok(valid);}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}function hasDefault(prop){return it.opts.useDefaults&&!it.compositeRule&&schema[prop]["default"]!==undefined;}function applyPropertySchema(prop){cxt.subschema({keyword:"properties",schemaProp:prop,dataProp:prop},valid);}}};var _default$c=def$9;var properties$1=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$c},'__esModule',{value:true});var util_2=util;var def$8={keyword:"patternProperties",type:"object",schemaType:"object",code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,data=cxt.data,parentSchema=cxt.parentSchema,it=cxt.it;var opts=it.opts;var patterns=_code.schemaProperties(it,schema);// TODO mark properties matching patterns with always valid schemas as evaluated
if(patterns.length===0)return;var checkProperties=opts.strictSchema&&!opts.allowMatchingProperties&&parentSchema.properties;var valid=gen.name("valid");if(it.props!==true&&!(it.props instanceof codegen.Name)){it.props=util_2.evaluatedPropsToName(gen,it.props);}var props=it.props;validatePatternProperties();function validatePatternProperties(){var _iterator23=_createForOfIteratorHelper(patterns),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var pat=_step23.value;if(checkProperties)checkMatchingProperties(pat);if(it.allErrors){validateProperties(pat);}else{gen["var"](valid,true);// TODO var
validateProperties(pat);gen["if"](valid);}}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}}function checkMatchingProperties(pat){for(var prop in checkProperties){if(new RegExp(pat).test(prop)){var _context116;util.checkStrictMode(it,(0,_concat["default"])(_context116="property ".concat(prop," matches pattern ")).call(_context116,pat," (use allowMatchingProperties)"));}}}function validateProperties(pat){gen.forIn("key",data,function(key){gen["if"](codegen._(_templateObject252||(_templateObject252=(0,_taggedTemplateLiteral2["default"])(["",".test(",")"])),_code.usePattern(cxt,pat),key),function(){cxt.subschema({keyword:"patternProperties",schemaProp:pat,dataProp:key,dataPropType:util_2.Type.Str},valid);if(it.opts.unevaluated&&props!==true){gen.assign(codegen._(_templateObject253||(_templateObject253=(0,_taggedTemplateLiteral2["default"])(["","[","]"])),props,key),true);}else if(!it.allErrors){// can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)
// or if all properties were evaluated (props === true)
gen["if"](codegen.not(valid),function(){return gen["break"]();});}});});}}};var _default$b=def$8;var patternProperties=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$b},'__esModule',{value:true});var def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:true,code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,it=cxt.it;if(util.alwaysValidSchema(it,schema)){cxt.fail();return;}var valid=gen.name("valid");cxt.subschema({keyword:"not",compositeRule:true,createErrors:false,allErrors:false},valid);cxt.result(valid,function(){return cxt.error();},function(){return cxt.reset();});},error:{message:"must NOT be valid"}};var _default$a=def$7;var not=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$a},'__esModule',{value:true});var def$6={keyword:"anyOf",schemaType:"array",trackErrors:true,code:_code.validateUnion,error:{message:"must match a schema in anyOf"}};var _default$9=def$6;var anyOf=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$9},'__esModule',{value:true});var error$3={message:"must match exactly one schema in oneOf",params:function params(_ref71){var _params3=_ref71.params;return codegen._(_templateObject254||(_templateObject254=(0,_taggedTemplateLiteral2["default"])(["{passingSchemas: ","}"])),_params3.passing);}};var def$5={keyword:"oneOf",schemaType:"array",trackErrors:true,error:error$3,code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,parentSchema=cxt.parentSchema,it=cxt.it;/* istanbul ignore if */if(!(0,_isArray["default"])(schema))throw new Error("ajv implementation error");if(it.opts.discriminator&&parentSchema.discriminator)return;var schArr=schema;var valid=gen["let"]("valid",false);var passing=gen["let"]("passing",null);var schValid=gen.name("_valid");cxt.setParams({passing:passing});// TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas
gen.block(validateOneOf);cxt.result(valid,function(){return cxt.reset();},function(){return cxt.error(true);});function validateOneOf(){(0,_forEach["default"])(schArr).call(schArr,function(sch,i){var schCxt;if(util.alwaysValidSchema(it,sch)){gen["var"](schValid,true);}else{schCxt=cxt.subschema({keyword:"oneOf",schemaProp:i,compositeRule:true},schValid);}if(i>0){gen["if"](codegen._(_templateObject255||(_templateObject255=(0,_taggedTemplateLiteral2["default"])([""," && ",""])),schValid,valid)).assign(valid,false).assign(passing,codegen._(_templateObject256||(_templateObject256=(0,_taggedTemplateLiteral2["default"])(["[",", ","]"])),passing,i))["else"]();}gen["if"](schValid,function(){gen.assign(valid,true);gen.assign(passing,i);if(schCxt)cxt.mergeEvaluated(schCxt,codegen.Name);});});}}};var _default$8=def$5;var oneOf=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$8},'__esModule',{value:true});var def$4={keyword:"allOf",schemaType:"array",code:function code(cxt){var gen=cxt.gen,schema=cxt.schema,it=cxt.it;/* istanbul ignore if */if(!(0,_isArray["default"])(schema))throw new Error("ajv implementation error");var valid=gen.name("valid");(0,_forEach["default"])(schema).call(schema,function(sch,i){if(util.alwaysValidSchema(it,sch))return;var schCxt=cxt.subschema({keyword:"allOf",schemaProp:i},valid);cxt.ok(valid);cxt.mergeEvaluated(schCxt);});}};var _default$7=def$4;var allOf=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$7},'__esModule',{value:true});var error$2={message:function message(_ref72){var params=_ref72.params;return codegen.str(_templateObject257||(_templateObject257=(0,_taggedTemplateLiteral2["default"])(["must match \"","\" schema"])),params.ifClause);},params:function params(_ref73){var _params4=_ref73.params;return codegen._(_templateObject258||(_templateObject258=(0,_taggedTemplateLiteral2["default"])(["{failingKeyword: ","}"])),_params4.ifClause);}};var def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:true,error:error$2,code:function code(cxt){var gen=cxt.gen,parentSchema=cxt.parentSchema,it=cxt.it;if(parentSchema.then===undefined&&parentSchema["else"]===undefined){util.checkStrictMode(it,'"if" without "then" and "else" is ignored');}var hasThen=hasSchema(it,"then");var hasElse=hasSchema(it,"else");if(!hasThen&&!hasElse)return;var valid=gen["let"]("valid",true);var schValid=gen.name("_valid");validateIf();cxt.reset();if(hasThen&&hasElse){var ifClause=gen["let"]("ifClause");cxt.setParams({ifClause:ifClause});gen["if"](schValid,validateClause("then",ifClause),validateClause("else",ifClause));}else if(hasThen){gen["if"](schValid,validateClause("then"));}else{gen["if"](codegen.not(schValid),validateClause("else"));}cxt.pass(valid,function(){return cxt.error(true);});function validateIf(){var schCxt=cxt.subschema({keyword:"if",compositeRule:true,createErrors:false,allErrors:false},schValid);cxt.mergeEvaluated(schCxt);}function validateClause(keyword,ifClause){return function(){var schCxt=cxt.subschema({keyword:keyword},schValid);gen.assign(valid,schValid);cxt.mergeValidEvaluated(schCxt,valid);if(ifClause)gen.assign(ifClause,codegen._(_templateObject259||(_templateObject259=(0,_taggedTemplateLiteral2["default"])(["",""])),keyword));else cxt.setParams({ifClause:keyword});};}}};function hasSchema(it,keyword){var schema=it.schema[keyword];return schema!==undefined&&!util.alwaysValidSchema(it,schema);}var _default$6=def$3;var _if=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$6},'__esModule',{value:true});var def$2={keyword:["then","else"],schemaType:["object","boolean"],code:function code(_ref74){var keyword=_ref74.keyword,parentSchema=_ref74.parentSchema,it=_ref74.it;if(parentSchema["if"]===undefined)util.checkStrictMode(it,"\"".concat(keyword,"\" without \"if\" is ignored"));}};var _default$5=def$2;var thenElse=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$5},'__esModule',{value:true});function getApplicator(){var draft2020=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var applicator=[// any
not["default"],anyOf["default"],oneOf["default"],allOf["default"],_if["default"],thenElse["default"],// object
propertyNames["default"],additionalProperties["default"],dependencies["default"],properties$1["default"],patternProperties["default"]];// array
if(draft2020)applicator.push(prefixItems["default"],items2020["default"]);else applicator.push(additionalItems["default"],items["default"]);applicator.push(contains["default"]);return applicator;}var _default$4=getApplicator;var applicator=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$4},'__esModule',{value:true});var error$1={message:function message(_ref75){var schemaCode=_ref75.schemaCode;return codegen.str(_templateObject260||(_templateObject260=(0,_taggedTemplateLiteral2["default"])(["must match format \"","\""])),schemaCode);},params:function params(_ref76){var schemaCode=_ref76.schemaCode;return codegen._(_templateObject261||(_templateObject261=(0,_taggedTemplateLiteral2["default"])(["{format: ","}"])),schemaCode);}};var def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:true,error:error$1,code:function code(cxt,ruleType){var gen=cxt.gen,data=cxt.data,$data=cxt.$data,schema=cxt.schema,schemaCode=cxt.schemaCode,it=cxt.it;var opts=it.opts,errSchemaPath=it.errSchemaPath,schemaEnv=it.schemaEnv,self=it.self;if(!opts.validateFormats)return;if($data)validate$DataFormat();else validateFormat();function validate$DataFormat(){var fmts=gen.scopeValue("formats",{ref:self.formats,code:opts.code.formats});var fDef=gen["const"]("fDef",codegen._(_templateObject262||(_templateObject262=(0,_taggedTemplateLiteral2["default"])(["","[","]"])),fmts,schemaCode));var fType=gen["let"]("fType");var format=gen["let"]("format");// TODO simplify
gen["if"](codegen._(_templateObject263||(_templateObject263=(0,_taggedTemplateLiteral2["default"])(["typeof "," == \"object\" && !("," instanceof RegExp)"])),fDef,fDef),function(){return gen.assign(fType,codegen._(_templateObject264||(_templateObject264=(0,_taggedTemplateLiteral2["default"])(["",".type || \"string\""])),fDef)).assign(format,codegen._(_templateObject265||(_templateObject265=(0,_taggedTemplateLiteral2["default"])(["",".validate"])),fDef));},function(){return gen.assign(fType,codegen._(_templateObject266||(_templateObject266=(0,_taggedTemplateLiteral2["default"])(["\"string\""])))).assign(format,fDef);});cxt.fail$data(codegen.or(unknownFmt(),invalidFmt()));function unknownFmt(){if(opts.strictSchema===false)return codegen.nil;return codegen._(_templateObject267||(_templateObject267=(0,_taggedTemplateLiteral2["default"])([""," && !",""])),schemaCode,format);}function invalidFmt(){var callFormat=schemaEnv.$async?codegen._(_templateObject268||(_templateObject268=(0,_taggedTemplateLiteral2["default"])(["(",".async ? await ","(",") : ","(","))"])),fDef,format,data,format,data):codegen._(_templateObject269||(_templateObject269=(0,_taggedTemplateLiteral2["default"])(["","(",")"])),format,data);var validData=codegen._(_templateObject270||(_templateObject270=(0,_taggedTemplateLiteral2["default"])(["(typeof "," == \"function\" ? "," : ",".test(","))"])),format,callFormat,format,data);return codegen._(_templateObject271||(_templateObject271=(0,_taggedTemplateLiteral2["default"])([""," && "," !== true && "," === "," && !",""])),format,format,fType,ruleType,validData);}}function validateFormat(){var formatDef=self.formats[schema];if(!formatDef){unknownFormat();return;}if(formatDef===true)return;var _getFormat=getFormat(formatDef),_getFormat2=(0,_slicedToArray2["default"])(_getFormat,3),fmtType=_getFormat2[0],format=_getFormat2[1],fmtRef=_getFormat2[2];if(fmtType===ruleType)cxt.pass(validCondition());function unknownFormat(){if(opts.strictSchema===false){self.logger.warn(unknownMsg());return;}throw new Error(unknownMsg());function unknownMsg(){var _context117;return(0,_concat["default"])(_context117="unknown format \"".concat(schema,"\" ignored in schema at path \"")).call(_context117,errSchemaPath,"\"");}}function getFormat(fmtDef){var code=fmtDef instanceof RegExp?codegen.regexpCode(fmtDef):opts.code.formats?codegen._(_templateObject272||(_templateObject272=(0,_taggedTemplateLiteral2["default"])(["","",""])),opts.code.formats,codegen.getProperty(schema)):undefined;var fmt=gen.scopeValue("formats",{key:schema,ref:fmtDef,code:code});if((0,_typeof2["default"])(fmtDef)=="object"&&!(fmtDef instanceof RegExp)){return[fmtDef.type||"string",fmtDef.validate,codegen._(_templateObject273||(_templateObject273=(0,_taggedTemplateLiteral2["default"])(["",".validate"])),fmt)];}return["string",fmtDef,fmt];}function validCondition(){if((0,_typeof2["default"])(formatDef)=="object"&&!(formatDef instanceof RegExp)&&formatDef.async){if(!schemaEnv.$async)throw new Error("async format in sync schema");return codegen._(_templateObject274||(_templateObject274=(0,_taggedTemplateLiteral2["default"])(["await ","(",")"])),fmtRef,data);}return typeof format=="function"?codegen._(_templateObject275||(_templateObject275=(0,_taggedTemplateLiteral2["default"])(["","(",")"])),fmtRef,data):codegen._(_templateObject276||(_templateObject276=(0,_taggedTemplateLiteral2["default"])(["",".test(",")"])),fmtRef,data);}}}};var _default$3=def$1;var format$1=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$3},'__esModule',{value:true});var format=[format$1["default"]];var _default$2=format;var format_2=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$2},'__esModule',{value:true});var metadata=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.contentVocabulary=exports.metadataVocabulary=void 0;exports.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];exports.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];});var draft7Vocabularies=[core_1["default"],validation_1["default"],applicator["default"](),format_2["default"],metadata.metadataVocabulary,metadata.contentVocabulary];var _default$1=draft7Vocabularies;var draft7=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default$1},'__esModule',{value:true});var types=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.DiscrError=void 0;(function(DiscrError){DiscrError["Tag"]="tag";DiscrError["Mapping"]="mapping";})(exports.DiscrError||(exports.DiscrError={}));});var error={message:function message(_ref77){var _ref77$params=_ref77.params,discrError=_ref77$params.discrError,tagName=_ref77$params.tagName;return discrError===types.DiscrError.Tag?"tag \"".concat(tagName,"\" must be string"):"value of tag \"".concat(tagName,"\" must be in oneOf");},params:function params(_ref78){var _ref78$params=_ref78.params,discrError=_ref78$params.discrError,tag=_ref78$params.tag,tagName=_ref78$params.tagName;return codegen._(_templateObject277||(_templateObject277=(0,_taggedTemplateLiteral2["default"])(["{error: ",", tag: ",", tagValue: ","}"])),discrError,tagName,tag);}};var def={keyword:"discriminator",type:"object",schemaType:"object",error:error,code:function code(cxt){var gen=cxt.gen,data=cxt.data,schema=cxt.schema,parentSchema=cxt.parentSchema,it=cxt.it;var oneOf=parentSchema.oneOf;if(!it.opts.discriminator){throw new Error("discriminator: requires discriminator option");}var tagName=schema.propertyName;if(typeof tagName!="string")throw new Error("discriminator: requires propertyName");if(schema.mapping)throw new Error("discriminator: mapping is not supported");if(!oneOf)throw new Error("discriminator: requires oneOf keyword");var valid=gen["let"]("valid",false);var tag=gen["const"]("tag",codegen._(_templateObject278||(_templateObject278=(0,_taggedTemplateLiteral2["default"])(["","",""])),data,codegen.getProperty(tagName)));gen["if"](codegen._(_templateObject279||(_templateObject279=(0,_taggedTemplateLiteral2["default"])(["typeof "," == \"string\""])),tag),function(){return validateMapping();},function(){return cxt.error(false,{discrError:types.DiscrError.Tag,tag:tag,tagName:tagName});});cxt.ok(valid);function validateMapping(){var mapping=getMapping();gen["if"](false);for(var tagValue in mapping){gen.elseIf(codegen._(_templateObject280||(_templateObject280=(0,_taggedTemplateLiteral2["default"])([""," === ",""])),tag,tagValue));gen.assign(valid,applyTagSchema(mapping[tagValue]));}gen["else"]();cxt.error(false,{discrError:types.DiscrError.Mapping,tag:tag,tagName:tagName});gen.endIf();}function applyTagSchema(schemaProp){var _valid=gen.name("valid");var schCxt=cxt.subschema({keyword:"oneOf",schemaProp:schemaProp},_valid);cxt.mergeEvaluated(schCxt,codegen.Name);return _valid;}function getMapping(){var _a;var oneOfMapping={};var topRequired=hasRequired(parentSchema);var tagRequired=true;for(var i=0;i<oneOf.length;i++){var sch=oneOf[i];var propSch=(_a=sch.properties)===null||_a===void 0?void 0:_a[tagName];if((0,_typeof2["default"])(propSch)!="object"){throw new Error("discriminator: oneOf schemas must have \"properties/".concat(tagName,"\""));}tagRequired=tagRequired&&(topRequired||hasRequired(sch));addMappings(propSch,i);}if(!tagRequired)throw new Error("discriminator: \"".concat(tagName,"\" must be required"));return oneOfMapping;function hasRequired(_ref79){var required=_ref79.required;return(0,_isArray["default"])(required)&&(0,_includes["default"])(required).call(required,tagName);}function addMappings(sch,i){if(sch["const"]){addMapping(sch["const"],i);}else if(sch["enum"]){var _iterator24=_createForOfIteratorHelper(sch["enum"]),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var tagValue=_step24.value;addMapping(tagValue,i);}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}}else{throw new Error("discriminator: \"properties/".concat(tagName,"\" must have \"const\" or \"enum\""));}}function addMapping(tagValue,i){if(typeof tagValue!="string"||tagValue in oneOfMapping){throw new Error("discriminator: \"".concat(tagName,"\" values must be unique strings"));}oneOfMapping[tagValue]=i;}}}};var _default=def;var discriminator=/*#__PURE__*/(0,_defineProperty3["default"])({"default":_default},'__esModule',{value:true});var $schema="http://json-schema.org/draft-07/schema#";var $id="http://json-schema.org/draft-07/schema#";var title="Core schema meta-schema";var definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:true,"default":[]}};var type=["object","boolean"];var properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},"default":true,readOnly:{type:"boolean","default":false},examples:{type:"array",items:true},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":true},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean","default":false},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},"const":true,"enum":{type:"array",items:true,minItems:1,uniqueItems:true},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:true}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},"if":{$ref:"#"},then:{$ref:"#"},"else":{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}};var draft7MetaSchema={$schema:$schema,$id:$id,title:title,definitions:definitions,type:type,properties:properties,"default":true};var ajv$1=createCommonjsModule(function(module,exports){(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports.CodeGen=exports.Name=exports.nil=exports.stringify=exports.str=exports._=exports.KeywordCxt=void 0;var META_SUPPORT_DATA=["/properties"];var META_SCHEMA_ID="http://json-schema.org/draft-07/schema";var Ajv=/*#__PURE__*/function(_core$1$default){(0,_inherits2["default"])(Ajv,_core$1$default);var _super29=_createSuper(Ajv);function Ajv(){(0,_classCallCheck2["default"])(this,Ajv);return _super29.apply(this,arguments);}(0,_createClass2["default"])(Ajv,[{key:"_addVocabularies",value:function _addVocabularies(){var _context118,_this29=this;(0,_get2["default"])((0,_getPrototypeOf2["default"])(Ajv.prototype),"_addVocabularies",this).call(this);(0,_forEach["default"])(_context118=draft7["default"]).call(_context118,function(v){return _this29.addVocabulary(v);});if(this.opts.discriminator)this.addKeyword(discriminator["default"]);}},{key:"_addDefaultMetaSchema",value:function _addDefaultMetaSchema(){(0,_get2["default"])((0,_getPrototypeOf2["default"])(Ajv.prototype),"_addDefaultMetaSchema",this).call(this);if(!this.opts.meta)return;var metaSchema=this.opts.$data?this.$dataMetaSchema(draft7MetaSchema,META_SUPPORT_DATA):draft7MetaSchema;this.addMetaSchema(metaSchema,META_SCHEMA_ID,false);this.refs["http://json-schema.org/schema"]=META_SCHEMA_ID;}},{key:"defaultMeta",value:function defaultMeta(){return this.opts.defaultMeta=(0,_get2["default"])((0,_getPrototypeOf2["default"])(Ajv.prototype),"defaultMeta",this).call(this)||(this.getSchema(META_SCHEMA_ID)?META_SCHEMA_ID:undefined);}}]);return Ajv;}(core$1["default"]);module.exports=exports=Ajv;(0,_defineProperty3["default"])(exports,"__esModule",{value:true});exports["default"]=Ajv;(0,_defineProperty3["default"])(exports,"KeywordCxt",{enumerable:true,get:function get(){return validate$1.KeywordCxt;}});(0,_defineProperty3["default"])(exports,"_",{enumerable:true,get:function get(){return codegen._;}});(0,_defineProperty3["default"])(exports,"str",{enumerable:true,get:function get(){return codegen.str;}});(0,_defineProperty3["default"])(exports,"stringify",{enumerable:true,get:function get(){return codegen.stringify;}});(0,_defineProperty3["default"])(exports,"nil",{enumerable:true,get:function get(){return codegen.nil;}});(0,_defineProperty3["default"])(exports,"Name",{enumerable:true,get:function get(){return codegen.Name;}});(0,_defineProperty3["default"])(exports,"CodeGen",{enumerable:true,get:function get(){return codegen.CodeGen;}});});var Ajv=/*@__PURE__*/getDefaultExportFromCjs(ajv$1);var ajv=new Ajv({strictTuples:false});var validate=ajv.compile(bachJsonSchema);_exports.validate=validate;var valid=function valid(bach){if(!validate(bach)){var message='Invalid Bach.JSON source data';var pretty=function pretty(json){return(0,_stringify["default"])(json,null,2);};console.error(message,pretty(bach));console.error(pretty(validate.errors));throw TypeError("Invalid Bach.JSON source data");}return bach;};// Either "composes" raw bach data into bach.json or, when provided an object, validates its structure as bach.json.
// Given a string, automatically upgrades source to v3 (simple replacement of !play with play!).
// Main entry point for integrating with core bach ClojureScript library.
_exports.valid=valid;var compose=function compose(source){if(typeof source==='string'){var upgraded=source.replace(/!play/i,'play!');return bach_cjs.compose(upgraded);}if((0,_typeof2["default"])(source)==='object'){return valid(source);}throw TypeError("Unsupported Bach.JSON data type (".concat((0,_typeof2["default"])(source),"). Must be a bach.json object or raw bach string."));};_exports.compose=compose;function scaleify(value){var _context119;if(typeof value==='string'){var _value$split=value.split(' '),_value$split2=(0,_slicedToArray2["default"])(_value$split,2),tonic=_value$split2[0],_type2=_value$split2[1];// TODO: Potentially use type.toLowerCase instead, to guarantee smooth interopability
return teoria_1.scale(tonic,_type2.toLowerCase());}else if(value instanceof teoria_1.Scale){return value;}throw TypeError((0,_concat["default"])(_context119="Unknown scale type (".concat((0,_typeof2["default"])(value),"): ")).call(_context119,value));}function chordify(value){var _context120;if(typeof value==='string'){return teoria_1.chord(value);}else if(value instanceof teoria_1.Chord){return value;}throw TypeError((0,_concat["default"])(_context120="Unknown chord type (".concat((0,_typeof2["default"])(value),"): ")).call(_context120,value));}function scaleToString(scale){var _context121,_context122;return(0,_concat["default"])(_context121="".concat((0,_slice["default"])(_context122=scale.tonic.toString()).call(_context122,0,2)," ")).call(_context121,scale.name);}function notesInChord(value){var _context123;return(0,_map["default"])(_context123=chordify(value).notes()).call(_context123,function(note){return Note.valueOf(note);});}function notesInScale(value){var _context124;return(0,_map["default"])(_context124=scaleify(value).notes()).call(_context124,function(note){return Note.valueOf(note);});}function notesIn(kind,value){var notes=notesOf[kind];if(notes){return notes(value);}return[];}// TODO: Allow custom note resolvers to be registered globally or locally so people can easily define their own semantics
//  - Could call this `itemsOf` to be more generic and flexible
var notesOf={note:function note(value){return value;},chord:function chord(value){return notesInChord(value);},scale:function scale(value){return notesInScale(value);},penta:function penta(value){return notesInScale(value);}};// TODO: Note.valueOf
_exports.notesOf=notesOf;function notesIntersect(left,right){return(0,_filter["default"])(left).call(left,function(note){return(0,_includes["default"])(right).call(right,note);});}// TODO: Remove
var unitsOf=function unitsOf(source){return{step:source.units.beat.step,pulse:source.units.beat.pulse,bar:source.units.bar.step,ms:1/source.units.time.bar};};_exports.unitsOf=unitsOf;var timesOf=function timesOf(source){var _source$units$time=source.units.time,step=_source$units$time.step,pulse=_source$units$time.pulse,bar=_source$units$time.bar;return{ms:1,second:1000,step:step,pulse:pulse,bar:bar,'s':step,'p':pulse,'m':bar,'2n':bar/2,'4n':bar/4,'8n':bar/8,'16n':bar/16,'32n':bar/32,'64n':bar/64,'4up':bar-bar/4,'8up':bar-bar/8};};_exports.timesOf=timesOf;var Note=/*#__PURE__*/function(){function Note(){(0,_classCallCheck2["default"])(this,Note);}(0,_createClass2["default"])(Note,null,[{key:"parse",value:function parse(value){var _context125;if(typeof value==='string'){return teoria_1.note(value);}else if((0,_typeof2["default"])(value)==='object'||value instanceof teoria_1.Note){return value;}throw TypeError((0,_concat["default"])(_context125="Unknown note type (".concat((0,_typeof2["default"])(value),"): ")).call(_context125,value));}},{key:"all",value:function all(kind,note){try{return notesIn(kind,note);}catch(e){return[];}}},{key:"hash",value:function hash(note){return Note.parse(note).chroma();}},{key:"pitchOf",value:function pitchOf(note){return Note.valueOf(note);}// TODO: Consider using chroma instead
// TODO: Use this in nek, and anywhere else this same logic might be used
},{key:"valueOf",value:function valueOf(note){return Note.parse(note).scientific()// .toLowerCase()
// TODO: Centralize! Replace everywhere in bach-sheet, nek, etc.
.replace(/[0-9]+$/,'');}},{key:"valuesOf",value:function valuesOf(notes){return(0,_map["default"])(notes).call(notes,Note.valueOf);}},{key:"generalize",value:function generalize(note){return teoria_1.note(Note.valueOf(note));}},{key:"unite",value:function unite(){var notes=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return(0,_toConsumableArray2["default"])(new _set["default"](Note.valuesOf(notes)));}},{key:"equals",value:function equals(left,right){return Note.hash(left)==Note.hash(right);}}]);return Note;}();/**
 * Recursively calculates the greatest common denominator (GCD) between two values
 *
 * @param {Number} a
 * @param {Number} b
 * @returns {Number}
 */_exports.Note=Note;function gcd(a,b){if(b==0){return a;}return gcd(b,a%b);}/**
 * Modifies a value so that it is always between the provided min and max
 *
 * @param {Number} value
 * @param {Number} min
 * @param {Number} max
 * @returns {Number}
 */function _clamp(value){var min=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var max=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return Math.min(max,Math.max(min,value));}/**
 * Interpolation function returning the value between x and y at a specific ratio
 *
 * @param {Number} value
 * @param {Number} x
 * @param {Number} y
 * @returns {Number}
 */function lerp(ratio,x,y){return x*(1-ratio)+y*ratio;}/**
 * Interpolation function returning the ratio of a value clamped between x and y
 *
 * @param {Number} value
 * @param {Number} x
 * @param {Number} y
 * @returns {Number}
 */function invlerp(value,x,y){return _clamp((value-x)/(y-x));}/**
 * Determines the element found in an array at a given ratio
 *
 * @param {Float} ratio
 * @param {Array} all
 */function steps(ratio,all){ratio%=1;if(ratio<0)ratio+=1;return all[Math.floor(ratio*all.length)];}var Durations=/*#__PURE__*/function(){function Durations(source){(0,_classCallCheck2["default"])(this,Durations);this.source=compose(source);}(0,_createClass2["default"])(Durations,[{key:"steps",get:function get(){return this.source.steps;}},{key:"metrics",get:function get(){return this.source.metrics;}},{key:"min",get:function get(){return this.metrics.min;}},{key:"max",get:function get(){return this.metrics.max;}},{key:"total",get:function get(){return this.metrics.total;}},{key:"step",get:function get(){return this.units.step;}},{key:"pulse",get:function get(){return this.units.pulse;}},{key:"bar",get:function get(){return this.units.bar;}},{key:"units",get:function get(){// TODO: Remove, just return this.units
return unitsOf(this.source);}},{key:"times",get:function get(){return timesOf(this.source);}},{key:"interval",get:function get(){return this.times.step;}},{key:"cast",value:function cast(duration){var _ref80=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref80$is=_ref80.is,is=_ref80$is===void 0?'step':_ref80$is,_ref80$as=_ref80.as,as=_ref80$as===void 0?'pulse':_ref80$as;return duration/(this.times[as]/this.times[is]);}},{key:"metronize",value:function metronize(duration){var _ref81=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref81$is=_ref81.is,is=_ref81$is===void 0?'ms':_ref81$is,_ref81$as=_ref81.as,as=_ref81$as===void 0?'pulse':_ref81$as;var index=this.cast(duration,{is:is,as:as});var bar=this.cast(this.bar,{as:as});return Math.floor(index%bar);}},{key:"ratio",value:function ratio(duration){var is=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'step';return this.cast(duration,{is:is,as:'step'})/this.total;}},{key:"percentage",value:function percentage(duration){var is=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'step';return this.ratio(duration,is)*100;}},{key:"clamp",value:function clamp(duration){var _ref82=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref82$is=_ref82.is,is=_ref82$is===void 0?'step':_ref82$is,_ref82$min=_ref82.min,min=_ref82$min===void 0?0:_ref82$min,max=_ref82.max;var step=this.cast(duration,{is:is,as:'step'});var head=this.cast(min||0,{is:is,as:'step'});var tail=this.cast(max||this.total,{is:is,as:'step'});return _clamp(step,head,tail);}},{key:"cyclic",value:function cyclic(duration){var _ref83=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref83$is=_ref83.is,is=_ref83$is===void 0?'step':_ref83$is,_ref83$min=_ref83.min,min=_ref83$min===void 0?0:_ref83$min,max=_ref83.max;this.cast(duration,{is:is,as:'step'});var head=this.cast(min||0,{is:is,as:'step'});var tail=this.cast(max||this.total,{is:is,as:'step'});var key=duration>=head?duration:duration+tail;return key%tail;}},{key:"interpolate",value:function interpolate(ratio){var _ref84=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref84$is=_ref84.is,is=_ref84$is===void 0?'step':_ref84$is,_ref84$min=_ref84.min,min=_ref84$min===void 0?0:_ref84$min,max=_ref84.max;var head=this.cast(min||0,{is:is,as:'step'});var tail=this.cast(max||this.total,{is:is,as:'step'});return lerp(ratio,head,tail);}},{key:"at",value:function at(duration){var is=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'step';var step=Math.floor(this.cast(duration,{is:is,as:'step'}));var index=this.cyclic(step);var state=this.steps[index];var _ref85=state||[],_ref86=(0,_slicedToArray2["default"])(_ref85,3),context=_ref86[0],play=_ref86[1],stop=_ref86[2];return{beat:context[0],elems:(0,_slice["default"])(context).call(context,1),play:play,stop:stop,index:index};}// TODO: Either replace or improve via inspiration with this:
// @see: https://tonejs.github.io/docs/r13/Time#quantize
},{key:"rhythmic",value:function rhythmic(duration){var _context126,_this30=this;var _ref87=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref87$is=_ref87.is,is=_ref87$is===void 0?'ms':_ref87$is,_ref87$units=_ref87.units,units=_ref87$units===void 0?['8n','4n']:_ref87$units,_ref87$calc=_ref87.calc,calc=_ref87$calc===void 0?'floor':_ref87$calc,_ref87$size=_ref87.size,size=_ref87$size===void 0?'min':_ref87$size;var durations=(0,_sort["default"])(_context126=(0,_map["default"])(units).call(units,function(unit){var value=_this30.cast(duration,{is:is,as:unit});var result=Math[calc](value);return _this30.cast(result,{is:unit,as:is});})).call(_context126,function(a,b){return Math.abs(duration-a)-Math.abs(duration-b);});return Math[size].apply(Math,(0,_toConsumableArray2["default"])(durations));}}]);return Durations;}();/**
 * Represents a single and unique playable element.
 * Uniqueness and equality are determined by `id`.
 */_exports.Durations=Durations;var Element=/*#__PURE__*/function(){function Element(data){(0,_classCallCheck2["default"])(this,Element);this.data=data;}(0,_createClass2["default"])(Element,[{key:"id",get:function get(){var _context127;return(0,_concat["default"])(_context127="".concat(this.data.kind,".")).call(_context127,this.data.id);}},{key:"uid",get:function get(){return Element.uid(this.id);}},{key:"value",get:function get(){return this.data.value;}},{key:"props",get:function get(){return this.data.props||[];}},{key:"kind",get:function get(){return this.data.kind;//.toLowerCase()
}},{key:"duration",get:function get(){return this.data.duration;}},{key:"notes",get:function get(){return Note.all(this.kind,this.value);}// TODO: Hoist out to Music, leaky abstraction
},{key:"musical",get:function get(){return(0,_includes["default"])(MUSICAL_ELEMENTS).call(MUSICAL_ELEMENTS,this.kind);}}],[{key:"uid",value:function uid(id){return id.split('.').pop();}}]);return Element;}();_exports.Element=Element;var Elements=/*#__PURE__*/function(){function Elements(){var _ref88=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},source=_ref88.source,store=_ref88.store,cast=_ref88.cast;(0,_classCallCheck2["default"])(this,Elements);this.source=compose(source);this.cast=cast||function(_){return _;};this.data=store||Elements.cast(this.source.elements,cast);}(0,_createClass2["default"])(Elements,[{key:"all",get:function get(){var _context128,_this31=this;return(0,_flatMap["default"])(_context128=this.kinds).call(_context128,function(kind){return(0,_every["default"])(_this31).call(_this31,kind);});}},{key:"kinds",get:function get(){return(0,_keys["default"])(this.data);}},{key:"values",get:function get(){var _context129;return(0,_map["default"])(_context129=this.all).call(_context129,function(elem){return elem.value;});}},{key:"ids",get:function get(){var _context130;return(0,_map["default"])(_context130=this.all).call(_context130,function(elem){return elem.id;});}},{key:"get",value:function get(id){var parts=typeof id==='string'?id.split('.'):[];if(parts.length===2){var _parts=(0,_slicedToArray2["default"])(parts,2),kind=_parts[0],uid=_parts[1];var elem=this.data[kind][uid];return elem?_objectSpread(_objectSpread({},elem),{},{id:uid,kind:kind}):null;}throw TypeError('Element id must be a string in the format of "kind.hash"');}},{key:"every",value:function every(kind){var _context131;return(0,_map["default"])(_context131=(0,_values["default"])(this.data[kind])).call(_context131,function(elem){return new Element(elem);});}},{key:"one",value:function one(kind){var _context132;return(0,_every["default"])(_context132=this).call(_context132,kind)[0];}},{key:"resolve",value:function resolve(elem){var _this32=this;// FIXME: Use json-schema validator here instead to support cross-context typing (instanceof doesn't work from workers etc.)
// if (elem instanceof Element) return elem
if((0,_typeof2["default"])(elem)==='object')return elem;if(typeof elem==='string')return this.get(elem);if((0,_isArray["default"])(elem))return(0,_map["default"])(elem).call(elem,function(el){return _this32.get(el);});if(elem==null)return null;// if (typeof elem === 'object') return new Element(this.cast(elem))
throw TypeError('Failed to resolve element due to unsupported data type');}// TODO: Rename to `insert`
},{key:"register",value:function register(_ref89){var _context133;var kind=_ref89.kind,value=_ref89.value,props=_ref89.props;if(!kind||typeof kind!=='string')throw TypeError('kind must be a non-empty string');if(value==null)throw TypeError('value must be defined and non-null');var elem=bach_cjs.elementize(kind,(0,_concat["default"])(_context133=[value]).call(_context133,(0,_toConsumableArray2["default"])(props)));var uid=Element.uid(elem.id);var record=this.cast(_objectSpread(_objectSpread({},elem),{},{id:uid,kind:kind}));this.data[kind]=this.data[kind]||{};this.data[kind][uid]=record;this.source.elements=this.data;return new Element(record);}}],[{key:"cast",value:function cast(elements){var _context134;var as=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(_){return _;};if(!elements)return null;// TODO: Validate element shape with JSON Schema
return(0,_reduce["default"])(_context134=(0,_entries["default"])(elements)).call(_context134,function(acc,_ref90){var _context135;var _ref91=(0,_slicedToArray2["default"])(_ref90,2),kind=_ref91[0],ids=_ref91[1];var elems=(0,_reduce["default"])(_context135=(0,_entries["default"])(ids)).call(_context135,function(acc,_ref92){var _ref93=(0,_slicedToArray2["default"])(_ref92,2),id=_ref93[0],elem=_ref93[1];return _objectSpread(_objectSpread({},acc),{},(0,_defineProperty2["default"])({},id,as(_objectSpread({id:id,kind:kind},elem))));},{});return _objectSpread(_objectSpread({},acc),{},(0,_defineProperty2["default"])({},kind,elems));},{});}}]);return Elements;}();// TODO: Hoist out to Music, leaky abstraction
_exports.Elements=Elements;var MUSICAL_ELEMENTS=['note','chord','scale',' penta'];// triad
/**
 * Represents a single beat in a track.
 *
 * Beats are represented as a tuple and may contain multiple elements
 *
 * duration -> items -> elements
 */_exports.MUSICAL_ELEMENTS=MUSICAL_ELEMENTS;var Beat=/*#__PURE__*/function(){function Beat(data,store){(0,_classCallCheck2["default"])(this,Beat);this.data=data;this.store=store;}(0,_createClass2["default"])(Beat,[{key:"id",get:function get(){return this.data.id;}},{key:"index",get:function get(){return this.data.index;}},{key:"duration",get:function get(){return this.data.duration;}},{key:"items",get:function get(){var _context136,_this33=this;return(0,_map["default"])(_context136=this.data.items).call(_context136,function(item){var _context137;return _objectSpread(_objectSpread({},item),{},{elements:(0,_map["default"])(_context137=item.elements).call(_context137,function(elem){return _this33.store.resolve(elem);})});});}},{key:"elements",get:function get(){var _context138,_this34=this;return(0,_flatMap["default"])(_context138=this.data.items).call(_context138,function(_ref94){var elements=_ref94.elements;return(0,_map["default"])(elements).call(elements,function(elem){return _this34.store.resolve(elem);});});}},{key:"kinds",get:function get(){return this.all(function(_ref95){var kind=_ref95.kind;return kind;});}},{key:"values",get:function get(){return this.all(function(_ref96){var value=_ref96.value;return value;});}},{key:"notes",get:function get(){return this.notesOf(this.elements);}// Provides map of elements in a beat grouped by kind.
// FIXME: Doesn't support multiple elements of the same kind
},{key:"parts",get:function get(){var _context139;return(0,_reduce["default"])(_context139=this.elements).call(_context139,function(parts,elem){return _objectSpread(_objectSpread({},parts),{},(0,_defineProperty2["default"])({},elem.kind,elem));},{});}},{key:"musical",get:function get(){var _context140;return(0,_every["default"])(_context140=this.elements).call(_context140,function(elem){return elem.musical;});}},{key:"all",value:function all(){var _context141;var cast=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(_){return _;};return(0,_toConsumableArray2["default"])(new _set["default"]((0,_map["default"])(_context141=this.elements).call(_context141,cast)));}},{key:"find",value:function find(kind){var _context142;return(0,_find["default"])(_context142=this.elements).call(_context142,function(elem){return kind===elem.kind;});}},{key:"filter",value:function filter(kind){var _context143;return(0,_filter["default"])(_context143=this.elements).call(_context143,function(elem){return kind===elem.kind;});}},{key:"last",value:function last(kind){var _context144,_context145;return(0,_reverse["default"])(_context144=(0,_filter["default"])(_context145=this).call(_context145,kind)).call(_context144)[0];}},{key:"either",value:function either(kinds){var _this35=this;return(0,_reduce["default"])(kinds).call(kinds,function(acc,kind){return acc.length?acc:(0,_filter["default"])(_this35).call(_this35,kind);},[]);}},{key:"notesOf",value:function notesOf(elements){return Note.unite((0,_flatMap["default"])(elements).call(elements,function(_ref97){var notes=_ref97.notes;return notes;}));}}],[{key:"from",value:function from(beats,store){if((0,_isArray["default"])(beats)){return(0,_map["default"])(beats).call(beats,function(beat){return new Beat(beat,store);});}return[new Beat(beats,store)];}}]);return Beat;}();var Music=/*#__PURE__*/function(){function Music(source){(0,_classCallCheck2["default"])(this,Music);this.source=source;this.data=compose(source);this.store=this.parses?new Elements({source:this.data,cast:function cast(elem){return _objectSpread(_objectSpread({},elem),{},{notes:Note.all(elem.kind,elem.value)});}}):null;}(0,_createClass2["default"])(Music,[{key:"headers",get:function get(){return this.data.headers;}},{key:"metrics",get:function get(){return this.data.metrics;}},{key:"units",get:function get(){return this.data.units;}},{key:"meter",get:function get(){return this.headers.meter;}},{key:"tempo",get:function get(){return this.headers.tempo;}},{key:"elements",get:function get(){return this.store.all;}},{key:"beats",get:function get(){return Beat.from(this.data.beats,this.store);}},{key:"durations",get:function get(){return new Durations(this.data);}},{key:"notes",get:function get(){var _context146;return Note.unite((0,_flatMap["default"])(_context146=this.beats).call(_context146,function(beat){var _context147;return(0,_flatMap["default"])(_context147=beat.elements).call(_context147,function(_ref98){var notes=_ref98.notes;return notes;});}));}},{key:"musical",get:function get(){var _context148;return(0,_every["default"])(_context148=this.beats).call(_context148,function(beat){return beat.musical;});}// get playable () {
//   return this.elements.every(({ notes }) => !!notes.length)
// }
},{key:"step",get:function get(){return this.units.beat.step;}},{key:"interval",get:function get(){return this.units.time.step;}},{key:"parses",get:function get(){return!this.data.fail;}},{key:"at",value:function at(duration){var is=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'step';var cursor=this.durations.at(duration,is);return{beat:this.beats[cursor.beat],elems:this.store.resolve(cursor.elems),play:this.store.resolve(cursor.play),stop:this.store.resolve(cursor.stop)};}},{key:"beat",value:function beat(index){var cursor=this.durations.cyclic(index,{max:this.beats.length});return this.beats[cursor];}},{key:"adjust",value:function adjust(tempo){}}]);return Music;}();_exports.Music=Music;});
//# sourceMappingURL=bach-js.umd.js.map
